[{"content":"ã¯ã˜ã‚ã« GitHub Actionsã§ãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®šã—ã€ç°¡å˜ãªLinuã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nGitHubã«ã¯ã€å‡¦ç†ã‚’è‡ªå‹•å®Ÿè¡Œã™ã‚‹GitHub Actionsã¨ã„ã†æ©Ÿèƒ½ãŒã‚ã‚‹ã€‚\nå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ãã£ã‹ã‘ï¼ˆãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã¯ã€pushã‚„pull requestãªã©ã®ãƒªãƒã‚¸ãƒˆãƒªæ“ä½œã‚„ã€cronã«ã‚ˆã‚‹å®šæœŸå®Ÿè¡Œã‚’æŒ‡å®šå¯èƒ½ã§ã‚ã‚‹ã€‚ã¾ãŸã€æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\nGitHub Actionsã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ†ã‚¹ãƒˆã‚„ãƒ“ãƒ«ãƒ‰ä½œæ¥­ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã®è¨˜äº‹ã§ã¯GitHub Actionsã®å…¥é–€ã¨ã—ã¦ã€Linuxã®echoã‚³ãƒãƒ³ãƒ‰ï¼ˆæ•°å€¤ã‚„æ–‡å­—ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ï¼‰ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\nä¸»ãªæ‰‹é †ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n GitHub Actionsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ å®Ÿè¡Œçµæœã®ç¢ºèª GitHub Actionsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è§£èª¬  ã¾ãŸã€GitHubã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆFreeãƒ—ãƒ©ãƒ³ã§å¯ï¼‰ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\nãªãŠã€GitHub Actionsã¯ä»¥ä¸‹ã®ç¯„å›²ã¾ã§ç„¡æ–™ã§åˆ©ç”¨ã§ãã‚‹ï¼ˆ2021/6/19ç¾åœ¨ï¼‰ã€‚\n ãƒ‘ãƒ–ãƒªãƒƒã‚¯ãƒªãƒã‚¸ãƒˆãƒªï¼šç„¡æ–™ ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªï¼š  Freeãƒ—ãƒ©ãƒ³ï¼š2000åˆ†/æœˆã¾ã§ç„¡æ–™ Proãƒ—ãƒ©ãƒ³ï¼š3000åˆ†/æœˆã¾ã§ç„¡æ–™    æœ€æ–°ã®æƒ…å ±ã‚„è©³ç´°ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nActions GitHub\nGitHub Actionsè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ GitHub Actionsã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã€YAMLå½¢å¼ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒã‚¸ãƒˆãƒªå†…ã«ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nãªãŠã€YAMLã¯æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã®ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚ã‚‹ã€‚\nã“ã“ã§ã¯ã€GitHubã§ãƒªãƒã‚¸ãƒˆãƒªã‚’æ–°è¦ä½œæˆã™ã‚‹ï¼ˆãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã€ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã®ã©ã¡ã‚‰ã§ã‚‚å¯ï¼‰ã€‚\nã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«.github/workflows/ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã™ã‚‹ã€‚\nã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸‹ã«ã€ä»¥ä¸‹ã®sample.ymlã‚’ä½œæˆã™ã‚‹ï¼ˆç•°ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã§ã‚‚ã‚ˆã„ã€‚ã¾ãŸã€æ‹¡å¼µå­ã¯.yml, .yamlã®ã©ã¡ã‚‰ã§ã‚‚å¯ï¼‰ã€‚\nã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€Linuxç’°å¢ƒã§echoã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€Hello World!ã¨è¡¨ç¤ºã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  name:Action Sampleon:push:branches:- masterworkflow_dispatch:jobs:print-hello-world:runs-on:ubuntu-lateststeps:- name:execute echo commandrun:echo \u0026#34;Hello World!\u0026#34;  ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’GitHubã«pushã™ã‚‹ï¼ˆä¸Šè¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯pushãŒãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€ã“ã®pushã§å®Ÿè¡Œã•ã‚Œã‚‹ï¼‰ã€‚\n1 2 3  $ git add .github/workflows/sample.yml $ git commit -m \u0026#34;Add GitHub Actions sample.\u0026#34; $ git push   GitHub Actionsã®å®Ÿè¡Œçµæœ YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’pushã—ãŸå¾Œã«GitHubã®Actionsã‚¿ãƒ–ã‚’é–‹ãã¨ã€sample.ymlã«å®šç¾©ã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œã«æˆåŠŸã—ãŸã“ã¨ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ï¼ˆç”»åƒã®å³å´ï¼‰ã€‚\nã“ã®å®Ÿè¡Œçµæœã®è©³ç´°ã‚’ç¢ºèªã™ã‚‹ã¨ã€echo \u0026quot;Hello World!\u0026quot;ã‚’å®Ÿè¡Œã§ããŸã“ã¨ãŒç¢ºèªã§ãã‚‹ã€‚\nå®Ÿè¡Œçµæœã®ç¢ºèª ä»¥ä¸‹ã§ã¯ã€ä½œæˆã—ãŸYAMLãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\nãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®åå‰ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®åå‰ã‚’nameã§æŒ‡å®šã§ãã‚‹ï¼ˆçœç•¥å¯ï¼‰ã€‚\n1  name:Action Sample  ãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®æ¡ä»¶ã‚’onä»¥ä¸‹ã«æŒ‡å®šã™ã‚‹ã€‚\n1 2 3 4 5  on:push:branches:- masterworkflow_dispatch:  è¤‡æ•°ã®æ¡ä»¶ã‚’æŒ‡å®šå¯èƒ½ã§ã‚ã‚Šã€ã“ã“ã§ã¯æ¬¡ã®2æ¡ä»¶ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\n masterãƒ–ãƒ©ãƒ³ãƒã¸ã®push GitHubä¸Šã§æ‰‹å‹•å®Ÿè¡Œ (workflow_dispatch)  ãªãŠã€workflow_dispatchã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€GitHubä¸Šã«\u0026quot;Run workflow\u0026quot;ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã€ã“ã‚Œã‚’æŠ¼ã™ã¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚\nãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦ã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚„ç‰¹å®šã®ã‚¿ã‚°ã€cronãªã©ã‚‚æŒ‡å®šå¯èƒ½ã§ã‚ã‚‹ã€‚\nã‚¸ãƒ§ãƒ– å®Ÿè¡Œã™ã‚‹å‡¦ç†å†…å®¹ã‚„å®Ÿè¡Œç’°å¢ƒã‚’jobsä»¥é™ã«è¨˜è¿°ã™ã‚‹ã€‚\n1 2 3 4 5 6  jobs:print-hello-world:runs-on:ubuntu-lateststeps:- name:execute echo commandrun:echo \u0026#34;Hello World!\u0026#34;  print-hello-worldã¯ã‚¸ãƒ§ãƒ–åã§ã‚ã‚‹ã€‚ã‚¸ãƒ§ãƒ–åã«ã¯è‹±æ•°å­—ã¨-, _ã®ã¿ä½¿ç”¨å¯ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã¯ä½¿ç”¨ä¸å¯ï¼‰ã€‚\nãªãŠã€1ã¤ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã«è¤‡æ•°ã®ã‚¸ãƒ§ãƒ–ã‚’æŒ‡å®šå¯èƒ½ã§ã‚ã‚‹ã€‚åŸå‰‡ã¨ã—ã¦å„ã‚¸ãƒ§ãƒ–ã¯ä¸¦åˆ—ã«å®Ÿè¡Œã•ã‚Œã‚‹ãŒã€ä¾å­˜é–¢ä¿‚ï¼ˆä»–ã®ã‚¸ãƒ§ãƒ–ã®çµ‚äº†ã‚’å¾…ã¤ï¼‰ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\nruns-onã¯ã‚¸ãƒ§ãƒ–ãŒå®Ÿè¡Œã•ã‚Œã‚‹ãƒã‚·ãƒ³ã®ç¨®é¡ã§ã‚ã‚‹ã€‚\n2021/6/19ç¾åœ¨ã€ubuntu-latestã¯Ubuntu 20.04ã¨ãªã‚‹ã€‚ä»–ã«Windows Serverã‚„macOSãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã€‚\nè©³ç´°ã¯ä»¥ä¸‹ãƒšãƒ¼ã‚¸ã®jobs.\u0026lt;job_id\u0026gt;.runs-onã®é …ã‚’å‚ç…§ã€‚\nGitHub Actionsã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ§‹æ–‡ - GitHub Docs\nstepsä»¥é™ã«å®Ÿè¡Œã™ã‚‹å‡¦ç†ï¼ˆã‚¿ã‚¹ã‚¯ï¼‰ã‚’è¨˜è¿°ã™ã‚‹ã€‚nameã¯ã‚¿ã‚¹ã‚¯ã®åå‰ï¼ˆçœç•¥å¯ï¼‰ã§ã‚ã‚‹ã€‚\nã‚¿ã‚¹ã‚¯ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç¶šã‘ã‚‹ã€‚\n1 2 3 4 5  steps:- name:execute echo commandrun:echo \u0026#34;Hello World!\u0026#34;- name:execute echo command 2run:echo \u0026#34;Hello GitHub!\u0026#34;  ã‚‚ã—ãã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚‚è‰¯ã„ï¼ˆrunã®å¾Œã®|ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ï¼‰ã€‚\n1 2 3 4 5  steps:- name:execute echo commandsrun:|echo \u0026#34;Hello World!\u0026#34; echo \u0026#34;Hello GitHub!\u0026#34;  ã¾ãŸã€åˆ¥é€”å®šç¾©ã•ã‚ŒãŸå‡¦ç†ã‚’usesã‚’ä½¿ã£ã¦å®Ÿè¡Œã§ãã‚‹ã€‚\nä»¥ä¸‹ã¯Gitã®checkoutã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ä¾‹ã§ã‚ã‚‹ã€‚\n1 2  steps:- uses:actions/checkout@v2  ã“ã‚Œã¯ã€actions/checkout@v2ã¯ä»¥ä¸‹ã®ãƒªãƒã‚¸ãƒˆãƒªã®Version 2ï¼ˆã‚¿ã‚°ã§æŒ‡å®šã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã“ã¨ï¼‰ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚\nactions_checkout - GitHub\nã¾ã¨ã‚ GitHub Actionsã®ç°¡å˜ãªä¾‹ã¨ã—ã¦ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€Linuxã®echoã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œã‚’ç¢ºèªã—ãŸã€‚ã¾ãŸã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦è§£èª¬ã—ãŸã€‚\nä»Šå¾Œã€GitHub Actionsã§Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è¨˜äº‹ã«ã™ã‚‹äºˆå®šã€‚\nå‚è€ƒ  Github Actionsã®ä½¿ã„æ–¹ãƒ¡ãƒ¢ - Qiita GitHub Actionsã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ§‹æ–‡ - GitHub Docs  ","description":"GitHub Actionsã§ãƒˆãƒªã‚¬ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®šã—ã€ç°¡å˜ãªLinuã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":0,"section":"posts","tags":["Git"],"title":"GitHub Actionsã«å…¥é–€ã™ã‚‹","uri":"https://helve-blog.com/posts/git/introduction-to-github-actions/"},{"content":"ã¯ã˜ã‚ã« Hugoã®Zzoãƒ†ãƒ¼ãƒã§è¨˜äº‹ã®æ—¥ä»˜ãƒ»è‘—è€…ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹çµµæ–‡å­—ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã€ãƒ¢ãƒ€ãƒ³ãªãƒ‡ã‚¶ã‚¤ãƒ³ã®SVGç”»åƒã«å¤‰æ›´ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\nè¨˜äº‹ã®ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´„ã¨ã€å„è¨˜äº‹ã®ãƒ˜ãƒƒãƒ€éƒ¨åˆ†ã®è¡¨ç¤ºã‚’ãã‚Œãã‚Œå¤‰æ›´ã™ã‚‹ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Windows 10 Home version 21H1 Hugo version 0.79.0/extended Zzo version May 23, 2021  å¤‰æ›´å‰å¾Œã®ã‚¤ãƒ¡ãƒ¼ã‚¸ è¨˜äº‹ã®è¦ç´„ è¨˜äº‹ã®è¦ç´„ã§ã¯ã€è¨˜äº‹ã®ä½œæˆæ—¥ãƒ»æ›´æ–°æ—¥ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’SVGç”»åƒã«å¤‰æ›´ã™ã‚‹ã€‚ã¾ãŸã€min readã‚¢ã‚¤ã‚³ãƒ³ã¨è‘—è€…ã‚’éè¡¨ç¤ºã«ã—ã¦ã€ã‚¿ã‚°ã‚’è¡¨ç¤ºã™ã‚‹ã€‚\nå¤‰æ›´å‰\nâ†“\nå¤‰æ›´å¾Œ\nè¨˜äº‹ã®ãƒ˜ãƒƒãƒ€ å„è¨˜äº‹ã®ãƒ˜ãƒƒãƒ€ã‚‚åŒæ§˜ã«ã€è¨˜äº‹ã®ä½œæˆæ—¥ãƒ»æ›´æ–°æ—¥ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’SVGç”»åƒã«å¤‰æ›´ã™ã‚‹ã€‚ã¾ãŸã€min readã®ã‚¢ã‚¤ã‚³ãƒ³ã‚„è‘—è€…ã‚’éè¡¨ç¤ºã«ã™ã‚‹ã€‚\nå¤‰æ›´å‰\nâ†“\nå¤‰æ›´å¾Œ\nçµµæ–‡å­—ã‚’SVGç”»åƒã«å¤‰æ›´ã™ã‚‹æ–¹æ³• æ‰‹é †ã‚’å¤§ããåˆ†ã‘ã‚‹ã¨ä»¥ä¸‹ã®é€šã‚Šã€‚\n SVGç”»åƒã®ä½œæˆ HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¿®æ­£ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´  SVGç”»åƒã®ä½œæˆ è¡¨ç¤ºã™ã‚‹SVGå½¢å¼ã®ç”»åƒã‚’ä½œæˆã™ã‚‹ã€‚ã¾ãšã€ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã™ã‚‹ã€‚\nhugo_root/layouts/partials/svgs/\nã“ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ä»¥ä¸‹ã®3ã¤ã®SVGç”»åƒã‚’é…ç½®ã™ã‚‹ã€‚SVGã¯ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã®ç”»åƒãªã®ã§ã€ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãªã©ã§ä½œæˆã§ãã‚‹ã€‚\n1 2 3 4  \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;{{ .width }}\u0026#34; height=\u0026#34;{{ .height }}\u0026#34; viewBox=\u0026#34;0 0 40 40\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M 20 5 L 20 20 L 30 30\u0026#34; stroke=\u0026#34;black\u0026#34; fill=\u0026#34;transparent\u0026#34; stroke-width=\u0026#34;2\u0026#34;/\u0026gt; \u0026lt;circle cx=\u0026#34;20\u0026#34; cy=\u0026#34;20\u0026#34; r=\u0026#34;18\u0026#34; stroke=\u0026#34;black\u0026#34; fill=\u0026#34;transparent\u0026#34; stroke-width=\u0026#34;2\u0026#34;/\u0026gt; \u0026lt;/svg\u0026gt;   1 2 3 4  \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;{{ .width }}\u0026#34; height=\u0026#34;{{ .height }}\u0026#34; viewBox=\u0026#34;0 0 40 40\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M 18 8 L 18 20 L 27 27\u0026#34; stroke=\u0026#34;black\u0026#34; fill=\u0026#34;transparent\u0026#34; stroke-width=\u0026#34;2\u0026#34;/\u0026gt; \u0026lt;path d=\u0026#34;M 5 2 L 17 13 L 5 13 Z\u0026#34; fill=\u0026#34;black\u0026#34;/\u0026gt;\u0026lt;path d=\u0026#34;M 10 9 A 17 17 0 1 1 6 29\u0026#34; stroke=\u0026#34;black\u0026#34; fill=\u0026#34;transparent\u0026#34; stroke-width=\u0026#34;3\u0026#34;/\u0026gt; \u0026lt;/svg\u0026gt;   1 2 3 4  \u0026lt;svg xmlns=\u0026#34;http://www.w3.org/2000/svg\u0026#34; width=\u0026#34;{{ .width }}\u0026#34; height=\u0026#34;{{ .height }}\u0026#34; viewBox=\u0026#34;0 0 40 40\u0026#34;\u0026gt; \u0026lt;path d=\u0026#34;M 5 5 L 18 5 L 38 25 L 25 38 L 5 18 Z\u0026#34; stroke=\u0026#34;black\u0026#34; fill=\u0026#34;transparent\u0026#34; stroke-width=\u0026#34;2\u0026#34;/\u0026gt; \u0026lt;circle cx=\u0026#34;13\u0026#34; cy=\u0026#34;13\u0026#34; r=\u0026#34;3\u0026#34; fill=\u0026#34;black\u0026#34;/\u0026gt; \u0026lt;/svg\u0026gt;   ã“ã‚Œã‚‰ã®SVGç”»åƒã¯HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚\nãªãŠã€{{ .width }}ã‚„{{ .height }}ã¯HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰å‘¼ã³å‡ºã™ã¨ãã«ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦æ¸¡ã™ã€‚\nHTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚³ãƒ”ãƒ¼ Zzoãƒ†ãƒ¼ãƒã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ã€‚\nhugo_root/themes/zzo/layouts/partials/\nã“ã®ãƒ•ã‚©ãƒ«ãƒ€å†…ã®3ã¤ã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\n body/infos.html body/tags.html summary/classic.html  ã‚’ãƒ–ãƒ­ã‚°ç‹¬è‡ªã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç½®ããƒ•ã‚©ãƒ«ãƒ€\nhugo_root/layouts/partials/\nã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ï¼ˆpartialsãƒ•ã‚©ãƒ«ãƒ€ã¨ã®ç›¸å¯¾ä½ç½®ã‚’ä¿ã¤ã‚ˆã†ã«ã™ã‚‹ï¼‰ã€‚\nãŸã ã—ã€è¦ç´„ã®è¡¨ç¤ºå½¢å¼ãŒclassicä»¥å¤–ã®å ´åˆã€å¯¾å¿œã™ã‚‹HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚\nè¦ç´„ã®å½¢å¼ã¯hugo_root/config/_default/params.tomlã®summaryShapeã§ç¢ºèªã§ãã‚‹ã€‚\nã‚¿ã‚°ã‚’è¡¨ç¤ºã™ã‚‹HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ›´ ã‚³ãƒ”ãƒ¼ã—ãŸbody/tags.htmlå†…ã®\n1  {{ ($.Site.Params.tagIcon | safeHTML) | default \u0026#34;ğŸ·ï¸\u0026#34; }}   ã‚’æ¬¡ã®ã‚ˆã†ã«ç½®ãæ›ãˆã¦ã€ã‚¿ã‚°ã®SVGç”»åƒã‚’èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã™ã‚‹ã€‚\n1  {{ partial \u0026#34;svgs/tag.svg\u0026#34; (dict \u0026#34;width\u0026#34; 16 \u0026#34;height\u0026#34; 16) }}   è¦ç´„ã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ›´ æ¬¡ã«ã€è¨˜äº‹ä¸€è¦§ã«è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´„ã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¿®æ­£ã™ã‚‹ã€‚\nã‚³ãƒ”ãƒ¼ã—ãŸclassic.htmlã®æ—¥ä»˜ã‚„è‘—è€…åã‚’è¡¨ç¤ºã™ã‚‹éƒ¨åˆ†ã¯æ¬¡ã®é€šã‚Šã€‚\n1 2 3 4 5 6 7 8  \u0026lt;time title=\u0026#34;{{ i18n \u0026#34;tooltip-written\u0026#34; }}\u0026#34; dir=\u0026#34;{{ if ne ($.Param \u0026#34;languagedir\u0026#34;) \u0026#34;rtl\u0026#34; }}ltr{{ else }}rtl{{ end }}\u0026#34;\u0026gt;{{ ($.Site.Params.writtenTimeIcon | safeHTML) | default \u0026#34;ğŸ“…\u0026#34; }}\u0026amp;nbsp;{{ .Date.Format (i18n \u0026#34;summary-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ if ne (.Date.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) (.Lastmod.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) }} \u0026lt;time title=\u0026#34;{{ i18n \u0026#34;tooltip-modified\u0026#34; }}\u0026#34; dir=\u0026#34;{{ if ne ($.Param \u0026#34;languagedir\u0026#34;) \u0026#34;rtl\u0026#34; }}ltr{{ else }}rtl{{ end }}\u0026#34;\u0026gt; \u0026amp;middot; {{ ($.Site.Params.modifiedTimeIcon | safeHTML) | default \u0026#34;ğŸ“\u0026#34; }}\u0026amp;nbsp;{{ .Lastmod.Format (i18n \u0026#34;summary-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ end }} \u0026lt;span title=\u0026#34;{{ i18n \u0026#34;tooltip-reading-time\u0026#34; }}\u0026#34; dir=\u0026#34;{{ if ne ($.Param \u0026#34;languagedir\u0026#34;) \u0026#34;rtl\u0026#34; }}ltr{{ else }}rtl{{ end }}\u0026#34;\u0026gt; \u0026amp;middot; {{ ($.Site.Params.readingTimeIcon | safeHTML) | default \u0026#34;â˜•\u0026#34; }}\u0026amp;nbsp;{{ .ReadingTime }}\u0026amp;nbsp;{{ i18n \u0026#34;reading-time\u0026#34; }} \u0026lt;/span\u0026gt; {{ with $.Param \u0026#34;author\u0026#34; }} \u0026amp;middot; \u0026lt;span title=\u0026#34;{{ i18n \u0026#34;single-writtenBy\u0026#34; }}\u0026#34; dir=\u0026#34;{{ if ne ($.Param \u0026#34;languagedir\u0026#34;) \u0026#34;rtl\u0026#34; }}ltr{{ else }}rtl{{ end }}\u0026#34;\u0026gt;{{ if $.Param \u0026#34;authorEmoji\u0026#34; }}{{ $.Param \u0026#34;authorEmoji\u0026#34; }}{{ else }}{{ ($.Site.Params.authorIcon | safeHTML) | default \u0026#34;âœï¸\u0026#34; }}{{ end }}\u0026amp;nbsp;{{ . }}\u0026lt;/span\u0026gt; {{ end }}   ã“ã‚Œã‚’ä»¥ä¸‹ã«ç½®ãæ›ãˆã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026lt;time title=\u0026#34;{{ i18n \u0026#34;tooltip-written\u0026#34; }}\u0026#34; dir=\u0026#34;{{ if ne ($.Param \u0026#34;languagedir\u0026#34;) \u0026#34;rtl\u0026#34; }}ltr{{ else }}rtl{{ end }}\u0026#34;\u0026gt; {{ partial \u0026#34;svgs/clock.svg\u0026#34; (dict \u0026#34;width\u0026#34; 12 \u0026#34;height\u0026#34; 12) }}\u0026amp;nbsp;{{ .Date.Format (i18n \u0026#34;summary-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ if ne (.Date.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) (.Lastmod.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) }} \u0026lt;time title=\u0026#34;{{ i18n \u0026#34;tooltip-modified\u0026#34; }}\u0026#34; dir=\u0026#34;{{ if ne ($.Param \u0026#34;languagedir\u0026#34;) \u0026#34;rtl\u0026#34; }}ltr{{ else }}rtl{{ end }}\u0026#34;\u0026gt; \u0026amp;middot; {{ partial \u0026#34;svgs/update.svg\u0026#34; (dict \u0026#34;width\u0026#34; 12 \u0026#34;height\u0026#34; 12) }}\u0026amp;nbsp;{{ .Lastmod.Format (i18n \u0026#34;summary-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ end }} \u0026lt;span title=\u0026#34;{{ i18n \u0026#34;tooltip-reading-time\u0026#34; }}\u0026#34; dir=\u0026#34;{{ if ne ($.Param \u0026#34;languagedir\u0026#34;) \u0026#34;rtl\u0026#34; }}ltr{{ else }}rtl{{ end }}\u0026#34;\u0026gt; \u0026amp;middot; {{ ($.Site.Params.readingTimeIcon | safeHTML) | default \u0026#34;\u0026#34; }}\u0026amp;nbsp;{{ .ReadingTime }}\u0026amp;nbsp;{{ i18n \u0026#34;reading-time\u0026#34; }} \u0026lt;/span\u0026gt; {{ partial \u0026#34;body/tags\u0026#34; . }}   çµµæ–‡å­—ã®æ›¿ã‚ã‚Šã«SVGç”»åƒã‚’èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚ã¾ãŸã€å…ˆã»ã©å¤‰æ›´ã—ãŸbody/tags.htmlã‚’æœ€å¾Œã«è¡¨ç¤ºã™ã‚‹ã€‚\nè¨˜äº‹ãƒ˜ãƒƒãƒ€ã®HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ›´ å„è¨˜äº‹ã®ãƒ˜ãƒƒãƒ€éƒ¨åˆ†ã«å¯¾å¿œã™ã‚‹HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä¿®æ­£ã™ã‚‹ã€‚\nã‚³ãƒ”ãƒ¼ã—ãŸbody/infos.htmlã®æ—¥ä»˜ã‚„è‘—è€…åã‚’è¡¨ç¤ºã™ã‚‹éƒ¨åˆ†ã¯æ¬¡ã®é€šã‚Šã€‚\n1 2 3 4 5 6 7 8  \u0026lt;time class=\u0026#34;single__info\u0026#34; title=\u0026#34;{{ i18n \u0026#34;tooltip-written\u0026#34; }}\u0026#34;\u0026gt;{{ ($.Site.Params.writtenTimeIcon | safeHTML) | default \u0026#34;ğŸ“…\u0026#34; }}\u0026amp;nbsp;{{ .Date.Format (i18n \u0026#34;single-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ if ne (.Date.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) (.Lastmod.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) }} \u0026amp;nbsp;\u0026amp;middot;\u0026amp;nbsp; \u0026lt;time class=\u0026#34;single__info\u0026#34; title=\u0026#34;{{ i18n \u0026#34;tooltip-modified\u0026#34; }}\u0026#34;\u0026gt; {{ ($.Site.Params.modifiedTimeIcon | safeHTML) | default \u0026#34;ğŸ“\u0026#34; }}\u0026amp;nbsp;{{ .Lastmod.Format (i18n \u0026#34;single-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ end }} \u0026amp;nbsp;\u0026amp;middot;\u0026amp;nbsp; \u0026lt;span class=\u0026#34;single__info\u0026#34; title=\u0026#34;{{ i18n \u0026#34;tooltip-reading-time\u0026#34; }}\u0026#34;\u0026gt; {{ ($.Site.Params.readingTimeIcon | safeHTML) | default \u0026#34;â˜•\u0026#34; }}\u0026amp;nbsp;{{ .ReadingTime }}\u0026amp;nbsp;{{ i18n \u0026#34;reading-time\u0026#34; }} \u0026lt;/span\u0026gt; {{ with .Params.Author }} \u0026amp;nbsp;\u0026amp;middot;\u0026amp;nbsp; \u0026lt;span class=\u0026#34;single__info\u0026#34; title=\u0026#34;{{ i18n \u0026#34;single-writtenBy\u0026#34; }}\u0026#34;\u0026gt;{{if $params.AuthorEmoji }}{{ $params.AuthorEmoji }}{{ else }}{{ ($.Site.Params.authorIcon | safeHTML) | default \u0026#34;âœï¸\u0026#34; }}{{ end }}\u0026amp;nbsp;{{ . }}\u0026lt;/span\u0026gt; {{ end }}   ã“ã‚Œã‚’ä»¥ä¸‹ã«ç½®ãæ›ãˆã‚‹ã€‚\n1 2 3 4 5  \u0026lt;time class=\u0026#34;single__info\u0026#34; title=\u0026#34;{{ i18n \u0026#34;tooltip-written\u0026#34; }}\u0026#34;\u0026gt;{{ partial \u0026#34;svgs/clock.svg\u0026#34; (dict \u0026#34;width\u0026#34; 12 \u0026#34;height\u0026#34; 12) }}{{ .Date.Format (i18n \u0026#34;single-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ if ne (.Date.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) (.Lastmod.Format (i18n \u0026#34;summary-dateformat\u0026#34;)) }} \u0026amp;nbsp;\u0026amp;middot;\u0026amp;nbsp; \u0026lt;time class=\u0026#34;single__info\u0026#34; title=\u0026#34;{{ i18n \u0026#34;tooltip-modified\u0026#34; }}\u0026#34;\u0026gt; {{ partial \u0026#34;svgs/update.svg\u0026#34; (dict \u0026#34;width\u0026#34; 12 \u0026#34;height\u0026#34; 12) }}\u0026amp;nbsp;{{ .Lastmod.Format (i18n \u0026#34;single-dateformat\u0026#34;) }} \u0026lt;/time\u0026gt; {{ end }} \u0026amp;nbsp;\u0026amp;middot;\u0026amp;nbsp; \u0026lt;span class=\u0026#34;single__info\u0026#34; title=\u0026#34;{{ i18n \u0026#34;tooltip-reading-time\u0026#34; }}\u0026#34;\u0026gt; {{ ($.Site.Params.readingTimeIcon | safeHTML) | default \u0026#34;\u0026#34; }}\u0026amp;nbsp;{{ .ReadingTime }}\u0026amp;nbsp;{{ i18n \u0026#34;reading-time\u0026#34; }} \u0026lt;/span\u0026gt;   è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ æœ€å¾Œã«ã€Zzoã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è¨˜äº‹ã‚’èª­ã‚€æ™‚é–“ (min read) ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’å‰Šé™¤ã™ã‚‹ã€‚\nhugo_root/config/_default/params.toml\nå†…ã®readingTimeIconã‚’ç©ºç™½ã¨ã™ã‚‹ã€‚\n1  readingTimeIcon = \u0026#34;\u0026#34;   ã¾ã¨ã‚ Hugoã®Zzoãƒ†ãƒ¼ãƒã§è¨˜äº‹ã®æ—¥ä»˜ãƒ»è‘—è€…ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹çµµæ–‡å­—ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã€ãƒ¢ãƒ€ãƒ³ãªãƒ‡ã‚¶ã‚¤ãƒ³ã®SVGç”»åƒã«å¤‰æ›´ã—ãŸã€‚\n","description":"Hugoã®Zzoãƒ†ãƒ¼ãƒã§è¨˜äº‹ã®æ—¥ä»˜ãƒ»è‘—è€…ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹çµµæ–‡å­—ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã€ãƒ¢ãƒ€ãƒ³ãªãƒ‡ã‚¶ã‚¤ãƒ³ã®SVGç”»åƒã«å¤‰æ›´ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚","id":1,"section":"posts","tags":["Hugo"],"title":"Hugoã®Zzoãƒ†ãƒ¼ãƒã§è¨˜äº‹ã®æ—¥ä»˜ãƒ»è‘—è€…ã®çµµæ–‡å­—ã‚’SVGã«å¤‰æ›´ã™ã‚‹","uri":"https://helve-blog.com/posts/web-technology/hugo-zzo-article-meta-data/"},{"content":"ã¯ã˜ã‚ã« Hugoã®Zzoãƒ†ãƒ¼ãƒã§Twitter Cardã«è¡¨ç¤ºã™ã‚‹ç”»åƒã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nè¨­å®šã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒ„ã‚¤ãƒ¼ãƒˆã®ã‚ˆã†ã«ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\næœ€åˆã«è¨­å®šæ–¹æ³•ã‚’è¿°ã¹ã€ãã®å¾Œã«ç”Ÿæˆã•ã‚Œã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢ã—ã¦è¿°ã¹ã‚‹ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Windows 10 Home version 21H1 Hugo version 0.79.0/extended Zzo version May 23, 2021  æ¤œè¨¼æ—¥ã¯2021/06/06ã§ã‚ã‚‹ã€‚\nã¾ãŸã€ã“ã®è¨˜äº‹ã§ã¯ä»¥ä¸‹ã‚’å®Ÿæ–½ã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n Hugoã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Zzoãƒ†ãƒ¼ãƒã‚’å°å…¥ã—ã¦ã€è¨˜äº‹ã®Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ  è¨­å®šæ–¹æ³• å®Ÿæ–½äº‹é …ã¯ä»¥ä¸‹ã®2ã¤ã§ã‚ã‚‹ã€‚\n ç”»åƒã‚’ç”¨æ„ã™ã‚‹ è¨˜äº‹ã®ãƒ¡ã‚¿æƒ…å ± (Front Matter) ã«ç”»åƒã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹  ç”»åƒã®ç”¨æ„ Twitter Cardã«è¡¨ç¤ºã—ãŸã„ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã€‚ä½¿ç”¨å¯èƒ½ãªç”»åƒã®æ¡ä»¶ã¯æ¬¡ã®é€šã‚Šã€‚\n æœ€å°ç”»ç´ æ•°ï¼šå¹…300Ã—é«˜ã•157 æœ€å¤§ç”»ç´ æ•°ï¼šå¹…4096Ã—é«˜ã•4096 ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼š5MBä»¥ä¸‹ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼šJPG, PNG, WEBP, GIF  ã“ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€hugo-root/static/imagesã®ä¸‹ã«ç½®ãã€‚\nimagesãƒ•ã‚©ãƒ«ãƒ€ã®ä¸‹ã«ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œã‚Šã€ãã®ä¸‹ã«ç½®ã„ã¦ã‚‚ã‚ˆã„ã€‚\nFront Matterã®è¨­å®š æ¬¡ã«ã€Twitter Cardã‚’è¨­å®šã—ãŸã„è¨˜äº‹ã®Front Matterã‚’ç·¨é›†ã™ã‚‹ã€‚\nFront Matterã«meta_imageã¨ã„ã†ã‚­ãƒ¼ã‚’è¨­å®šã—ã€ãã®å€¤ã«ã€ã•ãã»ã©ç”¨æ„ã—ãŸç”»åƒã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚\nä¾‹ï¼šmeta_image: images/ogp/conda.png\nFront Matterå…¨ä½“ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  ---title:Condaã®ä»®æƒ³ç’°å¢ƒã‚’YAMLãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹description:Condaã§æ§‹ç¯‰ã—ãŸä»®æƒ³ç’°å¢ƒã‚’YAMLå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€å†æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚draft:falsedate:2021-05-30T09:30:00+09:00author:HelveenableTocContent:truecategories:- Pythontags:- Conda- Pythonimage:images/icon/conda0.pngmeta_image:images/ogp/conda.png---ï¼ˆã“ã®ä¸‹ã«è¨˜äº‹ã®MarkdownãŒç¶šãï¼‰  ã“ã®è¨˜äº‹ã‚’æŠ•ç¨¿ã—ã€ãã®ãƒªãƒ³ã‚¯ã‚’ãƒ„ã‚¤ãƒ¼ãƒˆã«è²¼ã‚Šä»˜ã‘ã‚‹ã¨ã€Twitter CardãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nã¡ãªã¿ã«ã€image: images/icon/conda0.pngã¯ãƒ–ãƒ­ã‚°å†…éƒ¨ã®è¨˜äº‹ä¸€è¦§ã§è¡¨ç¤ºã•ã‚Œã‚‹ç”»åƒã§ã‚ã‚‹ï¼ˆã€ŒCondaã®ä»®æƒ³ç’°å¢ƒã‚’ï½ã€ã®å·¦å´ï¼‰ã€‚\nç”Ÿæˆã•ã‚Œã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®è§£èª¬ å‰è¿°ã®ã‚ˆã†ã«meta_imageã«ç”»åƒã‚’è¨­å®šã™ã‚‹ã¨ã€è¨˜äº‹ã®HTMLã§ã¯æ¬¡ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6  \u0026lt;meta property=\u0026#34;og:image\u0026#34; content=\u0026#34;https://helve-blog.com/images/ogp/conda.png\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;og:image:url\u0026#34; content=\u0026#34;https://helve-blog.com/images/ogp/conda.png\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;twitter:card\u0026#34; content=\u0026#34;summary_large_image\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;twitter:app:name:iphone\u0026#34; content=\u0026#34;Helve Tech Blog\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;twitter:title\u0026#34; content=\u0026#34;Condaã®ä»®æƒ³ç’°å¢ƒã‚’YAMLãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;twitter:description\u0026#34; content=\u0026#34;Condaã§æ§‹ç¯‰ã—ãŸä»®æƒ³ç’°å¢ƒã‚’YAMLå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€å†æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\u0026#34;\u0026gt;   ã“ã®1è¡Œç›®ã®og:imageã§æŒ‡å®šã—ãŸç”»åƒãŒã€Twitter Cardã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nï¼ˆãªãŠã€og:imageã¯Twitetrã«é™ã‚‰ãšã€Facebookãªã©ä»–ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ãªã©ã§ã‚‚åˆ©ç”¨ã•ã‚Œã‚‹ã€‚ï¼‰\nã¾ãŸã€3è¡Œç›®ã®summary_large_imageã¯ã€å¤§ããªã‚µã‚¤ã‚ºã§Twitter Cardã«ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\nå°ã•ã„ã‚µã‚¤ã‚ºã«ã™ã‚‹ã«ã¯ã€summaryã«å¤‰æ›´ã™ã‚‹ã€‚\nãªãŠã€ã“ã®HTMLã¯ã€ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã€‚\nhugo-root/themes/zzo/layouts/partials/head/meta.html\nä¸€éƒ¨ã‚’æŠœç²‹ã—ã¦ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  {{ if .Params.meta_image }} {{ with .Params.meta_image }} \u0026lt;meta property=\u0026#34;og:image\u0026#34; content=\u0026#34;{{ . | absURL }}\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;og:image:url\u0026#34; content=\u0026#34;{{ . | absURL }}\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;twitter:card\u0026#34; content=\u0026#34;summary_large_image\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;twitter:app:name:iphone\u0026#34; content=\u0026#34;{{ $.Site.Title }}\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;twitter:title\u0026#34; content=\u0026#34;{{ $.Param \u0026#34;title\u0026#34; }}\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;twitter:description\u0026#34; content=\u0026#34;{{ $.Param \u0026#34;description\u0026#34; }}\u0026#34;\u0026gt; {{ end }} {{ else if .Params.image }} {{ with .Params.image }} \u0026lt;meta property=\u0026#34;og:image\u0026#34; content=\u0026#34;{{ . | absURL }}\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;og:image:url\u0026#34; content=\u0026#34;{{ . | absURL }}\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;twitter:card\u0026#34; content=\u0026#34;summary_large_image\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;twitter:app:name:iphone\u0026#34; content=\u0026#34;{{ $.Site.Title }}\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;twitter:title\u0026#34; content=\u0026#34;{{ $.Param \u0026#34;title\u0026#34; }}\u0026#34;\u0026gt; \u0026lt;meta property=\u0026#34;twitter:description\u0026#34; content=\u0026#34;{{ $.Param \u0026#34;description\u0026#34; }}\u0026#34;\u0026gt; {{ end }}   ã™ãªã‚ã¡ã€Front Matterã§meta_imageãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€ãã®ç”»åƒã‚’og:imageã¨ã—ã¦åˆ©ç”¨ã™ã‚‹ã€‚\nãªãŠã€summary_large_imageã§ã¯ãªãã€å°ã•ã„ã‚µã‚¤ã‚ºã®summaryã¨ã—ãŸã„å ´åˆã€ä¸Šè¨˜ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®æ–‡å­—åˆ—ã‚’ç½®ãæ›ãˆã‚Œã°ã‚ˆã„ã€‚\nï¼ˆã“ã®ã¨ãã€Zzoã®å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ä¿®æ­£ã™ã‚‹ã®ã§ã¯ãªãã€meta.htmlã‚’hugo-root/layouts/partials/head/ã«ã‚³ãƒ”ãƒ¼ã—ã¦ã€ãã®ã‚³ãƒ”ãƒ¼ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã—ã¦ã‚‚è‰¯ã„ã€‚ãã†ã™ã‚‹ã¨ã€Hugoã¯hugo-root/layouts/ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å„ªå…ˆã—ã¦ä½¿ç”¨ã™ã‚‹ï¼‰\nå‚è€ƒ Summary with large image _ Docs _ Twitter Developer Platform\n","description":"Hugoã®Zzoãƒ†ãƒ¼ãƒã§Twitter Cardã«è¡¨ç¤ºã™ã‚‹ç”»åƒã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸ","id":2,"section":"posts","tags":["Hugo"],"title":"Hugoã®Zzoãƒ†ãƒ¼ãƒã§Twitter Cardç”¨ã®ç”»åƒã‚’è¨­å®šã™ã‚‹","uri":"https://helve-blog.com/posts/web-technology/hugo-zzo-twitter-card/"},{"content":"ã¯ã˜ã‚ã« Condaã§æ§‹ç¯‰ã—ãŸä»®æƒ³ç’°å¢ƒã‚’YAMLå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€å†æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\nConda (Anaconda/Miniconda) ã§ã¯ã€ä»®æƒ³ç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«Pythonã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã§ãã‚‹ã€‚\nä»®æƒ³ç’°å¢ƒã®è¨­å®šã¯YAMLå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ãã€Gitãªã©ã‚’çµŒç”±ã—ã¦ä»–ã®ãƒ¦ãƒ¼ã‚¶ã¨å…±æœ‰ãŒå¯èƒ½ã§ã‚ã‚‹ã€‚\nã“ã®è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹ã‚’è§£èª¬ã™ã‚‹ã€‚\n ä»®æƒ³ç’°å¢ƒã®æ§‹ç¯‰ YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ› YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›† YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ãŸä»®æƒ³ç’°å¢ƒã®å¾©å…ƒ  å®Ÿè¡Œã—ãŸç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Windows 10 Ver. 2004 Anaconda 2020.11 conda 4.10.0  ä»®æƒ³ç’°å¢ƒã®æ§‹ç¯‰ å§‹ã‚ã«ã€ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦ä»®æƒ³ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è¿°ã¹ã‚‹ã€‚\nAnaconda Powershell Promptï¼ˆAnaconda Promptã‚‚å¯ï¼‰ã‚’èµ·å‹•ã—ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ä»®æƒ³ç’°å¢ƒã‚’æ–°è¦ä½œæˆã™ã‚‹ã€‚\n(base) \u0026gt; conda create -n \u0026lt;ENVIRONMENT NAME\u0026gt;\r\u0026lt;ENVIRONMENT NAME\u0026gt;ã¯ä»®æƒ³ç’°å¢ƒã®åå‰ã§ã‚ã‚‹ã€‚ä»¥ä¸‹ã§ã¯myenvã¨ã™ã‚‹ã€‚\nã¾ãŸã€-nã¯--nameã¨ã—ã¦ã‚‚ã‚ˆã„ã€‚\nãªãŠã€ä½œæˆã—ãŸä»®æƒ³ç’°å¢ƒã«ã¯Pythonã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„ã€‚\nä»®æƒ³ç’°å¢ƒã«å…¥ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ãŒã€conda createã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã€‚\næœ«å°¾ã«pythonã‚’ä»˜ã‘ã‚‹ã¨ã€condaãŒå¯¾å¿œã—ã¦ã„ã‚‹æœ€æ–°ç‰ˆã®PythonãŒä»®æƒ³ç’°å¢ƒã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚\n(base) \u0026gt; conda create -n \u0026lt;ENVIRONMENT NAME\u0026gt; python\rä»¥ä¸‹ã®ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãŸã‚Šã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\n(base) \u0026gt; conda create -n \u0026lt;ENVIRONMENT NAME\u0026gt; python=3.7 numpy=1.19.2 pandas\rä»®æƒ³ç’°å¢ƒã®ä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n(base) \u0026gt; conda env list\r# conda environments:\r#\rbase * C:\\Users\\XXXXX\\Anaconda3\rmyenv C:\\Users\\XXXXX\\Anaconda3\\envs\\myenv\rä½œæˆã—ãŸä»®æƒ³ç’°å¢ƒã«å…¥ã‚‹ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆã™ã‚‹ï¼‰ã«ã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nä»®æƒ³ç’°å¢ƒã«å…¥ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ\u0026gt;ã®å‰ãŒbaseã‹ã‚‰ä»®æƒ³ç’°å¢ƒã®åå‰ã«å¤‰åŒ–ã™ã‚‹ã€‚\n(base) \u0026gt; conda activate myenv\r(myenv) \u0026gt;\rä»®æƒ³ç’°å¢ƒä¸­ã§ã¯ã€conda installã‚„pip installã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚\nä»®æƒ³ç’°å¢ƒã‹ã‚‰å‡ºã‚‹ã«ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n(myenv) \u0026gt; conda deactivate\r(base) \u0026gt;\rä»®æƒ³ç’°å¢ƒã‚’å‰Šé™¤ã™ã‚‹ã«ã¯conda removeã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n(base) \u0026gt; conda remove myenv\rYAMLãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ› ä»®æƒ³ç’°å¢ƒã®è¨­å®šã‚’YAMLãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã™ã‚‹ã«ã¯ã€ä»®æƒ³ç’°å¢ƒã«å…¥ã£ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n(myenv) \u0026gt; conda env export \u0026gt; myenv.yml\rmyenv.ymlã¯ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åã§ã‚ã‚Šã€è‡ªç”±ã«åå‰ã‚’ä»˜ã‘ã¦ã‚ˆã„ï¼ˆæ‹¡å¼µå­ã‚‚ymlã¨ã™ã‚‹å¿…è¦ã¯ãªã„ï¼‰ã€‚\n2ã¤ã‚ã®\u0026gt;ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§ã‚ã‚‹ã€‚\nYAMLãƒ•ã‚¡ã‚¤ãƒ«ã®è©³ç´°ã¯æ¬¡ç¯€ã§è¿°ã¹ã‚‹ã€‚\nä»®æƒ³ç’°å¢ƒYAMLãƒ•ã‚¡ã‚¤ãƒ« å‰ç¯€ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å‡ºåŠ›ã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  name:myenvchannels:- defaultsdependencies:- ca-certificates=2021.4.13=haa95532_1- certifi=2020.12.5=py39haa95532_0- openssl=1.1.1k=h2bbff1b_0- pip=21.1.1=py39haa95532_0- python=3.9.5=h6244533_3- setuptools=52.0.0=py39haa95532_0- sqlite=3.35.4=h2bbff1b_0- tzdata=2020f=h52ac0ba_0- vc=14.2=h21ff451_1- vs2015_runtime=14.27.29016=h5e58377_2- wheel=0.36.2=pyhd3eb1b0_0- wincertstore=0.2=py39h2bbff1b_0- pip:- casadi==3.5.5prefix:C:\\Users\\XXXXX\\Anaconda3\\envs\\myenv  è©³ç´°ã‚’è¿°ã¹ã‚‹ã€‚\nname: ä»®æƒ³ç’°å¢ƒã®åå‰\nchannels: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒãƒ£ãƒ³ãƒãƒ«ã€‚\nconda-forgeãƒãƒ£ãƒ³ãƒãƒ«ã‚’è¿½åŠ ã—ãŸã‚Šã€å¤‰æ›´ã—ãŸã‚Šã§ãã‚‹ã€‚\ndependencies: Pythonã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€‚\npipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€pipã®ä¸‹ã®éšå±¤ã«ãªã‚‹ã€‚\nprefix: ä»®æƒ³ç’°å¢ƒã®å®Ÿä½“ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚\nYAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…å¸ƒç”¨ã«ç·¨é›†ã™ã‚‹ å‰ç¯€ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä»–ã®ãƒ¦ãƒ¼ã‚¶ã«æ¸¡ã—ã¦ã‚‚è‰¯ã„ãŒã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒƒã‚·ãƒ¥å€¤ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æŒ‡å®šãŒã‚ã‚Šã€ä½¿ã„ã¥ã‚‰ã„ã€‚\nYAMLãƒ•ã‚¡ã‚¤ãƒ«ã¯ä¸€éƒ¨ã‚’ç·¨é›†ã—ã¦ã‚‚ç’°å¢ƒã‚’å†æ§‹ç¯‰å¯èƒ½ã§ã‚ã‚‹ãŸã‚ã€èª­ã¿ã‚„ã™ããªã‚‹ã‚ˆã†ã«ç·¨é›†ã™ã‚‹ã€‚\nç·¨é›†ã™ã‚‹ç‚¹ã¯ä»¥ä¸‹ã®3ç‚¹ã€‚\n å¿…è¦æœ€ä½é™ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¨˜è¿°ã™ã‚‹ï¼ˆcondaãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªé–“ã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ãã‚Œã‚‹ï¼‰ã€‚ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å¾Œã‚ã®ãƒãƒƒã‚·ãƒ¥å€¤ã‚’å‰Šé™¤ã™ã‚‹ã€‚ prefixã‚’å‰Šé™¤ã™ã‚‹ï¼ˆãã®ã¾ã¾é…å¸ƒã™ã‚‹ã¨ãƒ¦ãƒ¼ã‚¶åãŒåˆ†ã‹ã£ã¦ã—ã¾ã†ï¼‰ã€‚  ç°¡æ½”ã«è¨˜è¿°ã—ãŸYAMLãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8  name:myenvchannels:- defaultsdependencies:- python=3.9.5- pip=21.1.1- pip:- casadi==3.5.5  ã¡ãªã¿ã«ã€pipã‚’ä½¿ç”¨ã—ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆã¯ã€ãã¡ã‚“ã¨condaã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦pipã‚’æ˜ç¤ºã—ã¦ãŠãï¼ˆä¸Šã®ä¾‹ã®- pip=21.1.1ã®éƒ¨åˆ†ï¼‰ã€‚\næ˜ç¤ºã—ã¦ãŠã‹ãªã„ã¨ã€ä»®æƒ³ç’°å¢ƒã‚’å¾©å…ƒã™ã‚‹ã¨ãã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ãã‚‹ã€‚\n Warning: you have pip-installed dependencies in your environment file, but you do not list pip itself as one of your conda dependencies. Conda may not use the correct pip to install your packages, and they may end up in the wrong place. Please add an explicit pip dependency. I\u0026rsquo;m adding one for you, but still nagging you.\n ï¼ˆæ„è¨³ï¼‰pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç’°å¢ƒè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«æŒ‡å®šã™ã‚‹å ´åˆã€condaã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«pipã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚condaå´ã§è‡ªå‹•çš„ã«pipã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãã¾ã™ãŒã€pipã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„ç­‰ã«ã‚ˆã£ã¦ã€äºˆæœŸã›ã¬çµæœã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\nYAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ãŸä»®æƒ³ç’°å¢ƒã®å¾©å…ƒ YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä»®æƒ³ç’°å¢ƒã‚’å¾©å…ƒã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n\u0026gt; conda env create -f myenv.yml\r-fã¯--fileã¨ã—ã¦ã‚‚è‰¯ã„ã€‚\nã¾ã¨ã‚ Condaã§ä»®æƒ³ç’°å¢ƒã‚’YAMLå½¢å¼ã§ä¿å­˜ã€èª­ã¿è¾¼ã‚€æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nã“ã®è¨˜äº‹ã§ä½¿ç”¨ã—ãŸã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n\u0026gt; conda create -n \u0026lt;ENVIRONMENT NAME\u0026gt; [package_spec] # ä»®æƒ³ç’°å¢ƒã‚’æ–°è¦ä½œæˆ\r\u0026gt; conda env list # ä»®æƒ³ç’°å¢ƒã®ä¸€è¦§ã‚’è¡¨ç¤º\r\u0026gt; conda activate \u0026lt;ENVIRONMENT NAME\u0026gt; # ä»®æƒ³ç’°å¢ƒã«å…¥ã‚‹\r\u0026gt; conda deactivate # ä»®æƒ³ç’°å¢ƒã‹ã‚‰å‡ºã‚‹\r\u0026gt; conda remove \u0026lt;ENVIRONMENT NAME\u0026gt; # ä»®æƒ³ç’°å¢ƒã‚’å‰Šé™¤\r\u0026gt; conda env export \u0026gt; \u0026lt;FILE NAME\u0026gt; # ç¾åœ¨ã®ç’°å¢ƒã®è¨­å®šã‚’YAMLå½¢å¼ã§å‡ºåŠ›\r\u0026gt; conda env create -f \u0026lt;FILE NAME\u0026gt; # YAMLå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ç’°å¢ƒã‚’æ§‹ç¯‰\rå‚è€ƒ  Managing environments â€” conda 4.10.1.post19+ca4069a93 documentation condaã«ã‚ˆã‚‹ãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªPythonç’°å¢ƒæ§‹ç¯‰ã®ã™ã™ã‚ - Qiita  ","description":"Condaã§æ§‹ç¯‰ã—ãŸä»®æƒ³ç’°å¢ƒã‚’YAMLå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã€å†æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚","id":3,"section":"posts","tags":["Conda","Python"],"title":"Condaã®ä»®æƒ³ç’°å¢ƒã‚’YAMLãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹","uri":"https://helve-blog.com/posts/python/conda-virtual-environment/"},{"content":"ã¯ã˜ã‚ã« éç·šå½¢æœ€é©åŒ–ã‚½ãƒ«ãƒIPOPTã®print_levelã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ã€æœ€é©åŒ–è¨ˆç®—ã®å‡ºåŠ›ã®è©³ç´°åº¦åˆã„ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\nprint_levelã¯0ï½12ã®13æ®µéšã§æŒ‡å®šã§ãã€æ•°å€¤ãŒå¤§ãã„ã»ã©è©³ç´°ã«ãªã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯5ã§ã‚ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Pythonã®æœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹CasADiã‚’ä½¿ã£ã¦IPOPTã‚’å®Ÿè¡Œã—ãŸã¨ãã‚’ä¾‹ã«ç¤ºã™ã€‚ä½¿ç”¨ã—ãŸPythonã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.8.5   CasADi 3.5.5   IPOPT 3.12.3    pipã§CasADiã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€IPOPTã‚‚åŒæ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚\npip install casadi\rprint levelã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ¦‚è¦ å‰è¿°ã®ã‚ˆã†ã«ã€print_levelã¯0ï½12ã®ç¯„å›²ã§æŒ‡å®šã™ã‚‹ã€‚æ•°å€¤ã‚’å¢—ã‚„ã™ã”ã¨ã«ã€ä¸‹è¡¨ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã‚‹è¦ç´ ãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚\nãªãŠã€åå¾©å›æ•°ã«ã‚ˆã‚‹ãŒã€print_levelã‚’6ä»¥ä¸Šã«ã™ã‚‹ã¨ãƒ­ã‚°ãŒè†¨å¤§ãªé‡ã«ãªã‚‹ãŸã‚æ³¨æ„ã€‚\n   print_level è¿½åŠ ã•ã‚Œã‚‹ä¸»ãªå‡ºåŠ›     0ï½2 å‡ºåŠ›ãªã—   3, 4 æœ€é©åŒ–å•é¡Œã®æƒ…å ±ã¨æœ€é©åŒ–çµæœã‚’å‡ºåŠ›   5 å„åå¾©ã®çµæœã‚’1è¡Œã§ã¾ã¨ã‚ã¦å‡ºåŠ›   6 å„åå¾©ã®å¤‰æ•°ãªã©ã®ç„¡é™å¤§ãƒãƒ«ãƒ ï¼ˆæœ€å¤§å€¤ï¼‰   7 å„åå¾©ã®åæŸåˆ¤å®šã®è©³ç´°ãƒ»ã‚¹ãƒ†ãƒƒãƒ—å¹…ã®ç„¡é™å¤§ãƒãƒ«ãƒ    8 å¤‰æ•°ã‚„å‹¾é…ãƒãƒ«ãƒ ã®å„è¦ç´    9 RHSã®è¦ç´    10 è¡Œåˆ—KKTã®æƒ…å ±   11, 12 KKT SYSTEMã®å€¤    å®Ÿè¡Œã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ 2å¤‰æ•°ã®åˆ¶ç´„ä»˜ãæœ€å°åŒ–å•é¡Œã‚’è§£ãã€‚print_levelã®å€¤ã‚’å¤‰ãˆã‚‹ã¨ã€IPOPTã®ãƒ­ã‚°ã®è©³ç´°åº¦åˆã„ã‚‚å¤‰åŒ–ã™ã‚‹ã€‚\nã¾ãŸã€p_optsã‚’{'print_time': False}ã«ã™ã‚‹ã“ã¨ã§ã€CasADiã®ãƒ­ã‚°ã‚’å‡ºåŠ›ã—ãªã„ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  import casadi opti = casadi.Opti() x = opti.variable(2) # å¤‰æ•° opti.set_initial(x, 2) opti.subject_to( x \u0026gt;= 1 ) OBJ = casadi.sum1(x**2) # ç›®çš„é–¢æ•° opti.minimize(OBJ) p_opts = {\u0026#39;print_time\u0026#39;: False} s_opts = {\u0026#39;print_level\u0026#39;: 5} opti.solver(\u0026#39;ipopt\u0026#39;, p_opts, s_opts) sol = opti.solve()   æœ€é©åŒ–çµæœã‚’å‡ºåŠ›ã—ãªã„ (level 0ï½2) print_levelãŒ0ï½2ã®ã¨ãã€IPOPTã¯ä½•ã‚‚å‡ºåŠ›ã—ãªã„ã€‚\næœ€é©åŒ–å•é¡Œã®æƒ…å ±ã¨æœ€é©åŒ–çµæœã‚’å‡ºåŠ› (level 3ï½4) print_levelãŒ3ï½4ã®ã¨ãã€IPOPTã¯ä»¥ä¸‹ã‚’å‡ºåŠ›ã™ã‚‹ã€‚\n æœ€é©åŒ–å•é¡Œã®æƒ…å ±ï¼ˆå¤‰æ•°ã®æ•°ãªã©ï¼‰ åæŸã¾ã§ã®åå¾©å›æ•° æœ€é©åŒ–çµæœï¼ˆæœ€é©å€¤ã€è¨ˆç®—æ™‚é–“ãªã©ï¼‰  Total number of variables............................: 2\rvariables with only lower bounds: 0\rvariables with lower and upper bounds: 0\rvariables with only upper bounds: 0\rTotal number of equality constraints.................: 0\rTotal number of inequality constraints...............: 2\rinequality constraints with only lower bounds: 2\rinequality constraints with lower and upper bounds: 0\rinequality constraints with only upper bounds: 0\rNumber of Iterations....: 5\r(scaled) (unscaled)\rObjective...............: 1.9999999650154130e+000 1.9999999650154130e+000\rDual infeasibility......: 2.5091040356528538e-014 2.5091040356528538e-014\rConstraint violation....: 0.0000000000000000e+000 0.0000000000000000e+000\rComplementarity.........: 2.5077064649767179e-009 2.5077064649767179e-009\rOverall NLP error.......: 2.5077064649767179e-009 2.5077064649767179e-009\rNumber of objective function evaluations = 6\rNumber of objective gradient evaluations = 6\rNumber of equality constraint evaluations = 0\rNumber of inequality constraint evaluations = 6\rNumber of equality constraint Jacobian evaluations = 0\rNumber of inequality constraint Jacobian evaluations = 6\rNumber of Lagrangian Hessian evaluations = 5\rTotal CPU secs in IPOPT (w/o function evaluations) = 0.003\rTotal CPU secs in NLP function evaluations = 0.000\rEXIT: Optimal Solution Found.\rå„åå¾©ã®çµæœã‚’1è¡Œã§ã¾ã¨ã‚ã¦å‡ºåŠ›ï¼ˆlevel 5ï¼‰ print_levelãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®5ã®ã¨ãã€IPOPTã¯ä»¥ä¸‹ã‚’è¿½åŠ ã§å‡ºåŠ›ã™ã‚‹ã€‚\n ãƒ¤ã‚³ãƒ“ã‚¢ãƒ³ãƒ»ãƒ˜ãƒƒã‚·ã‚¢ãƒ³ã®éã‚¼ãƒ­è¦ç´ ã®æ•° å„åå¾©ã®çµæœï¼ˆè©•ä¾¡é–¢æ•°ã‚„åˆ¶ç´„é•åé‡ãªã©ï¼‰  This is Ipopt version 3.12.3, running with linear solver mumps.\rNOTE: Other linear solvers might be more efficient (see Ipopt documentation).\rNumber of nonzeros in equality constraint Jacobian...: 0\rNumber of nonzeros in inequality constraint Jacobian.: 2\rNumber of nonzeros in Lagrangian Hessian.............: 2\riter objective inf_pr inf_du lg(mu) ||d|| lg(rg) alpha_du alpha_pr ls\r0 8.0000000e+000 0.00e+000 1.50e+000 -1.0 0.00e+000 - 0.00e+000 0.00e+000 0\r1 2.0402000e+000 0.00e+000 3.58e-001 -1.0 1.30e+000 - 1.00e+000 7.62e-001f 1\r2 2.0396310e+000 0.00e+000 2.00e-007 -1.7 1.41e-004 - 1.00e+000 1.00e+000f 1\r3 2.0006763e+000 0.00e+000 1.50e-009 -3.8 9.69e-003 - 1.00e+000 1.00e+000f 1\r4 2.0000038e+000 0.00e+000 1.84e-011 -5.7 1.68e-004 - 1.00e+000 1.00e+000f 1\r5 2.0000000e+000 0.00e+000 2.51e-014 -8.6 9.49e-007 - 1.00e+000 1.00e+000f 1\rå¤‰æ•°ãªã©ã®ç„¡é™å¤§ãƒãƒ«ãƒ  (level 6) print_levelãŒ6ã®ã¨ãã€IPOPTã¯ä»¥ä¸‹ã‚’è¿½åŠ ã§å‡ºåŠ›ã™ã‚‹ã€‚\n ãƒ¦ãƒ¼ã‚¶ãŒæŒ‡å®šã—ãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ æœ€é©åŒ–ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã«ç”¨ã„ã‚‹ä¿‚æ•° å¤‰æ•°ãªã©ã®ç„¡é™å¤§ãƒãƒ«ãƒ ï¼ˆæœ€å¤§å€¤ï¼‰  List of options:\rName Value # times used\rprint_level = 6 2\rScaling parameter for objective function = 1.000000e+000\robjective scaling factor = 1\rNo x scaling provided\rNo c scaling provided\rNo d scaling provided\rInitial values of x sufficiently inside the bounds.\rInitial values of s sufficiently inside the bounds.\rMUMPS used permuting_scaling 5 and pivot_order 5.\rscaling will be 77.\rNumber of doubles for MUMPS to hold factorization (INFO(9)) = 12\rNumber of integers for MUMPS to hold factorization (INFO(10)) = 64\rFactorization successful.\rLeast square estimates max(y_c) = 0.000000e+000, max(y_d) = 2.500000e+000\r**************************************************\r*** Update HessianMatrix for Iteration 0:\r**************************************************\r**************************************************\r*** Summary of Iteration: 0:\r**************************************************\riter objective inf_pr inf_du lg(mu) ||d|| lg(rg) alpha_du alpha_pr ls\r0 8.0000000e+000 0.00e+000 1.50e+000 -1.0 0.00e+000 - 0.00e+000 0.00e+000 0 y\r**************************************************\r*** Beginning Iteration 0 from the following point:\r**************************************************\rCurrent barrier parameter mu = 1.0000000000000001e-001\rCurrent fraction-to-the-boundary parameter tau = 9.8999999999999999e-001\r||curr_x||_inf = 2.0000000000000000e+000\r||curr_s||_inf = 2.0000000000000000e+000\r||curr_y_c||_inf = 0.0000000000000000e+000\r||curr_y_d||_inf = 2.5000000000000000e+000\r||curr_z_L||_inf = 0.0000000000000000e+000\r||curr_z_U||_inf = 0.0000000000000000e+000\r||curr_v_L||_inf = 1.0000000000000000e+000\r||curr_v_U||_inf = 0.0000000000000000e+000\r***Current NLP Values for Iteration 0:\r(scaled) (unscaled)\rObjective...............: 8.0000000000000000e+000 8.0000000000000000e+000\rDual infeasibility......: 1.5000000000000000e+000 1.5000000000000000e+000\rConstraint violation....: 0.0000000000000000e+000 0.0000000000000000e+000\rComplementarity.........: 1.0000000099999999e+000 1.0000000099999999e+000\rOverall NLP error.......: 1.5000000000000000e+000 1.5000000000000000e+000\r**************************************************\r*** Update Barrier Parameter for Iteration 0:\r**************************************************\rOptimality Error for Barrier Sub-problem = 1.500000e+000\rBarrier Parameter: 1.000000e-001\r**************************************************\r*** Solving the Primal Dual System for Iteration 0:\r**************************************************\rNumber of doubles for MUMPS to hold factorization (INFO(9)) = 12\rNumber of integers for MUMPS to hold factorization (INFO(10)) = 64\rFactorization successful.\rNumber of trial factorizations performed: 1\rPerturbation parameters: delta_x=0.000000e+000 delta_s=0.000000e+000\rdelta_c=0.000000e+000 delta_d=0.000000e+000\rresidual_ratio = 1.189524e-016\rFactorization successful.\rresidual_ratio = 7.930161e-017\r**************************************************\r*** Finding Acceptable Trial Point for Iteration 0:\r**************************************************\r--\u0026gt; Starting line search in iteration 0 \u0026lt;--\rMu has changed in line search - resetting watchdog counters.\rThe current filter has 0 entries.\rminimal step size ALPHA_MIN = 0.000000E+000\rStarting checks for alpha (primal) = 7.62e-001\rtrial_max is initialized to 1.000000e+004\rtrial_min is initialized to 1.000000e-004\rChecking acceptability for trial step size alpha_primal_test=7.615383e-001:\rNew values of barrier function = 2.9612340152016166e+000 (reference 8.0000019980000197e+000):\rNew values of constraint violation = 0.0000000000000000e+000 (reference 0.0000000000000000e+000):\rChecking Armijo Condition...\rSucceeded...\rChecking filter acceptability...\rSucceeded...\rå„åå¾©ã®åæŸåˆ¤å®šã®è©³ç´°ãƒ»ã‚¹ãƒ†ãƒƒãƒ—å¹…ã®ç„¡é™å¤§ãƒãƒ«ãƒ  (level 7) print_levelãŒ7ã®ã¨ãã€IPOPTã¯ä»¥ä¸‹ã‚’è¿½åŠ ã§å‡ºåŠ›ã™ã‚‹ã€‚\n å„åå¾©ã®åæŸåˆ¤å®šã®è©³ç´° å„åå¾©ã®ã‚¹ãƒ†ãƒƒãƒ—å¹…ã®ç„¡é™å¤§ãƒãƒ«ãƒ   Convergence Check:\roverall_error = 1.5000000000000000e+000 IpData().tol() = 1.0000000000000000e-008\rdual_inf = 1.5000000000000000e+000 dual_inf_tol_ = 1.0000000000000000e+000\rconstr_viol = 0.0000000000000000e+000 constr_viol_tol_ = 1.0000000000000000e-004\rcompl_inf = 1.0000000099999999e+000 compl_inf_tol_ = 1.0000000000000000e-004\robj val update iter = 0\rAcceptable Check:\roverall_error = 1.5000000000000000e+000 acceptable_tol_ = 9.9999999999999995e-007\rdual_inf = 1.5000000000000000e+000 acceptable_dual_inf_tol_ = 1.0000000000000000e+010\rconstr_viol = 0.0000000000000000e+000 acceptable_constr_viol_tol_ = 1.0000000000000000e-002\rcompl_inf = 1.0000000099999999e+000 acceptable_compl_inf_tol_ = 1.0000000000000000e-002\rcurr_obj_val_ = 8.0000000000000000e+000 last_obj_val = -1.0000000000000001e+050\rfabs(curr_obj_val_-last_obj_val_)/Max(1., fabs(curr_obj_val_)) = 1.2500000000000001e+049 acceptable_obj_change_tol_ = 1.0000000000000000e+020\rtest iter = 0\r||delta_x||_inf = 1.3000003380000009e+000\r||delta_s||_inf = 1.3000003380000009e+000\r||delta_y_c||_inf = 0.0000000000000000e+000\r||delta_y_d||_inf = 1.1000006760000021e+000\r||delta_z_L||_inf = 0.0000000000000000e+000\r||delta_z_U||_inf = 0.0000000000000000e+000\r||delta_v_L||_inf = 4.0000032399999785e-001\r||delta_v_U||_inf = 0.0000000000000000e+000\rå¤‰æ•°ã‚„å‹¾é…ãƒãƒ«ãƒ ã®å„è¦ç´  (level 8) print_levelãŒ8ã®ã¨ãã€IPOPTã¯ä»¥ä¸‹ã‚’è¿½åŠ ã§å‡ºåŠ›ã™ã‚‹ã€‚\n å„åå¾©ã«ãŠã‘ã‚‹ã€å¤‰æ•°ã‚„å‹¾é…ãƒãƒ«ãƒ ã®å„è¦ç´  æœ€é©åŒ–çµæœã«ãŠã‘ã‚‹ã€å¤‰æ•°ã‚„å‹¾é…ãƒãƒ«ãƒ ã®å„è¦ç´   No search direction has been computed yet.\rDenseVector \u0026quot;curr_x\u0026quot; with 2 elements:\rcurr_x[ 1]=2.0000000000000000e+000\rcurr_x[ 2]=2.0000000000000000e+000\rDenseVector \u0026quot;curr_s\u0026quot; with 2 elements:\rcurr_s[ 1]=2.0000000000000000e+000\rcurr_s[ 2]=2.0000000000000000e+000\rDenseVector \u0026quot;curr_y_c\u0026quot; with 0 elements:\rDenseVector \u0026quot;curr_y_d\u0026quot; with 2 elements:\rcurr_y_d[ 1]=-2.5000000000000000e+000\rcurr_y_d[ 2]=-2.5000000000000000e+000\rDenseVector \u0026quot;curr_slack_x_L\u0026quot; with 0 elements:\rDenseVector \u0026quot;curr_slack_x_U\u0026quot; with 0 elements:\rDenseVector \u0026quot;curr_z_L\u0026quot; with 0 elements:\rHomogeneous vector, all elements have value 1.0000000000000000e+000\rDenseVector \u0026quot;curr_z_U\u0026quot; with 0 elements:\rHomogeneous vector, all elements have value 1.0000000000000000e+000\rDenseVector \u0026quot;curr_slack_s_L\u0026quot; with 2 elements:\rcurr_slack_s_L[ 1]=1.0000000099999999e+000\rcurr_slack_s_L[ 2]=1.0000000099999999e+000\rDenseVector \u0026quot;curr_slack_s_U\u0026quot; with 0 elements:\rDenseVector \u0026quot;curr_v_L\u0026quot; with 2 elements:\rHomogeneous vector, all elements have value 1.0000000000000000e+000\rDenseVector \u0026quot;curr_v_U\u0026quot; with 0 elements:\rHomogeneous vector, all elements have value 1.0000000000000000e+000\rDenseVector \u0026quot;grad_f\u0026quot; with 2 elements:\rgrad_f[ 1]=4.0000000000000000e+000\rgrad_f[ 2]=4.0000000000000000e+000\rDenseVector \u0026quot;curr_c\u0026quot; with 0 elements:\rDenseVector \u0026quot;curr_d\u0026quot; with 2 elements:\rcurr_d[ 1]=2.0000000000000000e+000\rcurr_d[ 2]=2.0000000000000000e+000\rDenseVector \u0026quot;curr_d - curr_s\u0026quot; with 2 elements:\rcurr_d - curr_s[ 1]=0.0000000000000000e+000\rcurr_d - curr_s[ 2]=0.0000000000000000e+000\rRHSã®è¦ç´  (level 9) print_levelãŒ9ã®ã¨ãã€RHSã®è¦ç´ ãŒå‡ºåŠ›ã•ã‚Œã‚‹ï¼ˆRHSã¯Right Hand Sideã®ç•¥ã ã¨æ€ã†ãŒã€è©³ç´°ä¸æ˜ï¼‰ã€‚\nCompoundVector \u0026quot;RHS[ 0]\u0026quot; with 4 components:\rComponent 1:\rDenseVector \u0026quot;RHS[ 0][ 0]\u0026quot; with 2 elements:\rRHS[ 0][ 0][ 1]=-4.0000000000000000e+000\rRHS[ 0][ 0][ 2]=-4.0000000000000000e+000\rComponent 2:\rDenseVector \u0026quot;RHS[ 0][ 1]\u0026quot; with 2 elements:\rRHS[ 0][ 1][ 1]=1.0000000000000000e+000\rRHS[ 0][ 1][ 2]=1.0000000000000000e+000\rComponent 3:\rDenseVector \u0026quot;RHS[ 0][ 2]\u0026quot; with 0 elements:\rHomogeneous vector, all elements have value 0.0000000000000000e+000\rComponent 4:\rDenseVector \u0026quot;RHS[ 0][ 3]\u0026quot; with 2 elements:\rHomogeneous vector, all elements have value 0.0000000000000000e+000\rè¡Œåˆ—KKTã®æƒ…å ± (level 10) print_levelãŒ10ã®ã¨ãã€è¡Œåˆ—KKTã®æƒ…å ±ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚\nCompoundSymMatrix \u0026quot;KKT\u0026quot; with 4 rows and columns components:\rComponent for row 0 and column 0:\rSumSymMatrix \u0026quot;KKT[0][0]\u0026quot; of dimension 2 with 2 terms:\rTerm 0 with factor 0.0000000000000000e+000 and the following matrix:\rSymTMatrix \u0026quot;Term: 0\u0026quot; of dimension 2 with 2 nonzero elements:\rUninitialized!\rTerm 1 with factor 1.0000000000000000e+000 and the following matrix:\rDiagMatrix \u0026quot;Term: 1\u0026quot; with 2 rows and columns, and with diagonal elements:\rDenseVector \u0026quot;Term: 1\u0026quot; with 2 elements:\rHomogeneous vector, all elements have value 1.0000000000000000e+000\rComponent for row 1 and column 0:\rThis component has not been set.\rComponent for row 1 and column 1:\rDiagMatrix \u0026quot;KKT[1][1]\u0026quot; with 2 rows and columns, and with diagonal elements:\rDenseVector \u0026quot;KKT[1][1]\u0026quot; with 2 elements:\rHomogeneous vector, all elements have value 1.0000000000000000e+000\rComponent for row 2 and column 0:\rGenTMatrix \u0026quot;KKT[2][0]\u0026quot; of dimension 0 by 2 with 0 nonzero elements:\rComponent for row 2 and column 1:\rThis component has not been set.\rComponent for row 2 and column 2:\rDiagMatrix \u0026quot;KKT[2][2]\u0026quot; with 0 rows and columns, and with diagonal elements:\rDenseVector \u0026quot;KKT[2][2]\u0026quot; with 0 elements:\rHomogeneous vector, all elements have value -0.0000000000000000e+000\rComponent for row 3 and column 0:\rGenTMatrix \u0026quot;KKT[3][0]\u0026quot; of dimension 2 by 2 with 2 nonzero elements:\rKKT[3][0][ 1, 1]=1.0000000000000000e+000 (0)\rKKT[3][0][ 2, 2]=1.0000000000000000e+000 (1)\rComponent for row 3 and column 1:\rIdentityMatrix \u0026quot;KKT[3][1]\u0026quot; with 2 rows and columns and the factor -1.0000000000000000e+000.\rComponent for row 3 and column 2:\rThis component has not been set.\rComponent for row 3 and column 3:\rDiagMatrix \u0026quot;KKT[3][3]\u0026quot; with 2 rows and columns, and with diagonal elements:\rDenseVector \u0026quot;KKT[3][3]\u0026quot; with 2 elements:\rHomogeneous vector, all elements have value -0.0000000000000000e+000\rKKT SYSTEMã®å€¤ (level 11, 12) print_levelãŒ11, 12ã®ã¨ãã€KKT SYSTEMã®å€¤ãŒå‡ºåŠ›ã•ã‚Œã‚‹\n******* KKT SYSTEM *******\r(0) KKT[1][1] = 0.000000000000000e+000\r(1) KKT[2][2] = 0.000000000000000e+000\r(2) KKT[1][1] = 1.000000000000000e+000\r(3) KKT[2][2] = 1.000000000000000e+000\r(4) KKT[3][3] = 1.000000000000000e+000\r(5) KKT[4][4] = 1.000000000000000e+000\r(6) KKT[5][1] = 1.000000000000000e+000\r(7) KKT[6][2] = 1.000000000000000e+000\r(8) KKT[5][3] = -1.000000000000000e+000\r(9) KKT[6][4] = -1.000000000000000e+000\r(10) KKT[5][5] = -0.000000000000000e+000\r(11) KKT[6][6] = -0.000000000000000e+000\rRight hand side 0 in TSymLinearSolver:\rTrhs[ 0, 0] = -4.0000000000000000e+000\rTrhs[ 0, 1] = -4.0000000000000000e+000\rTrhs[ 0, 2] = 1.0000000000000000e+000\rTrhs[ 0, 3] = 1.0000000000000000e+000\rTrhs[ 0, 4] = 0.0000000000000000e+000\rTrhs[ 0, 5] = 0.0000000000000000e+000\r","description":"éç·šå½¢æœ€é©åŒ–ã‚½ãƒ«ãƒIPOPTã®print levelã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚‹ã€æœ€é©åŒ–è¨ˆç®—ã®å‡ºåŠ›ã®è©³ç´°åº¦åˆã„ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚","id":4,"section":"posts","tags":["æœ€é©åŒ–"],"title":"IPOPTã®print levelã«ã‚ˆã‚‹å‡ºåŠ›ã®è©³ç´°åº¦åˆã„","uri":"https://helve-blog.com/posts/math/ipopt-print-level/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªjsonã‚’ä½¿ã£ã¦ã€JSONãƒ‡ãƒ¼ã‚¿ã‚’è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ (dict) ã¨ã—ã¦æ‰±ã†æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nç’°å¢ƒã¯Python 3.8.5ã§ã‚ã‚‹ã€‚\nã¾ãŸã€ä»¥ä¸‹ã§ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¬¡ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1  import json   ãªãŠã€Python 3.7ä»¥é™ã§ã¯è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã®é †åºãŒä¿æŒã•ã‚Œã‚‹ãŒã€ãã‚Œã‚ˆã‚Šå‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§é †åºã‚’ä¿æŒã™ã‚‹å ´åˆã«ã¯OrderedDictã‚’ç”¨ã„ã‚‹ã€‚\nã¾ãŸã€æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®pprintã¯è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’æ•´å½¢ã—ã¦å‡ºåŠ›ã™ã‚‹ã®ã«ä½¿ç”¨ã•ã‚Œã‚‹ãŒã€Python 3.8.5ã§ã¯è¾æ›¸å‹ã®é †åºé€šã‚Šã«å‡ºåŠ›ã—ã¦ãã‚Œãªã„ãŸã‚ã€ã“ã®è¨˜äº‹ã§ã¯ä½¿ç”¨ã—ãªã„ã€‚\nä¾‹ï¼ˆã“ã®è¨˜äº‹ã§ã¯ä½¿ç”¨ã—ãªã„ï¼‰\n1 2  from collections import OrderedDict import pprint   jsonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸»ãªé–¢æ•° jsonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã€JSONãƒ‡ãƒ¼ã‚¿ã‚’è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã€ã¾ãŸã¯æ–‡å­—åˆ—ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã“ã§ã¯ã€ä»¥ä¸‹4ã¤ã®é–¢æ•°ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\n load: JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¾æ›¸å‹ã¨ã—ã¦èª­ã¿è¾¼ã‚€ loads: JSONæ–‡å­—åˆ—ã‚’è¾æ›¸å‹ã«å¤‰æ›ã™ã‚‹ dump: è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ dumps: è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã®æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹  JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¾æ›¸å‹ã¨ã—ã¦èª­ã¿è¾¼ã‚€ (load) ã¾ãšã€ä»¥ä¸‹ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11  { \u0026#34;foo\u0026#34;: 2021, \u0026#34;bar\u0026#34;: 3.14, \u0026#34;baz\u0026#34;: true, \u0026#34;qux\u0026#34;: null, \u0026#34;quux\u0026#34;: \u0026#34;alpha\u0026#34;, \u0026#34;corge\u0026#34;: [1, 2, 3], \u0026#34;grault\u0026#34;: { \u0026#34;foobar\u0026#34;: 123 } }   ã“ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã€json.loadé–¢æ•°ã‚’ä½¿ã£ã¦å–å¾—ã™ã‚‹ã¨ã€è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦å–å¾—ã§ãã‚‹ã€‚\n1 2  with open(\u0026#39;example.json\u0026#39;, \u0026#39;r\u0026#39;) as f: data = json.load(f)   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6 7 8  \u0026gt;\u0026gt;\u0026gt; data {\u0026#39;foo\u0026#39;: 2021, \u0026#39;bar\u0026#39;: 3.14, \u0026#39;baz\u0026#39;: True, \u0026#39;qux\u0026#39;: None, \u0026#39;quux\u0026#39;: \u0026#39;alpha\u0026#39;, \u0026#39;corge\u0026#39;: [1, 2, 3], \u0026#39;grault\u0026#39;: {\u0026#39;foobar\u0026#39;: 123}}   ã¾ãŸã€JSONãƒ‡ãƒ¼ã‚¿ã®æ•°å€¤ã‚„è«–ç†å€¤ã¯ã€è‡ªå‹•çš„ã«å‹ã®è§£æãŒè¡Œã‚ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026gt;\u0026gt;\u0026gt; print(type(data[\u0026#34;foo\u0026#34;])) # 2021 \u0026lt;class \u0026#39;int\u0026#39;\u0026gt; \u0026gt;\u0026gt;\u0026gt; print(type(data[\u0026#34;bar\u0026#34;])) # 3.14 \u0026lt;class \u0026#39;float\u0026#39;\u0026gt; \u0026gt;\u0026gt;\u0026gt; print(type(data[\u0026#34;baz\u0026#34;])) # true \u0026lt;class \u0026#39;bool\u0026#39;\u0026gt; \u0026gt;\u0026gt;\u0026gt; print(type(data[\u0026#34;qux\u0026#34;])) # null \u0026lt;class \u0026#39;NoneType\u0026#39;\u0026gt; \u0026gt;\u0026gt;\u0026gt; print(type(data[\u0026#34;quux\u0026#34;])) # \u0026#34;alpha\u0026#34; \u0026lt;class \u0026#39;str\u0026#39;\u0026gt; \u0026gt;\u0026gt;\u0026gt; print(type(data[\u0026#34;corge\u0026#34;])) # [1, 2, 3] \u0026lt;class \u0026#39;list\u0026#39;\u0026gt; \u0026gt;\u0026gt;\u0026gt; print(type(data[\u0026#34;grault\u0026#34;])) # {\u0026#34;foobar\u0026#34;: 123} \u0026lt;class \u0026#39;dict\u0026#39;\u0026gt;   JSONæ–‡å­—åˆ—ã‚’è¾æ›¸å‹ã«å¤‰æ›ã™ã‚‹ (loads) JSONãƒ‡ãƒ¼ã‚¿ãŒæ–‡å­—åˆ—ã¨ã—ã¦å¾—ã‚‰ã‚Œã¦ã„ã‚‹å ´åˆã«ã€ã“ã‚Œã‚’è¾æ›¸å‹ã«å¤‰æ›ã™ã‚‹ã«ã¯ã€json.loadsé–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3  json_str = \u0026#39;{\u0026#34;hoge\u0026#34;: \u0026#34;fuga\u0026#34;}\u0026#39; data3 = json.loads(json_str) pprint.pprint(data3)   å®Ÿè¡Œçµæœ\n1  {\u0026#39;hoge\u0026#39;: \u0026#39;fuga\u0026#39;}   è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ (dump) è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ã«ã¯ã€json.dumpé–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚\n1 2  with open(\u0026#39;output.json\u0026#39;, \u0026#39;w\u0026#39;) as f: json.dump(data, f)   ãŸã ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æ”¹è¡Œãªã—ã§å‡ºåŠ›ã•ã‚Œã‚‹ã€‚\n1  {\u0026#34;foo\u0026#34;: 2021, \u0026#34;bar\u0026#34;: 3.14, \u0026#34;baz\u0026#34;: true, \u0026#34;qux\u0026#34;: null, \u0026#34;quux\u0026#34;: \u0026#34;alpha\u0026#34;, \u0026#34;corge\u0026#34;: [1, 2, 3], \u0026#34;grault\u0026#34;: {\u0026#34;foobar\u0026#34;: 123}}   æ”¹è¡Œã™ã‚‹ã«ã¯indentå¼•æ•°ã«æ•´æ•°ã‚’æŒ‡å®šã™ã‚‹ï¼ˆæ•°å€¤ã®æ•°ã ã‘åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã•ã‚Œã‚‹ã€‚0ã®å ´åˆã¯æ”¹è¡Œã®ã¿ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãªã—ï¼‰ã€‚\nä¾‹\n1 2  json.dump(data, f, indent=0) json.dump(data, f, indent=2)   è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã®æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹ (dumps) è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’JSONå½¢å¼ã®æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«ã¯ã€json.dumpsé–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚\n1  print(json.dumps(data, indent=2))   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  { \u0026#34;foo\u0026#34;: 2021, \u0026#34;bar\u0026#34;: 3.14, \u0026#34;baz\u0026#34;: true, \u0026#34;qux\u0026#34;: null, \u0026#34;quux\u0026#34;: \u0026#34;alpha\u0026#34;, \u0026#34;corge\u0026#34;: [ 1, 2, 3 ], \u0026#34;grault\u0026#34;: { \u0026#34;foobar\u0026#34;: 123 } }   å‚è€ƒ  json \u0026mdash; JSON ã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ãŠã‚ˆã³ãƒ‡ã‚³ãƒ¼ãƒ€ â€” Python 3.9.4 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ Pythonã§JSONãƒ•ã‚¡ã‚¤ãƒ«ãƒ»æ–‡å­—åˆ—ã®èª­ã¿è¾¼ã¿ãƒ»æ›¸ãè¾¼ã¿ note.nkmk.me  ","description":"Pythonã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªjsonã‚’ä½¿ã£ã¦ã€JSONãƒ‡ãƒ¼ã‚¿ã‚’è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦æ‰±ã†æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚","id":5,"section":"posts","tags":["Python"],"title":"Pythonã§JSONã‚’æ‰±ã†","uri":"https://helve-blog.com/posts/python/python-json/"},{"content":"ã¯ã˜ã‚ã« ä¸»åŒå¯¾å†…ç‚¹æ³•ã‚’ç”¨ã„ãŸéç·šå½¢æœ€é©åŒ–ã‚½ãƒ«ãƒIPOPTã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®èª­ã¿æ–¹ã‚’è§£èª¬ã™ã‚‹ã€‚\nä¸»åŒå¯¾å†…ç‚¹æ³•ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã®ã“ã¨ã€‚\néç·šå½¢è¨ˆç”»å•é¡Œã®ä¸»åŒå¯¾å†…ç‚¹æ³•\nPythonã®æœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹CasADiã‚’ä½¿ã£ã¦IPOPTã‚’å®Ÿè¡Œã—ãŸã¨ãã‚’ä¾‹ã«ã€ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®èª­ã¿æ–¹ã‚’ç¤ºã™ã€‚ä½¿ç”¨ã—ãŸPythonã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ©ã‚¤ãƒ–ãƒ©ãƒª ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.8.5   CasADi 3.5.5   IPOPT 3.12.3    pipã§CasADiã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€IPOPTã‚‚åŒæ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚\npip install casadi\rå®Ÿè¡Œã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ 2å¤‰æ•°ã®åˆ¶ç´„ä»˜ãæœ€å°åŒ–å•é¡Œã‚’è§£ãã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  import casadi opti = casadi.Opti() x = opti.variable(2) # å¤‰æ•° opti.set_initial(x, 5) OBJ = casadi.sum1(x**2) # ç›®çš„é–¢æ•° opti.minimize(OBJ) opti.subject_to( 2*x[0] + x[1] == 3 ) # åˆ¶ç´„æ¡ä»¶ opti.subject_to( x \u0026gt;=0 ) opti.solver(\u0026#39;ipopt\u0026#39;) # æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’è¨­å®š sol = opti.solve() # æœ€é©åŒ–è¨ˆç®—ã‚’å®Ÿè¡Œ print(f\u0026#39;è©•ä¾¡é–¢æ•°ï¼š{sol.value(OBJ)}\u0026#39;) print(f\u0026#39;x: {sol.value(x)}\u0026#39;)   ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®å…¨ä½“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€IPOPTã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã¨ã—ã¦ã¯ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆCasADiã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã¯çœç•¥ã™ã‚‹ï¼‰ã€‚\nãªãŠã€IPOPTã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®è©³ç´°åº¦åˆã„ã¯print_levelã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€0ï½12ã®13æ®µéšã§èª¿ç¯€ã§ãã‚‹ã€‚ä»Šå›è¡¨ç¤ºã—ãŸã®ã¯ãƒ¬ãƒ™ãƒ«5ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã§ã‚ã‚‹ã€‚\n******************************************************************************\rThis program contains Ipopt, a library for large-scale nonlinear optimization.\rIpopt is released as open source code under the Eclipse Public License (EPL).\rFor more information visit http://projects.coin-or.org/Ipopt\r******************************************************************************\rThis is Ipopt version 3.12.3, running with linear solver mumps.\rNOTE: Other linear solvers might be more efficient (see Ipopt documentation).\rNumber of nonzeros in equality constraint Jacobian...: 2\rNumber of nonzeros in inequality constraint Jacobian.: 2\rNumber of nonzeros in Lagrangian Hessian.............: 2\rTotal number of variables............................: 2\rvariables with only lower bounds: 0\rvariables with lower and upper bounds: 0\rvariables with only upper bounds: 0\rTotal number of equality constraints.................: 1\rTotal number of inequality constraints...............: 2\rinequality constraints with only lower bounds: 2\rinequality constraints with lower and upper bounds: 0\rinequality constraints with only upper bounds: 0\riter objective inf_pr inf_du lg(mu) ||d|| lg(rg) alpha_du alpha_pr ls\r0 5.0000000e+001 1.20e+001 1.80e+000 -1.0 0.00e+000 - 0.00e+000 0.00e+000 0\r1 1.8429917e+000 0.00e+000 1.00e-006 -1.0 4.21e+000 - 1.00e+000 1.00e+000f 1\r2 1.8056300e+000 0.00e+000 3.26e-002 -1.7 1.18e-001 - 9.60e-001 1.00e+000f 1\r3 1.8000756e+000 4.44e-016 2.83e-008 -2.5 5.93e-002 - 1.00e+000 1.00e+000f 1\r4 1.8000000e+000 0.00e+000 1.50e-009 -3.8 7.60e-003 - 1.00e+000 1.00e+000f 1\r5 1.8000000e+000 0.00e+000 1.84e-011 -5.7 1.77e-004 - 1.00e+000 1.00e+000f 1\r6 1.8000000e+000 0.00e+000 2.51e-014 -8.6 9.82e-007 - 1.00e+000 1.00e+000f 1\rNumber of Iterations....: 6\r(scaled) (unscaled)\rObjective...............: 1.8000000000000000e+000 1.8000000000000000e+000\rDual infeasibility......: 2.5059035640133008e-014 2.5059035640133008e-014\rConstraint violation....: 0.0000000000000000e+000 0.0000000000000000e+000\rComplementarity.........: 2.5090647396970575e-009 2.5090647396970575e-009\rOverall NLP error.......: 2.5090647396970575e-009 2.5090647396970575e-009\rNumber of objective function evaluations = 7\rNumber of objective gradient evaluations = 7\rNumber of equality constraint evaluations = 7\rNumber of inequality constraint evaluations = 7\rNumber of equality constraint Jacobian evaluations = 7\rNumber of inequality constraint Jacobian evaluations = 7\rNumber of Lagrangian Hessian evaluations = 6\rTotal CPU secs in IPOPT (w/o function evaluations) = 0.039\rTotal CPU secs in NLP function evaluations = 0.000\rEXIT: Optimal Solution Found.\rã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®èª­ã¿æ–¹ IPOPTã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®èª­ã¿æ–¹ã‚’è¿°ã¹ã‚‹ã€‚ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã¯ä»¥ä¸‹ã®4ã¤ã®æƒ…å ±ã«åˆ†ã‘ã‚‰ã‚Œã‚‹ã€‚\n æœ€é©åŒ–å•é¡Œã®æƒ…å ± æœ€é©åŒ–ã®åå¾©ã”ã¨ã®çŠ¶æ…‹ æœ€é©åŒ–ã®çµæœ çµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹  æœ€é©åŒ–å•é¡Œã®æƒ…å ± æœ€é©åŒ–ã®è¨ˆç®—å‰ã«ã€å•é¡Œã®å¤‰æ•°ã®æ•°ãªã©ã®æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nNumber of nonzeros in equality constraint Jacobian...: 2\rNumber of nonzeros in inequality constraint Jacobian.: 2\rNumber of nonzeros in Lagrangian Hessian.............: 2\rã“ã‚Œã¯ã€\n ç­‰å¼åˆ¶ç´„ã®ãƒ¤ã‚³ãƒ“ã‚¢ãƒ³ ä¸ç­‰å¼åˆ¶ç´„ã®ãƒ¤ã‚³ãƒ“ã‚¢ãƒ³ ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã®ãƒ˜ãƒƒã‚·ã‚¢ãƒ³  ã®ãã‚Œãã‚Œéã‚¼ãƒ­è¦ç´ ã®æ•°ã§ã‚ã‚‹ã€‚ä¾‹ã¨ã—ã¦ã€è¨ˆç®—ã—ãŸå•é¡Œã®ç­‰å¼åˆ¶ç´„ã¯\n$$ g(\\bm{x}) = 2x_0 + x_1 - 3 = 0 $$\nã§ã‚ã‚‹ã‹ã‚‰ã€ãƒ¤ã‚³ãƒ“ã‚¢ãƒ³ã¯ã€\n$$ \\frac{\\partial g}{\\partial \\bm{x}} = [ \\begin{array}{cc} 2 \u0026amp; 1 \\end{array} ] $$\nã¨ãªã‚Šã€éã‚¼ãƒ­è¦ç´ ã®æ•°ã¯2ã§ã‚ã‚‹ã€‚\nTotal number of variables............................: 2\rvariables with only lower bounds: 0\rvariables with lower and upper bounds: 0\rvariables with only upper bounds: 0\rTotal number of equality constraints.................: 1\rTotal number of inequality constraints...............: 2\rinequality constraints with only lower bounds: 2\rinequality constraints with lower and upper bounds: 0\rinequality constraints with only upper bounds: 0\r å¤‰æ•°ã®æ•° ç­‰å¼åˆ¶ç´„ã®æ•° ä¸ç­‰å¼åˆ¶ç´„ã®æ•°  ãŒãã‚Œãã‚Œè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\næœ€é©åŒ–ã®åå¾©ã”ã¨ã®çŠ¶æ…‹ iter objective inf_pr inf_du lg(mu) ||d|| lg(rg) alpha_du alpha_pr ls\r0 5.0000000e+001 1.20e+001 1.80e+000 -1.0 0.00e+000 - 0.00e+000 0.00e+000 0\r1 1.8429917e+000 0.00e+000 1.00e-006 -1.0 4.21e+000 - 1.00e+000 1.00e+000f 1\r2 1.8056300e+000 0.00e+000 3.26e-002 -1.7 1.18e-001 - 9.60e-001 1.00e+000f 1\r3 1.8000756e+000 4.44e-016 2.83e-008 -2.5 5.93e-002 - 1.00e+000 1.00e+000f 1\r4 1.8000000e+000 0.00e+000 1.50e-009 -3.8 7.60e-003 - 1.00e+000 1.00e+000f 1\r5 1.8000000e+000 0.00e+000 1.84e-011 -5.7 1.77e-004 - 1.00e+000 1.00e+000f 1\r6 1.8000000e+000 0.00e+000 2.51e-014 -8.6 9.82e-007 - 1.00e+000 1.00e+000f 1\rNumber of Iterations....: 6\ræœ€é©åŒ–ã®åå¾©ã”ã¨ã®çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n   åˆ— æ„å‘³     iter åå¾©å›æ•°   objective è©•ä¾¡é–¢æ•°   inf_pr åˆ¶ç´„é•åã®æœ€å¤§å€¤ï¼ˆç„¡é™å¤§ãƒãƒ«ãƒ ï¼‰   inf_du dual infeasibilityã®æœ€å¤§å€¤   lg(mu) ãƒãƒªã‚¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$\\mu$ã®å¸¸ç”¨å¯¾æ•°   ||d|| è§£ã®æ›´æ–°æ–¹å‘$| \\Delta x |$ã®æœ€å¤§å€¤   lg(rg)    alpha_du åŒå¯¾å¤‰æ•°$z$ã®ã‚¹ãƒ†ãƒƒãƒ—å¹…   alpha_pr ä¸»å¤‰æ•°$x$ã®ã‚¹ãƒ†ãƒƒãƒ—å¹…   ls ç›´ç·šæ¢ç´¢ã®ãƒãƒƒã‚¯ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°å›æ•°    dual infeasibilityã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚ä¸»åŒå¯¾å†…ç‚¹æ³•ã§ã¯ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°\n$$ L(\\bm{x}, \\bm{y}, \\bm{z}) = f(\\bm{x}) + \\bm{y}^{\\top} \\bm{g}(\\bm{x}) - \\bm{z}^{\\top} \\bm{x} $$\nã‚’å®šç¾©ã™ã‚‹ã€‚æœ€é©è§£ã«ãŠã„ã¦ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã®$\\bm{x}$ã«å¯¾ã™ã‚‹åå¾®åˆ†\n$$ \\nabla f(\\bm{x}) + \\bm{g}(\\bm{x}) + \\bm{y} - \\bm{z} $$\nã¯0ã¨ãªã‚‹ã€‚dual infeasibilityã¯ã“ã®åå¾®åˆ†ã®å€¤ã®å¤§ãã•ã§ã‚ã‚‹ã€‚\næœ€é©åŒ–ã®çµæœ  (scaled) (unscaled)\rObjective...............: 1.8000000000000000e+000 1.8000000000000000e+000\rDual infeasibility......: 2.5059035640133008e-014 2.5059035640133008e-014\rConstraint violation....: 0.0000000000000000e+000 0.0000000000000000e+000\rComplementarity.........: 2.5090647396970575e-009 2.5090647396970575e-009\rOverall NLP error.......: 2.5090647396970575e-009 2.5090647396970575e-009\ræœ€çµ‚çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚ä¸Šã‹ã‚‰é †ã«ã€è©•ä¾¡é–¢æ•°ã€Dual infeasibility, åˆ¶ç´„é•åé‡ã€ç›¸è£œæ€§æ¡ä»¶ã§ã‚ã‚‹ï¼ˆæœ€å¾Œã®Overall NLP errorã¯ã€Dual infeasibility, Constraint violation, Complementarityã®3ã¤ã®æœ€å¤§å€¤ã¨æ€ã‚ã‚Œã‚‹ãŒè©³ç´°ä¸æ˜ï¼‰ã€‚\nNumber of objective function evaluations = 7\rNumber of objective gradient evaluations = 7\rNumber of equality constraint evaluations = 7\rNumber of inequality constraint evaluations = 7\rNumber of equality constraint Jacobian evaluations = 7\rNumber of inequality constraint Jacobian evaluations = 7\rNumber of Lagrangian Hessian evaluations = 6\rTotal CPU secs in IPOPT (w/o function evaluations) = 0.004\rTotal CPU secs in NLP function evaluations = 0.000\ré–¢æ•°ãªã©ã®è©•ä¾¡å›æ•°ã€è¨ˆç®—æ™‚é–“ãªã©ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nçµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ æœ€å¾Œã«çµ‚äº†ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚ã‚ˆãè¡¨ç¤ºã•ã‚Œã‚‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n EXIT: Optimal Solution Found.: æœ€é©è§£ãŒå¾—ã‚‰ã‚ŒãŸã€‚ EXIT: Solved To Acceptable Level.: åæŸæ¡ä»¶ã¯æº€ãŸã•ãªã„ãŒè¨±å®¹ç¯„å›² (Acceptable) ã§ã‚ã‚‹ã€‚ EXIT: Converged to a point of local infeasibility. Problem may be infeasible.: åˆ¶ç´„æ¡ä»¶ã‚’æº€ãŸã™ã“ã¨ãŒã§ããªã„å±€æ‰€è§£ã«é™¥ã£ãŸã€‚ EXIT: Maximum Number of Iterations Exceeded.: è¨­å®šã•ã‚ŒãŸæœ€å¤§åå¾©å›æ•°ã«é”ã—ãŸã€‚ EXIT: Restoration Failed!: å®Ÿè¡Œä¸èƒ½é ˜åŸŸã‹ã‚‰å®Ÿè¡Œå¯èƒ½é ˜åŸŸã«æˆ»ã‚‹ã®ã«å¤±æ•—ã—ãŸã€‚ EXIT: Problem has too few degrees of freedom.: åˆ¶ç´„ã®æ•°ã«å¯¾ã—ã¦å¤‰æ•°ã®æ•°ãŒå°‘ãªã™ãã‚‹ï¼ˆè‡ªç”±åº¦ãŒå°‘ãªã„ï¼‰ã€‚  å‚è€ƒ ä»¥ä¸‹ã®è«–æ–‡ã‚’å‚è€ƒã«ã—ãŸã€‚\n Short Tutorial: Getting Started With Ipopt in 90 Minutes Introduction to Ipopt: A tutorial for downloading, installing, and using Ipopt On the Implementation of an Interior-Point Filter Line-Search Algorithm for Large-Scale Nonlinear Programming  ","description":"ä¸»åŒå¯¾å†…ç‚¹æ³•ã‚’ç”¨ã„ãŸéç·šå½¢æœ€é©åŒ–ã‚½ãƒ«ãƒIPOPTã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®èª­ã¿æ–¹ã‚’è§£èª¬ã™ã‚‹ã€‚","id":6,"section":"posts","tags":["Python","æœ€é©åŒ–"],"title":"éç·šå½¢æœ€é©åŒ–ã‚½ãƒ«ãƒIPOPTã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã®èª­ã¿æ–¹","uri":"https://helve-blog.com/posts/math/ipopt-output/"},{"content":"ã¯ã˜ã‚ã« è³‡æœ¬ä¸»ç¾©ã®è¦–ç‚¹ã‹ã‚‰ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒã®çµ¦æ–™ã®æ±ºã¾ã‚Šæ–¹ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ãŸã€‚\nå‚è€ƒã«ã—ãŸã®ã¯ã€æœ¨æš®å¤ªä¸€ã®ã€Œè¶…å…¥é–€ã€€è³‡æœ¬ä¸»ç¾©ã€ã§ã‚ã‚‹ã€‚ã‚¿ã‚¤ãƒˆãƒ«ã®é€šã‚Šã€ã‚«ãƒ¼ãƒ«ãƒ»ãƒãƒ«ã‚¯ã‚¹ã®ã€Œè³‡æœ¬è«–ã€ã®è§£èª¬æœ¬ã§ã‚ã‚‹ã€‚\nã“ã®æœ¬ã‚’èª­ã‚€å‰ã€ã€Œè³‡æœ¬è«–ã€ã¨ã„ãˆã°å…±ç”£ä¸»ç¾©ã‚’èª¬ã„ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒã£ã¦ã„ãŸãŒã€å®Ÿéš›ã¯è³‡æœ¬ä¸»ç¾©ã‚’è€ƒå¯Ÿãƒ»æ‰¹åˆ¤ã—ãŸæœ¬ã§ã‚ã£ãŸï¼ˆè¨€ã‚ã‚Œã¦ã¿ã‚Œã°ã€ã‚¿ã‚¤ãƒˆãƒ«ã«ã€Œè³‡æœ¬ã€ã¨å…¥ã£ã¦ã„ã‚‹ãŸã‚ã€å†…å®¹ã¯è³‡æœ¬ä¸»ç¾©ãŒä¸­å¿ƒã§ã‚ã‚ã†ï¼‰ã€‚\nã€Œè¶…å…¥é–€ã€€è³‡æœ¬è«–ã€ã¯ã€Œè³‡æœ¬è«–ã€ã‚’å¹³æ˜“ã«è§£èª¬ã—ãŸæœ¬ã§ã‚ã‚‹ã€‚\nè¶…å…¥é–€ã€€è³‡æœ¬è«–posted with ãƒ¨ãƒ¡ãƒ¬ãƒæœ¨æš® å¤ªä¸€ æ—¥æœ¬çµŒæ¸ˆæ–°èå‡ºç‰ˆç¤¾ 2017å¹´07æœˆ05æ—¥é ƒ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹æ¥½å¤©koboAmazonKindle æ—¥æœ¬ã«ãŠã‘ã‚‹çµ¦æ–™ã®æ±ºã¾ã‚Šæ–¹ ã€Œè³‡æœ¬è«–ã€ã§ã¯ã€ã‚‚ã®ã®å€¤æ®µã¯ä½¿ç”¨ä¾¡å€¤ï¼ˆä½¿ã†ãƒ¡ãƒªãƒƒãƒˆï¼‰ã§ã¯ãªãã€ä¾¡å€¤ï¼ˆåŠ´åŠ›ã®å¤§ãã•ï¼‰ã§æ±ºã¾ã‚‹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚ã‚‚ã¡ã‚ã‚“éœ€è¦ã¨ä¾›çµ¦ã‚‚å½±éŸ¿ã™ã‚‹ãŒã€ãã®å‰²åˆã¯å°‘ãªã„ã‚‚ã®ã ã¨ã„ã†ã€‚\nä¾¡å€¤ã§æ±ºã¾ã‚‹ã€Œå€¤æ®µã€ã«ã¯ã€åŠ´åƒè€…ã®çµ¦æ–™ã‚‚å«ã¾ã‚Œã‚‹ã€‚ã™ãªã‚ã¡ã€çµ¦æ–™ã®é¡ã¯ã€åŠ´åƒã‚’ç”Ÿã¿å‡ºã™ãŸã‚ã«å¿…è¦ãªã‚³ã‚¹ãƒˆï¼ˆé£Ÿè²»ã‚„ä½å±…è²»ã€å¨¯æ¥½è²»ãªã©ï¼‰ã‹ã‚‰æ±ºã¾ã‚‹ã®ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ç¤¾ä¼šå¹³å‡çš„ã«çµ¦æ–™ã¨æ”¯å‡ºã®é¡ã¯ã»ã¼ç­‰ã—ããªã‚Šã€ã»ã¨ã‚“ã©ã®å®¶åº­ãŒè²¯è“„ã‚’ã§ããªããªã‚‹â€¦ã¨ã„ã†ã®ãŒã€ãƒãƒ«ã‚¯ã‚¹ã®ä¸»å¼µã§ã‚ã‚‹ã€‚ãªãŠã€åŒ»è€…ã€å¼è­·å£«ãªã©ã®çµ¦æ–™ãŒé«˜ã„ã®ã¯ã€ãã®è·ã«å°±ãã¾ã§ã®ã‚³ã‚¹ãƒˆï¼ˆåŒ»å¸«å…è¨±ã®å–å¾—ãªã©ï¼‰ãŒåæ˜ ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚\nä¸Šè¨˜ã®ã‚ˆã†ãªçŠ¶æ³ãŒç¾åœ¨ã®æ—¥æœ¬ã§ã¯æˆã‚Šç«‹ã£ã¦ã„ã‚‹ã¨ã€ã€Œè¶…å…¥é–€ã€€è³‡æœ¬è«–ã€ã®è‘—è€…ã¯ä¸»å¼µã—ã¦ã„ã‚‹ã€‚ã™ãªã‚ã¡ã€é—‡é›²ã«æ˜‡çµ¦ã‚’ç›®æŒ‡ã—ã¦ã‚‚ã€æ˜‡çµ¦åˆ†ã ã‘ã‚¹ãƒˆãƒ¬ã‚¹ãŒå¤§ãããªã‚Šæ”¯å‡ºã‚‚å¢—ãˆã‚‹ã®ã§ã€ç”Ÿæ´»ã¯æ¥½ã«ãªã‚‰ãªã„ã®ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€ã‚¹ãƒˆãƒ¬ã‚¹ãŒå°‘ãªã„ã€ã™ãªã‚ã¡åŠ´åƒã‚’ç”Ÿã¿å‡ºã™ãŸã‚ã«å¿…è¦ãªã‚³ã‚¹ãƒˆãŒå°‘ãªã„ä»•äº‹ã‚’é¸ã‚“ã æ–¹ãŒã‚ˆã„ã¨ä¸»å¼µã—ã¦ã„ã‚‹ã€‚\nãƒ—ãƒ­ã‚°ãƒ©ãƒãŒç¨¼ããŸã‚ã®æ–¹æ³• ã€Œè³‡æœ¬è«–ã€ã®åˆ†æã«åŸºã¥ã„ã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒãŒçµ¦æ–™ã‚’å¢—ã‚„ã™ãŸã‚ã®æ–¹æ³•ã¨ã—ã¦æ¬¡ã®4ã¤ã‚’è€ƒãˆã¦ã¿ãŸã€‚\n ã‚¹ãƒˆãƒ¬ã‚¹ã®å°‘ãªã„åˆ†é‡ã‚’é¸ã¶ å­¦ä½ã‚’å–å¾—ã™ã‚‹ ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã«ãªã‚‹ å¤–è³‡ç³»ä¼æ¥­ã«å°±è·ã™ã‚‹  ä»¥ä¸‹ã§ãã‚Œãã‚Œè§£èª¬ã™ã‚‹ã€‚\nã‚¹ãƒˆãƒ¬ã‚¹ã®å°‘ãªã„åˆ†é‡ã‚’é¸ã¶ ã€Œè¶…å…¥é–€ã€€è³‡æœ¬è«–ã€ã®ä¸»å¼µã®ã¾ã¾ã§ã‚ã‚‹ãŒã€Webç³»ã‚„çµ„ã¿è¾¼ã¿ç³»ãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆ†é‡ã‹ã‚‰è‡ªåˆ†ã«ä¼šã†ã‚‚ã®ã‚’é¸ã³ã€ã‚¹ãƒˆãƒ¬ã‚¹ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã‚ã‚‹ã€‚\nå®Ÿéš›ã«çµ¦æ–™ãŒå¢—ãˆã‚‹è¨³ã§ã¯ãªã„ãŒã€å‡ºè²»ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã‚‹ãŸã‚ã€å®Ÿè³ªçš„ã«çµ¦æ–™ãŒå¢—ãˆã‚‹ã®ã¨åŒã˜ã§ã‚ã‚‹ã€‚\nãŸã¨ãˆã°ã€æ•°å­¦ãŒå¥½ãã§ã‚ã‚Œã°æ©Ÿæ¢°å­¦ç¿’ç³»ã‚’é¸ã‚“ã§ã‚‚è‰¯ã„ã ã‚ã†ã€‚ã¾ãŸã€ä½å±…ã®è¦³ç‚¹ã‹ã‚‰ã€éƒ½å¸‚éƒ¨ã«ä½ã¿ãŸã‘ã‚Œã°Webç³»ã«ã€åœ°æ–¹ã«ä½ã¿ãŸã‘ã‚Œã°çµ„ã¿è¾¼ã¿ç³»ï¼ˆãŠãã‚‰ãå·¥å ´ã«è¿‘ã„äº‹æ¥­æ‰€ã§åƒãã ã‚ã†ï¼‰ã«é€²ã‚€ã“ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã‚‹ã€‚\nå­¦ä½ã‚’å–å¾—ã™ã‚‹ ã€Œè³‡æœ¬è«–ã®æ¦‚è¦ã€ã§æ›¸ã„ãŸã‚ˆã†ã«ã€çµ¦æ–™ã«ã¯è·ã«å°±ãã¾ã§ã®ã‚³ã‚¹ãƒˆãŒåæ˜ ã•ã‚Œã‚‹ã€‚\nãã®ãŸã‚ã€å­¦ç”Ÿå‘ã‘ã®æ–¹æ³•ã§ã¯ã‚ã‚‹ãŒã€ç ”ç©¶ãŒè‹¦ã§ãªã‘ã‚Œã°ã€å¤§å’ã€ä¿®å£«å’ã€åšå£«å’ãªã©é«˜ã„å­¦ä½ã‚’å–å¾—ã™ã‚‹ã“ã¨ãŒã€é«˜çµ¦ã¸ã®é“ã¨ãªã‚‹ã€‚\nãƒ—ãƒ­ã‚°ãƒ©ãƒã¨ã„ã†æ¥­å‹™å†…å®¹ã¯åŒã˜ã§ã‚‚ã€å­¦ä½ã®å–å¾—ã«æ›ã‹ã£ãŸã‚³ã‚¹ãƒˆãŒçµ¦æ–™ã«åæ˜ ã•ã‚Œã‚‹è¨³ã§ã‚ã‚‹ã€‚\nãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã«ãªã‚‹ ä¼šç¤¾å“¡ã®ã¾ã¾ãƒ—ãƒ­ã‚°ãƒ©ãƒã¨ã—ã¦åƒãå ´åˆã€çµ¦æ–™ã«å¯¾ã—ã¦æˆæœã¯ã‚ã¾ã‚Šåæ˜ ã•ã‚Œãªã„ãŒã€ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã®å ´åˆã€æ¡ˆä»¶ãŒå—æ³¨ã§ãã‚Œã°ã€ãã®åˆ†ã ã‘åå…¥ã‚’å¢—ã‚„ã™ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã“ã§é‡è¦ãªã®ã¯ã€æ¡ˆä»¶ã«ã‚ˆã£ã¦ã€Œå€¤ã”ã‚æ„Ÿã€ã¯æ±ºã¾ã£ã¦ã„ã‚‹ã“ã¨ã§ã‚ã‚‹ã€‚ãŸã¨ãˆã°ã€Xãƒšãƒ¼ã‚¸ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆæ§‹ç¯‰ã§XXä¸‡å††ã€Xã‹æœˆã®ä½œæ¥­ã§XXä¸‡å††ã€ç­‰ã€…â€¦ã€‚ã™ãªã‚ã¡ã€é‡‘é¡ã«è¦‹åˆã£ãŸä½œæ¥­ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€ï¼ˆåŠ´åƒæ™‚é–“ãŒåŒã˜ã¨ã„ã†æ¡ä»¶ä¸‹ã§ã‚ã‚Œã°ï¼‰åå…¥ãŒä¼šç¤¾å“¡ã¨å¤‰ã‚ã‚‰ãªã„çµæœã«ãªã£ã¦ã—ã¾ã†ã€‚\nä¸€æ–¹ã§ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¯å†åˆ©ç”¨ãŒç°¡å˜ã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚‹ã€‚ãã®ãŸã‚ã€è‡ªåˆ†ãŒä»¥å‰ä½œæˆã—ãŸä»•æ§˜æ›¸ã‚„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å†åˆ©ç”¨ã§ãã‚‹æ¡ˆä»¶ã‚’å—æ³¨ã™ã‚‹ã“ã¨ã§ã€ç›¸å ´ã‚ˆã‚Šã‚‚ä½œæ¥­ã‚’æ¸›ã‚‰ã™ã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã€å¤šãã®æ¡ˆä»¶ã‚’å—æ³¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã™ãªã‚ã¡ã€æ™‚é–“ã‚ãŸã‚Šã®åå…¥ã‚’é«˜ãã™ã‚‹ã“ã¨ãŒå¯èƒ½ã¨ãªã‚‹ã€‚\nå¤–è³‡ç³»ä¼æ¥­ã«å°±è·ã™ã‚‹ æœ€åˆã«è¿°ã¹ãŸã€ã€Œçµ¦æ–™ãŒç”Ÿæ´»ã‚³ã‚¹ãƒˆã«ã‚ˆã£ã¦æ±ºã¾ã‚‹ã€ã®ã¯ä¸»ã«æ—¥æœ¬ä¼æ¥­ã®å ´åˆã§ã‚ã‚‹ã€‚åå¯¾ã«ã€å¤–è³‡ç³»ã§ã¯æˆæœãŒãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«çµ¦æ–™ã«å½±éŸ¿ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚\nå„ªç§€ãªäººã§ã‚ã‚Œã°ã€ãã®ã‚ˆã†ãªå¤–è³‡ç³»ä¼æ¥­ã«å°±è·ã—ãŸã»ã†ãŒçµ¦æ–™ã¯é«˜ããªã‚‹ã€‚\nã¾ã¨ã‚ ãƒ—ãƒ­ã‚°ãƒ©ãƒãŒçµ¦æ–™ã‚’å¢—ã‚„ã™4ã¤ã®æ–¹æ³•ã‚’è€ƒãˆã¦ã¿ãŸã€‚\n ã‚¹ãƒˆãƒ¬ã‚¹ã®å°‘ãªã„åˆ†é‡ã‚’é¸ã¶ å­¦ä½ã‚’å–å¾—ã™ã‚‹ ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã«ãªã‚‹ å¤–è³‡ç³»ä¼æ¥­ã«å°±è·ã™ã‚‹  ã€Œè¶…å…¥é–€ã€€è³‡æœ¬è«–ã€ã§ã¯ã€  ç¤¾ä¼šå…¨ä½“ã®ç”Ÿç”£æ€§ãŒä¸ŠãŒã£ã¦ã‚‚ã€ãªãœåŠ´åƒæ™‚é–“ã¯æ¸›ã‚‰ãªã„ã®ã‹ï¼Ÿ è‡ªåˆ†ã®ã€Œå•†å“ä¾¡å€¤ã€ã‚’ä¸Šã’ã‚‹ã«ã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã®ã‹ï¼Ÿ  ã¨ã„ã†ç–‘å•ã«å¯¾ã—ã€è³‡æœ¬ä¸»ç¾©ã®è¦–ç‚¹ã‹ã‚‰ç­”ãˆã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚æ–‡ç« ãŒå¹³æ˜“ã§ã‚ã‚Šã€çµŒæ¸ˆåˆ†é‡ã«æ˜ã‚‹ããªã„äººã§ã‚‚èª­ã¿ã‚„ã™ãã€ã‚ªã‚¹ã‚¹ãƒ¡ã§ã‚ã‚‹ã€‚\nï¼ˆå˜è¡Œæœ¬ç‰ˆã¨æ–‡åº«æœ¬ç‰ˆãŒã‚ã‚Šã€ã•ã‚‰ã«ãã‚Œãã‚Œé›»å­ç‰ˆã®å…¨4ç¨®é¡ãŒã‚ã‚‹ã‚ˆã†ãªã®ã§ã€è³¼å…¥æ™‚ã«ã¯æ³¨æ„ã•ã‚ŒãŸã„ï¼‰\nè¶…å…¥é–€ã€€è³‡æœ¬è«–posted with ãƒ¨ãƒ¡ãƒ¬ãƒæœ¨æš® å¤ªä¸€ æ—¥æœ¬çµŒæ¸ˆæ–°èå‡ºç‰ˆç¤¾ 2017å¹´07æœˆ05æ—¥é ƒ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹æ¥½å¤©koboAmazonKindle ","description":"è³‡æœ¬ä¸»ç¾©ã®è¦–ç‚¹ã‹ã‚‰ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒã®çµ¦æ–™ã®æ±ºã¾ã‚Šæ–¹ã«ã¤ã„ã¦è€ƒãˆã¦ã¿ãŸã€‚","id":7,"section":"posts","tags":["èª­æ›¸"],"title":"è³‡æœ¬ä¸»ç¾©ã®è¦–ç‚¹ã‹ã‚‰è€ƒãˆã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒã®çµ¦æ–™","uri":"https://helve-blog.com/posts/diary/capitalism-programmer-salary/"},{"content":"ã¯ã˜ã‚ã« ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«Sphinxã‚’ä½¿ã£ã¦ã€Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ã‚¯ãƒ©ã‚¹ã‚„é–¢æ•°ã®docstringã‹ã‚‰HTMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\nãŠãŠã¾ã‹ãªæ‰‹é †ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®docstringã«ã€ã‚¯ãƒ©ã‚¹ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã®èª¬æ˜ã‚’æ›¸ã Sphinxã§reStructuredText (reST) å½¢å¼ã®ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ Sphinxã§HTMLå½¢å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆï¼ˆãƒ“ãƒ«ãƒ‰ï¼‰ã™ã‚‹  reSTã¯ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—è¨€èªã®ä¸€ç¨®ã§ã‚ã‚‹ã€‚\nç’°å¢ƒ OSã¯Windows 10ã¨ã—ãŸã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.8.5   Sphinx 3.2.1    ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« condaã¾ãŸã¯pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚\n1  conda install sphinx   1  pip install sphinx   ã¾ãŸã€Sphinxã«ã¯æ¨™æº–ã§10å€‹ã®HTMLãƒ†ãƒ¼ãƒãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ï¼ˆä»¥ä¸‹ãƒªãƒ³ã‚¯å‚ç…§ï¼‰ã€‚\nHTML Theming â€” Sphinx documentation\nãƒ†ãƒ¼ãƒã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã€‚ä¾‹ãˆã°ã€Jupyter Notebookã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ†ãƒ¼ãƒsphinx_rtd_theme (Read the Docs) ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  conda install sphinx_rtd_theme   ã‚‚ã¡ã‚ã‚“ã€pip install sphinx_rtd_themeã§ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½ã€‚\nJupyter Notebook documentation\nPythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨æ„ã™ã‚‹ ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ç”¨æ„ã—ã€main.py, sub.pyã¨ã„ã†2ã¤ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\nproject/ â””â”€â”€ src/ â”œâ”€â”€ main.py â””â”€â”€ sub.py å„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®docstringã«ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã‚¯ãƒ©ã‚¹ã€é–¢æ•°ã®èª¬æ˜ã‚’è¨˜è¿°ã™ã‚‹ã€‚\ndocstringã®è¨˜è¿°æ–¹æ³•ã¯ã€ä»¥ä¸‹ã®3ã¤ãŒã‚ã‚‹ã€‚\n reStructuredTextã‚¹ã‚¿ã‚¤ãƒ« Googleã‚¹ã‚¿ã‚¤ãƒ« NumPyã‚¹ã‚¿ã‚¤ãƒ«  Googleã‚¹ã‚¿ã‚¤ãƒ«ã‚„NumPyã‚¹ã‚¿ã‚¤ãƒ«ã§è¨˜è¿°ã™ã‚‹å ´åˆã¯ã€Sphinxã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ãã«æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ã€‚\nã“ã“ã§ã¯Googleã‚¹ã‚¿ã‚¤ãƒ«ã¨ã™ã‚‹ã€‚ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä¸­èº«ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49  \u0026#34;\u0026#34;\u0026#34;Module summary. This is main.py. \u0026#34;\u0026#34;\u0026#34; class MyClass: \u0026#34;\u0026#34;\u0026#34;Summary line. This is MyClass. \u0026#34;\u0026#34;\u0026#34; def sum_test(self, x, y): \u0026#34;\u0026#34;\u0026#34;sum 2 values. Args: x (float): 1st argument y (float): 2nd argument Returns: float: summation Examples: é–¢æ•°ã®ä½¿ã„æ–¹ \u0026gt;\u0026gt;\u0026gt; print(sum_test(3.2, 5.3)) 8.5 \u0026#34;\u0026#34;\u0026#34; return x + y class MyClass2: \u0026#34;\u0026#34;\u0026#34;Summary line. This is MyClass2. \u0026#34;\u0026#34;\u0026#34; def sum_test2(self, x, y): \u0026#34;\u0026#34;\u0026#34;sum 2 values. Args: x (float): 1st argument y (float): 2nd argument Returns: float: summation Examples: é–¢æ•°ã®ä½¿ã„æ–¹ \u0026gt;\u0026gt;\u0026gt; print(sum_test2(3.2, 5.3)) 8.5 \u0026#34;\u0026#34;\u0026#34; return x + y   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  \u0026#34;\u0026#34;\u0026#34;Module summary. This is sub.py. \u0026#34;\u0026#34;\u0026#34; class MyClass2: \u0026#34;\u0026#34;\u0026#34;Summary line. This is MyClass2. \u0026#34;\u0026#34;\u0026#34; def sum_test2(self, x, y): \u0026#34;\u0026#34;\u0026#34;sum 2 values. Args: x (float): 1st argument y (float): 2nd argument Returns: float: summation Examples: é–¢æ•°ã®ä½¿ã„æ–¹ \u0026gt;\u0026gt;\u0026gt; print(sum_test2(3.2, 5.3)) 8.5 \u0026#34;\u0026#34;\u0026#34; return x + y   reSTãƒ•ã‚¡ã‚¤ãƒ«ã®ç”Ÿæˆ ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’projectãƒ•ã‚©ãƒ«ãƒ€ã¨ã—ã¦ã€sphinx-apidocã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€reSTãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã€‚\n1  sphinx-apidoc [OPTIONS] -o \u0026lt;OUTPUT_PATH\u0026gt; \u0026lt;MODULE_PATH\u0026gt;   \u0026lt;MODULE_PATH\u0026gt;ã¯Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã§ã‚ã‚‹ã€‚\nä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚ªãƒ—ã‚·ãƒ§ãƒ³ æ„å‘³     -F Sphinxãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’fullã§ç”Ÿæˆã™ã‚‹   -H ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’æŒ‡å®š   -A è‘—è€…ã‚’æŒ‡å®š   -V ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®š   -o å‡ºåŠ›å…ˆã‚’æŒ‡å®š    ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚\nsphinx-apidoc â€” Sphinx documentation\nã“ã“ã§ã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  sphinx-apidoc -F -H project -A Helve -V v1.0 -o docs src   å®Ÿè¡Œã™ã‚‹ã¨ã€projectãƒ•ã‚©ãƒ«ãƒ€ã®ä¸‹ã«docsãƒ•ã‚©ãƒ«ãƒ€ãŒä½œæˆã•ã‚Œã€ã•ã‚‰ã«ãã®ä¸‹ã«3å€‹ã®ç©ºãƒ•ã‚©ãƒ«ãƒ€ã¨6å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚\nproject/ â”œâ”€â”€ src/ â”‚ â”œâ”€â”€ main.py â”‚ â””â”€â”€ sub.py â””â”€â”€ docs/ â”œâ”€â”€ _build/ â”œâ”€â”€ _static/ â”œâ”€â”€ _templates/ â”œâ”€â”€ conf.py â”œâ”€â”€ index.rst â”œâ”€â”€ main.rst â”œâ”€â”€ make.bat â”œâ”€â”€ Makefile â””â”€â”€ sub.rst conf.pyã®ç·¨é›† ç”Ÿæˆã•ã‚ŒãŸconf.pyã‚’é–‹ãã€2ç®‡æ‰€ç·¨é›†ã™ã‚‹ã€‚\nã¾ãšã€ä»¥ä¸‹ã®3è¡Œã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã™ã€‚\n1 2 3  import os import sys sys.path.insert(0, \u0026#39;ï¼ˆç•¥ï¼‰\\\\project\\\\src\u0026#39;)   æ¬¡ã«ã€æ‹¡å¼µæ©Ÿèƒ½ (extensions) ã«'sphinx.ext.napoleon'ã‚’è¿½åŠ ã™ã‚‹ã€‚ã“ã‚Œã¯ã€Googleã‚¹ã‚¿ã‚¤ãƒ«ã‚„Numpyã‚¹ã‚¿ã‚¤ãƒ«ã§docstringã‚’è¨˜è¿°ã—ãŸå ´åˆã«å¿…è¦ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6  extensions = [ \u0026#39;sphinx.ext.autodoc\u0026#39;, \u0026#39;sphinx.ext.viewcode\u0026#39;, \u0026#39;sphinx.ext.todo\u0026#39;, \u0026#39;sphinx.ext.napoleon\u0026#39; ]   ã¡ãªã¿ã«ã€HTMLã®ãƒ†ãƒ¼ãƒã‚’å¤‰æ›´ã—ãŸã„å ´åˆã¯ã€html_themeã‚’å¤‰æ›´ã™ã‚‹ã€‚\n1  html_theme = \u0026#39;alabaster\u0026#39;   HTMLå½¢å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆ HTMLå½¢å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ã€sphinx-buildã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯projectãƒ•ã‚©ãƒ«ãƒ€ã®ã¾ã¾ã¨ã™ã‚‹ï¼‰ã€‚\n1  sphinx-build [options] \u0026lt;sourcedir\u0026gt; \u0026lt;outputdir\u0026gt; [filenames ...]   \u0026lt;sourcedir\u0026gt;ã¯conf.pyãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã§ã‚ã‚‹ï¼ˆä»Šå›ã¯docsï¼‰ã€‚\n\u0026lt;outputdir\u0026gt;ã¯HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®å‡ºåŠ›å…ˆã§ã‚ã‚‹ã€‚ã©ã“ã§ã‚‚è‰¯ã„ãŒã€ä»Šå›ã¯è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸdocs/_buildãƒ•ã‚©ãƒ«ãƒ€ã¨ã™ã‚‹ã€‚\nã‚ˆã£ã¦ã€ã“ã“ã§ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  sphinx-build docs docs/_build   å®Ÿè¡Œã™ã‚‹ã¨çµæœãŒ20è¡Œç¨‹åº¦ã«æ¸¡ã£ã¦è¡¨ç¤ºã•ã‚Œã‚‹ãŒã€build succeeded.ã¨è¡¨ç¤ºã•ã‚ŒãŸã‚‰æˆåŠŸã§ã‚ã‚‹ã€‚\nç”Ÿæˆã•ã‚ŒãŸHTMLãƒ•ã‚¡ã‚¤ãƒ« docs/_buildãƒ•ã‚©ãƒ«ãƒ€ã«HTMLãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã€‚\nindex.htmlã¯ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã§ã‚ã‚Šã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nå€‹åˆ¥ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€åŒã˜åå‰ã®HTMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ãªã‚‹(ä»¥ä¸‹ã¯main.html)ã€‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã€ã‚¯ãƒ©ã‚¹ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®èª¬æ˜ãŒæ•´å½¢ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚\nå‚è€ƒ  Sphinxã®ä½¿ã„æ–¹ï¼docstringã‚’èª­ã¿è¾¼ã‚“ã§ä»•æ§˜æ›¸ã‚’ç”Ÿæˆ - Qiita sphinxå…¥é–€ ãã®1 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è‡ªå‹•ç”Ÿæˆ Pythonå­¦ç¿’è¬›åº§ Googleã‚¹ã‚¿ã‚¤ãƒ«ã®Python Docstringã®å…¥é–€ - Qiita  ","description":"ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«Sphinxã‚’ä½¿ã£ã¦ã€Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ã‚¯ãƒ©ã‚¹ã‚„é–¢æ•°ã®docstringã‹ã‚‰HTMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚","id":8,"section":"posts","tags":["Sphinx"],"title":"Sphinxã§Python docstringã‹ã‚‰ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹","uri":"https://helve-blog.com/posts/python/sphinx-documentation/"},{"content":"ã¯ã˜ã‚ã« ä¸»è¦ãªæ—¥æœ¬ãƒ¡ãƒ¼ã‚«ï¼ˆé›»æ©Ÿãƒ»æ©Ÿæ¢°ãƒ»è‡ªå‹•è»Šï¼‰15ç¤¾ã®æŠ€å ±ã¸ã®ãƒªãƒ³ã‚¯ã‚’ã¾ã¨ã‚ãŸã€‚\nç°¡å˜ãªç´¹ä»‹ã¨ã€å…¬é–‹é–‹å§‹å¹´åº¦ã€æ›´æ–°é »åº¦ã‚‚ä½µã›ã¦ç¤ºã™ã€‚ãŸã ã—ã€ã€Œå…¬é–‹é–‹å§‹å¹´åº¦ã€ã¯èª¿æŸ»æ™‚ç¾åœ¨ã§Webã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªæœ€ã‚‚å¤ã„è³‡æ–™ã®å¹´åº¦ã§ã‚ã‚Šã€å‰µåˆŠå¹´åº¦ã‚„ã‚¦ã‚§ãƒ–å…¬é–‹é–‹å§‹å¹´åº¦ã§ã¯ãªã„ã“ã¨ã«æ³¨æ„ã•ã‚ŒãŸã„ã€‚\næœ¬è¨˜äº‹ã®æƒ…å ±ã¯2021å¹´3æœˆ28æ—¥ç¾åœ¨ã®ã‚‚ã®ã§ã‚ã‚‹ã€‚\né›»æ°—æ©Ÿå™¨ æ±èŠ è£½å“ç´¹ä»‹ã¨ä¸€èˆ¬è«–æ–‡ã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã€‚æ›´æ–°é »åº¦ã¯å¹´6å›ã¨ã‹ãªã‚Šé«˜ã„ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š1995å¹´ æ›´æ–°é »åº¦ï¼š6å›/å¹´ ãƒªãƒ³ã‚¯ï¼šæ±èŠãƒ¬ãƒ“ãƒ¥ãƒ¼  æ—¥æœ¬é›»æ°—(NEC) é–‹ç™ºã—ãŸã‚·ã‚¹ãƒ†ãƒ ã®ç´¹ä»‹ãŒãƒ¡ã‚¤ãƒ³ã€‚è¿‘å¹´ã¯AIã‚’æ´»ç”¨ã—ãŸã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚å¤šã„ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2004å¹´ æ›´æ–°é »åº¦ï¼š1ï½3å›/å¹´ ãƒªãƒ³ã‚¯ï¼šNECæŠ€å ±  ãƒ‘ãƒŠã‚½ãƒ‹ãƒƒã‚¯ ã‚·ã‚¹ãƒ†ãƒ ã‚„è£½é€ æŠ€è¡“ãªã©ã€å¹…åºƒã„æŠ€è¡“ã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2009å¹´ æ›´æ–°é »åº¦ï¼š2å›/å¹´ï¼ˆ5, 11æœˆï¼‰ ãƒªãƒ³ã‚¯ï¼šãƒ‘ãƒŠã‚½ãƒ‹ãƒƒã‚¯æŠ€å ±  æ—¥ç«‹è£½ä½œæ‰€ ã‚·ã‚¹ãƒ†ãƒ ã®ç´¹ä»‹ãŒãƒ¡ã‚¤ãƒ³ã€‚çµŒå–¶å±¤ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚„å¤§å­¦é–¢ä¿‚è€…ã®ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚‚ã‚ã‚Šã€ã‹ãªã‚ŠåŠ›ã‚’å…¥ã‚Œã¦ã„ã‚‹å°è±¡ãŒã‚ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š1950å¹´ æ›´æ–°é »åº¦ï¼š6å›/å¹´ ãƒªãƒ³ã‚¯ï¼šæ—¥ç«‹è©•è«–  å¯Œå£«é›»æ©Ÿ è£½å“ã¨è¦ç´ æŠ€è¡“ã®ç´¹ä»‹ãŒåŠã€…ç¨‹åº¦ã€‚ç”Ÿæ´»ã«èº«è¿‘ãªè£½å“ã«é–¢ã™ã‚‹æŠ€å ±ã‚‚å¤šã„ã€‚1924å¹´ã®å‰µåˆŠã‹ã‚‰ã®è¨˜äº‹ã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š1924å¹´ æ›´æ–°é »åº¦ï¼š4å›/å¹´ ãƒªãƒ³ã‚¯ï¼šå¯Œå£«é›»æ©ŸæŠ€å ±  ä¸‰è±é›»æ©Ÿ è«–æ–‡å½¢å¼ã®è¨˜äº‹ãŒå¤šã„ã€‚æ¯æœˆã€åˆ†é‡ã”ã¨ã®ç‰¹é›†ã‚’çµ„ã‚“ã§å…¬é–‹ã—ã¦ã„ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š1996å¹´ æ›´æ–°é »åº¦ï¼š12å›/å¹´ï¼ˆæ¯æœˆï¼‰ ãƒªãƒ³ã‚¯ï¼šä¸‰è±é›»æ©ŸæŠ€å ±  æ¨ªæ²³é›»æ©Ÿ ãƒ—ãƒ©ãƒ³ãƒˆã®è¨ˆè£…ã«é–¢ã™ã‚‹è¨˜äº‹ãŒãƒ¡ã‚¤ãƒ³ã€‚AIã®æ´»ç”¨äº‹ä¾‹ã‚‚ã‚ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š1997å¹´ æ›´æ–°é »åº¦ï¼š2å›/å¹´ ãƒªãƒ³ã‚¯ï¼šæ¨ªæ²³æŠ€å ±  æ©Ÿæ¢° IHI å¹´4å›ã€èˆªç©ºã‚„ç™ºé›»ãªã©ã®åˆ†é‡ã”ã¨ã«ç‰¹é›†ã‚’çµ„ã‚“ã§å…¬é–‹ã—ã¦ã„ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2007å¹´ æ›´æ–°é »åº¦ï¼š4å›/å¹´ ãƒªãƒ³ã‚¯ï¼šIHIæŠ€å ±ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼  å·å´é‡å·¥æ¥­ å¹´1å›ã€èˆªç©ºã‚„ç™ºé›»ã€ãƒã‚¤ã‚¯ãªã©ã®åˆ†é‡ã”ã¨ã«ç‰¹é›†ã‚’çµ„ã‚“ã§å…¬é–‹ã—ã¦ã„ã‚‹ã€‚ç‰¹è¨±ç´¹ä»‹ãŒã‚ã‚‹ã®ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2012å¹´ æ›´æ–°é »åº¦ï¼š1å›/å¹´ ãƒªãƒ³ã‚¯ï¼šå·å´é‡å·¥æŠ€å ±  ä½å‹é‡æ©Ÿæ¢°å·¥æ¥­ è¦ç´ æŠ€è¡“ã¨è£½å“ã®ç´¹ä»‹ãŒåŠã€…ç¨‹åº¦ã€‚è£½å“ã¯å»ºè¨­æ©Ÿæ¢°ã‚„èˆ¹ãªã©ã€‚æŠ€å ±ãŒå·ã”ã¨ã«1ã¤ã®PDFãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã¾ã£ã¦ãŠã‚Šã€PDFã‚’é–‹ã‹ãªã„ã¨ç›®æ¬¡ãŒè¦‹ã‚Œãªã„ã®ã¯å°‘ã—ä¸ä¾¿ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2001å¹´ æ›´æ–°é »åº¦ï¼š3å›ç¨‹åº¦/å¹´ ãƒªãƒ³ã‚¯ï¼šä½å‹é‡æ©Ÿæ¢°æŠ€å ±  ä¸‰è±é‡å·¥æ¥­ å¹´4å›ã€è£½å“åˆ†é‡ã”ã¨ã«ç‰¹é›†ã‚’çµ„ã‚“ã§å…¬é–‹ã—ã¦ã„ã‚‹ã€‚è£½å“ç´¹ä»‹ã‚ˆã‚Šã‚‚æŠ€è¡“è«–æ–‡ãŒã‚„ã‚„å¤šã„å°è±¡ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2003å¹´ æ›´æ–°é »åº¦ï¼š4å›/å¹´ ãƒªãƒ³ã‚¯ï¼šä¸‰è±é‡å·¥æŠ€å ±  è‡ªå‹•è»Š ãƒ‡ãƒ³ã‚½ãƒ¼ è‡ªå‹•é‹è»¢ã‚„ç©ºèª¿ãªã©ã€è‡ªå‹•è»Šã«é–¢ã™ã‚‹æ§˜ã€…ãªã‚¨ãƒ¬ã‚¯ãƒˆãƒ­ãƒ‹ã‚¯ã‚¹æŠ€è¡“ã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š1996å¹´ æ›´æ–°é »åº¦ï¼š1å›/å¹´ ãƒªãƒ³ã‚¯ï¼šãƒ‡ãƒ³ã‚½ãƒ¼ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ãƒ¬ãƒ“ãƒ¥ãƒ¼  æ—¥ç”£  å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2012å¹´ æ›´æ–°é »åº¦ï¼š1ï½2å›/å¹´ ãƒªãƒ³ã‚¯ï¼š  è±Šç”°è‡ªå‹•ç¹”æ©Ÿ æ–°å‹è»Šã®é–‹ç™ºã€ãƒ¢ãƒ¼ã‚¿ã€ã‚¨ãƒ³ã‚¸ãƒ³ã€é‡‘å±åŠ å·¥ãªã©ã®æŠ€è¡“ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š2018å¹´ æ›´æ–°é »åº¦ï¼š1å›/å¹´ ãƒªãƒ³ã‚¯ï¼šè±Šç”°è‡ªå‹•ç¹”æ©ŸæŠ€å ±  ãƒãƒ„ãƒ€ æ–°å‹è»Šã®é–‹ç™ºã€ã‚¨ãƒ³ã‚¸ãƒ³ãªã©ã®æŠ€è¡“ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ã€‚ãƒ–ãƒ¬ãƒ¼ã‚­ãƒ•ã‚£ãƒ¼ãƒ«ã€ãƒ‰ã‚¢ã®é™ç²›æ€§ãªã©ã€ä»–ç¤¾ãŒå…¬é–‹ã—ã¦ã„ãªã„ã¨æ€ã‚ã‚Œã‚‹æŠ€è¡“ã‚‚ã‚ã‚‹ã€‚\n å…¬é–‹é–‹å§‹å¹´åº¦ï¼š1983å¹´ æ›´æ–°é »åº¦ï¼š1å›/å¹´ ãƒªãƒ³ã‚¯ï¼šãƒãƒ„ãƒ€æŠ€å ±  é›‘æ„Ÿ æŠ€å ±ã‚’å…¬é–‹ã—ã¦ã„ãªã„è‡ªå‹•è»Šãƒ¡ãƒ¼ã‚«ãŒæ„å¤–ã¨å¤šã‹ã£ãŸã€‚ä¸€æ–¹ã§ã€é›»æ°—æ©Ÿå™¨ãƒ¡ãƒ¼ã‚«ã§ã¯æŠ€å ±ã®ç™ºè¡Œé »åº¦ãŒé«˜ã„ã€‚ã¾ãŸã€è¨˜äº‹ã§ã¯æ‰±ã‚ãªã‹ã£ãŸãŒITä¼æ¥­ã§ã¯ãƒ–ãƒ­ã‚°ã‚’ä½¿ã£ã¦é«˜é »åº¦ã«æƒ…å ±ã‚’ç™ºä¿¡ã—ã¦ãŠã‚Šã€æƒ…å ±ã‚’ã©ã®ç¨‹åº¦ã‚ªãƒ¼ãƒ—ãƒ³ã«ã™ã‚‹ã®ã‹ã€æ¥­ç•Œã«ã‚ˆã‚‹æ–‡åŒ–ã®é•ã„ãŒå¤§ãã„ã®ã‹ã‚‚ã—ã‚Œãªã„ã€‚\n","description":"ä¸»è¦ãªæ—¥æœ¬ãƒ¡ãƒ¼ã‚«ï¼ˆé›»æ©Ÿãƒ»æ©Ÿæ¢°ãƒ»è‡ªå‹•è»Šï¼‰15ç¤¾ã®æŠ€å ±ã¸ã®ãƒªãƒ³ã‚¯ã‚’ã¾ã¨ã‚ãŸã€‚","id":9,"section":"posts","tags":["æŠ€å ±"],"title":"ä¸»è¦ãªæ—¥æœ¬ãƒ¡ãƒ¼ã‚«ï¼ˆé›»æ©Ÿãƒ»æ©Ÿæ¢°ãƒ»è‡ªå‹•è»Šï¼‰ã®æŠ€å ±ãƒªãƒ³ã‚¯ã¾ã¨ã‚","uri":"https://helve-blog.com/posts/diary/japan-maker-technical-report/"},{"content":"ã¯ã˜ã‚ã« CasADiã¯è‡ªå‹•å¾®åˆ†ã¨éç·šå½¢æœ€é©åŒ–ã®ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚C++ã§å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€C++, Python, Matlab, Octaveã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å‚™ãˆã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯Pythonã‚’ä½¿ã„ã€CasADiã§å¸¸å¾®åˆ†æ–¹ç¨‹å¼ã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nä¾‹ã¨ã—ã¦ç¤ºã™å•é¡Œã¯ä»¥ä¸‹ã®2ã¤ã§ã‚ã‚‹ã€‚\n 1éšå¸¸å¾®åˆ†æ–¹ç¨‹å¼ é€£ç«‹1éšå¸¸å¾®åˆ†æ–¹ç¨‹å¼  ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.8.5   NumPy 1.19.2   CasADi 3.5.5   Matplotlib 3.3.2    CasADiã¯pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚\npip install casadi\rã¾ãŸã€æœ¬è¨˜äº‹ã§ã¯ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3  import numpy as np import casadi as ca import matplotlib.pyplot as plt   1éšå¸¸å¾®åˆ†æ–¹ç¨‹å¼ å¯¾è±¡ã¨ã™ã‚‹å•é¡Œ æ¬¡å¼ã®1éšã®å¸¸å¾®åˆ†æ–¹ç¨‹å¼ã‚’è€ƒãˆã‚‹ã€‚\n$$ x' = -x + 2 $$\nãŸã ã—ã€ç‹¬ç«‹å¤‰æ•°ã‚’æ™‚é–“$t$ã¨ã—ã€æœªçŸ¥é–¢æ•°$x(t)$ã¨ã™ã‚‹ã€‚ã“ã®æ–¹ç¨‹å¼ã®ä¸€èˆ¬è§£ã¯ä»¥ä¸‹ã¨ãªã‚‹ï¼ˆ$c$ã¯å®šæ•°ï¼‰ã€‚\n$$ x(t) = 2 + ce^{-t} $$\nã¾ãŸã€åˆæœŸæ¡ä»¶ã‚’$x(0)=0$ã¨ãŠãã¨$c=-2$ã§ã‚ã‚‹ã‹ã‚‰ã€åˆæœŸå€¤å•é¡Œã®è§£ã¯ä»¥ä¸‹ã¨ãªã‚‹ã€‚\n$$ x(t) = 2 - 2 e^{-t} $$\nã“ã®å•é¡Œã‚’CasADiã§è§£ãã€‚ç°¡å˜ã®ãŸã‚ã€ä»¥ä¸‹ã®2æ®µéšã«åˆ†ã‘ã¦èª¬æ˜ã™ã‚‹ã€‚\n ã‚ã‚‹æœ€çµ‚æ™‚åˆ»ã«ãŠã‘ã‚‹è§£ã‚’æ±‚ã‚ã‚‹ ã‚ã‚‹æ™‚é–“ç¯„å›²ã®è§£ã®æ¨ç§»ã‚’æ±‚ã‚ã‚‹  æœ€çµ‚æ™‚åˆ»ã®è§£ã‚’å¾—ã‚‹ æ™‚é–“ã®ç¯„å›²ã‚’0ï½10[s]ã¨ã—ã€åˆæœŸå€¤$x(0)=0$ã‚’ä¸ãˆãŸã¨ãã®ã€$t=10$ã«ãŠã‘ã‚‹è§£ã‚’æ±‚ã‚ã‚‹ã€‚\nã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  x = ca.MX.sym(\u0026#34;x\u0026#34;) # æœªçŸ¥é–¢æ•° rhs = -x + 2 # å¾®åˆ†æ–¹ç¨‹å¼ã®å³è¾º ode = {\u0026#39;x\u0026#39;: x, \u0026#39;ode\u0026#39;: rhs} opts = {\u0026#39;t0\u0026#39;:0, # åˆæœŸæ™‚åˆ» \u0026#39;tf\u0026#39;:10} # æœ€çµ‚æ™‚åˆ» F = ca.integrator(\u0026#39;F\u0026#39;, \u0026#39;cvodes\u0026#39;, ode, opts) res = F(x0=[0]) # åˆæœŸå€¤ã‚’æŒ‡å®šã—ã¦è§£ã print(res[\u0026#39;xf\u0026#39;]) # æœ€çµ‚æ™‚åˆ»ã®è§£   å®Ÿè¡Œçµæœ\n1  1.9999   ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã™ã‚‹ã€‚\nrhsã¯å¾®åˆ†æ–¹ç¨‹å¼ã®å³è¾º(right hand side)ã®ç•¥ã§ã‚ã‚‹ã€‚\nca.integratorã«ã¯ä»¥ä¸‹ã‚’é †ã«æŒ‡å®šã™ã‚‹ã€‚\n æ–¹ç¨‹å¼ã®åå‰ å¾®åˆ†æ–¹ç¨‹å¼ã®ã‚½ãƒ«ãƒ å¾®åˆ†æ–¹ç¨‹å¼ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆåˆæœŸæ™‚åˆ»ã€æœ€çµ‚æ™‚åˆ»ï¼‰  æ™‚åˆ»æ¨ç§»ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ è§£ã®æ™‚åˆ»æ¨ç§»ã‚’å¾—ã‚‹ã«ã¯ã€å–å¾—ã—ãŸã„æ™‚åˆ»ã”ã¨ã«å¾®åˆ†æ–¹ç¨‹å¼ã‚’è§£ãã€æœ€çµ‚æ™‚åˆ»ã®è§£ã‚’æ¬¡ã®æ™‚åˆ»ã®åˆæœŸå€¤ã¨ã™ã‚‹ã€‚\nä¾‹ãˆã°ã€0ï½10[s]ã®ç¯„å›²ã§0.1[s]å‘¨æœŸã§è§£ã‚’å¾—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«foræ–‡ã§å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  dt = 0.1 # ã‚µãƒ³ãƒ—ãƒ«å‘¨æœŸ times = np.arange(0, 10+dt, dt) x_history = [0] # xã®æ™‚åˆ»æ­´ãƒ‡ãƒ¼ã‚¿ x = ca.MX.sym(\u0026#34;x\u0026#34;) # æœªçŸ¥é–¢æ•° rhs = -x + 2 # å¾®åˆ†æ–¹ç¨‹å¼ã®å³è¾º ode = {\u0026#39;x\u0026#39;: x, \u0026#39;ode\u0026#39;: rhs} opts = {\u0026#39;t0\u0026#39;:0, \u0026#39;tf\u0026#39;:dt} F = ca.integrator(\u0026#39;F\u0026#39;, \u0026#39;cvodes\u0026#39;, ode, opts) for t in times[:-1]: res = F(x0=x_history[-1]) x_history += res[\u0026#39;xf\u0026#39;].toarray().tolist()[0] fig, ax = plt.subplots() ax.plot(times, x_history) ax.set_xlabel(\u0026#39;t\u0026#39;) ax.set_ylabel(\u0026#39;x\u0026#39;) ax.grid() plt.show()   å®Ÿè¡Œçµæœ\né€£ç«‹1éšå¸¸å¾®åˆ†æ–¹ç¨‹å¼ 2å€‹ã®æœªçŸ¥é–¢æ•°$x_0(t), x_1(t)$ã«é–¢ã™ã‚‹1éšã®é€£ç«‹å¸¸å¾®åˆ†æ–¹ç¨‹å¼\n$$ \\begin{cases} x_0' = x_0 - 2 x_1 \\\\ x_1' = 2 x_0 - 1.5 x_1 \\end{cases} $$\nã‚’è€ƒãˆã‚‹ã€‚\nã“ã®å•é¡Œã®è§£ã®æ™‚åˆ»æ¨ç§»ã‚’è¨ˆç®—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  dt = 0.1 # ã‚µãƒ³ãƒ—ãƒ«å‘¨æœŸ times = np.arange(0, 20+dt, dt) x_history = [[2, -2]] # xã®æ™‚åˆ»æ­´ãƒ‡ãƒ¼ã‚¿ x = ca.MX.sym(\u0026#39;x\u0026#39;,2); # Two states rhs = ca.vertcat(x[0]-2*x[1], 2*x[0]-1.5*x[1]) ode = {\u0026#39;x\u0026#39;: x, \u0026#39;ode\u0026#39;: rhs} opts = {\u0026#39;t0\u0026#39;:0, \u0026#39;tf\u0026#39;:dt} F = ca.integrator(\u0026#39;F\u0026#39;, \u0026#39;cvodes\u0026#39;, ode, opts) for t in times[:-1]: res = F(x0=x_history[-1]) x_history += [res[\u0026#39;xf\u0026#39;].toarray().flatten().tolist()] fig, ax = plt.subplots() ax.plot(times, x_history) ax.legend([\u0026#39;x0\u0026#39;, \u0026#39;x1\u0026#39;]) ax.set_xlabel(\u0026#39;t\u0026#39;) ax.set_ylabel(\u0026#39;x0, x1\u0026#39;) ax.grid() plt.show()   æœªçŸ¥é–¢æ•°ã®æ•°ãŒ2ã¤ã«ãªã‚‹ãŸã‚ã€x, rhsã‚’ãƒ™ã‚¯ãƒˆãƒ«ã¨ã—ãŸã€‚\nå®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚°ãƒ©ãƒ•ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚\nå‚è€ƒ CasADiã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n CasADi - Docs  ","description":"Pythonã¨è‡ªå‹•å¾®åˆ†ãƒ»æœ€é©åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªCasADiã‚’ä½¿ã£ã¦ã€å¸¸å¾®åˆ†æ–¹ç¨‹å¼è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":10,"section":"posts","tags":["CasADi","å¾®åˆ†æ–¹ç¨‹å¼"],"title":"Pythonã¨CasADiã§å¸¸å¾®åˆ†æ–¹ç¨‹å¼ã‚’è§£ã","uri":"https://helve-blog.com/posts/python/casadi-ordinary-differential-equation/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ã€BFGSå…¬å¼ã®æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã—ã€Pythonã§å®Ÿè£…ã—ãŸä¾‹ã‚’ç¤ºã™ã€‚å®Ÿè£…ã¯ã€æ•°ç†å·¥å­¦ç¤¾ã®ã€Œå·¥å­¦åŸºç¤ã€€æœ€é©åŒ–ã¨ãã®å¿œç”¨ã€ã®4.8ç¯€ã€Œæº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã€ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸã€‚\næº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã¯ã€å†æ€¥é™ä¸‹æ³•ã¨ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®ä¸¡è€…ã®é•·æ‰€ã‚’æŒã¤ã‚ˆã†ãªæ‰‹æ³•ã§ã‚ã‚‹ã€‚å†æ€¥é™ä¸‹æ³•ã¯ã€åæŸé€Ÿåº¦ãŒ1æ¬¡ã§ã—ã‹ãªã„æ›¿ã‚ã‚Šã«ã€åˆæœŸç‚¹ãŒè§£ã‹ã‚‰é›¢ã‚Œã¦ã„ã¦ã‚‚åæŸã™ã‚‹ï¼ˆå¤§åŸŸçš„åæŸæ€§ï¼‰ã€‚ä¸€æ–¹ã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã¯ã€è§£è¿‘å‚ã®åæŸé€Ÿåº¦ã¯2æ¬¡ã§ã‚ã‚‹ãŒã€æ¢ç´¢æ–¹å‘ãŒè©•ä¾¡é–¢æ•°ã®å‹¾é…æ–¹å‘ã¨ä¸€è‡´ã™ã‚‹ã¨ã¯é™ã‚‰ãªã„ãŸã‚ã€ç›´ç·šæ¢ç´¢ã‚’ãã®ã¾ã¾åˆ©ç”¨ã§ããªã„ã€‚\nä¸¡è€…ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯ã€ãã‚Œãã‚Œä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã€‚\nç›´ç·šæ¢ç´¢ã‚’ä½¿ã£ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…\nãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚‹æœ€é©åŒ–ã¨Pythonã«ã‚ˆã‚‹å®Ÿè£…\næœ¬è¨˜äº‹ã§ä½¿ç”¨ã—ãŸPythonã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.8.5   NumPy 1.19.2   matplotlib 3.3.2    å®Ÿè£…ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2  import numpy as np import matplotlib.pyplot as plt   æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³• æ¦‚è¦ æœ€å°åŒ–ã—ãŸã„é–¢æ•°ã‚’$f(\\bm{x})$ã¨ã™ã‚‹ã€‚\nãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®$k$å›ç›®ã®æ›´æ–°ã«ãŠã„ã¦ã€è§£ã®æ›´æ–°æ–¹å‘$\\bm{d}_k$ã¯æ¬¡ã®æ–¹ç¨‹å¼ã®è§£ã¨ã—ã¦ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$$ \\nabla ^2 f(\\bm{x}_k) \\bm{d}_k = - \\nabla f(\\bm{x}_k) $$\nã—ã‹ã—ã€ä¸€èˆ¬ã«ãƒ˜ãƒƒã‚»è¡Œåˆ—$\\nabla ^2 f(\\bm{x}_k)$ãŒæ­£å®šå€¤ã§ã‚ã‚‹ä¿è¨¼ã¯ãªã„ã€‚ã—ãŸãŒã£ã¦ã€ãƒ˜ãƒƒã‚»è¡Œåˆ—ã¯é€†è¡Œåˆ—ã‚’æŒãŸãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã€ä¸Šè¨˜ã®æ–¹ç¨‹å¼ã‚’$\\bm{d}_k$ã«ã¤ã„ã¦è§£ã‘ã‚‹ã¨ã¯é™ã‚‰ãªã„ã€‚\nãã“ã§ã€æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã§ã¯ãƒ˜ãƒƒã‚»è¡Œåˆ—ã‚’é©å½“ãªæ­£å®šå€¤è¡Œåˆ—ã§è¿‘ä¼¼ã™ã‚‹ã€‚æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã¯ã€ãƒ˜ãƒƒã‚»è¡Œåˆ—ã‚’è¿‘ä¼¼ã™ã‚‹æ–¹æ³•ã¨ã€ãƒ˜ãƒƒã‚»è¡Œåˆ—ã®é€†è¡Œåˆ—ã‚’è¿‘ä¼¼ã™ã‚‹æ–¹æ³•ã®2ã¤ãŒã‚ã‚‹ã€‚ã“ã®è¨˜äº‹ã§ã¯å‰è€…ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nãƒ˜ãƒƒã‚»è¡Œåˆ—ã‚’è¿‘ä¼¼ã™ã‚‹æ­£å®šå€¤è¡Œåˆ—ã‚’$B_k$ã¨ã—ã¦ã€è§£ã®æ›´æ–°æ–¹å‘$\\bm{d}_k$ã‚’æ¬¡ã®æ–¹ç¨‹å¼ã®è§£ã¨ã—ã¦æ±‚ã‚ã‚‹ã€‚\n$$ B_k \\bm{d} = - \\nabla f(\\bm{x}_k) $$\n$B_k$ã‚’æ±‚ã‚ã‚‹ã«ã¯ã€å‹¾é…$\\nabla f(\\bm{x})$ã®ãƒ†ã‚¤ãƒ©ãƒ¼å±•é–‹ï¼ˆæ¬¡å¼ï¼‰ã‚’åˆ©ç”¨ã™ã‚‹ã€‚\n$$ \\nabla f(\\bm{x}_k) = \\nabla f(\\bm{x}_{k+1}) + \\nabla^2 f(\\bm{x}_{k+1}) (\\bm{x}_k - \\bm{x}_{k+1}) + \u0026hellip; $$\nã™ãªã‚ã¡ã€ä»¥ä¸‹ã®è¿‘ä¼¼å¼ãŒæˆã‚Šç«‹ã¤ã€‚\n$$ \\nabla^2 f(\\bm{x}_{k+1}) (\\bm{x}_{k+1} - \\bm{x}_k) \\approx \\nabla f(\\bm{x}_{k+1}) - \\nabla f(\\bm{x}_k) $$\nã•ã‚‰ã«ã€\n$$ \\bm{s}_k = \\bm{x}_{k+1} - \\bm{x}_k, \\\\ \\bm{y}_k = \\nabla f(\\bm{x}_{k+1}) - \\nabla f(\\bm{x}_k) $$\nã¨ç½®ãã€ä»¥ä¸‹ã‚’æº€ãŸã™ã‚ˆã†ã«è¿‘ä¼¼è¡Œåˆ—$B_{k+1}$ã‚’æ±‚ã‚ã‚‹ã€‚\n$$ B_{k+1} \\bm{s}_k = \\bm{y}_k $$\nã“ã®å¼ã‚’ã‚»ã‚«ãƒ³ãƒˆæ¡ä»¶ã¨å‘¼ã¶ã€‚\nãƒ˜ãƒƒã‚»è¡Œåˆ—ã‚’è¿‘ä¼¼ã™ã‚‹æ–¹æ³•ã®1ã¤ã¨ã—ã¦ã€BFGS (Broydenâ€“Fletcherâ€“Goldfarbâ€“Shanno) æ³•ãŒã‚ã‚‹ã€‚ã“ã®æ–¹æ³•ã§ã¯ã€ä»¥ä¸‹ã®å…¬å¼ã‚’ç”¨ã„ã¦è¿‘ä¼¼è¡Œåˆ—ã‚’æ›´æ–°ã™ã‚‹ã€‚\n$$ B_{k+1} = B_k - \\frac{B_k \\bm{s} (B_k \\bm{s}_k)^\\top}{\\bm{s}_k^\\top B_k \\bm{s}_k} + \\frac{\\bm{y}_k \\bm{y}_k^\\top}{\\bm{s}_k^\\top \\bm{y}_k } $$\nåˆæœŸè¡Œåˆ—$B_0$ã«ã¯é€šå¸¸ã¯å˜ä½è¡Œåˆ—ãŒç”¨ã„ã‚‰ã‚Œã¦ã‚‹ã€‚\nã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n è§£ã®åˆæœŸå€¤$x_0$, åˆæœŸè¡Œåˆ—$B_0$ã‚’ç”¨æ„ $B_k \\bm{d}_k = - \\nabla f(\\bm{x}_k)$ã‚’è§£ã„ã¦è§£ã®æ›´æ–°æ–¹å‘$\\bm{d}_k$ã‚’æ±‚ã‚ã‚‹ ç›´ç·šæ¢ç´¢ã«ã‚ˆã‚Šã‚¹ãƒ†ãƒƒãƒ—å¹…$\\alpha_k$ã‚’æ±‚ã‚ã‚‹ $\\bm{x}_{k+1} = \\bm{x}_k + \\alpha_k \\bm{d}_k$ã§è§£ã‚’æ›´æ–° BFGSå…¬å¼ã§è¿‘ä¼¼è¡Œåˆ—$B$ã‚’æ›´æ–°  è§£ãŒåæŸã™ã‚‹ã‹ã€åå¾©å›æ•°ã®ä¸Šé™ã«é”ã™ã‚‹ã¾ã§ã€ä¸Šè¨˜ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 2ï½5ã‚’ç¹°ã‚Šè¿”ã™ã€‚\nPythonã«ã‚ˆã‚‹å®Ÿè£… BFGSå…¬å¼ã‚’ç”¨ã„ãŸæº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã‚’Pythonã§å®Ÿè£…ã—ãŸã€‚\nç›´ç·šæ¢ç´¢ã«ã¯Armijoæ¡ä»¶ã‚’ç”¨ã„ãŸã€‚\nå‚è€ƒï¼šç›´ç·šæ¢ç´¢ã‚’ä½¿ã£ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…\nç›®çš„é–¢æ•° ä»¥ä¸‹ã®è©•ä¾¡é–¢æ•°ã‚’è€ƒãˆã‚‹ã€‚\n$$ f(\\bm{x}) = 2x_0^2 + x_0 x_1 + x_1^2 $$\nã“ã®é–¢æ•°ã¯$(x_1, x_2)=(0, 0)$ã§æœ€å°å€¤0ã‚’ã¨ã‚‹ã€‚ã¾ãŸã€å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯æ¬¡å¼ã¨ãªã‚‹ã€‚\n$$ \\nabla f(\\bm{x}) = \\begin{bmatrix} 4x_0 + x_1 \\\\ x_0 + 2x_1 \\end{bmatrix} $$\nè©•ä¾¡é–¢æ•°ã¨å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¿”ã™é–¢æ•°ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã™ã‚‹ã€‚\n1 2 3 4 5 6 7  def obj_func(x): \u0026#34;\u0026#34;\u0026#34;è©•ä¾¡é–¢æ•°\u0026#34;\u0026#34;\u0026#34; return 2*x[0]**2 + x[1]**2 + x[0]*x[1] def obj_grad(x): \u0026#34;\u0026#34;\u0026#34;è©•ä¾¡é–¢æ•°ã®å‹¾é…\u0026#34;\u0026#34;\u0026#34; return np.array([4*x[0] + x[1], x[0] + 2*x[1]])   è©•ä¾¡é–¢æ•°ã®ãƒ—ãƒ­ãƒƒãƒˆã‚’ç¤ºã™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  x0 = np.arange(-4, 4, 0.1) x1 = np.arange(-4, 4, 0.1) X0, X1 = np.meshgrid(x0, x1) Y = obj_func(np.dstack((X0,X1)).T) fig, ax = plt.subplots() contourSet = ax.contour(X0, X1, Y) ax.clabel(contourSet, fontsize=12, fmt=\u0026#34;%.1f\u0026#34;) ax.set_xlabel(\u0026#34;x0\u0026#34;) ax.set_ylabel(\u0026#34;x1\u0026#34;) ax.set_aspect(\u0026#39;equal\u0026#39;) ax.grid() plt.show()   æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³• æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nè§£ã®åˆæœŸå€¤ã‚’$(3, 3)$, åå¾©å›æ•°ã‚’10å›ã¨ã—ãŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  x = [3, 3] B = np.eye(len(x)) # ãƒ˜ãƒƒã‚»è¡Œåˆ—ã®è¿‘ä¼¼è¡Œåˆ— tau = 0.9 # ç›´ç·šæ¢ç´¢ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ xi = 0.3 # ç›´ç·šæ¢ç´¢ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ grad = obj_grad(x) for i in range(10): f = obj_func(x) d = - np.dot(np.linalg.inv(B), grad) # æ¢ç´¢æ–¹å‘ # Armijoæ¡ä»¶ã‚’ç”¨ã„ãŸç›´ç·šæ¢ç´¢ alpha = 1 temp = xi*np.dot(grad, d) while obj_func(x+alpha*d) \u0026gt; f+alpha*temp: alpha *= tau x += alpha*d # è§£ã®æ›´æ–° old_grad = grad grad = obj_grad(x) s = (alpha*d).reshape([-1,1]) # è§£ã®å¤‰åŒ–é‡ y = (grad - old_grad).reshape([-1,1]) # å‹¾é…ã®å¤‰åŒ–é‡ Bs = np.dot(B, s) B -= (Bs*Bs.T)/np.dot(s.T, Bs) - (y*y.T)/np.dot(s.T, y) # ãƒ˜ãƒƒã‚»è¡Œåˆ—ã®è¿‘ä¼¼è¡Œåˆ—ã‚’æ›´æ–° print(x) # print(B)   å®Ÿè¡Œçµæœ è§£ã®æ¨ç§»ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚æœ€é©è§£$(0, 0)$ã«åæŸã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  [-1.70715894 0.17570464] [ 0.27118335 -0.56701972] [-0.01360106 0.19786906] [-0.00424114 -0.0012749 ] [ 0.00027077 -0.00011258] [-7.12942645e-07 2.00328906e-06] [ 7.26783781e-10 -1.66812385e-08] [8.90466726e-12 2.23457180e-12] [-1.38353745e-14 5.85295723e-15] [ 8.89368462e-19 -2.52015868e-18]   ã¾ãŸã€è¿‘ä¼¼è¡Œåˆ—Bã®åå¾©1, 5, 10å›ç›®ã®å€¤ã¯ãã‚Œãã‚Œä»¥ä¸‹ã®é€šã‚Šã€‚\n1å›ç›®\n1 2  [[3.83903021 1.26828299] [1.26828299 1.55286169]]   5å›ç›®\n1 2  [[3.99881539 1.00459841] [1.00459841 1.98214989]]   10å›ç›®\n1 2  [[3.9999154 0.9998001 ] [0.9998001 1.99952763]]   å®Ÿéš›ã«è©•ä¾¡é–¢æ•°ã®ãƒ˜ãƒƒã‚»è¡Œåˆ—ã‚’è¨ˆç®—ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\nabla^2 f(\\bm{x}) = \\begin{bmatrix} 4 \u0026amp; 1 \\\\ 1 \u0026amp; 2 \\end{bmatrix} $$\nåå¾©å›æ•°ãŒå¢—ãˆã‚‹ã«ã¤ã‚Œã¦ã€å®Ÿéš›ã®ãƒ˜ãƒƒã‚»è¡Œåˆ—ã®å€¤ã«è¿‘ã¥ã„ã¦ã„ã‚‹ã€‚\nå‚è€ƒ æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®è©³ç´°ãªã‚¢ãƒ«ã‚´ãƒªã‚¹ãƒ ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®æ›¸ç±ã‚’å‚è€ƒã¨ã—ãŸã€‚\nå·¥å­¦åŸºç¤æœ€é©åŒ–ã¨ãã®å¿œç”¨posted with ãƒ¨ãƒ¡ãƒ¬ãƒçŸ¢éƒ¨åš æ•°ç†å·¥å­¦ç¤¾ 2006å¹´03æœˆ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹Amazon\r","description":"æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚‹æœ€é©åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¸ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã€Pythonã§å®Ÿè£…ã—ãŸã€‚","id":11,"section":"posts","tags":["Python","æœ€é©åŒ–"],"title":"æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚‹æœ€é©åŒ–ã¨Pythonã«ã‚ˆã‚‹å®Ÿè£…","uri":"https://helve-blog.com/posts/math/quasi-newton-method-python/"},{"content":"ã¯ã˜ã‚ã« C#ã§ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸï¼ˆC#ã®é–‹ç™ºã«ä½¿ç”¨ã™ã‚‹C#è‡ªä½“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ã€.NETã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ã§ã¯ãªã„ï¼‰ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Windows 10 Home Version 2004 Visual Studio Community 2019 (Version 16.6.2) C# Version 8.0  C#ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¦‚è¦ C#ã§ã¯ã€ä»¥ä¸‹ã®3ã¤ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®šã§ãã‚‹ã€‚\n ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ ã‚¢ã‚»ãƒ³ãƒ–ãƒª ãƒãƒ¼ã‚¸ãƒ§ãƒ³ ã‚¢ã‚»ãƒ³ãƒ–ãƒª ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³  ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã¯NuGetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã“ã¨ã§ã‚ã‚‹ã€‚NuGetã¯.NET Frameworkã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã§ã‚ã‚‹ï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚²ãƒƒãƒˆã‚„ãƒŒã‚²ãƒƒãƒˆãªã©ã¨èª­ã‚€ã‚‰ã—ã„ï¼‰ã€‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’NuGetã§é…å¸ƒã™ã‚‹ãªã©ã—ãªã„é™ã‚Šã€ç‰¹ã«æŒ‡å®šã™ã‚‹å¿…è¦ã¯ãªã„ã€‚ãã®ãŸã‚ã€ã“ã®è¨˜äº‹ã§ã¯ã“ã‚Œä»¥é™è§¦ã‚Œãªã„ã€‚\nã€Œã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã®ã‚³ãƒ¼ãƒ‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹ã€‚é…å¸ƒã™ã‚‹exeã‚„dllã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã“ã‚Œã«ã‚ãŸã‚‹ã€‚\nã€Œã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ç”Ÿæˆã•ã‚Œã‚‹exeã‚„dllã¨ã„ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒæŒã¤ãƒ¡ã‚¿æƒ…å ±ã§ã‚ã‚‹ã€‚\nã€Œã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã¨ã€Œã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã®é•ã„ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚‚å‚è€ƒã®ã“ã¨ã€‚\nAssemblyVersion ã¨ AssemblyFileVersion ã‚’ä½¿ç”¨ã™ã‚‹ - Visual Studio Microsoft Docs\nãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å½¢å¼ ã‚¢ã‚»ãƒ³ãƒ–ãƒªã¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã‚‚ã€4ã¤ã®ç•ªå·ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ã€‚å…ˆé ­ã‹ã‚‰é †ã«ã€\nãƒ¡ã‚¸ãƒ£ãƒ¼ã€ãƒã‚¤ãƒŠãƒ¼ã€ãƒ“ãƒ«ãƒ‰ã€ãƒªãƒ“ã‚¸ãƒ§ãƒ³\nã¨å‘¼ã°ã‚Œã‚‹ã€‚å„ç•ªå·ã¯0ä»¥ä¸Šã®æ•´æ•°ã§ã‚ã‚‹ã€‚\nã¾ãŸã€æœ«å°¾ã‹ã‚‰é †ã«çœç•¥å¯èƒ½ã§ã‚ã‚‹ã€‚ã™ãªã‚ã¡ã€\nãƒ¡ã‚¸ãƒ£ãƒ¼[ã€ãƒã‚¤ãƒŠãƒ¼[ã€ãƒ“ãƒ«ãƒ‰[ã€ãƒªãƒ“ã‚¸ãƒ§ãƒ³]]]\nã¨ãªã‚‹ï¼ˆãƒ¡ã‚¸ãƒ£ãƒ¼ç•ªå·ã¯çœç•¥ä¸å¯ï¼‰ã€‚ç•ªå·ã‚’çœç•¥ã—ãŸå ´åˆã¯0æ‰±ã„ã¨ãªã‚‹ã€‚\nå„ç•ªå·ã®é•ã„ã¯ä»¥ä¸‹ã®é€šã‚Šï¼ˆä¸‹è¨˜ã®ãƒªãƒ³ã‚¯ã‚’å€‹äººçš„ã«è§£é‡ˆã—ãŸã‚‚ã®ã§ã‚ã‚‹ï¼‰ã€‚ã¾ãŸã€å½“ç„¶ã®ã“ã¨ãªãŒã‚‰ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ç•°ãªã‚‹å‘½åè¦å‰‡ã‚’è¨­ã‘ã¦ã‚ˆã„ã¨æ€ã†ã€‚\n ãƒ¡ã‚¸ãƒ£ãƒ¼ï¼šä¸‹ä½äº’æ›æ€§ãŒãªããªã‚‹å ´åˆã«ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã™ã‚‹ã€‚ ãƒã‚¤ãƒŠãƒ¼ï¼šä¸‹ä½äº’æ›æ€§ã‚’ä¿ã¡ã¤ã¤ã€å¤§å¹…ã«æ©Ÿèƒ½ã‚’å¢—ã‚„ã—ãŸå ´åˆã«ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã™ã‚‹ã€‚ ãƒ“ãƒ«ãƒ‰ï¼šåŒã˜ã‚½ãƒ¼ã‚¹ã‚’å†ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸå ´åˆã«ç•ªå·ã‚’å¤‰æ›´ã™ã‚‹ï¼ˆCPUã‚„ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ç­‰ãŒç•°ãªã‚‹å ´åˆï¼‰ã€‚ ãƒªãƒ“ã‚¸ãƒ§ãƒ³ï¼šã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚„èª¤å­—ã‚’ä¿®æ­£ã—ãŸå ´åˆã«å¤‰æ›´ã™ã‚‹ï¼ˆãƒã‚¤ãƒŠãƒªã«ç›¸äº’äº’æ›æ€§ãŒã‚ã‚‹ï¼‰ã€‚  Version ã‚¯ãƒ©ã‚¹ (System) Microsoft Docs\nãƒ“ãƒ«ãƒ‰ã¨ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®è‡ªå‹•æ¡ç•ªã®ä¾‹ã‚’ã¿ã‚‹ã«ã€å¿…ãšã—ã‚‚ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ãªãã¦è‰¯ã„ã‚ˆã†ã§ã‚ã‚‹ã€‚\nãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®è‡ªå‹•æ¡ç•ª ãƒ“ãƒ«ãƒ‰ç•ªå·ã¨ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ã¯*ã¨ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€è‡ªå‹•çš„ã«æ¡ç•ªã•ã‚Œã‚‹ã€‚\n æ—¢å®šã®ãƒ“ãƒ«ãƒ‰ç•ªå·ã¯ã€æ—¥ã”ã¨ã«ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã—ã¾ã™ã€‚ æ—¢å®šã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ã¯ã€ï¼ˆã‚µãƒãƒ¼ã‚¿ã‚¤ãƒ ã«ã‚ˆã‚‹èª¿æ•´ã‚’è€ƒæ…®ã›ãšã«ï¼‰ç¾åœ°æ™‚é–“ã®åˆå‰ 0 æ™‚ã‹ã‚‰ã®çµŒéç§’ã‚’ 2 ã§å‰²ã£ãŸå€¤ã§ã™ã€‚\n AssemblyVersionAttribute ã‚¯ãƒ©ã‚¹ (System.Reflection) Microsoft Docs\nãƒ“ãƒ«ãƒ‰ç•ªå·ã¯ã€2021/02/14ã«æ¡ç•ªã™ã‚‹ã¨7715ã ã£ãŸãŸã‚ã€2000/01/01ã‚’èµ·ç‚¹ã¨ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã‚ã‚‹ï¼ˆ2021/02/14ã®7715æ—¥å‰ãŒ2000/01/01ã§ã‚ã‚‹ï¼‰ã€‚\nã¾ãŸã€*ã‚’2ã¤æŒ‡å®šã™ã‚‹ã“ã¨ã‚„ã€ãƒ“ãƒ«ãƒ‰ç•ªå·ã‚’*ã¨ã—ã¦ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’å›ºå®šå€¤ã¨ã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚\nè¨­å®šå¯èƒ½ãªä¾‹ï¼š\n 1.2.*: ãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ã‚‚è‡ªå‹•æ¡ç•ªã•ã‚Œã‚‹ 1.2.3.*  è¨­å®šä¸å¯ãªä¾‹ï¼š\n 1.2.*.* 1.2.*.3  è‡ªå‹•æ¡ç•ªã™ã‚‹ãŸã‚ã«ã¯ã€æ±ºå®šè«–çš„ãƒ“ãƒ«ãƒ‰ã‚’ç„¡åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚æ±ºå®šè«–çš„ãƒ“ãƒ«ãƒ‰ãŒæœ‰åŠ¹ãªå ´åˆã€åŒã˜ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã¯å¸¸ã«åŒã˜ãƒã‚¤ãƒŠãƒªãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚\nç„¡åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (xxx.csproj) ã‚’é–‹ãã€ä»¥ä¸‹ã®ã‚ˆã†ã«\u0026lt;Deterministic\u0026gt;false\u0026lt;/Deterministic\u0026gt;ã‚’è¿½åŠ ã™ã‚‹ã€‚ã‚‚ã—åŒã˜è¨­å®šé …ç›®ãŒæ—¢ã«ã‚ã‚‹å ´åˆã¯ã€trueã‚’falseã«å¤‰æ›´ã™ã‚‹ã€‚\n\u0026lt;Project Sdk=\u0026quot;Microsoft.NET.Sdk\u0026quot;\u0026gt; \u0026lt;PropertyGroup\u0026gt; ... \u0026lt;Deterministic\u0026gt;false\u0026lt;/Deterministic\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;/Project\u0026gt; ãŸã ã—ã€æ±ºå®šè«–çš„ãƒ“ãƒ«ãƒ‰ã‚’ç„¡åŠ¹ã«ã™ã‚‹ã¨ã€ãƒ“ãƒ«ãƒ‰ã®åº¦ã«ãƒã‚¤ãƒŠãƒªãŒå¤‰æ›´ã•ã‚Œã¦ã—ã¾ã†ã“ã¨ã«ãªã‚‹ã€‚CI/CD (Continuous Integration/Continuous Delivery) ã‚’è¡Œã†ã‚ˆã†ãªç’°å¢ƒã§ã¯ã€ãƒ“ãƒ«ãƒ‰ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒåŠ¹ã‹ãªããªã‚Šã€ã‚·ã‚¹ãƒ†ãƒ ã®CPUè² è·ãŒå¤§ãããªã‚‹å ´åˆãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã€‚\nãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¨­å®šæ–¹æ³• å®Ÿéš›ã«C#ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®šã—ã€ã©ã®ã‚ˆã†ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚\nã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ ä»¥ä¸‹ã®æ‰‹é †ã§ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã€‚\n Visual Studio Community 2019ã‚’èµ·å‹•ã™ã‚‹ã€‚ ã€Œæ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã€ã‚’é¸æŠã€‚ ã€Œã‚³ãƒ³ã‚½ãƒ¼ãƒ« ã‚¢ãƒ—ãƒª (.NET Core)ã€ã‚’é¸æŠã€‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹æˆã§ã€ã€Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ã¨ã€Œã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³åã€ã‚’ãã‚Œãã‚ŒConsoleAppã¨ã™ã‚‹ã€‚  ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®šç”»é¢ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ç”»é¢å³å´ï¼‰ã®ã€ConsoleAppã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã€ã€Œãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€ã‚’é¸æŠã™ã‚‹ã€‚è¨­å®šç”»é¢ãŒé–‹ãã®ã§ã€å·¦å´ã®ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã€‚ã™ã‚‹ã¨ã€ä»¥ä¸‹3ã¤ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¨­å®šé …ç›®ãŒã‚ã‚‹ã€‚\n ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ ãƒãƒ¼ã‚¸ãƒ§ãƒ³ ã‚¢ã‚»ãƒ³ãƒ–ãƒª ãƒãƒ¼ã‚¸ãƒ§ãƒ³ ã‚¢ã‚»ãƒ³ãƒ–ãƒª ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³  ã“ã“ã§ã¯ã€ã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’1.2.3ã¨è¨­å®šã™ã‚‹ï¼ˆãƒªãƒ“ã‚¸ãƒ§ãƒ³ã®æ¬„ã¯ç©ºç™½ã¨ã™ã‚‹ï¼‰ã€‚\nã¾ãŸã€ã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’4.5.6.7ã¨è¨­å®šã™ã‚‹ã€‚\nã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã™ã‚‹ãŸã‚ã€Program.csã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  using System; namespace ConsoleApp { class Program { static void Main(string[] args) { var assm = System.Reflection.Assembly.GetExecutingAssembly(); var name = assm.GetName(); Console.WriteLine(\u0026#34;{0} {1}\u0026#34;, name.Name, name.Version); } } }   æ¬¡ã«ã€F5ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãƒ‡ãƒãƒƒã‚°ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãŒç«‹ã¡ä¸ŠãŒã‚Šã€ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nConsoleApp 1.2.3.0 Nameã¯ã‚¢ã‚»ãƒ³ãƒ–ãƒªåã€Versionã¯ã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã‚ã‚‹ã€‚çœç•¥ã—ãŸãƒªãƒ“ã‚¸ãƒ§ãƒ³ç•ªå·ãŒã€0ã¨ã—ã¦è¨­å®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã™ã‚‹ ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ã§é–‹ãã€\nConsoleApp\\ConsoleApp\\bin\\Debug\\netcoreapp3.1\nã«ã‚ã‚‹ConsoleApp.exeã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã€ã€Œãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€ã‚’é–‹ãã€‚\nã€Œè©³ç´°ã€ã‚¿ãƒ–ã®ã€Œãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã®å€¤ã¯4.5.6.7ã¨ãªã£ã¦ãŠã‚Šã€ã€Œã‚¢ã‚»ãƒ³ãƒ–ãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€ã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nå‚è€ƒ  ã‚¢ã‚»ãƒ³ãƒ–ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’è¨­å®šãƒ»å–å¾—ã™ã‚‹ - Programming_.NET Framework_Tips - ç·æ­¦ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢æ¨é€²æ‰€ NET TIPS ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã‚’è¨­å®šã™ã‚‹ã«ã¯ï¼Ÿ - C# VB.NET VS.NET - ï¼ IT  ","description":"","id":12,"section":"posts","tags":["C Sharp"],"title":"C#ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹","uri":"https://helve-blog.com/posts/csharp/software-version/"},{"content":"ã¯ã˜ã‚ã« Graphvizã¯DOTã¨å‘¼ã°ã‚Œã‚‹è¨€èªã§è¨˜è¿°ã•ã‚ŒãŸã‚°ãƒ©ãƒ•æ§‹é€ ã‚’ã€ç”»åƒå½¢å¼ã§å‡ºåŠ›å¯èƒ½ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã§ã‚ã‚‹ã€‚\nPythonã‹ã‚‰Graphvizã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚é–‹ç™ºã•ã‚Œã¦ãŠã‚Šã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„æ±ºå®šæœ¨ã®å¯è¦–åŒ–ãªã©ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Graphvizã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\nç’°å¢ƒ\n Windows 10 64-bit Graphviz 2.46.0 for Windows 10 (64-bit)  Graphvizã®å°å…¥ Windowsã®å ´åˆã€Graphvizã®å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’å…¥æ‰‹ã—ã¦ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nhttps://graphviz.org/download/\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸­ã«ãƒ‘ã‚¹ã‚’é€šã™ã‹èã‹ã‚Œã‚‹ã®ã§ã€é€šã—ã¦ãŠãã€‚ä»¥ä¸‹ã®ç”»é¢ã§\u0026quot;Add Graphviz to the system PATH for all users\u0026quot;ã¾ãŸã¯\u0026quot;current user\u0026quot;ã‚’é¸æŠã™ã‚‹ã€‚\nGraphvizã®ã‚³ãƒãƒ³ãƒ‰ Graphvizã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã€dotã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹(graphvizã§ã¯ãªã„ã“ã¨ã«æ³¨æ„)ã€‚\nPowerShell, ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã©ã¡ã‚‰ã§ã‚‚å®Ÿè¡Œå¯èƒ½ã§ã‚ã‚‹ã€‚ä»¥ä¸‹ã§ã¯ã€PowerShellã§å®Ÿè¡Œã—ãŸçµæœã‚’ç¤ºã™ã€‚\nã‚°ãƒ©ãƒ•ã®ä½œæˆ ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ç¤ºã™ã€‚\n1  \u0026gt; dot -T\u0026lt;format\u0026gt; -o \u0026lt;output file\u0026gt; \u0026lt;dot file\u0026gt;   ä¾‹ã‚’ç¤ºã™ã€‚\nã¾ãšã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã®test.dotã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨ä»®å®šã™ã‚‹ã€‚\ndigraph test { a -\u0026gt; b; b -\u0026gt; c; } PNGå½¢å¼ã®ã‚°ãƒ©ãƒ•ã‚’test.pngã¨ã„ã†åå‰ã§å‡ºåŠ›ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  \u0026gt; dot -Tpng -o test.png test.dot   -Tã®å¾Œã‚ã«å½¢å¼ã‚’è¨˜è¿°ã™ã‚‹ï¼ˆé–“ã«åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã¯ã‚ã£ã¦ã‚‚ãªãã¦ã‚‚è‰¯ã„ã€‚ã¾ãŸæ®‹å¿µãªãŒã‚‰ã€å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ã‹ã‚‰ã€å½¢å¼ã‚’è‡ªå‹•ã§åˆ¤å®šã—ã¦ãã‚Œãªã„ï¼‰ã€‚\nå®Ÿè¡Œã™ã‚‹ã¨ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä»¥ä¸‹ã®PNGãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã•ã›ã‚‹ã€‚\nã¾ãŸã€æŒ‡å®šå¯èƒ½ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã¯ã€bmp, gif, jpgãªã©ãŒã‚ã‚‹ã€‚è©³ç´°ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nhttps://graphviz.org/doc/info/output.html\nãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¡¨ç¤º(-V) ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯-Vã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã€‚\n1 2  \u0026gt; dot -V dot - graphviz version 2.46.0 (20210118.1747)   ãƒ˜ãƒ«ãƒ—ã®è¡¨ç¤º(-?, -h) ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯-?ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ï¼ˆ-h, -helpã‚‚å¯ï¼‰ã€‚\n1 2 3  \u0026gt; dot -? Usage: dot [-Vv?] [-(GNE)name=val] [-(KTlso)\u0026lt;val\u0026gt;] \u0026lt;dot files\u0026gt; ï¼ˆä»¥ä¸‹ç•¥ï¼‰   ","description":"Graphvizã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚","id":13,"section":"posts","tags":["Graphviz"],"title":"Graphvizã®ã‚³ãƒãƒ³ãƒ‰è§£èª¬","uri":"https://helve-blog.com/posts/other/graphviz-cli/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªsubprocessã‚’ä½¿ã£ã¦Windowsã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\nsubprocess.runé–¢æ•°ã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã£ã¦ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å®Ÿè¡Œã§ãã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ã€Pythonã‹ã‚‰å®Ÿè¡Œã§ãã‚‹ã€‚\nç’°å¢ƒ\n Windows 10 Home Ver. 2004 Python 3.7.4  ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ Windowsã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€subprocess.runé–¢æ•°ã«ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã€‚ãªãŠã€echo %date%ã¯ã‚·ã‚¹ãƒ†ãƒ ã®ç¾åœ¨ã®æ—¥ä»˜ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã‚ã‚‹ã€‚\n1 2 3  import subprocess res = subprocess.run(\u0026#34;echo %date%\u0026#34;, stdout=subprocess.PIPE, shell=True, encoding=\u0026#34;shift-jis\u0026#34;)   æˆ»ã‚Šå€¤ã¯subprocess.CompletedProcessã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ï¼ˆå¾Œè¿°ï¼‰ã€‚\nã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«stdout=subprocess.PIPEã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€å®Ÿè¡Œçµæœã‚’æ–‡å­—åˆ—ã¨ã—ã¦å¾—ã‚‰ã‚Œã‚‹ã€‚\nã¾ãŸã€shell=Trueã¨ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§å®Ÿè¡Œã—ãŸå ´åˆã¨åŒã˜çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã€‚ãŸã ã—ã€ä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ãã¦ã—ã¾ã†ã®ã§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å•é¡Œã«æ³¨æ„ã•ã‚ŒãŸã„ã€‚\næœ€å¾Œã®encoding=\u0026quot;shift-jis\u0026quot;ã¯ã€ï¼ˆä¸Šè¨˜ã«ä¾‹ã§ã¯ä¸è¦ã ãŒï¼‰æ–‡å­—åŒ–ã‘ã‚’é˜²ããŸã‚ã«å…¥ã‚Œã¦ã„ã‚‹ã€‚ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®å®Ÿè¡Œçµæœã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯Shift-JISã§ã‚ã‚‹ãŒã€Pythonã¯UTF-8ã¨ã—ã¦è§£é‡ˆã™ã‚‹ãŸã‚ã€æ—¥æœ¬èªãŒæ–‡å­—åŒ–ã‘ã—ã¦ã—ã¾ã†ã€‚ã“ã‘ã‚’é˜²ããŸã‚ã«æŒ‡å®šã—ã¦ã„ã‚‹ã€‚\nå®Ÿè¡Œçµæœã®å–å¾— å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰ãŒçµæœã‚’æ–‡å­—åˆ—ã§è¿”ã™å ´åˆã€æˆ»ã‚Šå€¤ã®stdoutå¤‰æ•°ã«çµæœãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã€‚\n1 2  print(res.stdout) # 2021/02/07   æ³¨æ„ç‚¹ Windowsæ¨™æº–ã®ãƒ‘ã‚¹åŒºåˆ‡ã‚Šæ–‡å­—ã¯\\ï¼ˆãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ï¼‰ã§ã‚ã‚‹ãŒã€Pythonã§ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ãŸã‚æ³¨æ„ã™ã‚‹ã€‚ã‚³ãƒãƒ³ãƒ‰ã«\\ã‚’å«ã‚€å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«2ã¤é‡ã­ã‚‹ã‹ã€å…ˆé ­ã«rã‚’ä»˜ã‘ãŸrawæ–‡å­—åˆ—ã¨ã™ã‚‹ã€‚\n1 2  \u0026#34;cd abc\\\\def\u0026#34; r\u0026#34;cd abc\\def\u0026#34;   ã¾ãŸã€subprocess.runã§å‘¼ã³å‡ºã•ã‚Œã‚‹ã®ã¯ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã‚ã‚‹ãŸã‚ã€PowerShellã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã¯å®Ÿè¡Œã§ããªã„ã€‚PowerShellã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆçµŒç”±ã§PowerShellã‚’å‘¼ã³å‡ºã™ãªã©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆå‚è€ƒãƒªãƒ³ã‚¯ã«ã‚ã‚‹Qiitaè¨˜äº‹ã®ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã‚’å‚ç…§ï¼‰ã€‚\nå‚è€ƒ  subprocess \u0026mdash; ã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç† â€” Python 3.9.1 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ Pythonã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã³å‡ºã™ï¼ˆWindowsç·¨ï¼‰ - Qiita  Pythonã‚’ä½¿ã£ã¦å®šå‹ä½œæ¥­ã‚’è‡ªå‹•åŒ–ã—ãŸã„å ´åˆã€ã€Œé€€å±ˆãªã“ã¨ã¯Pythonã«ã‚„ã‚‰ã›ã‚ˆã†ã€ã‚’ãœã²ä¸€èª­ã•ã‚Œã‚‹ã“ã¨ã‚’ãŠã‚¹ã‚¹ãƒ¡ã—ã¾ã™ã€‚\né€€å±ˆãªã“ã¨ã¯Pythonã«ã‚„ã‚‰ã›ã‚ˆã†ã€€ç¬¬2ç‰ˆposted with ãƒ¨ãƒ¡ãƒ¬ãƒAI Sweigart/ç›¸å·æ„›ä¸‰ ã‚ªãƒ©ã‚¤ãƒªãƒ¼ãƒ»ã‚¸ãƒ£ãƒ‘ãƒ³ 2021å¹´10æœˆ27æ—¥é ƒ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹Amazon ","description":"Pythonã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªsubprocessã‚’ä½¿ã£ã¦Windowsã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚","id":14,"section":"posts","tags":["Python"],"title":"Pythonã®subprocessã§Windowsã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ","uri":"https://helve-blog.com/posts/python/subprocess-command/"},{"content":"ã¯ã˜ã‚ã« ãƒ–ãƒ­ã‚°ã‚’ç§»è»¢ã—ã€2å›ç›®ã®Google AdSenseç”³ã—è¾¼ã¿ã§åˆæ ¼ã—ãŸè¨˜éŒ²ã‚’æ®‹ã™ã€‚\næ—§ãƒ–ãƒ­ã‚°ã‹ã‚‰ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãªã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å¤‰æ›´ã¨ã„ã†æ¡ä»¶ã§åˆæ ¼ã—ãŸãŸã‚ã€ä¼¼ãŸæ¡ä»¶ã®æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã‚ã‚‹ã€‚\nãƒ–ãƒ­ã‚°ã®åŸºæœ¬æƒ…å ± ç§»è»¢å…ƒã®ãƒ–ãƒ­ã‚°ï¼ˆæ—§ãƒ–ãƒ­ã‚°ï¼‰ã¯ã€ç„¡æ–™ç‰ˆã®ã¯ã¦ãªãƒ–ãƒ­ã‚°ã§ã‚ã‚‹ã€‚ç´„3å¹´é–“é‹å–¶ã—ã€76å€‹ã®è¨˜äº‹ã‚’ä½œæˆã—ã¦ã„ãŸã€‚\nç§»è»¢å…ˆï¼ˆæ–°ãƒ–ãƒ­ã‚°ï¼‰ã¯ã“ã®ãƒ–ãƒ­ã‚°(https://helve-blog.com/)ã§ã‚ã‚‹ã€‚\nã“ã®ãƒ–ãƒ­ã‚°ã¯ã€Hugoã¨ã„ã†é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã§ä½œæˆã—ã¦ã„ã‚‹ã€‚\nãƒ–ãƒ­ã‚°ç§»è¡Œã®è¨˜éŒ² æ–°ãƒ–ãƒ­ã‚°ã¸ã®ç§»è»¢ã‹ã‚‰AdSenseåˆæ ¼ã¾ã§ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n ï½2020å¹´12æœˆ31æ—¥ï¼šæ—§ãƒ–ãƒ­ã‚°ã®å…¨76è¨˜äº‹ã‚’æ–°ãƒ–ãƒ­ã‚°ã§å…¬é–‹å¯èƒ½ãªã‚ˆã†ã«æº–å‚™ã€‚ 2021å¹´1æœˆ1æ—¥ï¼šæ–°ãƒ–ãƒ­ã‚°ã‚’é–‹è¨­ã—ã€ä¸€æ°—ã«75è¨˜äº‹ã‚’å…¬é–‹ã€‚æ—§ãƒ–ãƒ­ã‚°ã¯ç§»è¡Œã®ãŠçŸ¥ã‚‰ã›ãƒšãƒ¼ã‚¸ã‚’æ®‹ã—ã¦å…¨è¨˜äº‹ã‚’å‰Šé™¤ã€‚ 1æœˆ2æ—¥ï¼šAdSenseã«ç”³ã—è¾¼ã¿ï¼ˆ1å›ç›®ï¼‰ã€‚ 1æœˆ2æ—¥ï½13æ—¥ï¼š9è¨˜äº‹ä½œæˆã€‚ 16æ—¥ï¼šAdSenseå¯©æŸ»çŠ¶æ³ç¢ºèªãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰å•ã„åˆã‚ã›ã€‚ 17æ—¥ï¼šä¸åˆæ ¼é€šçŸ¥ã€‚ 20ï½23æ—¥ï¼š2è¨˜äº‹ä½œæˆã€‚ 28æ—¥ï¼šAdSenseã«ç”³ã—è¾¼ã¿ï¼ˆ2å›ç›®ï¼‰ã€‚ 30æ—¥ï¼šåˆæ ¼é€šçŸ¥ã€‚  å¯©æŸ»çŠ¶æ³ç¢ºèªãƒ•ã‚©ãƒ¼ãƒ ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã€‚\nã€å‚è€ƒæ–‡ä»˜ã€‘AdSenseå¯©æŸ»çŠ¶æ³ç¢ºèªãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰å•ã„åˆã‚ã›ã™ã‚‹æ–¹æ³•ï½œOKILOG\nç§»è»¢æ™‚ã«è¡Œã£ãŸä½œæ¥­  æ–°ãƒ–ãƒ­ã‚°ã¨æ—§ãƒ–ãƒ­ã‚°ã§è¨˜äº‹ãŒé‡è¤‡ã—ã¦ã„ã‚‹ã¨å¯©æŸ»ã«é€šã‚‰ãªã„ã‚ˆã†ãªã®ã§ã€æ—§ãƒ–ãƒ­ã‚°ã‹ã‚‰ã¯è¨˜äº‹ã‚’å‰Šé™¤ã—ãŸã€‚ æ—§ãƒ–ãƒ­ã‚°ã‹ã‚‰301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’è¡Œã†ã¨Googleã®æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«ãƒšãƒ¼ã‚¸ã®ç§»è»¢ã‚’é€šçŸ¥ã§ãã‚‹ã‚‰ã—ã„ãŒã€ã¯ã¦ãªãƒ–ãƒ­ã‚°ã§ã¯301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’è¨­å®šã§ããªã„ãŸã‚ã€è¡Œã‚ãªã‹ã£ãŸã€‚ æ–°ãƒ–ãƒ­ã‚°ã‚’Search Consoleã¨Google Analyticsã«ç™»éŒ²ã—ãŸã€‚ æ–°ãƒ–ãƒ­ã‚°ã«ã¯ã€ãŠå•åˆã›ãƒ•ã‚©ãƒ¼ãƒ ã¨ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã‚’ä½œæˆã—ãŸã€‚ ç„¡æ–™ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ã¯å¯©æŸ»ã«é€šã‚Šã«ãã„ã‚‰ã—ã„ã®ã§ã€.comãƒ‰ãƒ¡ã‚¤ãƒ³ã¨ã—ãŸã€‚ è¢«ãƒªãƒ³ã‚¯ã‚’ç²å¾—ã™ã‚‹ãŸã‚ã€äººæ°—ãƒ–ãƒ­ã‚°ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ç™»éŒ²ã—ãŸã€‚  è€ƒå¯Ÿ ä¸Šè¨˜ã®çµæœã«å¯¾ã—ã¦ã€åˆæ ¼ãƒ»ä¸åˆæ ¼ã®ç†ç”±ã‚’è€ƒå¯Ÿã™ã‚‹ã€‚\n 1å›ç›®ã®å¯©æŸ»ã§ä¸åˆæ ¼é€šçŸ¥ãŒæ¥ãŸæ™‚ç‚¹ã§ã¯ã€æ—§ãƒ–ãƒ­ã‚°ã®ãƒšãƒ¼ã‚¸ãŒæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã•ã‚Œã¦ã„ãŸãŸã‚ã€æ–°ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãŒé‡è¤‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã¿ãªã•ã‚Œã€ä¸åˆæ ¼ã«ãªã£ãŸã¨æ€ã‚ã‚Œã‚‹ã€‚ 1å›ç›®ã®å¯©æŸ»ã«15æ—¥è¦ã—ãŸã®ã¯ã€é‡è¤‡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚‹ã¨ã¿ãªã•ã‚ŒãŸã‹ã€ã¾ãŸã¯è¨˜äº‹æ•°ãŒå¤šã‹ã£ãŸãŸã‚ã€å¯©æŸ»ã‚’å¾Œå›ã—ã«ã•ã‚ŒãŸã¨æ€ã‚ã‚Œã‚‹ã€‚ 2å›ç›®ã®AdSenseç”³ã—è¾¼ã¿ã§åˆæ ¼ã—ãŸæ™‚ç‚¹ã§ã‚‚ã€æ—§ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ãŒæ¤œç´¢çµæœã«å‡ºã¦ã„ã‚‹ã®ã§ã€å®Œå…¨ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ãŒå‰Šé™¤ã•ã‚Œãªãã¦ã‚‚åˆæ ¼ã§ãã‚‹ã€‚  ","description":"ãƒ–ãƒ­ã‚°ã‚’ç§»è»¢ã—ã€2å›ç›®ã®Google AdSenseç”³ã—è¾¼ã¿ã§åˆæ ¼ã—ãŸè¨˜éŒ²ã‚’æ®‹ã™ã€‚æ—§ãƒ–ãƒ­ã‚°ã‹ã‚‰ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãªã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å¤‰æ›´ã¨ã„ã†æ¡ä»¶ã§åˆæ ¼ã—ãŸãŸã‚ã€ä¼¼ãŸæ¡ä»¶ã®æ–¹ã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã‚ã‚‹ã€‚","id":15,"section":"posts","tags":["AdSense"],"title":"ç§»è»¢å¾Œã®ãƒ–ãƒ­ã‚°ã§Google AdSenseã«åˆæ ¼ã—ãŸè¨˜éŒ²","uri":"https://helve-blog.com/posts/manage/pass-adsense/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹Pyomoã§ã€å¤‰æ•°ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã—ã¦æ‰±ã†æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nå¤‰æ•°ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€å¤‰æ•°ã®æ•°ãŒå¢—ãˆã¦ã‚‚ã‚³ãƒ¼ãƒ‰é‡ã®å¢—åŠ ã‚’æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã¾ãŸã€å¤‰æ•°ã®æ•°ãŒä¸å®šãªçŠ¶æ³ã«ã‚‚å¯¾å¿œã§ãã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã‚’ä¾‹ã¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã™ã€‚\næ¤œè¨¼ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   Pyomo 5.6.9   GLPK 4.65    Pyomoã¨GLPKã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nPyomoã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã\nãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œ ä»¥ä¸‹ã®0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \\text{maximize} \\ \u0026amp; \\sum_{i=1}^{N} p_i x_i \\\\ \\text{subject to} \\ \u0026amp; \\sum_{i=1}^{N} w_i x_i \\le C \\\\ \u0026amp; x_i \\in \\{0, 1\\}, (i=1, \u0026hellip;, N) \\end{array} $$\nã“ã“ã§ã¯ã€$N=5$ã¨ã—ã€\n$\\bm{p}=[2, 2, 5, 8, 12]$\n$\\bm{w}=[1, 2, 4, 6, 10]$\nã¨ã™ã‚‹ã€‚\nãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã®è©³ç´°ã¯ä»¥ä¸‹ã‚’å‚ç…§\nãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã¨åˆ†æé™å®šæ³•\nPyomoã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ ä¸Šè¨˜ã®ç·šå½¢è¨ˆç”»å•é¡Œã‚’Pyomoã‚’ä½¿ã£ã¦è¨˜è¿°ã—ã€æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  import pyomo.environ as pyo prices = [2, 2, 5, 8, 12] weights = [1, 2, 4, 6, 10] capacity = 16 sense = pyo.maximize # pyo.minimize N = len(prices) N_index_list = list(range(N)) x_ini = [0]*N xx = {i:x_ini[i] for i in range(N)} def InitializeX(model, i): \u0026#34;\u0026#34;\u0026#34;å¤‰æ•°ã®åˆæœŸåŒ–\u0026#34;\u0026#34;\u0026#34; return xx[i] def ObjRule(model): \u0026#34;\u0026#34;\u0026#34;ç›®çš„é–¢æ•°\u0026#34;\u0026#34;\u0026#34; return sum(prices[i] * model.x[i] for i in N_index_list) def ConstRule(model): \u0026#34;\u0026#34;\u0026#34;åˆ¶ç´„å¼\u0026#34;\u0026#34;\u0026#34; tmp = sum(weights[i] * model.x[i] for i in N_index_list) if sense==pyo.maximize: return tmp \u0026lt;= capacity else: return tmp \u0026gt;= capacity model = pyo.ConcreteModel() model.x = pyo.Var(N_index_list, domain=pyo.Binary, initialize=InitializeX) model.OBJ = pyo.Objective(rule=ObjRule, sense=sense) model.Constraint = pyo.Constraint(rule=ConstRule) opt = pyo.SolverFactory(\u0026#39;glpk\u0026#39;) res = opt.solve(model, tee=False) # tee=Trueã§ã‚½ãƒ«ãƒã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º print(f\u0026#34;è©•ä¾¡é–¢æ•°ï¼š{model.OBJ()}\u0026#34;) for i in range(N): print(f\u0026#34;x{i}: {model.x[i].value:.0f}\u0026#34;) print(\u0026#34;é¸æŠã•ã‚ŒãŸè·ç‰©\u0026#34;) print(\u0026#34;price weight\u0026#34;) for i in range(N): if model.x[i].value==1: print(prices[i], weights[i])   å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚å¾—ã‚‰ã‚ŒãŸè§£ã¯åˆ¶ç´„ã‚’æº€ãŸã—ã¦ã„ã‚‹ã€‚ã¾ãŸã€ç·©å’Œå•é¡Œã¯ç·šå½¢ã§ã‚ã‚‹ã®ã§ã€æœ€é©è§£ï¼ˆã®1ã¤ï¼‰ãŒå¾—ã‚‰ã‚Œã¦ã„ã‚‹ã¯ãšã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  è©•ä¾¡é–¢æ•°ï¼š20.0 x0: 0 x1: 0 x2: 0 x3: 1 x4: 1 é¸æŠã•ã‚ŒãŸè·ç‰© price weight 8 6 12 10   ãªãŠã€ã‚³ãƒ¼ãƒ‰ã‚’sense==pyo.minimizeã¨å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€æœ€å°åŒ–å•é¡Œã‚’è§£ãã“ã¨ãŒã§ãã‚‹ã€‚ã“ã®ã¨ãã€åˆ¶ç´„å¼ã®ç¬¦å·ã¯é€†ã«ãªã‚‹ï¼ˆâ‰¤ã‹ã‚‰â‰¥ã«ãªã‚‹ï¼‰ã€‚\nã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è§£èª¬ ä»¥ä¸‹ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç°¡å˜ã«è§£èª¬ã™ã‚‹ã€‚\nå¤‰æ•°ã®å®šç¾© Varã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚ã“ã®ã¨ãã€[0,1,...,N-1]ã¨ã„ã†ãƒªã‚¹ãƒˆã‚’å¼•æ•°ã«ä¸ãˆã‚‹ã“ã¨ã§ã€ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã•ã‚ŒãŸå¤‰æ•°ã‚’å®šç¾©ã§ãã‚‹ã€‚\nã¾ãŸã€é–¢æ•°InitializeXã§å¤‰æ•°ã®åˆæœŸå€¤ã‚’å…¨ã¦0ã§ä¸ãˆã¦ã„ã‚‹ï¼ˆ0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã®å ´åˆã€åˆæœŸå€¤ã‚’ä¸ãˆãªãã¦ã‚‚åæŸã¸ã®å½±éŸ¿ã¯ã»ã¨ã‚“ã©ãªã„ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  N = len(prices) N_index_list = list(range(N)) x_ini = [0]*N xx = {i:x_ini[i] for i in range(N)} def InitializeX(model, i): \u0026#34;\u0026#34;\u0026#34;å¤‰æ•°ã®åˆæœŸåŒ–\u0026#34;\u0026#34;\u0026#34; return xx[i] ... model.x = pyo.Var(N_index_list, domain=pyo.Binary, initialize=InitializeX)   ç›®çš„é–¢æ•°ã®å®šç¾© æ¬¡ã«ã€Objectiveã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦ç›®çš„é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚ObjRuleé–¢æ•°ã§ç›®çš„é–¢æ•°ã‚’è¨˜è¿°ã—ã€Objectiveã‚¯ãƒ©ã‚¹ã®ruleã«æ¸¡ã—ã¦ã„ã‚‹ã€‚\nãªãŠã€ObjRuleé–¢æ•°ã®ä¸­èº«ã¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿å¼ã¨ãªã£ã¦ã„ã‚‹ï¼ˆã‚¿ãƒ—ãƒ«å†…åŒ…è¡¨è¨˜ã¨ã¯å‘¼ã°ãªã„ï¼‰ã€‚\n1 2 3 4 5  def ObjRule(model): \u0026#34;\u0026#34;\u0026#34;ç›®çš„é–¢æ•°\u0026#34;\u0026#34;\u0026#34; return sum(prices[i] * model.x[i] for i in N_index_list) ... model.OBJ = pyo.Objective(rule=ObjRule, sense=sense)   åˆ¶ç´„æ¡ä»¶ã®å®šç¾© Constraintã‚¯ãƒ©ã‚¹ã§åˆ¶ç´„æ¡ä»¶ã‚’è¨­å®šã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  def ConstRule(model): \u0026#34;\u0026#34;\u0026#34;åˆ¶ç´„å¼\u0026#34;\u0026#34;\u0026#34; tmp = sum(weights[i] * model.x[i] for i in N_index_list) if sense==pyo.maximize: return tmp \u0026lt;= capacity else: return tmp \u0026gt;= capacity ... model.Constraint = pyo.Constraint(rule=ConstRule)   å‚è€ƒ Pyomoã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\nPyomo Documentation 5.7.2 â€” Pyomo 5.7.2 documentation\nå‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸæ—¥æœ¬èªã®è¨˜äº‹\nPythonã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãå³æˆ¦åŠ›ã‚³ãƒ¼ãƒ‰ with Pyomo â€“ Takala\u0026rsquo;s Memory\n","description":"Pyomoã§å¤šå¤‰æ•°ã®æœ€é©åŒ–ã‚’ç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ãŸã‚ã€å¤‰æ•°ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":16,"section":"posts","tags":["Pyomo","æœ€é©åŒ–"],"title":"Pyomoã®å¤‰æ•°ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã™ã‚‹","uri":"https://helve-blog.com/posts/python/pyomo-vectorized-variables/"},{"content":"ã¯ã˜ã‚ã« CasADiã¯è‡ªå‹•å¾®åˆ†ã¨éç·šå½¢æœ€é©åŒ–ã®ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚C++ã§å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€C++, Python, Matlab, Octaveã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å‚™ãˆã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯Pythonã‚’ä½¿ã„ã€CasADiã§æ··åˆæ•´æ•°éç·šå½¢æœ€é©åŒ–å•é¡Œ (MINLP) ã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nCasADiã«ã¯BONMINã¨ã„ã†MINLPã‚½ãƒ«ãƒãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚’ç”¨ã„ã‚‹ã€‚å•é¡ŒãŒéå‡¸ã®å ´åˆã€BONMINã¯ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ã«æœ€é©è§£ã‚’æ±‚ã‚ã‚‹ãŒã€å¤§åŸŸçš„æœ€é©è§£ãŒå¾—ã‚‰ã‚Œã‚‹ã¨ã¯é™ã‚‰ãªã„ã€‚\nCasADiã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã€‚\nCasADiã¨IPOPTã§éç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   CasADi 3.5.5    å¯¾è±¡ã¨ã™ã‚‹æ··åˆæ•´æ•°éç·šå½¢è¨ˆç”»å•é¡Œ ä»¥ä¸‹ã®æ··åˆæ•´æ•°éç·šå½¢æœ€å°åŒ–å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \\text{minimize} \u0026amp; f(x_1, x_2) = (x_1-0.8)^2 + (x_2-0.7)^2 \\\\ \u0026amp; x_1 \\in \\mathbb{R}, x_2 \\in \\mathbb{Z} \\end{array} $$\nã™ãªã‚ã¡ã€$x_1$ã¯å®Ÿæ•°ã€$x_2$ã¯æ•´æ•°ã§ã‚ã‚‹ã€‚\nã“ã®å•é¡Œã¯ã€$(x_1, x_2)=(0.8, 1)$ã§æœ€å°å€¤$0.09$ã‚’ã¨ã‚‹ã€‚\nCasADiã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ ä¸Šè¨˜ã®å•é¡Œã‚’CasADiã‚’ä½¿ã£ã¦è¨˜è¿°ã—ã€æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  import casadi opti = casadi.Opti() # å¤‰æ•°ã‚’å®šç¾© x1 = opti.variable() x2 = opti.variable() # ç›®çš„é–¢æ•°ã‚’å®šç¾© OBJ = (x1-0.8)**2 + (x2-0.7)**2 opti.minimize(OBJ) p_opts = {\u0026#39;discrete\u0026#39;: [False, True]} s_opts = {\u0026#39;time_limit\u0026#39;: 100} opti.solver(\u0026#39;bonmin\u0026#39;, p_opts, s_opts) # æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’è¨­å®š sol = opti.solve() # æœ€é©åŒ–è¨ˆç®—ã‚’å®Ÿè¡Œ print(f\u0026#39;è©•ä¾¡é–¢æ•°ï¼š{sol.value(OBJ)}\u0026#39;) print(f\u0026#39;x1: {sol.value(x1)}\u0026#39;) print(f\u0026#39;x2: {sol.value(x2)}\u0026#39;)   å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€æœ€é©å€¤ã‚’å¾—ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\nNLP0012I Num Status Obj It time Location\rNLP0014I 1 OPT 0 1 0\rNLP0014I 2 OPT 0.48999999 3 0.016\rï¼ˆä¸­ç•¥ï¼‰\rCbc0035I Maximum depth 0, 0 variables fixed on reduced cost\rsolver : t_proc (avg) t_wall (avg) n_eval\rnlp_f | 0 ( 0) 0 ( 0) 19\rnlp_grad_f | 0 ( 0) 0 ( 0) 30\rnlp_hess_l | 0 ( 0) 0 ( 0) 13\rtotal | 16.00ms ( 16.00ms) 15.62ms ( 15.62ms) 1\rè©•ä¾¡é–¢æ•°ï¼š0.09000000000000002\rx1: 0.8\rx2: 1.0\ræ•´æ•°å¤‰æ•°ã®æŒ‡å®š ã©ã®å¤‰æ•°ãŒæ•´æ•°ã‹æŒ‡å®šã™ã‚‹ã«ã¯ã€solverãƒ¡ã‚½ãƒƒãƒ‰ã®2ç•ªç›®ã®å¼•æ•°ã«ä¸ãˆã‚‹ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚­ãƒ¼ã‚’discreteã¨ã—ã¦ã€å®Ÿæ•°å¤‰æ•°ã‚’False, æ•´æ•°å¤‰æ•°ã‚’trueã§æŒ‡å®šã™ã‚‹ã€‚\n1 2 3  p_opts = {\u0026#39;discrete\u0026#39;: [False, True]} s_opts = {\u0026#39;time_limit\u0026#39;: 100} opti.solver(\u0026#39;bonmin\u0026#39;, p_opts, s_opts) # æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’è¨­å®š   ãªãŠã€s_optsã¯æœ€é©åŒ–ã‚½ãƒ«ãƒ (BONMIN) ã«ä¸ãˆã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚Šã€3ç•ªç›®ã®å¼•æ•°ã¨ã™ã‚‹ã€‚\nIPOPTã§è¨­å®šå¯èƒ½ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nBONMIN Users' Manual - List of bonmin options\nå‚è€ƒ CasADiã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n CasADi - Docs CasADi casadi BonminInterface Class Reference  ","description":"Pythonã§è‡ªå‹•å¾®åˆ†ãƒ»éç·šå½¢æœ€é©åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªCasADiã¨æœ€é©åŒ–ã‚½ãƒ«ãƒBONMINã‚’ä½¿ã£ã¦ã€æ··åˆæ•´æ•°éç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":17,"section":"posts","tags":["CasADi","æœ€é©åŒ–"],"title":"CasADiã¨BONMINã§æ··åˆæ•´æ•°éç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã","uri":"https://helve-blog.com/posts/python/casadi-minlp/"},{"content":"ã¯ã˜ã‚ã« CasADiã¯è‡ªå‹•å¾®åˆ†ã¨éç·šå½¢æœ€é©åŒ–ã®ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚C++ã§å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€C++, Python, Matlab, Octaveã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å‚™ãˆã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯Pythonã‚’ä½¿ã„ã€CasADiã§éç·šå½¢æœ€é©åŒ–å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\nCasADiã«ã¯IPOPTã¨ã„ã†éç·šå½¢ã‚½ãƒ«ãƒãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã‚Œã‚’ç”¨ã„ã‚‹ã€‚IPOPTã¯ä¸»åŒå¯¾å†…ç‚¹æ³•ã‚’åˆ©ç”¨ã—ãŸã‚½ãƒ«ãƒã§ã‚ã‚Šã€å¤§è¦æ¨¡ãªéç·šå½¢å•é¡Œã‚’é«˜é€Ÿã«è§£ãã“ã¨ãŒã§ãã‚‹ã€‚ãŸã ã—ã€å•é¡Œã¯é€£ç¶šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã€å¤§åŸŸçš„æœ€é©è§£ã‚’æ±‚ã‚ã‚‹ã«ã¯å•é¡ŒãŒå‡¸ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   CasADi 3.5.5    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« pipã§CasADiã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚CasADiã«ã¯æœ€é©åŒ–ã‚½ãƒ«ãƒã‚‚å«ã¾ã‚Œã¦ãŠã‚Šã€åŒæ™‚ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚\npip install casadi\rå¯¾è±¡ã¨ã™ã‚‹éç·šå½¢è¨ˆç”»å•é¡Œ ä»¥ä¸‹ã®åˆ¶ç´„ä»˜ãéç·šå½¢æœ€å°åŒ–å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \\text{minimize} \u0026amp; f(x_1, x_2) = x_1^2 + x_2^2 \\\\ \\text{subject to} \u0026amp; x_1 x_2 \\ge 1, \\\\ \u0026amp; x_1 \\ge 0, x_2 \\ge 0 \\end{array} $$\nå›³ç¤ºã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€$(x_1, x_2)=(1, 1)$ã§æœ€å°å€¤$2$ã‚’ã¨ã‚‹ã€‚é’è‰²ã§å›³ç¤ºã—ãŸé ˜åŸŸã¯å®Ÿè¡Œå¯èƒ½é ˜åŸŸã‚’ç¤ºã™ã€‚\nCasADiã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ ä¸Šè¨˜ã®å•é¡Œã‚’CasADiã‚’ä½¿ã£ã¦è¨˜è¿°ã—ã€æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  import casadi opti = casadi.Opti() # å¤‰æ•°ã‚’å®šç¾© x1 = opti.variable() x2 = opti.variable() # ç›®çš„é–¢æ•°ã‚’å®šç¾© OBJ = x1**2 + x2**2 opti.minimize(OBJ) # åˆ¶ç´„æ¡ä»¶ã‚’å®šç¾© opti.subject_to( x1*x2 \u0026gt;= 1 ) opti.subject_to( x1 \u0026gt;=0 ) opti.subject_to( x2 \u0026gt;=0 ) opti.solver(\u0026#39;ipopt\u0026#39;) # æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’è¨­å®š sol = opti.solve() # æœ€é©åŒ–è¨ˆç®—ã‚’å®Ÿè¡Œ print(f\u0026#39;è©•ä¾¡é–¢æ•°ï¼š{sol.value(OBJ)}\u0026#39;) print(f\u0026#39;x1: {sol.value(x1)}\u0026#39;) print(f\u0026#39;x2: {sol.value(x2)}\u0026#39;)   å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€æœ€é©å€¤ã‚’å¾—ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\nThis is Ipopt version 3.12.3, running with linear solver mumps.\rNOTE: Other linear solvers might be more efficient (see Ipopt documentation).\rï¼ˆä¸­ç•¥ï¼‰\rEXIT: Optimal Solution Found.\rsolver : t_proc (avg) t_wall (avg) n_eval\rnlp_f | 0 ( 0) 0 ( 0) 19\rnlp_g | 0 ( 0) 0 ( 0) 19\rnlp_grad_f | 1.00ms ( 76.92us) 997.00us ( 76.69us) 13\rnlp_hess_l | 0 ( 0) 0 ( 0) 11\rnlp_jac_g | 0 ( 0) 0 ( 0) 13\rtotal | 22.00ms ( 22.00ms) 21.94ms ( 21.94ms) 1\rè©•ä¾¡é–¢æ•°ï¼š1.9999999825046224\rx1: 0.9999999956261556\rx2: 0.9999999956261556\rã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è§£èª¬ ä»¥ä¸‹ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è©³ç´°ã‚’è¿°ã¹ã‚‹ã€‚\næœ€é©åŒ–å•é¡Œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ ã¾ãšã€Optiã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦æœ€é©åŒ–å•é¡Œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\n1  opti = casadi.Opti()   å¤‰æ•°ã®å®šç¾© æ¬¡ã«ã€variableã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚\n1 2  x1 = opti.variable() x2 = opti.variable()   variable()ã«å¼•æ•°ã‚’ä¸ãˆãªã„å ´åˆã€å¤‰æ•°ã¯ã‚¹ã‚«ãƒ©ã«ãªã‚‹ã€‚ä¸€æ–¹ã€\nx = opti.variable(2)\nã®ã‚ˆã†ã«æ•´æ•°ã‚’å¼•æ•°ã«ã¨ã‚‹ã“ã¨ã§ã€ãƒ™ã‚¯ãƒˆãƒ«ã«ã§ãã‚‹ã€‚\nãƒ™ã‚¯ãƒˆãƒ«ã«ã—ãŸå ´åˆã€å€‹ã€…ã®è¦ç´ ã«ã¯x[0], x[1]ã®ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€‚\nç›®çš„é–¢æ•°ã®å®šç¾© æ¬¡ã«ã€ç›®çš„é–¢æ•°ã‚’å®šç¾©ã—ã€opti.minimizeãƒ¡ã‚½ãƒƒãƒ‰ã«å¼•æ•°ã¨ã—ã¦ä¸ãˆã‚‹ã€‚\n1 2  OBJ = x1**2 + x2**2 opti.minimize(OBJ)   ã‚‚ã—ãã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç›®çš„é–¢æ•°ã‚’ç›´æ¥ä¸ãˆã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\n1  opti.minimize(x1**2 + x2**2)   ã—ã‹ã—ã€ç›´æ¥ä¸ãˆãŸå ´åˆã€æœ€é©åŒ–å¾Œã®ç›®çš„é–¢æ•°ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ç›®çš„é–¢æ•°ã‚’åˆ¥é€”å®šç¾©ã—ãŸã»ã†ãŒä¾¿åˆ©ã§ã‚ã‚‹ã€‚\nsol.stats()['iterations']['obj'][-1]\nåˆ¶ç´„æ¡ä»¶ã®å®šç¾© subject_toãƒ¡ã‚½ãƒƒãƒ‰ã§åˆ¶ç´„æ¡ä»¶ã‚’è¨­å®šã™ã‚‹ã€‚\n1 2 3  opti.subject_to( x1*x2 \u0026gt;= 1 ) opti.subject_to( x1 \u0026gt;=0 ) opti.subject_to( x2 \u0026gt;=0 )   ç­‰å¼åˆ¶ç´„ã¯==ã§ã€ä¸ç­‰å¼åˆ¶ç´„ã¯\u0026lt;=, \u0026gt;=, \u0026lt;, \u0026gt;ã§ãã‚Œãã‚Œè¨­å®šã™ã‚‹ã€‚\nã¾ãŸã€å¤‰æ•°ã«ä¸Šé™ã¨ä¸‹é™ã®ä¸¡æ–¹ãŒã‚ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã§ãã‚‹ã€‚\n1  opti.subject_to( opti.bounded(0,x,1) )   ã‚½ãƒ«ãƒã®æŒ‡å®šã¨æœ€é©åŒ– æœ€å¾Œã«ã€ã‚½ãƒ«ãƒã‚’æŒ‡å®šã—ã¦æœ€é©åŒ–ã‚’è¡Œã†ã€‚\n1 2  opti.solver(\u0026#39;ipopt\u0026#39;) # æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’è¨­å®š sol = opti.solve() # æœ€é©åŒ–è¨ˆç®—ã‚’å®Ÿè¡Œ   solverãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚½ãƒ«ãƒã‚’æŒ‡å®šã™ã‚‹ã€‚ã“ã“ã§ã¯IPOPTã‚’ç”¨ã„ã‚‹ã€‚æ¬¡ã«ã€solveãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æœ€é©åŒ–ãŒè¡Œã‚ã‚Œã‚‹ã€‚solã«ã¯æœ€é©åŒ–ã®çµæœãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\næœ€é©åŒ–ã‚½ãƒ«ãƒã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š æœ€é©åŒ–ã‚½ãƒ«ãƒï¼ˆã“ã“ã§ã¯IPOPTï¼‰ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«ã¯ã€solverãƒ¡ã‚½ãƒƒãƒ‰ã«è¾æ›¸å½¢å¼ã§æ¸¡ã™ã€‚\nã“ã“ã§ã€solverãƒ¡ã‚½ãƒƒãƒ‰ã®2ç•ªç›®ã®å¼•æ•°ã¯CasADiãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæœ¬è¨˜äº‹ã§ã¯èª¬æ˜ã‚’çœç•¥ï¼‰ã€3ç•ªç›®ã®å¼•æ•°ãŒæœ€é©åŒ–ã‚½ãƒ«ãƒã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ãªã‚‹ã€‚\n1 2 3 4 5  p_opts = {} s_opts = {\u0026#39;print_level\u0026#39; : 4, \u0026#39;tol\u0026#39; : 1E-3} opti.solver(\u0026#39;ipopt\u0026#39;, p_opts, s_opts) sol = opti.solve()   ã“ã®ä¾‹ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ãŸã€‚\n æœ€é©åŒ–è¨ˆç®—ã®ãƒ­ã‚°å‡ºåŠ›ã®è©³ç´°åº¦åˆã„ (print_level) ã‚’4ï¼ˆ0ï½12ã®ç¯„å›²ã€‚æ•°å­—ãŒå¤§ãã„ã»ã©è©³ç´°ã«ãªã‚‹ï¼‰ æœ€é©è§£ã®è¨±å®¹èª¤å·® (tol) ã‚’1E-3  IPOPTã§è¨­å®šå¯èƒ½ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nIpopt: Ipopt Options\nä¸€è¦§ã®å½¢å¼ã§ç¢ºèªã—ãŸã„å ´åˆã«ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nhttps://www.coin-or.org/Bonmin/option_pages/options_list_ipopt.html\næœ€é©åŒ–çµæœã®è©•ä¾¡ æœ€é©åŒ–å¾Œã®å¤‰æ•°ã‚„ç›®çš„é–¢æ•°ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€solã®valueãƒ¡ã‚½ãƒƒãƒ‰ã«å¤‰æ•°åã‚’æ¸¡ã™ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; sol.value(OBJ) 1.9999999825046224 \u0026gt;\u0026gt;\u0026gt; sol.value(x1) 0.9999999956261556 \u0026gt;\u0026gt;\u0026gt; sol.value(x2) 0.9999999956261556   æœ€é©åŒ–å•é¡Œã®æ¦‚è¦ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€sol.disp(), sol.stats()ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  \u0026gt;\u0026gt;\u0026gt; sol.disp() Opti { instance #7 #variables: 2 (nx = 2) #parameters: 0 (np = 0) #constraints: 3 (ng = 3) CasADi solver allocated. CasADi solver was called: Solve_Succeeded }   1 2 3 4 5 6 7 8 9  \u0026gt;\u0026gt;\u0026gt; sol.stats() {\u0026#39;iter_count\u0026#39;: 11, \u0026#39;iterations\u0026#39;: {\u0026#39;alpha_du\u0026#39;: [0.0, 1.0, 0.00011355335462534469, ï¼ˆä¸­ç•¥ï¼‰ \u0026#39;t_wall_nlp_jac_g\u0026#39;: 0.0, \u0026#39;t_wall_total\u0026#39;: 0.011968, \u0026#39;unified_return_status\u0026#39;: \u0026#39;SOLVER_RET_UNKNOWN\u0026#39;}   å‚è€ƒ CasADiã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\nCasADi - Docs\n","description":"Pythonã§è‡ªå‹•å¾®åˆ†ãƒ»éç·šå½¢æœ€é©åŒ–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªCasADiã¨æœ€é©åŒ–ã‚½ãƒ«ãƒIPOPTã‚’ä½¿ã£ã¦ã€åˆ¶ç´„ä»˜ãéç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":18,"section":"posts","tags":["CasADi","æœ€é©åŒ–"],"title":"CasADiã¨IPOPTã§éç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã","uri":"https://helve-blog.com/posts/python/casadi-nonlinear-programming/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æ©Ÿæ¢°å­¦ç¿’ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªScikit-learnã«ã¯ã€ç‰¹å¾´é‡ã®ã¹ãä¹—ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®PolynomialFeaturesã‚¯ãƒ©ã‚¹ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€PolynomialFeaturesã‚¯ãƒ©ã‚¹ã®å¼•æ•°ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚ã¾ãŸã€ç‰¹å¾´é‡ã®æ•°ã‚’1ï½3ã¾ã§å¤‰åŒ–ã•ã›ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å‡ºåŠ›ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚\nç’°å¢ƒ è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ä½¿ç”¨ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   Scikit-learn 0.21.3    æœ¬è¨˜äº‹ã§ã¯ã€Pythonã§ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚\n1 2  import numpy as np from sklearn.preprocessing import PolynomialFeatures   PolynomialFeaturesã‚¯ãƒ©ã‚¹ã®åŸºæœ¬ PolynomialFeaturesã‚¯ãƒ©ã‚¹ã¯ç‰¹å¾´é‡ï¼ˆã¾ãŸã¯å˜ã«å¤‰æ•°ï¼‰ã®ã¹ãä¹—ã‚’æ±‚ã‚ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚ç‰¹å¾´é‡ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã«ã¯ã€ç•°ãªã‚‹ç‰¹å¾´é‡é–“ã®ç©ã‚‚è¨ˆç®—ã™ã‚‹ã€‚\n1 2  PolynomialFeatures(degree=2, interaction_only=False, include_bias=True, order=\u0026#39;C\u0026#39;)   ä¸»ãªå¼•æ•°ã®æ„å‘³ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n degree: ä½•æ¬¡ã®é …ã¾ã§è¨ˆç®—ã™ã‚‹ã‹æŒ‡å®šã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯2. interaction_only: Trueã«ã™ã‚‹ã¨ã€ã‚ã‚‹ç‰¹å¾´é‡ã‚’2ä¹—ä»¥ä¸Šã—ãŸé …ãŒå‡ºåŠ›ã•ã‚Œãªããªã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯False. include_bias: Trueã«ã™ã‚‹ã¨ã€å®šæ•°é …(1)ã‚’å‡ºåŠ›ã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯True.  ãªãŠã€äº¤äº’ä½œç”¨ (interaction) ã¯ç•°ãªã‚‹ç‰¹å¾´é‡ã®ç©ã®ã“ã¨ã§ã‚ã‚‹ã€‚\nåŒã˜ç‰¹å¾´é‡ã®ã¹ãä¹— (x0**2, x0**3ãªã©)ã¯å…ƒã®ç‰¹å¾´é‡x0ã¨ã®ç›¸é–¢ãŒå¤§ãã„ãŸã‚ã€å˜ç´”ã«å›å¸°å¼ã®èª¬æ˜å¤‰æ•°ã«è¿½åŠ ã™ã‚‹ã¨å¤šé‡å…±ç·šæ€§ã®å•é¡ŒãŒç™ºç”Ÿã™ã‚‹ã€‚\nãã“ã§ã€interaction_only=Trueã¨ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€åŒã˜ç‰¹å¾´é‡ã®ã¹ãä¹—ã‚’é™¤ã„ã¦ã€ç•°ãªã‚‹ç‰¹å¾´é‡ã®ç©(x0*x1, x0*x1*x2ãªã©)ã®ã¿ã‚’èª¬æ˜å¤‰æ•°ã«è¿½åŠ ã™ã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã«æœ›ã¾ã—ã„ã€‚\nPolynomialFeaturesã‚¯ãƒ©ã‚¹ã§ã¯ã€ä¸»ã«fit_transform()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\nPolynomialFeatures.fit_transform(X)ã®ã‚ˆã†ã«ç”¨ã„ã‚‹ã€‚\nã“ã“ã§ã€Xã¯ï¼ˆã‚µãƒ³ãƒ—ãƒ«æ•°ï¼‰Ã—ï¼ˆç‰¹å¾´é‡ã®æ•°ï¼‰ã®2æ¬¡å…ƒé…åˆ—ã§ã‚ã‚‹ã€‚\nã¾ãŸã€æˆ»ã‚Šå€¤ã¯ï¼ˆã‚µãƒ³ãƒ—ãƒ«æ•°ï¼‰Ã—ï¼ˆæ–°ã—ã„ç‰¹å¾´é‡ã®æ•°ï¼‰ã®2æ¬¡å…ƒé…åˆ—ã§ã‚ã‚‹ã€‚\nã€Œæ–°ã—ã„ç‰¹å¾´é‡ã®æ•°ã€ã¯degreeãªã©ã®å¼•æ•°ã«ã‚ˆã£ã¦å¤‰åŒ–ã™ã‚‹ã€‚\nPolynomialFeaturesã‚¯ãƒ©ã‚¹ã®ä¸»ãªä½¿ã„æ–¹ã¨ã—ã¦ã¯ã€å¤šé …å¼å›å¸°ãŒæŒ™ã’ã‚‰ã‚Œã‚‹ã€‚å¤šé …å¼å›å¸°ã¨ã¯ã€ç‰¹å¾´é‡ã®næ¬¡ã¾ã§ã®ã¹ãä¹—ã‚’ç”¨ã„ãŸå›å¸°ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ã€‚3æ¬¡ã®å¤šé …å¼å›å¸°ã®å ´åˆã€ç‰¹å¾´é‡ã‚’$x$, ç›®çš„å¤‰æ•°ã‚’$y$ã¨ã™ã‚‹ã¨ã€æ¬¡å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$y=a+bx+cx^2+dx^3$\nPolynomialFeaturesã‚¯ãƒ©ã‚¹ã¨ç·šå½¢å›å¸°ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹LinearRegressionã‚¯ãƒ©ã‚¹ã‚’Pipelineã§çµ„ã¿åˆã‚ã›ã‚‹ã¨ã€å¤šé …å¼å›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã§ãã‚‹ã€‚\nä»¥ä¸‹ã§ã¯ã€ç‰¹å¾´é‡ã®æ•°ã‚’1ï½3ã¨ã—ã¦ã€interaction_onlyã¨include_biasã®åŠ¹æœã‚’ç¢ºèªã™ã‚‹ã€‚\nç‰¹å¾´é‡ãŒ1å€‹ã®å ´åˆ 2æ¬¡ã®é …ã¾ã§æ±‚ã‚ã‚‹ ã¾ãšã€ç‰¹å¾´é‡ãŒ1å€‹ã®ã¿ã®å ´åˆã«ã€degree=2ã¨ã—ã¦2æ¬¡ã¾ã§ã®ã¹ãä¹—ã‚’æ±‚ã‚ã‚‹ã€‚å…¥åŠ›å€¤ã¯3ã¨ã™ã‚‹ã€‚\nç‰¹å¾´é‡ã‚’xã¨ã™ã‚‹ã¨ã€\n1, x, x**2\nãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n1 2 3 4  X1 = [[3]] poly2d = PolynomialFeatures(2) print(poly2d.fit_transform(X1)) # [[1. 3. 9.]]   ãƒã‚¤ã‚¢ã‚¹é …ã‚’é™¤ã æ¬¡ã«ã€include_bias=Falseã¨ã—ã¦ãƒã‚¤ã‚¢ã‚¹é …(1)ã‚’é™¤ãã€‚\n1 2 3 4  X1 = [[3]] poly2d_nobias = PolynomialFeatures(2, include_bias=False) print(poly2d_nobias.fit_transform(X1)) # [[3. 9.]]   ç‰¹å¾´é‡ãŒ2å€‹ã®å ´åˆ 2æ¬¡ã®é …ã¾ã§æ±‚ã‚ã‚‹ 2ã¤ã®ç‰¹å¾´é‡ã‚’x, yã¨ã™ã‚‹ã¨ã€\n1, x, y, x**2, x*y, y**2\nãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\nx=2, y=3ã¨ã—ã¦2æ¬¡ã¾ã§ã®ã¹ãä¹—ã‚’æ±‚ã‚ã‚‹ã€‚\n1 2 3 4  X2 = [[2, 3]] poly2d = PolynomialFeatures(2) print(poly2d.fit_transform(X2)) # [[1. 2. 3. 4. 6. 9.]]   3æ¬¡ã®é …ã¾ã§æ±‚ã‚ã‚‹ æ¬¡ã«ã€3æ¬¡ã¾ã§ã®é …ã‚’æ±‚ã‚ã‚‹ã€‚2ã¤ã®ç‰¹å¾´é‡ã‚’x, yã¨ã™ã‚‹ã¨ã€\n1, x, y, x**2, x*y, y**2, x**3, (x**2)*y, x*(y**2), y**3\nãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\nx=2, y=3ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4  X2 = [[2, 3]] poly3d = PolynomialFeatures(3) print(poly3d.fit_transform(X2)) # [[ 1. 2. 3. 4. 6. 9. 8. 12. 18. 27.]]   äº¤äº’ä½œç”¨é …ã®ã¿å‡ºåŠ›ã™ã‚‹ interaction_only=Trueã¨ã—ã¦ã€äº¤äº’ä½œç”¨é …ã®ã¿å‡ºåŠ›ã™ã‚‹ã€‚\n2ã¤ã®ç‰¹å¾´é‡ã‚’x, yã¨ã™ã‚‹ã¨ã€\n1, x, y, x*y\nãŒå¾—ã‚‰ã‚Œã‚‹ã€‚ã™ãªã‚ã¡ã€interaction_only=Falseã®å ´åˆã¨æ¯”è¼ƒã™ã‚‹ã¨ã€x**2ã¨y**2ã®é …ãŒå‡ºåŠ›ã•ã‚Œãªããªã‚‹ã€‚\n1 2 3 4  X2 = [[2, 3]] poly2d_io = PolynomialFeatures(2, interaction_only=True) print(poly2d_io.fit_transform(X2)) # [[1. 2. 3. 6.]]   ç‰¹å¾´é‡ãŒ3å€‹ã®å ´åˆ 2æ¬¡ã®é …ã¾ã§æ±‚ã‚ã‚‹ 3ã¤ã®ç‰¹å¾´é‡ã‚’x, y, zã¨ã™ã‚‹ã¨ã€\n1, x, y, z, x**2, x*y, x*z, y**2, y*z, z**2\nãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\nx=2, y=3, z=5ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4  X3 = [[2, 3, 5]] poly2d = PolynomialFeatures(2) print(poly2d.fit_transform(X3)) # [[ 1. 2. 3. 5. 4. 6. 10. 9. 15. 25.]]   äº¤äº’ä½œç”¨é …ã®ã¿å‡ºåŠ›ã™ã‚‹ interaction_only=Trueã¨ã—ã¦ã€äº¤äº’ä½œç”¨é …ã®ã¿å‡ºåŠ›ã™ã‚‹ã€‚\n3ã¤ã®ç‰¹å¾´é‡ã‚’x, y, zã¨ã™ã‚‹ã¨ã€\n1, x, y, z, x*y, x*z, y*z, \nãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\nã™ãªã‚ã¡ã€interaction_only=Falseã®å ´åˆã¨æ¯”è¼ƒã™ã‚‹ã¨ã€x**2, y**2, z**2ã®é …ãŒå‡ºåŠ›ã•ã‚Œãªããªã‚‹ã€‚\nx=2, y=3, z=5ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4  X3 = [[2, 3, 5]] poly2d_io = PolynomialFeatures(2, interaction_only=True) print(poly2d_io.fit_transform(X3)) # [[ 1. 2. 3. 5. 6. 10. 15.]]   å‚è€ƒ  sklearn.preprocessing.PolynomialFeatures â€” scikit-learn 0.24.0 documentation scikit-learnã®PolynomialFeaturesã§å¤šé …å¼ã¨äº¤äº’ä½œç”¨é …ã®ç‰¹å¾´é‡ã‚’ä½œã‚‹ - é™ã‹ãªã‚‹åè¾  Pythonã§ã¯ã˜ã‚ã‚‹æ©Ÿæ¢°å­¦ç¿’posted with ãƒ¨ãƒ¡ãƒ¬ãƒAndreas C. Muller/ä¸­ç”° ç§€åŸº ã‚ªãƒ©ã‚¤ãƒªãƒ¼ãƒ»ã‚¸ãƒ£ãƒ‘ãƒ³ 2017å¹´05æœˆ25æ—¥é ƒ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹Amazon ","description":"PolynomialFeaturesã‚¯ãƒ©ã‚¹ã®å¼•æ•°ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚ã¾ãŸã€ç‰¹å¾´é‡ã®æ•°ã‚’1ï½3ã¾ã§å¤‰åŒ–ã•ã›ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦å‡ºåŠ›ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚","id":19,"section":"posts","tags":["Python","Scikit-learn"],"title":"Scikit-learnã®PolynomialFeaturesã§ã¹ãä¹—ã‚’æ±‚ã‚ã‚‹","uri":"https://helve-blog.com/posts/python/scikit-learn-polynomialfeatures/"},{"content":"ã¯ã˜ã‚ã« Googleãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆ©ç”¨ã—ã¦ã€Hugoã§ä½œæˆã—ãŸãƒ–ãƒ­ã‚°ã«ãŠå•åˆã›ãƒ•ã‚©ãƒ¼ãƒ ã‚’åŸ‹ã‚è¾¼ã‚€æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚ã•ã‚‰ã«ã€å…¨ãƒšãƒ¼ã‚¸å…±é€šã§è¡¨ç¤ºã•ã‚Œã‚‹ãƒ•ãƒƒã‚¿ãƒ¼ã‹ã‚‰ãŠå•åˆã›ãƒ•ã‚©ãƒ¼ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\nã“ã®è¨˜äº‹ã§ã¯ZZoãƒ†ãƒ¼ãƒã‚’å¯¾è±¡ã¨ã—ãŸãŸã‚ã€ä»–ã®ãƒ†ãƒ¼ãƒã§ã¯é©å®œèª­ã¿æ›¿ãˆã¦ã„ãŸã ããŸã„ã€‚\nã¾ãŸã€Hugoã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.79.0/extendedã§ã‚ã‚‹ã€‚\nGoogleãƒ•ã‚©ãƒ¼ãƒ ã®ä½œæˆ Googleãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã¯Googleã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒå¿…è¦ãªãŸã‚ã€æŒã£ã¦ã„ãªã‘ã‚Œã°ä½œæˆã™ã‚‹ã€‚\næ¬¡ã«ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ã€Œãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã€ã‚’é¸æŠã™ã‚‹ã€‚\nGoogle ãƒ•ã‚©ãƒ¼ãƒ  - ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã‚’ä½œæˆã€åˆ†æã§ãã‚‹ç„¡æ–™ã‚µãƒ¼ãƒ“ã‚¹\nãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãŒã€ã“ã“ã§ã¯ä¸€ã‹ã‚‰ä½œã‚‹ãŸã‚ã€Œç©ºç™½ã€ã‚’é¸æŠã™ã‚‹ã€‚\nç©ºç™½ã®ãƒ•ã‚©ãƒ¼ãƒ ã§è³ªå•é …ç›®ã‚’è¿½åŠ ã§ãã‚‹ã€‚ã“ã®ã‚µã‚¤ãƒˆã§ã¯ã€ä»¥ä¸‹ã®è³ªå•é …ç›®ã‚’è¨­å®šã—ãŸã€‚\n åå‰ ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ ä»¶å å•åˆã›å†…å®¹  ã¾ãŸã€å…¨é …ç›®ã¨ã‚‚å…¥åŠ›ã‚’å¿…é ˆã¨ã—ãŸã€‚ä½œæˆã—ãŸãƒ•ã‚©ãƒ¼ãƒ ã‚’ç”»åƒã«ç¤ºã™ã€‚\nä½œæˆå¾Œã€å³ä¸Šã®ã€Œé€ä¿¡ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€‚é€ä¿¡æ–¹æ³•ã‹ã‚‰åŸ‹ã‚è¾¼ã¿ï¼ˆ\u0026lt; \u0026gt;ï¼‰ã‚’é¸ã³ã€åŸ‹ã‚è¾¼ã¿ç”¨ã®HTMLã®iframeã‚¿ã‚°ã‚’å–å¾—ã™ã‚‹ã€‚\nè¨˜äº‹ã®ä½œæˆ æ¬¡ã«ã€è¨˜äº‹ã®markdownãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€æœ¬æ–‡ä¸­ã«iframeã‚¿ã‚°ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã€‚\nã¾ãŸã€Hugoã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ0.60ä»¥ä¸Šã®å ´åˆã¯ã€config.tomlãƒ•ã‚¡ã‚¤ãƒ«ã®[markup.goldmark.renderer]ã§unsafe = trueã¨ãªã£ã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ï¼ˆZZoãƒ†ãƒ¼ãƒã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯trueã§ã‚ã‚‹ï¼‰ã€‚\n1 2 3 4  [markup] [markup.goldmark] [markup.goldmark.renderer] unsafe = true   â€»ãƒ†ãƒ¼ãƒã«ã‚ˆã£ã¦ã¯config.tomlãƒ•ã‚¡ã‚¤ãƒ«ãŒrootãƒ•ã‚©ãƒ«ãƒ€ç›´ä¸‹ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹å ´åˆã‚‚ã‚ã‚‹ã®ã§æ³¨æ„ã€‚\nunsafe = trueã¨ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€markdownä¸­ã®HTMLã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾å‡ºåŠ›ã—ã¦ãã‚Œã‚‹ã€‚\nãƒ•ãƒƒã‚¿ã«ãƒªãƒ³ã‚¯ã‚’è¿½åŠ  æœ€å¾Œã«ã€ãƒ•ãƒƒã‚¿ã«è¨˜äº‹ã¸ã®ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã™ã‚‹ã€‚params.tomlã‚’é–‹ãã€footerLinksã®nameã«è¡¨ç¤ºã™ã‚‹æ–‡å­—ã€linkã«è¨˜äº‹ã®URLã‚’è²¼ã‚‹ã€‚\n1 2 3  [[footerLinks]] name = \u0026#34;ãŠå•ã„åˆã‚ã›\u0026#34; link = \u0026#34;https://helve-blog.com/posts/manage/contact/\u0026#34;   linkã¯ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«è¨˜äº‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹URLã¨ã™ã‚‹ã€‚\nã™ã‚‹ã¨ã€ãƒ•ãƒƒã‚¿ã«ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ãŒã‚ã‚‹è¨˜äº‹ã¸ã®ãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nå‚è€ƒ HUGOã§æ§‹ç¯‰ã—ãŸã‚µã‚¤ãƒˆã®è¨˜äº‹ã«HTMLã‚³ãƒ¼ãƒ‰ã‚’åŸ‹ã‚è¾¼ã‚“ã§è¡¨ç¤ºã™ã‚‹æ–¹æ³• | Selcial\n","description":"Hugoã®ZZoãƒ†ãƒ¼ãƒã«ã€Googleãƒ•ã‚©ãƒ¼ãƒ ã‚’åˆ©ç”¨ã—ãŸãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¨­ç½®ã—ãŸã€‚","id":20,"section":"posts","tags":["Hugo"],"title":"Hugoã‚µã‚¤ãƒˆã«ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¨­ç½®ã™ã‚‹","uri":"https://helve-blog.com/posts/web-technology/hugo-contact-form/"},{"content":"ã¯ã˜ã‚ã« Hugoã¨ZZoãƒ†ãƒ¼ãƒã§KaTeXã«ã‚ˆã‚Šæ•°å¼ã‚’æç”»ã™ã‚‹æ–¹æ³•ãƒ»æ³¨æ„ç‚¹ã€ãŠã‚ˆã³ã‚µãƒ³ãƒ—ãƒ«ã‚’ã¾ã¨ã‚ãŸã€‚Hugoã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.79.0/extendedã§ã‚ã‚‹ã€‚\nKaTeXã¨ã¯ KaTeXã¯HTMLä¸Šã§æ•°å¼ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®JavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚åŒæ§˜ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«MathJaxãŒã‚ã‚‹ãŒã€KaTeXã¯æ•°å¼ã®æç”»ãŒé«˜é€Ÿãªåˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nKaTeX, MathJaxã¨ã‚‚ã«ã€æ•°å¼ã‚’TeXé¢¨ã«è¨˜è¿°ã™ã‚‹ã€‚\nZZoã§KaTeXã‚’æ‰±ã† ZZoãƒ†ãƒ¼ãƒã§KaTeXã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€Markdownã®Front Matterã§ã€librariesã«katexã‚’è¿½åŠ ã™ã‚‹ã€‚Front Matterã‚’YAMLã§è¨˜è¿°ã™ã‚‹ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1 2 3 4 5  ---title:Hugoã¨ZZoã§ä½¿ãˆã‚‹KaTeXæ•°å¼ã‚µãƒ³ãƒ—ãƒ«libraries:- katex---  è¡Œå†…ã«æ•°å¼ã‚’è¨˜è¿°ã™ã‚‹å ´åˆã¯ã€$ã§æ•°å¼ã‚’æŒŸã‚€ã€‚\n1  å¤‰æ•°ã‚’$x$ã¨ç½®ãã€‚   ä¸Šè¨˜ã®Markdownã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\nå¤‰æ•°ã‚’$x$ã¨ç½®ãã€‚\nä¸€æ–¹ã€ä¸€è¡Œã®ç‹¬ç«‹ã—ãŸæ•°å¼ã¨ã—ã¦è¨˜è¿°ã™ã‚‹å ´åˆã¯ã€$$ã§æ•°å¼ã‚’å›²ã‚€ã€‚ã¾ãŸã€$$ï½$$ã®ä¸­ã§æ”¹è¡Œã™ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚\nã¾ãŸã€Hugoã®ãƒã‚°ã‹ä¸æ˜ã ãŒã€ä¸ç­‰å·â‰ ã‚’\\neqã§å‡ºåŠ›ã™ã‚‹ã¨ã€æ–œã‚ç·šãŒãšã‚Œã¦è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã‚‚ã—ã“ã®ãƒšãƒ¼ã‚¸ã‚’é–²è¦§ã•ã‚Œã¦ã„ã‚‹ã¨ãã«æ­£ã—ãè¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°ã€ãƒã‚°ãŒä¿®æ­£ã•ã‚Œã¦ã„ã‚‹ï¼‰ã€‚\n1  $a \\neqb $   çµæœï¼š\n$ a \\neq b $\nã¾ãŸã€æ”¹è¡Œã™ã‚‹å ´åˆã¯ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥\\ã‚’3ã¤é‡ã­ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n1  $a \\\\\\ b $   çµæœï¼š\n$ a \\\\ b $\næ·»ãˆå­— ä¸‹ä»˜ãæ·»ãˆå­—ã¯_, ä¸Šä»˜ãæ·»ãˆå­—ã¯^ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\n1  $a_i =b^n $   çµæœï¼š\n$ a_i = b^n $\né€£ç«‹æ–¹ç¨‹å¼ é€£ç«‹æ–¹ç¨‹å¼ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€casesã§å¼ã‚’å›²ã‚€ã€‚\ncasesã§ã¯ãªãã€numcasesã‚„subnumcasesã¨ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œãªã„ã®ã§æ³¨æ„ã€‚\n1  $$\\begin{cases} 2x +4y =10\\\\\\ x +3y =6\\end{cases} $$   çµæœï¼š\n$$ \\begin{cases} 2x + 4y = 10 \\\\ x + 3y = 6 \\end{cases} $$\nè¤‡æ•°è¡Œã«ã¾ãŸãŒã‚‹æ•°å¼ è¤‡æ•°è¡Œã«ã¾ãŸãŒã‚‹æ•°å¼ã«ãŠã„ã¦ç­‰å·ã®ä½ç½®ã‚’æƒãˆã‚‹ã«ã¯ã€arrayç’°å¢ƒã‚’ä½¿ã†ã€‚arrayã®å¾Œã‚ã®ä½ç½®æƒãˆãŒå¿…è¦ãªã®ã§æ³¨æ„ã™ã‚‹ã“ã¨ã€‚lllã¯å…¨ã¦å·¦æƒãˆã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹(l: å·¦ã€c: ä¸­å¤®ã€r: å³)ã€‚\narrayã§ã¯ãªãalignã¨ã™ã‚‹ã¨è¡¨ç¤ºã•ã‚Œãªã„ã®ã§æ³¨æ„ã€‚\n1  $$\\begin{array}{lll} y \u0026amp;=\u0026amp; (x+1)^2\\\\\\ \u0026amp;=\u0026amp; x^2+2x +1\\end{array} $$   çµæœï¼š\n$$ \\begin{array}{lll} y \u0026amp;=\u0026amp; (x+1)^2 \\\\ \u0026amp;=\u0026amp; x^2 + 2x + 1 \\end{array} $$\nãƒ™ã‚¯ãƒˆãƒ« å¤ªå­—ã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯bm, çŸ¢å°ä»˜ãã®ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯vecã‚’ç”¨ã„ã‚‹ã€‚\n1  $\\bm{a}, \\vec{b} $   çµæœï¼š\n$ \\bm{a}, \\vec{b} $\nè¡Œåˆ— è¡Œåˆ—ã‚’å‡ºåŠ›ã™ã‚‹ã«ã¯ã„ãã¤ã‹æ–¹æ³•ãŒã‚ã‚Šã€arrayã‚„pmatrix, bmatrixãŒä½¿ãˆã‚‹ã€‚\n1  $$\\left[\\begin{array}{cc} a \u0026amp; b \\\\\\ c \u0026amp; d \\end{array} \\right]$$   çµæœ\n$$ \\left[ \\begin{array}{cc} a \u0026amp; b \\\\ c \u0026amp; d \\end{array} \\right] $$\n1  $$\\begin{pmatrix} a \u0026amp; b \\\\\\ c \u0026amp; d \\end{pmatrix} $$   çµæœ\n$$ \\begin{pmatrix} a \u0026amp; b \\\\ c \u0026amp; d \\end{pmatrix} $$\n1  $$\\begin{bmatrix} a \u0026amp; b \\\\\\ c \u0026amp; d \\end{bmatrix} $$   çµæœ\n$$ \\begin{bmatrix} a \u0026amp; b \\\\ c \u0026amp; d \\end{bmatrix} $$\næ³¢æ‹¬å¼§ æ³¢æ‹¬å¼§{ }ã®å‰ã«ã¯ã€ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥\\ã‚’2ã¤é‡ã­ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆé€šå¸¸ã®TeXã§ã¯1ã¤ã ã‘å¿…è¦ï¼‰ã€‚\nè‡ªå‹•çš„ã«æ‹¬å¼§ã®å¤§ãã•ã‚’èª¿ç¯€ã™ã‚‹\\leftã¨\\rightã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã‚‚åŒã˜ãã€\\ãŒ2ã¤å¿…è¦ã€‚\n1 2  $$\\\\{ 0, 10\\\\} $$ $$\\left\\\\{ \\frac{1}{2} \\right\\\\} $$   çµæœ\n$$ \\{ 0, 10 \\} $$\n$$ \\left\\{ \\frac{1}{2} \\right\\} $$\nå‚è€ƒ Hugoã®ZZoãƒ†ãƒ¼ãƒã®KaTeXæ•°å¼ã‚µãƒ³ãƒ—ãƒ«\nKatex support â€“ Hugo Zzo Theme\nä¸Šè¨˜ãƒšãƒ¼ã‚¸ã®Markdownãƒ•ã‚¡ã‚¤ãƒ« (GitHub)\nhugo-theme-zzo_test-katex.md at master Â· zzossig_hugo-theme-zzo\nã“ã®ãƒšãƒ¼ã‚¸ã«ã¯KaTeXã§åˆ©ç”¨å¯èƒ½ãªæ•°å¼ã‚’å…¨ã¦è¨˜è¼‰ã—ãã‚Œãªã„ãŒã€åŸºæœ¬çš„ã«ã¯LaTeXã«æº–ã˜ã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã•ã‚ŒãŸã„ã€‚\nLaTeXã‚³ãƒãƒ³ãƒ‰é›†\n","description":"Hugoã¨ZZoãƒ†ãƒ¼ãƒã§KaTeXã«ã‚ˆã‚Šæ•°å¼ã‚’æç”»ã™ã‚‹æ–¹æ³•ãƒ»æ³¨æ„ç‚¹ã€ãŠã‚ˆã³ã‚µãƒ³ãƒ—ãƒ«ã‚’ã¾ã¨ã‚ãŸã€‚","id":21,"section":"posts","tags":["Hugo"],"title":"Hugoã¨ZZoãƒ†ãƒ¼ãƒã§ä½¿ãˆã‚‹KaTeXæ•°å¼ã‚µãƒ³ãƒ—ãƒ«","uri":"https://helve-blog.com/posts/web-technology/hugo-zzo-katex/"},{"content":"ã¯ã˜ã‚ã« Hugoã§ç”Ÿæˆã™ã‚‹ã‚µã‚¤ãƒˆã§ã‚¢ã‚¯ã‚»ã‚¹æ•°ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã«ã¯ã€Google Analytics (ä»¥ä¸‹GAã¨ã™ã‚‹) ãªã©ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã“ã®ã‚µã‚¤ã‚‚GAã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚\nã‚µã‚¤ãƒˆã«åŸ‹ã‚è¾¼ã‚€GAã¯å¤–éƒ¨ã®JavaScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‘¼ã¶ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€2021å¹´1æœˆç¾åœ¨ã®æœ€æ–°ã®ã‚³ãƒ¼ãƒ‰ã§ã¯gtag.jsã‚’å‘¼ã¶ã€‚ä¸€æ–¹ã€æ—§å¼ã®ã‚³ãƒ¼ãƒ‰ã§ã¯analytics.jsã‚’å‘¼ã¶ã€‚\nå•é¡Œã¯ã€æœ€æ–°ã®Hugo Ver. 0.79.0/extended ã§ã‚‚analytics.jsã«ã—ã‹å¯¾å¿œã—ã¦ã„ãªã„ã“ã¨ã§ã‚ã‚‹ã€‚ç¾åœ¨ã€GAã§ç™ºè¡Œå¯èƒ½ãªãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã¯gtag.jsã‚’åˆ©ç”¨ã™ã‚‹ã‚‚ã®ã ã‘ã§ã‚ã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®Hugoã§ã¯GAã‚’ä½¿ãˆãªã„ã“ã¨ã«ãªã‚‹ï¼ˆä¸€éƒ¨ã®Hugoã®ãƒ†ãƒ¼ãƒã§ã¯gtag.jsã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒã€ã“ã®ã‚µã‚¤ãƒˆã§ä½¿ç”¨ã—ã¦ã„ã‚‹ZZoãƒ†ãƒ¼ãƒã§ã¯æœªå¯¾å¿œã§ã‚ã‚‹ï¼‰ã€‚\nã“ã®è¨˜äº‹ã§ã¯ZZoãƒ†ãƒ¼ãƒã‚’å¯¾è±¡ã¨ã—ã¦ã€gtag.jsã‚’å‘¼ã¶ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘æ–¹æ³•ã‚’ç¤ºã™ã€‚ä»–ã®ãƒ†ãƒ¼ãƒã§ã‚‚å‚è€ƒã«ã•ã‚ŒãŸã„ã€‚\nãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹æ–¹æ³• ä»¥ä¸‹ã®æ‰‹é †ã§ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚\n config.tomlã‹ã‚‰ã‚¿ã‚°ã®è¨­å®šã‚’å‰Šé™¤ Partial Templatesã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ä»˜  config.tomlã‹ã‚‰ã‚¿ã‚°ã®è¨­å®šã‚’å‰Šé™¤ ã¾ãšã€ä»¥ä¸‹ã«ã‚ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«GAã‚¿ã‚°ã‚’è¨­å®šã—ã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚\nroot/config/_default/config.toml\nã“ã“ã§ã€rootã¯Hugoã®ã‚µã‚¤ãƒˆã‚’ä½œæˆã—ãŸãƒ•ã‚©ãƒ«ãƒ€ã§ã‚ã‚‹ã€‚\nè¨­å®šã—ã¦ã„ã‚‹å ´åˆã€æ—§å¼ã®analytics.jsã‚’å‘¼ã¶ã‚¿ã‚°ãŒè‡ªå‹•çš„ã«ç”Ÿæˆã•ã‚Œã¦ã—ã¾ã†ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«googleAnalyticsã‚’ç©ºç™½ã¨ã™ã‚‹ã€‚\n1  googleAnalytics = \u0026#34;\u0026#34;   Partial Templatesã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ä»˜ æ¬¡ã«ã€Partial Templatesã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã€‚Partial Templatesã¨ã¯HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®æ–­ç‰‡ã§ã‚ã‚Šã€Hugoã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ãã«ã€HTMLãƒ•ã‚¡ã‚¤ãƒ«å†…ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã€‚\nã¾ãšã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚\nroot/layouts/partials/google/analytics.html\nã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«GAã§å–å¾—ã—ãŸãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  \u0026lt;!-- Global site tag (gtag.js) - Google Analytics --\u0026gt; \u0026lt;script async src=\u0026#34;https://www.googletagmanager.com/gtag/js?id=G-TCXXXXXXXX\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag(\u0026#39;js\u0026#39;, new Date()); gtag(\u0026#39;config\u0026#39;, \u0026#39;G-TCXXXXXXXX\u0026#39;); \u0026lt;/script\u0026gt;   G-TCXXXXXXXXã¯ã‚µã‚¤ãƒˆã«ã‚ˆã£ã¦ç•°ãªã‚‹æ–‡å­—åˆ—ã«ãªã‚‹ã€‚\næ¬¡ã«ã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚\nroot/layouts/partials/head/custom-head.html\nã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã‚’è¨˜è¿°ã™ã‚‹ã€‚\n1 2 3 4  \u0026lt;!-- Analytics --\u0026gt; {{ if not .Site.IsServer }} {{ partial \u0026#34;google/analytics\u0026#34; . }} {{ end }}   ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€google/analytics.htmlã‚’å‘¼ã¶ã‚ˆã†ã«è¨˜è¼‰ã—ã¦ã„ã‚‹ã€‚\nã¾ãŸã€if not .Site.IsServerã¨è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã€Hugoã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã—ãŸã¨ãï¼ˆã™ãªã‚ã¡ã€hugo serverã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãï¼‰ã«ã¯ã€ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’HTMLã«å‡ºåŠ›ã›ãšã€hugoã‚³ãƒãƒ³ãƒ‰ã§HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®å®Ÿä½“ã‚’ç”Ÿæˆã—ãŸã¨ãã®ã¿å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚\nä»¥ä¸Šã§ã€æœ€æ–°ã®GAã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’Hugoã‚µã‚¤ãƒˆã«åŸ‹ã‚è¾¼ã‚ã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚\nå‚è€ƒ  Google ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ç”¨ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’åŸ‹ã‚è¾¼ã‚€ ã¾ãã¾ãHugo Goãƒãƒ¼ãƒˆ Hugoã§æœªã å¯¾å¿œã—ã¦ã„ãªã„gtag.jsã‚’åˆ©ç”¨ã—ã¦ Googleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã™ã‚‹ - Qiita  ","description":"Hugoã®Partial Templatesã‚’åˆ©ç”¨ã—ã¦ã€æœ€æ–°ç‰ˆã®Google Analytics (gtag.js) ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ã‚’åŸ‹ã‚è¾¼ã‚€æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":22,"section":"posts","tags":["Hugo"],"title":"Hugoã‚µã‚¤ãƒˆã«æœ€æ–°ç‰ˆã®Google Analyticsã®ã‚¿ã‚°ã‚’åŸ‹ã‚è¾¼ã‚€","uri":"https://helve-blog.com/posts/web-technology/hugo-google-analytics-tag/"},{"content":"ã¯ã˜ã‚ã« ã‚µã‚¤ãƒˆå…¨èˆ¬ã«é–¢ã™ã‚‹ã”è³ªå•ã¯ã“ã¡ã‚‰ã‹ã‚‰ãŠé¡˜ã„ã—ã¾ã™ï¼ˆGoogleãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼‰ã€‚\nå€‹ã€…ã®è¨˜äº‹ã«é–¢ã™ã‚‹ã”è³ªå•ãƒ»æ„Ÿæƒ³ã¯ã€ãã®ãƒšãƒ¼ã‚¸ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚\nèª­ã¿è¾¼ã‚“ã§ã„ã¾ã™â€¦\r","description":"ã‚µã‚¤ãƒˆå…¨èˆ¬ã«é–¢ã™ã‚‹ã”è³ªå•ã¯ã“ã¡ã‚‰ã‹ã‚‰ãŠé¡˜ã„ã—ã¾ã™ã€‚","id":23,"section":"posts","tags":[""],"title":"ãŠå•ã„åˆã‚ã›","uri":"https://helve-blog.com/posts/manage/contact/"},{"content":"ã¯ã˜ã‚ã« é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿Hugoã§ä½¿ç”¨é »åº¦ã®é«˜ã„ã‚³ãƒãƒ³ãƒ‰ã‚’ã¾ã¨ã‚ãŸã€‚\nHugoã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯0.79.0/extendedã§ã‚ã‚‹ã€‚\næ–°ã—ã„ã‚µã‚¤ãƒˆã‚’ä½œã‚‹(hugo new site) æ–°ã—ã„ã‚µã‚¤ãƒˆã‚’ä½œã‚‹ã«ã¯ã€hugo new site \u0026lt;site name\u0026gt;ã‚’å®Ÿè¡Œã™ã‚‹ã€‚å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«\u0026lt;site name\u0026gt;ã¨åŒã˜åå‰ã®ãƒ•ã‚©ãƒ«ãƒ€ãŒä½œæˆã•ã‚Œã€ãã®ä¸­ã«ã‚µã‚¤ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚\nå®Ÿè¡Œä¾‹ \u0026gt; hugo new site mysite Congratulations! Your new Hugo site is created in C:\\...\\mysite. Just a few more steps and you're ready to go: 1. Download a theme into the same-named folder. Choose a theme from https://themes.gohugo.io/ or create your own with the \u0026quot;hugo new theme \u0026lt;THEMENAME\u0026gt;\u0026quot; command. 2. Perhaps you want to add some content. You can add single files with \u0026quot;hugo new \u0026lt;SECTIONNAME\u0026gt;\\\u0026lt;FILENAME\u0026gt;.\u0026lt;FORMAT\u0026gt;\u0026quot;. 3. Start the built-in live server via \u0026quot;hugo server\u0026quot;. Visit https://gohugo.io/ for quickstart guide and full documentation. æ–°ã—ã„è¨˜äº‹ã‚’ä½œã‚‹(hugo new) æ–°ã—ã„ã‚µã‚¤ãƒˆã‚’ä½œã‚‹ã«ã¯ã€hugo new \u0026lt;file path\u0026gt;ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n\u0026lt;file path\u0026gt;ã¯contentãƒ•ã‚©ãƒ«ãƒ€ã‚’åŸºæº–ã¨ã—ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«åã‚‚å«ã‚ã¦æŒ‡å®šã™ã‚‹ï¼ˆãƒ†ãƒ¼ãƒã«ã‚ˆã£ã¦æŒ™å‹•ãŒè‹¥å¹²ç•°ãªã‚‹ãŸã‚æ³¨æ„ï¼‰ã€‚\nå®Ÿè¡Œä¾‹ ãƒ†ãƒ¼ãƒã‚’æœªå°å…¥ã®å ´åˆã€content/posts/test.mdã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹ã«ã¯ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚postsãƒ•ã‚©ãƒ«ãƒ€ãŒãªã„å ´åˆã«ã¯ã€è‡ªå‹•çš„ã«ä½œæˆã•ã‚Œã‚‹ã€‚\n\u0026gt; hugo new posts/test.md C:\\...\\content\\posts\\test.md created ã¾ãŸã€åŒã˜åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ï¼ˆä¸Šæ›¸ãã¯ã•ã‚Œãªã„ï¼‰ã€‚\n\u0026gt; hugo new posts/test.md Error: C:\\...\\content\\posts\\test.md already exists ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã®ä»®æƒ³ã‚µãƒ¼ãƒã‚’ç«‹ã¡ä¸Šã’ã‚‹(hugo server) ä½œæˆã—ãŸè¨˜äº‹ã‚„ã€ã‚µã‚¤ãƒˆã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ãŸã‚ã«ã¯ã€hugo serverã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚å®Ÿè¡Œã™ã‚‹ã¨ä»®æƒ³ã‚µãƒ¼ãƒãŒç«‹ã¡ä¸ŠãŒã‚‹ã®ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯http://localhost:1313/ï¼‰ã€‚\nä»®æƒ³ã‚µãƒ¼ãƒã®èµ·å‹•ä¸­ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ä¿®æ­£ã•ã‚Œã‚‹ã€‚ãã®ãŸã‚ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦ã‚‚åˆ©ç”¨ã§ãã‚‹ã€‚\nã¾ãŸã€hugo serverã‚³ãƒãƒ³ãƒ‰ã§ã¯ã€PCã®ãƒ¡ãƒ¢ãƒªä¸Šã«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ãƒ‡ãƒ¼ã‚¿ãŒå±•é–‹ã•ã‚Œã‚‹ã ã‘ã§ã‚ã‚Šã€å®Ÿéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹è¨³ã§ã¯ãªã„ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ã¯ã€hugoã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆå¾Œè¿°ï¼‰ã€‚\nã‚ªãƒ—ã‚·ãƒ§ãƒ³ hugo serverã‚³ãƒãƒ³ãƒ‰ã®ä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚hugo server -Dã®ã‚ˆã†ã«å¾Œã‚ã«ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã€‚\n   ã‚ªãƒ—ã‚·ãƒ§ãƒ³ èª¬æ˜     --bind \u0026lt;IP address\u0026gt; IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æŒ‡å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ›ã‚¹ãƒˆ127.0.0.1ï¼‰   -D, --buildDrafts ãƒ‰ãƒ©ãƒ•ãƒˆçŠ¶æ…‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å‡ºåŠ›ã™ã‚‹   -F, --buildFuture æœªæ¥ã®æ—¥ä»˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å‡ºåŠ›ã™ã‚‹   -h, --help ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã™ã‚‹   -p \u0026lt;port\u0026gt; ãƒãƒ¼ãƒˆç•ªå·ã‚’æŒ‡å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1313ï¼‰   -w=false, --watch=false ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç„¡åŠ¹ã«ã™ã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯trueï¼‰    å®Ÿè¡Œä¾‹ hugo serverã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚ç”Ÿæˆã•ã‚ŒãŸãƒšãƒ¼ã‚¸æ•°ã€ç”Ÿæˆæ™‚é–“ãªã©ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nä»®æƒ³ã‚µãƒ¼ãƒã‚’åœæ­¢ã™ã‚‹ãŸã‚ã«ã¯ã€Ctrl+Cã‚’æŠ¼ã™ã€‚ã‚‚ã—åœæ­¢ã—ãªã‘ã‚Œã°ã€é•·æŠ¼ã—ï¼ˆ1ç§’ç¨‹åº¦ï¼‰ã™ã‚‹ã€‚\n\u0026gt; hugo server Start building sites â€¦ | JA -------------------+------ Pages | 118 Paginator pages | 2 Non-page files | 0 Static files | 132 Processed images | 0 Aliases | 34 Sitemaps | 1 Cleaned | 0 Built in 9443 ms Watching for changes in C:\\...\\mysite\\{archetypes,content,data,layouts,static,themes} Watching for config changes in C:\\...\\mysite\\config\\_default Environment: \u0026quot;development\u0026quot; Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop å…¬é–‹ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹(hugo) å…¬é–‹ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ã€hugoã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nå®Ÿè¡Œã™ã‚‹ã¨ã€publicãƒ•ã‚©ãƒ«ãƒ€ã«å…¬é–‹ç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€å¼(HTML, CSSãªã©)ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚\nã‚ªãƒ—ã‚·ãƒ§ãƒ³ hugoã‚³ãƒãƒ³ãƒ‰ã®ä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚hugo -Dã®ã‚ˆã†ã«å¾Œã‚ã«ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã€‚\n   ã‚ªãƒ—ã‚·ãƒ§ãƒ³ èª¬æ˜     -D, --buildDrafts ãƒ‰ãƒ©ãƒ•ãƒˆçŠ¶æ…‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å‡ºåŠ›ã™ã‚‹   -F, --buildFuture æœªæ¥ã®æ—¥ä»˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å‡ºåŠ›ã™ã‚‹   -h, --help ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã™ã‚‹   --minify HTMLã‚„XMLã‚’åœ§ç¸®(minify)ã™ã‚‹    ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹(hugo version) Hugoã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€hugo versionã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n\u0026gt; hugo version Hugo Static Site Generator v0.79.0/extended windows/amd64 BuildDate: unknown å‚è€ƒ Commands Hugo\n","description":"é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿Hugoã§ä½¿ç”¨é »åº¦ã®é«˜ã„ã‚³ãƒãƒ³ãƒ‰ã‚’ã¾ã¨ã‚ãŸã€‚","id":24,"section":"posts","tags":["Hugo"],"title":"Hugoã§ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§","uri":"https://helve-blog.com/posts/web-technology/hugo-commands/"},{"content":"ã¯ã˜ã‚ã« ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã§æ ¼å®‰ã«ãƒ–ãƒ­ã‚°ã‚’é‹å–¶ã™ã‚‹ãŸã‚ã€ç„¡æ–™ç‰ˆã¯ã¦ãªãƒ–ãƒ­ã‚°ã‹ã‚‰Hugoã«ç§»è¡Œã—ãŸã€‚ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«Github Pagesã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€é‹å–¶ã‚³ã‚¹ãƒˆã¯ãƒ‰ãƒ¡ã‚¤ãƒ³ä»£ã®ã¿ã«ã§ããŸã€‚\nç§»è¡Œã®ç†ç”± 2017å¹´6æœˆã«æŠ€è¡“ç³»ãƒ–ãƒ­ã‚° (Helve\u0026rsquo;s Python Memo) ã‚’å§‹ã‚ãŸå½“åˆã€è¨˜äº‹ã®ä½œæˆã‚’ç¶šã‘ã‚‰ã‚Œã‚‹ã‹åˆ†ã‹ã‚‰ãªã‹ã£ãŸãŸã‚ç„¡æ–™ç‰ˆã®ã¯ã¦ãªãƒ–ãƒ­ã‚°ã§å§‹ã‚ãŸã€‚ã—ã‹ã—ã€æ›¸ãã“ã¨ã«ã‚ˆã‚‹çŸ¥è­˜ã®å®šç€ã‚’å®Ÿæ„Ÿã§ãã€æ„å¤–ã«ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ãŒé›†ã¾ã£ãŸã“ã¨ã‚‚ã‚ã‚Šã€3å¹´é–“ã‚‚ç¶šã‘ã‚‹ã“ã¨ãŒã§ããŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚\nä»Šå¾Œã‚‚ãƒ–ãƒ­ã‚°ã‚’ç¶šã‘ãŸã„ã®ã§ã€ç‹¬è‡ªã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’å–å¾—ã—ãŸã„æ°—åˆ†ã«ãªã£ãŸã€‚ã¯ã¦ãªãƒ–ãƒ­ã‚°ã‚’æœ‰æ–™ç‰ˆã«ã—ã‚ˆã†ã‹ã¨ã‚‚è€ƒãˆãŸãŒã€æŠ˜è§’ãªã®ã§ä»–ã®ãƒ–ãƒ­ã‚°ãƒ„ãƒ¼ãƒ«ã¨æ¯”è¼ƒã—ã¦é¸ã¶ã“ã¨ã«ã—ãŸã€‚\nãƒ–ãƒ­ã‚°ãƒ„ãƒ¼ãƒ«ã®é¸å®š ãƒ–ãƒ­ã‚°ãƒ„ãƒ¼ãƒ«ã‚’é¸ã¶åŸºæº–ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã‚ã‚‹ã€‚\nå¿…é ˆè¦ä»¶\n Markdownã‚’ä½¿ã£ã¦æ›¸ã‘ã‚‹ ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’ä½¿ã£ã¦ã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤ºã§ãã‚‹ æ•°å¼ã‚’è¨˜è¿°ã§ãã‚‹ ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’åˆ©ç”¨ã§ãã‚‹  å¸Œæœ›è¦ä»¶\n å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„ ãƒ–ãƒ­ã‚°ã®è¨˜äº‹ã‚’Gitã§ç®¡ç†ã§ãã‚‹ ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ Twitterã¨ã®é€£æºæ©Ÿèƒ½ ã‚¢ã‚¯ã‚»ã‚¹ãŒé«˜é€Ÿ  ãƒ–ãƒ­ã‚°ãƒ„ãƒ¼ãƒ«ã®æ¯”è¼ƒ ã¾ãšã€ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã‚’æ¯”è¼ƒãƒ»æ¤œè¨ã—ãŸã€‚\n ãƒ–ãƒ­ã‚°ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆã¯ã¦ãªãƒ–ãƒ­ã‚°ã€Noteç­‰ï¼‰ WordPress é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿(Hugo, Hexoç­‰)  ãƒ–ãƒ­ã‚°ã‚µãƒ¼ãƒ“ã‚¹ä¸Šã§ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€æœ‰æ–™ãƒ—ãƒ©ãƒ³ã«ç§»è¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã¯ã¦ãªãƒ–ãƒ­ã‚°ã®ã¾ã¾æœ‰æ–™ç‰ˆã«ç§»è¡Œã™ã‚‹ã¨æœ€ã‚‚æ‰‹é–“ãŒå°‘ãªã„ãŒã€å¹´é–“7,200å††ï¼ˆ2å¹´å¥‘ç´„ã®å ´åˆï¼‰+ãƒ‰ãƒ¡ã‚¤ãƒ³ä»£ãŒæ›ã‹ã‚‹ç‚¹ãŒãƒãƒƒã‚¯ã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€WordPressã®å ´åˆã€XFREEãŒWordPressç”¨ã®ã‚µãƒ¼ãƒã‚’ç„¡æ–™ã§æä¾›ã—ã¦ãŠã‚Šã€ãƒ‰ãƒ¡ã‚¤ãƒ³ä»£ã ã‘ã§æ¸ˆã‚€ã€‚\nãŸã ã—ã€æ—¥æœ¬èªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè±Šå¯Œã§ã‚ã‚‹ã¨ã¯ã„ãˆã€WordPressã®ä½¿ã„æ–¹ã‚’è¦šãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã¾ãŸã€WordPressã¯åˆ©ç”¨è€…ãŒå¤šã„ãŒæ•…ã«ãƒãƒƒã‚­ãƒ³ã‚°è¢«å®³ãŒå¤šãã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®šæœŸçš„ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚‰ã—ã„ãŒã€ãã‚“ãªç®‡æ‰€ã«ã‚ã¾ã‚Šæ™‚é–“ã‚’æ›ã‘ãŸããªã„ã€‚\næœ€å¾Œã«ã€é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã®å ´åˆã€Github Pagesã‚„Netlifyãªã©ã®ç„¡æ–™ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ãŒä½¿ãˆã‚‹ãŸã‚ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ä»£ã ã‘ã§æ¸ˆã‚€ã€‚æ—¥æœ¬èªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å°‘ãªã„ãŒã€WordPressã¨æ¯”è¼ƒã™ã‚‹ã¨æ©Ÿèƒ½ãŒé™ã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãã“ã¾ã§å­¦ç¿’ã‚³ã‚¹ãƒˆãŒæ›ã‹ã‚‰ãªã„ã¨åˆ¤æ–­ã—ãŸã€‚\nãã®ãŸã‚ã€é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã†ã“ã¨ã«ã—ãŸã€‚\né™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã®é¸å®š é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã®é¸å®šã«ã¯ã€ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸã€‚\n ã€ 2020 å¹´ã€‘ JAMstack åŒ–ã«ä½¿ãˆã‚‹å®šç•ªã®é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã¾ã¨ã‚ Dyno é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã®æ¯”è¼ƒã¨Hugoã«æ±ºã‚ãŸç†ç”± exlair.net  ä»–ã®ã‚µã‚¤ãƒˆç­‰ã‚‚èª¿ã¹ã‚‹ã¨ã€ä»¥ä¸‹ã®é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãŒåºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã‚ã‚‹ã€‚\n GatsbyJS Next.js Hugo Hexo Jekyll  ã“ã‚Œã‚‰ã®ä¸­ã‹ã‚‰ã€å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ãã†ãªHugo (Goè¨€èªè£½) ã¨Hexo (Node.jsè£½) ã‚’å®Ÿéš›ã«ä½¿ã„ã€Hugoã‚’æ¡ç”¨ã—ãŸï¼ˆãªãŠã€ç­†è€…ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®æŠ€è¡“ã«ç‰¹ã«è©³ã—ã„ã‚ã‘ã§ã¯ãªã„ï¼‰ã€‚ä½¿ã£ãŸæ„Ÿæƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nHugo Hugoã§ã¯ã€300ç¨®é¡ä»¥ä¸Šã®ãƒ†ãƒ¼ãƒãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ãƒ¦ãƒ¼ã‚¶ãŒ1ã¤é¸ã‚“ã§ã€å¿…è¦ã«å¿œã˜ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚\nComplete List Hugo Themes\nä¸­ã§ã‚‚Zzoã¨ã„ã†ãƒ†ãƒ¼ãƒã¯2ã‚«ãƒ©ãƒ ã®ã‚ªãƒ¼ã‚½ãƒ‰ãƒƒã‚¯ã‚¹ãªãƒ–ãƒ­ã‚°ã®å½¢å¼ã§ã‚ã‚Šã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ã‚ã‚‹ç¨‹åº¦å……å®Ÿã—ã¦ãŠã‚Šã€å€‹äººçš„ã«æ°—ã«å…¥ã£ãŸã€‚\nã¾ãŸã€ã„ãã¤ã‹ã®æ—¥æœ¬èªãƒ–ãƒ­ã‚°ã§ã‚‚Hugoã¨Zzoã®å°å…¥ã«ã¤ã„ã¦è¨˜äº‹ãŒã‚ã‚Šã€å‚è€ƒã«ã§ããã†ã§ã‚ã£ãŸã€‚\nã“ã‚Œã‚‰ã®æ—¥æœ¬èªã‚µã‚¤ãƒˆã‚„Zzoã®ãƒ‡ãƒ¢ã‚µã‚¤ãƒˆã‚’è¦‹ã‚‹ã¨ã€æ•°å¼ã®è¨˜è¿°ãŒã§ãã€ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã‚’è¨­ç½®ã§ãã‚‹ãŸã‚ã€è¦ä»¶ã«åˆè‡´ã—ã¦ã„ã‚‹ã€‚\nHugoã§ã¯ãƒ†ãƒ¼ãƒã”ã¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®æ–¹æ³•ãŒå¤§ããç•°ãªã£ã¦ã„ã‚‹ã®ãŒé›£ç‚¹ã ãŒã€é »ç¹ã«ãƒ†ãƒ¼ãƒã‚’å¤‰æ›´ã—ãªã‘ã‚Œã°ç‰¹ã«å•é¡Œã«ãªã‚‰ãªã„ã€‚\nHugoã¯HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ“ãƒ«ãƒ‰å‡¦ç†ãŒé«˜é€Ÿã§ã‚ã‚‹ã“ã¨ã‚‚å¤§ããªãƒ¡ãƒªãƒƒãƒˆã§ã‚ã‚‹ã€‚ä¸€éƒ¨ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ãŒã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ã«å¯¾ã—ã¦åˆ¶é™ãŒã‚ã‚‹ã€‚ä¾‹ãˆã°ã€2021å¹´1æœˆ3æ—¥ç¾åœ¨ã€Netlifyã®ç„¡æ–™ãƒ—ãƒ©ãƒ³(STARTER)ã§ã¯ã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ã¯300åˆ†/æœˆã«åˆ¶é™ã•ã‚Œã¦ã„ã‚‹ã€‚ã—ã‹ã—ã€è©¦ã—ã«Netlifyã§Hugo(è¨˜äº‹æ•°15)ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨1åˆ†ã‚‚æ›ã‹ã‚‰ãªã‹ã£ãŸãŸã‚ã€ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®åˆ¶ç´„ã¯å®Ÿç”¨ä¸Šå•é¡Œãªã„ã€‚\nHexo Hexoã‚‚åŒæ§˜ã«ã€300ç¨®é¡ä»¥ä¸Šã®ãƒ†ãƒ¼ãƒãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\nThemes Hexo\nã“ã¡ã‚‰ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ã£ã¦ã¿ãŸãŒã€æ¨™æº–ã®æ©Ÿèƒ½ãŒå°‘ãªãã€æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç®¡ç†ã¯Node.jsã‚’ä½¿ã†ãŒã€ç­†è€…ã¯Node.jsã‚’è§¦ã£ãŸã“ã¨ãŒãªã„ãŸã‚å°‘ã€…ãƒãƒ¼ãƒ‰ãƒ«ãŒé«˜ã„ã€‚ã¾ãŸã€ã‚µã‚¤ãƒˆã‚’ä½œã‚Šè¾¼ã¿ãŸã„å ´åˆã«ã¯è‰¯ã„ãŒã€ã‚µã‚¤ãƒˆã®æ§‹ç¯‰è‡ªä½“ã«æ™‚é–“ã‚’æ›ã‘ãŸããªã„ã¨ã„ã†è¦æœ›ã«ã¯ãƒãƒƒãƒã—ãªã‹ã£ãŸã€‚\nã—ãŸãŒã£ã¦ã€Hugoã‚’å°å…¥ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\nãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã®é¸å®š æ¬¡ã«ã€ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆé™çš„ã‚µã‚¤ãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒã®æä¾›ã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã‚’é¸ã¶ã€‚ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸã€‚\n é™çš„ Web ã‚µã‚¤ãƒˆãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹æ¯”è¼ƒ - Qiita é™çš„ã‚µã‚¤ãƒˆã‚’ä½œã‚‹ä¸Šã§ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã®æ¤œè¨ã¨Netlifyã‚’ä½¿ã£ã¦ã¿ãŸæ„Ÿæƒ³ - suzu6  ç„¡æ–™æ ã®è»¢é€é‡ãŒ100GB/æœˆã§ã‚ã‚‹ã€Github Pagesã¨Netlifyã®äºŒæŠã¨ãªã£ãŸã€‚\nã‚¢ã‚¯ã‚»ã‚¹é€Ÿåº¦ã®è¦³ç‚¹ã§ã¯ã€Github Pagesã®ã‚µãƒ¼ãƒã¯æ—¥æœ¬å›½å†…ã«ã‚ã‚‹ã‚ˆã†ã ãŒã€Netlifyã®ã‚µãƒ¼ãƒã¯ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«ã«ã‚ã‚‹ã‚ˆã†ã§è‹¥å¹²ã‚¢ã‚¯ã‚»ã‚¹ãŒé…ã„ã€‚\nå‚è€ƒï¼šNetlifyãŒæ—¥æœ¬ã‹ã‚‰ã ã¨é…ã„ - id_anatooã®ãƒ–ãƒ­ã‚°\nã¾ãŸã€è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ã„ã†ç‚¹ã§ã¯ã€Netlifyã§ã¯Gitãƒªãƒã‚¸ãƒˆãƒªã®pushã‚’æ¤œçŸ¥ã—ã¦è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã‚ŒãŸã€‚ä¸€æ–¹ã€Github Pagesã§ã¯Github Actionã¨ã„ã†æ©Ÿèƒ½ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ãŒã€ãªãœã‹ã†ã¾ãå‹•ä½œã—ãªã‹ã£ãŸã€‚ãã®ãŸã‚ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦Github Pagesã«pushã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã ãŒã€ã“ã‚Œã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’çµ„ã‚“ã§è‡ªå‹•åŒ–ã§ããã†ã§ã‚ã‚‹ã€‚\nçµå±€ã€Github Pagesã‚’æ¡ç”¨ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\nã¯ã¦ãªãƒ–ãƒ­ã‚°ã¨Github Pagesã®ã‚¢ã‚¯ã‚»ã‚¹é€Ÿåº¦æ¯”è¼ƒ é™çš„ã‚µã‚¤ãƒˆã¯ã‚¢ã‚¯ã‚»ã‚¹é€Ÿåº¦ãŒæ—©ã„ã“ã¨ãŒåˆ©ç‚¹ã®1ã¤ã§ã‚ã‚‹ãŸã‚ã€Googleã®PageSpeed Insightsã§é€Ÿåº¦ã‚’è¨ˆæ¸¬ã—ãŸã€‚ã‚¹ã‚³ã‚¢ã¯100ç‚¹æº€ç‚¹ã§ã€å€¤ãŒå¤§ãã„ã»ã©ã‚¢ã‚¯ã‚»ã‚¹ãŒé«˜é€Ÿã§ã‚ã‚‹ã€‚\nã“ã®ã‚µã‚¤ãƒˆ (https://helve-blog.com/) ã¯ã€Œå®Ÿéš›ã®é€Ÿåº¦ãƒ‡ãƒ¼ã‚¿ãŒååˆ†ã«ã‚ã‚Šã¾ã›ã‚“ã€ã¨è¡¨ç¤ºã•ã‚Œã¦ã‚¹ã‚³ã‚¢ãŒå‡ºãªã‹ã£ãŸã€‚ãã“ã§ã€åŒã˜ZZoãƒ†ãƒ¼ãƒã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€Github Pagesã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹Hugoãƒ–ãƒ­ã‚°ã¨ã—ã¦ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚’æ¸¬å®šã•ã›ã¦ã„ãŸã ã„ãŸã€‚\nBAMBi\u0026rsquo;s Blog\næ—§ãƒ–ãƒ­ã‚°ï¼ˆã¯ã¦ãªãƒ–ãƒ­ã‚°ï¼‰ã‚’è¨ˆæ¸¬ã™ã‚‹ã¨38ç‚¹ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰ã§ã‚ã£ãŸã€‚ä¸€æ–¹ã€Hugoãƒ–ãƒ­ã‚°ã§ã¯88ç‚¹ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç‰ˆï¼‰ã¨ãªã£ãŸã€‚\nã¯ã¦ãªãƒ–ãƒ­ã‚°ã§ã¯Mathjaxã‚’å…¨ãƒšãƒ¼ã‚¸ã§èª­ã¿è¾¼ã‚“ã§ã„ã‚‹ãŸã‚å˜ç´”ãªæ¯”è¼ƒã¯ã§ããªã„ãŒã€ãã‚Œã§ã‚‚Hugo+Github PagesãŒåœ§å€’çš„ã«æ—©ã„çµæœã¨ãªã£ãŸã€‚\n","description":"ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³ã§æ ¼å®‰ã«ãƒ–ãƒ­ã‚°ã‚’é‹å–¶ã™ã‚‹ãŸã‚ã€ç„¡æ–™ç‰ˆã¯ã¦ãªãƒ–ãƒ­ã‚°ã‹ã‚‰Hugoã«ç§»è¡Œã—ãŸã€‚","id":25,"section":"posts","tags":["Hugo"],"title":"ã¯ã¦ãªãƒ–ãƒ­ã‚°ã‹ã‚‰Hugoã«ç§»è¡Œã—ãŸç†ç”±","uri":"https://helve-blog.com/posts/web-technology/migration-hatena-hugo/"},{"content":"ã¯ã˜ã‚ã« Dashã¯ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã§ãã‚‹ã€Pythonã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹ã€‚flaskã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’PythonAnywhereä¸Šã§å…¬é–‹ã™ã‚‹æ‰‹é †ã‚’ç°¡å˜ã«ã¾ã¨ã‚ãŸã€‚å¤§ããåˆ†ã‘ã¦ã€ä»¥ä¸‹ã®æ‰‹é †ã§è¡Œã†ã€‚\n PythonAnywhereã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ flaskã‚¢ãƒ—ãƒªã®ä½œæˆ ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’flaskã‹ã‚‰dashã«å¤‰æ›´ ä»®æƒ³ç’°å¢ƒã®æ§‹ç¯‰ WSGIã®è¨­å®š  WSGI (Web Server Gateway Interface) ã¨ã¯ã€Pythonã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨Webã‚µãƒ¼ãƒã®ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®šã‚ãŸä»•æ§˜ã§ã‚ã‚‹ã€‚\nWSGI ã«ã¤ã„ã¦ â€” Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ä½œã‚Šæ–¹ in Python\nHerokuä¸Šã§å…¬é–‹ã™ã‚‹è¨˜äº‹ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã€‚\nå¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚’Herokuã§å…¬é–‹ã™ã‚‹ - Helve Tech Blog\nPythonAnywhereã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨flaskã‚¢ãƒ—ãƒªã®ä½œæˆ ã¾ãšã€PythonAnywhereã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€flaskã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã€‚æ–¹æ³•ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ï¼ˆãŸã ã—ã€flaskã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ã¨ã“ã‚ã¾ã§ã§ã‚ˆã„ï¼‰ã€‚\nã€ç„¡æ–™ã‚µãƒ¼ãƒãƒ¼ã®ã”ç´¹ä»‹ã€‘Pythonanywhere | CodeCampus\næ³¨æ„ç‚¹ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n ç„¡æ–™ãƒ—ãƒ©ãƒ³ã®\u0026quot;Beginner\u0026quot;ã§æ§‹ã‚ãªã„ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆæ™‚ã®ãƒ¦ãƒ¼ã‚¶åã¨ã€flaskã‚¢ãƒ—ãƒªä½œæˆæ™‚ã®Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¦šãˆã¦ãŠã ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ(/home/ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰/mysite/flask_app.py)  flaskã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ãŸã‚‰ã€\nhttp://ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰.pythonanywhere.com/\nã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€\u0026ldquo;Hello from Flask!\u0026ldquo;ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚\nã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’flaskã‹ã‚‰dashã«å¤‰æ›´ æ¬¡ã«ã€flaskã®ã‚µãƒ³ãƒ—ãƒ«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’Dashã®ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›´ã™ã‚‹ã€‚\n\u0026ldquo;Files\u0026quot;ã‚¿ãƒ–ã‚’æŠ¼ã—ã€å·¦å´ã®\u0026quot;Directories\u0026quot;ã®\u0026quot;mysite/\u0026ldquo;ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã€‚\u0026ldquo;mysite\u0026quot;ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã™ã‚‹ã®ã§ã€å³å´ã®\u0026quot;flask_app.py\u0026quot;ã‚’æŠ¼ã™ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç·¨é›†ã™ã‚‹ç”»é¢ãŒé–‹ãã€‚ä¸­èº«ã‚’å…¨ã¦å‰Šé™¤ã—ã€ä»¥ä¸‹ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ã€å³ä¸Šã®\u0026quot;Save\u0026quot;ã‚’æŠ¼ã™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  import dash import dash_core_components as dcc import dash_html_components as html # for deployment, pass app.server (which is the actual flask app) to WSGI etc app = dash.Dash() app.layout = html.Div(children=[ html.H1(children=\u0026#39;Hello Dash\u0026#39;), html.Div(children=\u0026#39;\u0026#39;\u0026#39; Dash: A web application framework for Python. \u0026#39;\u0026#39;\u0026#39;), dcc.Graph( id=\u0026#39;example-graph\u0026#39;, figure={ \u0026#39;data\u0026#39;: [ {\u0026#39;x\u0026#39;: [1, 2, 3], \u0026#39;y\u0026#39;: [4, 1, 2], \u0026#39;type\u0026#39;: \u0026#39;bar\u0026#39;, \u0026#39;name\u0026#39;: \u0026#39;SF\u0026#39;}, {\u0026#39;x\u0026#39;: [1, 2, 3], \u0026#39;y\u0026#39;: [2, 4, 5], \u0026#39;type\u0026#39;: \u0026#39;bar\u0026#39;, \u0026#39;name\u0026#39;: u\u0026#39;MontrÃ©al\u0026#39;}, ], \u0026#39;layout\u0026#39;: { \u0026#39;title\u0026#39;: \u0026#39;Dash Data Visualization\u0026#39; } } ) ])   ä»®æƒ³ç’°å¢ƒã®æ§‹ç¯‰ PythonAnywhereä¸Šã§å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã«ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã®ã‚ˆã†ã«3ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ãŒã€ã“ã“ã§ã¯2ã®ä»®æƒ³ç’°å¢ƒã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•ã‚’æ¡ç”¨ã™ã‚‹ã€‚\nInstalling new modules | PythonAnywhere help\nPythonAnywhereã§\u0026quot;Consoles\u0026quot;ã‚¿ãƒ–ã‹ã‚‰Bashã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ãã€‚ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã€ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã™ã‚‹ã€‚\n$ mkvirtualenv dashappenv --python=/usr/bin/python3.6\rdashappenvã¯ä»®æƒ³ç’°å¢ƒã®åå‰ã§ã‚ã‚‹ã€‚é©å½“ãªåå‰ã«å¤‰æ›´ã—ã¦ã‚ˆã„ã€‚\nã¾ãŸã€æœ€å¾Œã®Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã€flaskã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã—ãŸPythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆã‚ã›ã‚‹ã€‚å¾Œè€…ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã€\u0026ldquo;Webã‚¿ãƒ–\u0026quot;ã®\u0026quot;Code\u0026quot;â†’\u0026quot;Python version\u0026quot;ã‹ã‚‰ç¢ºèªã§ãã‚‹ã€‚\næ¬¡ã«ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ä»®æƒ³ç’°å¢ƒã‚’èµ·å‹•ã™ã‚‹ã€‚\n$ workon dashappenv\rã•ã‚‰ã«ã€pip3 installã§Dashã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ä»–ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Œã°ã€åŒæ§˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n(dashappenv)$ pip3 install dash\ræœ€å¾Œã«ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’é–‰ã˜ã‚‹ã€‚\n(dashappenv)$ exit\rWSGIã®è¨­å®š æœ€å¾Œã«ã€WSGIã‚’è¨­å®šã™ã‚‹ã€‚Webã‚¿ãƒ–ã‚’é–‹ãã€\u0026ldquo;Code\u0026quot;ã®\u0026quot;WSGI configuration file\u0026quot;ã‚’é–‹ãã€‚\n1  from flask_app import app as application   ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ã€ãã®å¾Œã‚ã«ä»¥ä¸‹ã‚’è²¼ã‚Šä»˜ã‘ã¦ã€ä¿å­˜ã—ã¦é–‰ã˜ã‚‹ã€‚\n1 2  from flask_app import app application = app.server   Webã‚¿ãƒ–ã«æˆ»ã‚Šã€\u0026ldquo;Virtualenv\u0026quot;ã«ä»¥ä¸‹ã‚’å…¥åŠ›ã™ã‚‹ã€‚\n/home/ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰/.virtualenvs/dashappenv\ræœ€å¾Œã«Reloadãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã€å†ã³ä»¥ä¸‹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’é–‹ãã¨ã€Dashã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nhttp://ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰.pythonanywhere.com/\nå‚è€ƒ Dashã‚¢ãƒ—ãƒªã‚’PythonAnywhereã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸè¨˜äº‹ï¼ˆè‹±èªï¼‰\nThe Easiest Way to Deploy Your Dash App for Free | by Elsa Scola | Towards Data Science\nä»®æƒ³ç’°å¢ƒ (mkvirtualenv) ã®ä½¿ã„æ–¹\nã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ â€” virtualenvwrapper 3.5 documentation\nVirtualenvwrapperã®å°å…¥ - Qiita\n","description":"Pythonã®å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚’ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¬é–‹ç”¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚ã‚‹PythonAnywhereä¸Šã§å…¬é–‹ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ãŸã€‚","id":26,"section":"posts","tags":["PythonAnywhere","Python","Dash"],"title":"å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚’PythonAnywhereä¸Šã§å…¬é–‹ã™ã‚‹","uri":"https://helve-blog.com/posts/web-technology/pythonanywhere-dash-deploy/"},{"content":"ã¯ã˜ã‚ã« Dashã¯ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã§ãã‚‹ã€Pythonã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹ã€‚flaskã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Herokuä¸Šã§å…¬é–‹ã™ã‚‹æ‰‹é †ã‚’ç°¡å˜ã«ã¾ã¨ã‚ãŸã€‚å¤§ããåˆ†ã‘ã¦ã€ä»¥ä¸‹ã®æ‰‹é †ã§è¡Œã†ã€‚\n ãƒ­ãƒ¼ã‚«ãƒ«ã§Dashã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ Webã‚¢ãƒ—ãƒªã‚’Herokuã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹  ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   NumPy 1.16.5   Pandas 0.25.1   Dash 1.16.3   plotly 4.11.0   Git 2.27.0.windows.1    é–‹ç™ºç’°å¢ƒã¯Windows 10 Homeã§ã‚ã‚‹ã€‚ã¾ãŸã€æœªæ¤œè¨¼ã ãŒLinuxã§ã‚‚å‹•ä½œã™ã‚‹ã¯ãšã§ã‚ã‚‹ã€‚\nPythonAnywhereä¸Šã§å…¬é–‹ã™ã‚‹è¨˜äº‹ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã€‚\nå¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚’PythonAnywhereä¸Šã§å…¬é–‹ã™ã‚‹ - Helve Tech Blog\nDashã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªã®ä½œæˆ Gitã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Herokuä¸Šã§Webã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã™ã‚‹ãŸã‚ã«ã¯ã€Gitã‚’ä½¿ç”¨ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’herokuã‚µãƒ¼ãƒã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰Gitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ãŸã ã—ã€Githubãªã©ã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ã¯ãªãã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚‹ã ã‘ã§ã‚ˆã„ã€‚\nGit\nDashã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä½œæˆ Dashã®å…¬å¼ã‚µã‚¤ãƒˆã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å°‘ã—æ”¹å¤‰ã—ãŸã€ä»¥ä¸‹ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«index.pyã¨åå‰ã‚’ä»˜ã‘ã¦ä¿å­˜ã™ã‚‹ã€‚\nPart 2. Layout | Dash for Python Documentation | Plotly\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34  import dash import dash_core_components as dcc import dash_html_components as html import plotly.express as px import pandas as pd external_stylesheets = [\u0026#39;https://codepen.io/chriddyp/pen/bWLwgP.css\u0026#39;] app = dash.Dash(__name__, external_stylesheets=external_stylesheets) server = app.server df = pd.DataFrame({ \u0026#34;Fruit\u0026#34;: [\u0026#34;Apples\u0026#34;, \u0026#34;Oranges\u0026#34;, \u0026#34;Bananas\u0026#34;, \u0026#34;Apples\u0026#34;, \u0026#34;Oranges\u0026#34;, \u0026#34;Bananas\u0026#34;], \u0026#34;Amount\u0026#34;: [4, 1, 2, 2, 4, 5], \u0026#34;City\u0026#34;: [\u0026#34;SF\u0026#34;, \u0026#34;SF\u0026#34;, \u0026#34;SF\u0026#34;, \u0026#34;Montreal\u0026#34;, \u0026#34;Montreal\u0026#34;, \u0026#34;Montreal\u0026#34;] }) fig = px.bar(df, x=\u0026#34;Fruit\u0026#34;, y=\u0026#34;Amount\u0026#34;, color=\u0026#34;City\u0026#34;, barmode=\u0026#34;group\u0026#34;) app.layout = html.Div(children=[ html.H1(children=\u0026#39;Hello Dash\u0026#39;), html.Div(children=\u0026#39;\u0026#39;\u0026#39; Dash: A web application framework for Python. \u0026#39;\u0026#39;\u0026#39;), dcc.Graph( id=\u0026#39;example-graph\u0026#39;, figure=fig ) ]) if __name__ == \u0026#39;__main__\u0026#39;: app.run_server()   æ”¹å¤‰å€‹æ‰€ã¯ä»¥ä¸‹ã®2ç‚¹ã§ã‚ã‚‹ã€‚\n server = app.server app.run_server()  Dashã‚¢ãƒ—ãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§èµ·å‹• ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚’ç«‹ã¡ä¸Šã’ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§Webã‚¢ãƒ—ãƒªã‚’ç«‹ã¡ä¸Šã’ã‚‹ã€‚\n\u0026gt; cd (index.pyã®ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€) \u0026gt; python index.py Dash is running on http://127.0.0.1:8050/ * Serving Flask app \u0026quot;index\u0026quot; (lazy loading) * Environment: production WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead. * Debug mode: off * Running on http://127.0.0.1:8050/ (Press CTRL+C to quit) æ¬¡ã«ã€Webãƒ–ãƒ©ã‚¦ã‚¶ã‚’èµ·å‹•ã—ã€http://127.0.0.1:8050/ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚\nã‚¢ãƒ—ãƒªã‚’åœæ­¢ã™ã‚‹ã«ã¯ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ä¸Šã§Ctrl+Cã‚’æŠ¼ã™ã€‚\nHerokuç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™ Herokuç”¨ã«ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã€‚\n Procfile Procfile.windows (é–‹ç™ºç’°å¢ƒãŒWindowsã®å ´åˆã®ã¿) requirements.txt runtime.txt  å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nProcfile Herokuä¸Šã§Webã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«\nweb: gunicorn index:server Procfile.windows é–‹ç™ºç’°å¢ƒãŒWindowsã®å ´åˆã«ã€Herokuã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§Webã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã€‚\nweb: python index.py runserver 0.0.0.0:5000 requirements.txt Webã‚¢ãƒ—ãƒªã®å®Ÿè¡Œã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å®šç¾©ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã€‚ä¸Šè¨˜ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\ndash dash_core_components dash_html_components plotly pandas numpy gunicorn runtime.txt å®Ÿè¡Œã™ã‚‹Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å®šç¾©ã™ã‚‹ã€‚\npython-3.7.8 Gitãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ æ¬¡ã«ã€Gitãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã€‚\n\u0026gt; git init \u0026gt; git add . \u0026gt; git commit -m \u0026quot;Make dash app for Heroku\u0026quot; Herokuã§ã®å…¬é–‹ Herokuã«ç™»éŒ²ã—ã€heroku toolbeltã¨ã„ã†ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚è©³ç´°ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nherokuã‚’ä½¿ã£ã¦Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…¬é–‹ã—ã‚ˆã†\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰heroku toolbeltã‚’å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’èµ·å‹•ã—ã€ä»¥ä¸‹ã‚’å…¥åŠ›ã™ã‚‹ã€‚\n\u0026gt; heroku login heroku: Press any key to open up the browser to login or q to exit: é©å½“ãªã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ã€Herokuç”¨ã®ãƒ­ã‚°ã‚¤ãƒ³ç”¨Webãƒšãƒ¼ã‚¸ã«æ¥ç¶šã•ã‚Œã‚‹ã®ã§\u0026quot;Log In\u0026quot;ã‚’æŠ¼ã™ï¼ˆç’°å¢ƒã«ã‚ˆã£ã¦ã¯Webãƒšãƒ¼ã‚¸ã«æ¥ç¶šã•ã‚Œãªã„ã‚ˆã†ãªã®ã§ã€ãã®å ´åˆã¯Herokuã«ç™»éŒ²ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ï¼‰ã€‚\næ¬¡ã«ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦Herokuç”¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã™ã‚‹ã€‚\n\u0026gt; heroku create \u0026lt;application-name\u0026gt; \u0026lt;application-name\u0026gt;ã¯å…¬é–‹æ™‚ã®URLã«åæ˜ ã•ã‚Œã‚‹ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åã¯çœç•¥å¯èƒ½ã ãŒã€ãã®å ´åˆã¯ãƒ©ãƒ³ãƒ€ãƒ ãªåå‰ãŒä»˜ã‘ã‚‰ã‚Œã‚‹ã€‚\n\u0026gt; heroku create ä»¥ä¸Šã§Herokuã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒä½œæˆã•ã‚ŒãŸã€‚\nã“ã“ã§ã€Herokuã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å‰ã«ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã§ãã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚\nWindowsã®å ´åˆã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n\u0026gt; heroku local web -f Procfile.windows Linuxã®å ´åˆã¯ä»¥ä¸‹ã€‚\n$ heroku local web å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€è¡¨ç¤ºã•ã‚ŒãŸURLï¼ˆã“ã“ã§ã¯http://127.0.0.1:5000/ï¼‰ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã€‚å…ˆã»ã©ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã‚ã‚‹ã€‚\n17:34:24 web.1 | Dash is running on http://127.0.0.1:5000/ 17:34:24 web.1 | * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit) 17:34:24 web.1 | * Serving Flask app \u0026quot;index\u0026quot; (lazy loading) 17:34:24 web.1 | * Environment: production 17:34:24 web.1 | WARNING: This is a development server. Do not use it in a production deployment. 17:34:24 web.1 | Use a production WSGI server instead. 17:34:24 web.1 | * Debug mode: off 17:34:46 web.1 | 127.0.0.1 - - [11/Oct/2020 17:34:46] \u0026quot;GET / HTTP/1.1\u0026quot; 200 - 17:34:48 web.1 | 127.0.0.1 - - [11/Oct/2020 17:34:48] \u0026quot;GET /_dash-layout HTTP/1.1\u0026quot; 200 - 17:34:48 web.1 | 127.0.0.1 - - [11/Oct/2020 17:34:48] \u0026quot;GET /_dash-dependencies HTTP/1.1\u0026quot; 200 - 17:34:48 web.1 | 127.0.0.1 - - [11/Oct/2020 17:34:48] \u0026quot;GET /_favicon.ico?v=1.16.3 HTTP/1.1\u0026quot; 200 - æœ€å¾Œã«ã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦Herokuã‚µãƒ¼ãƒã«Gitãƒªãƒã‚¸ãƒˆãƒªã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ï¼ˆå°‘ã—æ™‚é–“ãŒæ›ã‹ã‚‹ï¼‰ã€‚\n\u0026gt; git push heroku master å‡¦ç†ã®å®Œäº†å¾Œã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã¨å…¬é–‹ã•ã‚ŒãŸWebã‚¢ãƒ—ãƒªãŒãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã‹ã‚Œã‚‹ã€‚å…ˆã»ã©ã®ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã‚ã‚‹ã€‚\n\u0026gt; heroku open å‚è€ƒ  Introduction | Dash for Python Documentation | Plotly Getting Started on Heroku with Python | Heroku Dev Center Herokuã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã‚ˆã† Â· Django Girls Tutorial: Extensions  ","description":"Pythonã®å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚’ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¬é–‹ç”¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚ã‚‹Herokuä¸Šã§å…¬é–‹ã™ã‚‹æ‰‹é †ã‚’ã¾ã¨ã‚ãŸã€‚","id":27,"section":"posts","tags":["Heroku","Python","Dash"],"title":"å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«Dashã§ä½œæˆã—ãŸWebã‚¢ãƒ—ãƒªã‚’Herokuã§å…¬é–‹ã™ã‚‹","uri":"https://helve-blog.com/posts/web-technology/heroku-dash-deploy/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ãƒªã‚¹ãƒˆãŠã‚ˆã³è¾æ›¸ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹4ã¤ã®æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹ã€‚\nPythonã§ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒªã‚¹ãƒˆã‚„è¾æ›¸ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ãã€ä¸€æ–¹ã«åŠ ãˆãŸå¤‰æ›´ãŒä»–æ–¹ã«åæ˜ ã•ã‚Œãªã„ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€copyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®deepcopy()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚deepcopy()é–¢æ•°ã«ã‚ˆã£ã¦ã€ãƒªã‚¹ãƒˆãƒ»è¾æ›¸ã®å‚ç…§å…ˆã§ãªãã€å®Ÿä½“ãŒå…¨ã¦ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã€‚\næ¤œè¨¼ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4    ãƒªã‚¹ãƒˆãƒ»è¾æ›¸ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹æ–¹æ³• Pythonã§ãƒªã‚¹ãƒˆãƒ»è¾æ›¸ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®4ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ï¼ˆä»¥é™ã§ã¯copyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’çœç•¥ã™ã‚‹ï¼‰ã€‚\n1 2 3 4 5 6 7 8  import copy list0 = [0, 1, 2] list1 = list0 # 1. ç›´æ¥ä»£å…¥ã™ã‚‹ list2 = list0.copy() # 2. copy()ãƒ¡ã‚½ãƒƒãƒ‰ list3 = copy.copy(list0) # 3. copy()é–¢æ•° list4 = copy.deepcopy(list0) # 4. deepcopy()é–¢æ•°   æ–¹æ³•1. ã¯ãƒ‡ãƒ¼ã‚¿ã®å‚ç…§å…ˆã®ã¿ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ãŸã‚ã€ãƒã‚¹ãƒˆã®æœ‰ç„¡ã«é–¢ã‚ã‚‰ãšã€ç‰‡æ–¹ã¸å¤‰æ›´ã‚’åŠ ãˆã‚‹ã¨ä»–æ–¹ã«åæ˜ ã•ã‚Œã‚‹ã€‚\næ–¹æ³•2. ã¨3. ã¯ç­‰ä¾¡ã§ã‚ã‚Šã€æµ…ã„ã‚³ãƒ”ãƒ¼(shallow copy)ã¨å‘¼ã°ã‚Œã‚‹ã€‚æµ…ã„ã‚³ãƒ”ãƒ¼ã§ã¯ã€æ•°å€¤ã‚„æ–‡å­—åˆ—ã¨ã„ã£ãŸãƒ‡ãƒ¼ã‚¿å‹ã®å®Ÿä½“ã¯ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ãŒã€ä¸€æ–¹ã€ãƒã‚¹ãƒˆã®å†…å´ã®ãƒªã‚¹ãƒˆç­‰ã¯å‚ç…§å…ˆã®ã¿ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã€‚ï¼ˆè©³ç´°ã¯ã€ŒãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ã€ã®æ¦‚å¿µã‚’ç†è§£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€æœ¬è¨˜äº‹ã§ã¯æ‰±ã‚ãªã„ï¼‰\nãã®ãŸã‚ã€ãƒªã‚¹ãƒˆã¾ãŸã¯è¾æ›¸ãŒãƒã‚¹ãƒˆã•ã‚Œã¦ã„ãªã„å ´åˆã€ç‰‡æ–¹ã®å¤‰æ›´ã¯ä»–æ–¹ã¸åæ˜ ã•ã‚Œãªã„ã€‚ã—ã‹ã—ã€ãƒã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ç‰‡æ–¹ã®å¤‰æ›´ãŒä»–æ–¹ã¸åæ˜ ã•ã‚Œã¦ã„ã¾ã†ã€‚\næ–¹æ³•4. ã¯æ·±ã„ã‚³ãƒ”ãƒ¼(deep copy)ã¨å‘¼ã°ã‚Œã€ãƒã‚¹ãƒˆã®æœ‰ç„¡ã«é–¢ã‚ã‚‰ãšã€ãƒ‡ãƒ¼ã‚¿ã®å®Ÿä½“ã‚’å…¨ã¦ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚ãã®ãŸã‚ã€ç‰‡æ–¹ã®å¤‰æ›´ã¯ä»–æ–¹ã«åæ˜ ã•ã‚Œãªã„ã€‚ã—ã‹ã—ã€å½“ç„¶ãªãŒã‚‰å®Ÿè¡Œé€Ÿåº¦ã¯é…ããªã£ã¦ã—ã¾ã†ãŸã‚ã€å‡¦ç†é€Ÿåº¦ãŒé‡è¦ãªå ´åˆã«ã¯æµ…ã„ã‚³ãƒ”ãƒ¼ã§ä»£ç”¨ã§ããªã„ã‹è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nãƒã‚¹ãƒˆã•ã‚ŒãŸé…åˆ—ãƒ»è¾æ›¸ã®ã‚³ãƒ”ãƒ¼ ãƒã‚¹ãƒˆã•ã‚ŒãŸé…åˆ—ãƒ»è¾æ›¸ã«å¯¾ã—ã¦ã€\n æµ…ã„ã‚³ãƒ”ãƒ¼ æ·±ã„ã‚³ãƒ”ãƒ¼  ã§ãã‚Œãã‚Œã‚³ãƒ”ãƒ¼ã‚’ä½œæˆã™ã‚‹ã€‚æ·±ã„ã‚³ãƒ”ãƒ¼ã§ã‚ã‚Œã°ã€ç‰‡æ–¹ã®å¤‰æ›´ãŒä»–æ–¹ã«åæ˜ ã•ã‚Œãªã„ã“ã¨ã‚’ç¤ºã™ã€‚\næµ…ã„ã‚³ãƒ”ãƒ¼ æ—¢ã«ä¸Šã§è¿°ã¹ãŸã‚ˆã†ã«ã€æµ…ã„ã‚³ãƒ”ãƒ¼ã¯copyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®copy()é–¢æ•°ã‚„ã€copy()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦è¡Œã†ã€‚æµ…ã„ã‚³ãƒ”ãƒ¼ã§Pythonã®ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒªã‚¹ãƒˆã‚„è¾æ›¸ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹å ´åˆã€ä¸€æ–¹ã®ãƒªã‚¹ãƒˆï¼ˆã¾ãŸã¯è¾æ›¸ï¼‰ã«åŠ ãˆãŸå¤‰æ›´ãŒä»–æ–¹ã«ã‚‚åæ˜ ã•ã‚Œã¦ã—ã¾ã†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  list1 = [[0, 1], [2, 3]] list2 = copy.copy(list1) list1[0][0] = 4 # 0ã‚’4ã«å¤‰æ›´ print(list1) # [[4, 1], [2, 3]] print(list2) # [[4, 1], [2, 3]] # list2ã®0ã‚‚4ã«å¤‰æ›´ã•ã‚Œã‚‹ dict1 = {\u0026#34;k0\u0026#34;: {\u0026#34;k00\u0026#34;: \u0026#34;v00\u0026#34;, \u0026#34;k01\u0026#34;: \u0026#34;v01\u0026#34;}, \u0026#34;k1\u0026#34;: {\u0026#34;k10\u0026#34;: \u0026#34;v10\u0026#34;, \u0026#34;k11\u0026#34;: \u0026#34;v11\u0026#34;}} dict2 = dict1.copy() dict1[\u0026#34;k0\u0026#34;][\u0026#34;k00\u0026#34;] = \u0026#34;v22\u0026#34; # \u0026#34;v00\u0026#34;ã‚’å¤‰æ›´ print(dict1) # {\u0026#39;k0\u0026#39;: {\u0026#39;k00\u0026#39;: \u0026#39;v22\u0026#39;, \u0026#39;k01\u0026#39;: \u0026#39;v01\u0026#39;}, \u0026#39;k1\u0026#39;: {\u0026#39;k10\u0026#39;: \u0026#39;v10\u0026#39;, \u0026#39;k11\u0026#39;: \u0026#39;v11\u0026#39;}} print(dict2) # {\u0026#39;k0\u0026#39;: {\u0026#39;k00\u0026#39;: \u0026#39;v22\u0026#39;, \u0026#39;k01\u0026#39;: \u0026#39;v01\u0026#39;}, \u0026#39;k1\u0026#39;: {\u0026#39;k10\u0026#39;: \u0026#39;v10\u0026#39;, \u0026#39;k11\u0026#39;: \u0026#39;v11\u0026#39;}} # dict2ã®v00ã‚‚v22ã«å¤‰æ›´ã•ã‚Œã‚‹   æ·±ã„ã‚³ãƒ”ãƒ¼ æœ€å¾Œã«ã€copyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®deepcopy()é–¢æ•°ã‚’ä½¿ã„ã€æ·±ã„ã‚³ãƒ”ãƒ¼ã§ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒªã‚¹ãƒˆã¨è¾æ›¸ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚ç‰‡æ–¹ã¸ã®å¤‰æ›´ãŒã€ä»–æ–¹ã«åæ˜ ã•ã‚Œãªã„ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  list1 = [[0, 1], [2, 3]] list2 = copy.deepcopy(list1) list1[0][0] = 4 # 0ã‚’4ã«å¤‰æ›´ print(list1) # [[4, 1], [2, 3]] print(list2) # [[0, 1], [2, 3]] # list2ã¯0ã®ã¾ã¾ dict1 = {\u0026#34;k0\u0026#34;: {\u0026#34;k00\u0026#34;: \u0026#34;v00\u0026#34;, \u0026#34;k01\u0026#34;: \u0026#34;v01\u0026#34;}, \u0026#34;k1\u0026#34;: {\u0026#34;k10\u0026#34;: \u0026#34;v10\u0026#34;, \u0026#34;k11\u0026#34;: \u0026#34;v11\u0026#34;}} dict2 = copy.deepcopy(dict1) dict1[\u0026#34;k0\u0026#34;][\u0026#34;k00\u0026#34;] = \u0026#34;v22\u0026#34; # \u0026#34;v00\u0026#34;ã‚’å¤‰æ›´ print(dict1) # {\u0026#39;k0\u0026#39;: {\u0026#39;k00\u0026#39;: \u0026#39;v22\u0026#39;, \u0026#39;k01\u0026#39;: \u0026#39;v01\u0026#39;}, \u0026#39;k1\u0026#39;: {\u0026#39;k10\u0026#39;: \u0026#39;v10\u0026#39;, \u0026#39;k11\u0026#39;: \u0026#39;v11\u0026#39;}} print(dict2) # {\u0026#39;k0\u0026#39;: {\u0026#39;k00\u0026#39;: \u0026#39;v00\u0026#39;, \u0026#39;k01\u0026#39;: \u0026#39;v01\u0026#39;}, \u0026#39;k1\u0026#39;: {\u0026#39;k10\u0026#39;: \u0026#39;v10\u0026#39;, \u0026#39;k11\u0026#39;: \u0026#39;v11\u0026#39;}} # dict2ã¯v00ã®ã¾ã¾   å‚è€ƒ ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸã€‚çµ„ã¿è¾¼ã¿é–¢æ•°ã®idã‚’ä½¿ã†ã“ã¨ã«ã‚ˆã£ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®å®Ÿä½“ãŒã‚³ãƒ”ãƒ¼ã•ã‚ŒãŸã®ã‹ã€å‚ç…§å…ˆã®ã¿ã‚³ãƒ”ãƒ¼ã•ã‚ŒãŸã®ã‹ã‚’ç¢ºèªã§ãã‚‹ã€‚\nPythonã®copyã¨deepcopyã«ã¤ã„ã¦ - Qiita\n","description":"Pythonã§ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒªã‚¹ãƒˆã‚„è¾æ›¸ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ãã€ä¸€æ–¹ã«åŠ ãˆãŸå¤‰æ›´ãŒä»–æ–¹ã«åæ˜ ã•ã‚Œãªã„ã‚ˆã†ã«ã—ãŸã„å ´åˆã¯ã€copyãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®deepcopy()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚deepcopy()é–¢æ•°ã«ã‚ˆã£ã¦ã€ãƒªã‚¹ãƒˆãƒ»è¾æ›¸ã®å‚ç…§å…ˆã§ãªãã€å®Ÿä½“ãŒå…¨ã¦ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã€‚","id":28,"section":"posts","tags":["Python"],"title":"ã€Pythonã€‘ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒªã‚¹ãƒˆãƒ»è¾æ›¸ã¨deepcopy","uri":"https://helve-blog.com/posts/python/python-deepcopy-nested-list-dictionary/"},{"content":"ã¯ã˜ã‚ã« å€‹äººçš„ã«ã‚ˆãä½¿ç”¨ã™ã‚‹Gitã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã¾ã¨ã‚ãŸã€‚ãªãŠã€å€‹äººåˆ©ç”¨ã‹ã¤å°è¦æ¨¡ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºç’°å¢ƒã§ã‚ã‚Šã€ãƒ–ãƒ©ãƒ³ãƒã¯ä½œæˆã—ãªã„ãŸã‚ã€ãã‚Œã«é–¢é€£ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã¯è¨˜è¼‰ã—ã¦ã„ãªã„ã€‚\næ¤œè¨¼ç’°å¢ƒï¼šGit for Windows v2.27.0\nãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ (clone) ãƒªãƒ¢ãƒ¼ãƒˆã«ã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¯ãƒ­ãƒ¼ãƒ³ï¼ˆã‚³ãƒ”ãƒ¼ï¼‰ã™ã‚‹ã€‚\n1  git clone https://github.com/xxxxx/xxxxxxxx.git   ãƒªãƒã‚¸ãƒˆãƒªã®çŠ¶æ…‹ã‚’ç¢ºèªã™ã‚‹ (status) 1  git status   ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ  (add) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ã‚¨ãƒªã‚¢ï¼‰ã«ç™»éŒ²ã™ã‚‹ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚¹ãƒšãƒ¼ã‚¹ã§åŒºåˆ‡ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã§ãã‚‹ã€‚ã¾ãŸã€ãƒ•ã‚¡ã‚¤ãƒ«åã¯ç›¸å¯¾ãƒ‘ã‚¹ã¾ãŸã¯çµ¶å¯¾ãƒ‘ã‚¹ã§æŒ‡å®šã™ã‚‹ã€‚\n1  git add \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   Gitã§ç®¡ç†ã—ã¦ã„ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å«ã‚ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«è¿½åŠ ã™ã‚‹ï¼ˆã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚ˆã‚Šä¸Šã®ãƒ•ã‚©ãƒ«ãƒ€éšå±¤ã‚‚å«ã‚€ãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã‚’å‡¦ç†ã™ã‚‹ï¼‰ã€‚\n1 2 3  $ git add -A or $ git add --all   Gitã§ç®¡ç†ã—ã¦ã„ã‚‹å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´å†…å®¹ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«è¿½åŠ ã™ã‚‹ï¼ˆã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚ˆã‚Šä¸Šã®ãƒ•ã‚©ãƒ«ãƒ€éšå±¤ã‚‚å«ã‚€ãƒªãƒã‚¸ãƒˆãƒªå…¨ä½“ã‚’å‡¦ç†ã™ã‚‹ï¼‰ã€‚\n1 2 3  $ git add -u or $ git add --update   ã‚³ãƒŸãƒƒãƒˆ (commit) ã‚³ãƒŸãƒƒãƒˆæ™‚ã«ã¯ã€-mã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å¾Œã‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã™ã‚‹ã€‚\n1  $ git commit -m \u0026#34;ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\u0026#34;   è¤‡æ•°è¡Œã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¤‡æ•°ã®-mã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã€‚\n1  $ git commit -m \u0026#34;ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸1\u0026#34; -m \u0026#34;ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸2\u0026#34;   ã¾ãŸã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ãšã«å®Ÿè¡Œã™ã‚‹ã¨ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ãŒèµ·å‹•ã™ã‚‹ã®ã§ã€ãã‚Œã«å…¥åŠ›ã™ã‚‹ã€‚\n1  $ git commit   ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ (push) 1  $ git push   ãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’ç¢ºèª (diff) git diffã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨ä½œæ¥­ãƒ„ãƒªãƒ¼ï¼ˆç¾åœ¨ãƒ­ãƒ¼ã‚«ãƒ«ã§ä½œæ¥­ä¸­ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰ã®å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šã—ãªã„å ´åˆã¯ã€å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹ã€‚\n1  git diff \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆã¨ã®å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã¯ã€ãƒãƒƒã‚·ãƒ¥å€¤ã‚’è¿½åŠ ã™ã‚‹ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã€‚\n1  git diff \u0026lt;commit\u0026gt; \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   ã¾ãŸã€ã‚³ãƒŸãƒƒãƒˆã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€--cachedã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã€‚\n1  git diff --cached \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   git diffã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨å·®åˆ†ã®é–¢ä¿‚ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nâ”Œ git diff --cached \u0026lt;commit\u0026gt; â” | â”Œ-- git diff --cached --â” | HEADã‚³ãƒŸãƒƒãƒˆ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ ä½œæ¥­ãƒ„ãƒªãƒ¼ O-----O----------------------O-------------O | â””-- git diff -â”˜ â””------------ git diff \u0026lt;commit\u0026gt; -----------â”˜ ã•ã‚‰ã«ã€ã‚³ãƒŸãƒƒãƒˆé–“ã®æ¯”è¼ƒã‚‚å¯èƒ½ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã€‚\n1  git diff \u0026lt;å¤‰æ›´å‰ã®commit\u0026gt; \u0026lt;å¤‰æ›´å¾Œã®commit\u0026gt; \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   å˜èªå˜ä½ã§å·®åˆ†ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã¯ã€--word-diffã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã€‚ã•ã‚‰ã«æ–‡å­—ã®è‰²ã®é•ã„ã ã‘ã§å·®åˆ†ã‚’è¡¨ç¤ºã•ã›ã‚‹ã«ã¯ã€å¾Œã‚ã«=colorã‚’è¿½åŠ ã™ã‚‹ã€‚\n1 2  git diff --word-diff git diff --word-diff=color   æ“ä½œã®å–ã‚Šæ¶ˆã—ãƒ»ä¿®æ­£ addã®å–ã‚Šæ¶ˆã— (reset) git addã§ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ãŒã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ç™»éŒ²ã•ã‚Œã‚‹ãŒã€ãã®ç™»éŒ²ã‚’å–ã‚Šæ¶ˆã™ã«ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®šã—ãªã„å ´åˆã¯ã€å…¨ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç™»éŒ²ãŒå‰Šé™¤ã•ã‚Œã‚‹ã€‚ãªãŠã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã¯å¤‰æ›´ã•ã‚Œãªã„ï¼ˆHEADã‚³ãƒŸãƒƒãƒˆã®çŠ¶æ…‹ã«ã¯æˆ»ã‚‰ãªã„ï¼‰ã€‚\n1  $ git reset HEAD \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   commitã®å–ã‚Šæ¶ˆã— (reset) ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã™ã«ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  $ git reset --hard HEAD^   ãªãŠã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ„å‘³ã¯æ¬¡ã®é€šã‚Šã€‚\n --hard: ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã—ãŸä¸Šã§ãƒ¯ãƒ¼ã‚¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å†…å®¹ã‚‚æ›¸ãæ›ãˆã‚‹ã€‚ --soft: ãƒ¯ãƒ¼ã‚¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å†…å®¹ã¯ãã®ã¾ã¾ã§ã‚³ãƒŸãƒƒãƒˆã ã‘ã‚’å–ã‚Šæ¶ˆã™ã€‚  ã¾ãŸã€HEAD^ã¯HEADã‚³ãƒŸãƒƒãƒˆã®1ã¤å‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’æ„å‘³ã™ã‚‹ã€‚HEAD^ã®ä»£ã‚ã‚Šã«ã‚³ãƒŸãƒƒãƒˆã®ãƒãƒƒã‚·ãƒ¥å€¤ã¨ã—ã¦ã‚‚è‰¯ã„ã€‚\nã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¿®æ­£ (ammend) ç›´å‰ã®commitã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿®æ­£ã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  $ git commit --amend \u0026#34;ä¿®æ­£å¾Œã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\u0026#34;   ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã‚’ç¢ºèªã™ã‚‹ (log) 1  $ git log   ã¾ãŸã€logã®å¾Œã‚ã«ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¿½åŠ ã™ã‚‹ã¨ã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒé–¢é€£ã™ã‚‹ã‚³ãƒŸãƒƒãƒˆã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚ªãƒ—ã‚·ãƒ§ãƒ³ èª¬æ˜     -\u0026lt;n\u0026gt; nå›åˆ†ã®æœ€æ–°ã‚³ãƒŸãƒƒãƒˆã‚’è¡¨ç¤º   --oneline 1ã‚³ãƒŸãƒƒãƒˆã‚’1è¡Œã§è¡¨ç¤º    ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ (rm) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã€gitã®ç®¡ç†ã‹ã‚‰ã‚‚å¤–ã™ã€‚\n1  $ git rm \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   ãƒ•ã‚©ãƒ«ãƒ€ã”ã¨å‰Šé™¤ã—ã€gitã®ç®¡ç†ã‹ã‚‰ã‚‚å¤–ã™ã€‚\n1  $ git rm -r \u0026lt;ãƒ•ã‚©ãƒ«ãƒ€å\u0026gt;   ãƒ•ã‚¡ã‚¤ãƒ«ã‚’gitã®ç®¡ç†ã‹ã‚‰å¤–ã™ãŒã€ãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ã¯ä½œæ¥­ãƒ„ãƒªãƒ¼ã«æ®‹ã™ã€‚\n1  $ git rm --cached \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   ãƒ•ã‚¡ã‚¤ãƒ«åå¤‰æ›´ (mv) 1  $ git mv \u0026lt;å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt; \u0026lt;å¤‰æ›´å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®šã®ã‚³ãƒŸãƒƒãƒˆã¾ã§æˆ»ã™ (checkout) 1  $ git checkout \u0026lt;commit\u0026gt; \u0026lt;ãƒ•ã‚¡ã‚¤ãƒ«å\u0026gt;   æœ€æ–°ã®ã‚³ãƒŸãƒƒãƒˆã«æˆ»ã—ãŸã„å ´åˆã¯ã€ãƒãƒƒã‚·ãƒ¥å€¤ã®ä»£ã‚ã‚Šã«HEADã§ã‚‚è‰¯ã„ã€‚\nãƒ•ã‚¡ã‚¤ãƒ«å†…ã‚’æ¤œç´¢ (grep) æŒ‡å®šã—ãŸã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã¨ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å«ã‚€è¡Œã‚’è¡¨ç¤ºã™ã‚‹ï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã¯åŒºåˆ¥ã•ã‚Œã‚‹ï¼‰ã€‚ã¾ãŸã€æ¤œç´¢å¯¾è±¡ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®ãƒ•ã‚©ãƒ«ãƒ€ã§ã‚ã‚‹ã€‚\n1  $ git grep \u0026#34;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰\u0026#34;   ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå«ã¾ã‚Œãªã„å ´åˆã¯ã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä¸è¦ã§ã‚ã‚‹ã€‚\nä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚ªãƒ—ã‚·ãƒ§ãƒ³ èª¬æ˜     -i å¤§æ–‡å­—å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„   -w å˜èªå˜ä½ã§æ¤œç´¢ã™ã‚‹   -E æ­£è¦è¡¨ç¾ã‚’ä½¿ã†   -n è¡Œç•ªå·ã‚’è¡¨ç¤ºã™ã‚‹    ã¾ãŸã€AND, ORæ¤œç´¢ã¯--and/--orã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å‰ã«-eã‚’ç½®ã„ã¦ã€--and/--orã‚’æŒŸã‚€ã€‚\n1  $ git grep -e \u0026#34;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1\u0026#34; --and -e \u0026#34;ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2\u0026#34;   ãŸã ã—ã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰1, ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰2ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®åŒã˜è¡Œã«ãªã‘ã‚Œã°æ¤œç´¢ã«ãƒ’ãƒƒãƒˆã—ãªã„ã€‚ã•ã‚‰ã«ã€--notã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã¨NOTæ¤œç´¢ã‚‚ã§ãã‚‹ã€‚\n1 2 3 4 5 6  # ä¾‹1: ABCã¨123ã‚’ä¸¡æ–¹å«ã‚€ $ git grep -e ABC --and -e 123 # ä¾‹1: ABCã‹123ã®å°‘ãªãã¨ã‚‚ç‰‡æ–¹ã‚’å«ã‚€ $ git grep -e ABC --or -e 123 # ä¾‹1: ABCã‚’å«ã‚€ãŒã€123ã¯å«ã¾ãªã„ $ git grep -e ABC --and --not -e 123   ã‚³ãƒŸãƒƒãƒˆã®è©³ç´°ç¢ºèª (show) ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€ã‚³ãƒŸãƒƒãƒˆã®æ—¥æ™‚ã‚„ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ãªã©ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n1  $ git show \u0026lt;commit\u0026gt;   ãªãŠã€\u0026lt;commit\u0026gt;ã‚’å…¥åŠ›ã—ãªã„ã¨ã€æœ€æ–°ã‚³ãƒŸãƒƒãƒˆã®è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆä»¥ä¸‹ã¨åŒã˜æ„å‘³ï¼‰ã€‚\n1  $ git show HEAD   ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®ç™»éŒ² ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯ã€Œåˆ¥åã€ã®æ„å‘³ã€‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€é•·ã„ã‚³ãƒãƒ³ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å«ã‚€ï¼‰ã‚’çŸ­ç¸®ã—ãŸå½¢ã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹ã€‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€Gitã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹æ–¹æ³•ã¨ã€ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰è¨­å®šã™ã‚‹æ–¹æ³•ã®2ã¤ãŒã‚ã‚‹ã€‚ã¾ãŸã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¯ä¸‹è¡¨ã®3éšå±¤ã§è¨­å®šå¯èƒ½ã§ã‚ã‚Šã€è¤‡æ•°ã®éšå±¤ã§åŒã˜ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã«ã¯ã€æ•°å­—ãŒå¤§ãã„éšå±¤ãŒå„ªå…ˆã•ã‚Œã‚‹ã€‚\n   éšå±¤ ç¨®é¡ å¯¾è±¡ç¯„å›²     1 system ãƒã‚·ãƒ³å˜ä½   2 global ãƒ¦ãƒ¼ã‚¶å˜ä½   3 local ãƒªãƒã‚¸ãƒˆãƒªå˜ä½    è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥ç·¨é›†ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶å˜ä½ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆï¼‰ã€‚\n1  git config --global --edit   ãƒã‚·ãƒ³å˜ä½ã‚„ãƒªãƒã‚¸ãƒˆãƒªå˜ä½ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã™ã‚‹ã«ã¯ã€--globalã‚’--systemã‚„--localã«ãã‚Œãã‚Œå¤‰æ›´ã™ã‚‹ã€‚\nå®Ÿè¡Œã™ã‚‹ã¨è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã‹ã‚Œã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨˜è¿°ã™ã‚‹ã€‚\n[alias] co = checkout logo = log --oneline ã“ã“ã§ã€[alias]ã¨ã„ã†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œã£ã¦ãŠã‚Šã€ãã‚Œã‚ˆã‚Šå¾Œã®è¡Œã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ç™»éŒ²ã™ã‚‹ã€‚=ã®å·¦å´ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ã€å³å´ã«çŸ­ç¸®å‰ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ãã‚Œãã‚Œè¨˜è¿°ã™ã‚‹ã€‚è¨˜è¿°ãŒçµ‚äº†ã—ãŸã‚‰ã€ã‚¨ãƒ‡ã‚£ã‚¿ã‚’é–‰ã˜ã‚‹ã€‚\nã¾ãŸã€ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶å˜ä½ã§è¨­å®šã™ã‚‹å ´åˆï¼‰ã€‚\n1 2  git config --global alias.co checkout git config --global alias.logo \u0026#34;log --oneline\u0026#34;   ãƒã‚·ãƒ³å˜ä½ã‚„ãƒªãƒã‚¸ãƒˆãƒªå˜ä½ã§è¨­å®šã™ã‚‹ã«ã¯ã€--globalã‚’--systemã‚„--localã«ãã‚Œãã‚Œå¤‰æ›´ã™ã‚‹ã€‚ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å¯¾å¿œã™ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒ˜ãƒ«ãƒ—ã‚’èª­ã‚€ Gitã®ã‚³ãƒãƒ³ãƒ‰ã®ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3  $ git help \u0026lt;verb\u0026gt; $ git \u0026lt;verb\u0026gt; --help $ man git-\u0026lt;verb\u0026gt;   å‚è€ƒæ–‡çŒ® Git - Reference\nGitã‚³ãƒãƒ³ãƒ‰æ—©è¦‹è¡¨ - Qiita\nã€gitã€‘aliasã®è¨­å®šæ–¹æ³• - Qiita\n","description":"å€‹äººçš„ã«ã‚ˆãä½¿ç”¨ã™ã‚‹Gitã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã¾ã¨ã‚ãŸï¼ˆãƒ–ãƒ©ãƒ³ãƒã«é–¢é€£ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’é™¤ãï¼‰ã€‚","id":29,"section":"posts","tags":["Git"],"title":"Gitã‚³ãƒãƒ³ãƒ‰ã®å€‹äººçš„ã¾ã¨ã‚ï¼ˆãƒ–ãƒ©ãƒ³ãƒåˆ©ç”¨ãªã—ï¼‰","uri":"https://helve-blog.com/posts/git/git-commands/"},{"content":"ã¯ã˜ã‚ã« æœ€é©åŒ–å•é¡Œã«ã¯ã€æœ€é©ãªçµ„ã¿åˆã‚ã›ã‚’é¸ã¶å•é¡ŒãŒã‚ã‚‹ã€‚ã“ã®ã‚ˆã†ãªçµ„ã¿åˆã‚ã›æœ€é©åŒ–å•é¡Œã¯ã€å•é¡Œã®è¦æ¨¡ãŒå¤§ãããªã‚‹ã¨ã€é€£ç¶šå€¤ã®ä¸­ã‹ã‚‰æœ€é©ãªå€¤ã‚’è¦‹ã¤ã‘ã‚‹å•é¡Œã¨æ¯”ã¹ã¦ã€è§£ãã¥ã‚‰ããªã‚‹æ€§è³ªãŒã‚ã‚‹ã€‚\nçµ„ã¿åˆã‚ã›æœ€é©åŒ–å•é¡Œã‚’åŠ¹ç‡çš„ã«è§£ãæ‰‹æ³•ã¨ã—ã¦ã€åˆ†æé™å®šæ³•ã¨å‘¼ã°ã‚Œã‚‹æ‰‹æ³•ãŒã‚ã‚‹ã€‚åˆ†æé™å®šæ³•ã¯ã€çµ„ã¿åˆã‚ã›ã®æ¡ä»¶ã‚’é€£ç¶šå€¤ã«ç·©å’Œã—ãŸå•é¡Œï¼ˆç·©å’Œå•é¡Œï¼‰ã‚’è§£ã„ã¦ã€ä¸Šç•Œã¨ä¸‹ç•Œã‚’ç”¨ã„ã¦ç„¡é§„ãªæ¢ç´¢ã‚’çœç•¥ã™ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ã¯ã˜ã‚ã«çµ„åˆã›æœ€é©åŒ–å•é¡Œã®1ã¤ã§ã‚ã‚‹0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã«ã¤ã„ã¦ç°¡å˜ã«ç¤ºã™ã€‚æ¬¡ã«ã€åˆ†æé™å®šæ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç¤ºã—ã€0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã‚’å¯¾è±¡ã¨ã—ãŸåˆ†æé™å®šæ³•ã®ä¾‹é¡Œã‚’ç¤ºã™ã€‚ã•ã‚‰ã«ã€åˆ†æé™å®šæ³•ã‚’å®Ÿè£…ã—ãŸç„¡å„Ÿã‚½ãƒ«ãƒã€ãŠã‚ˆã³ä¾‹é¡Œã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã®Pythonã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã™ã€‚\nã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®æ¤œè¨¼ç’°å¢ƒ\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   Pyomo 5.6.9   GLPK 4.65    ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œ ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã¨ã¯ã€æ¬¡ã®ã‚ˆã†ãªçµ„åˆã›æœ€é©åŒ–å•é¡Œã§ã‚ã‚‹ã€‚\n Nç¨®é¡ã®è·ç‰©ãŒã‚ã‚Šã€å„è·ç‰©ã¯ä¾¡å€¤$p_i$ã¨å®¹ç©$c_i$ã‚’æŒã¤($i=1,\u0026hellip;,N$)ã€‚\nã¾ãŸã€ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯ã®å®¹é‡ã‚’$C$ã¨ã™ã‚‹ã€‚\nãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯ã®å®¹é‡ã‚’è¶…ãˆãªã„ç¯„å›²ã§è·ç‰©ã‚’è©°ã‚ã‚‹ã¨ãã«ã€\nè©°ã‚ã‚‹è·ç‰©ã®ä¾¡å€¤ã‚’æœ€å¤§ã«ã™ã‚‹ã«ã¯ã€ã©ã®ã‚ˆã†ãªè·ç‰©ã®çµ„ã¿åˆã‚ã›ã¨ã™ã‚Œã°ã‚ˆã„ã‹ã€‚\n åŒã˜ç¨®é¡ã®è·ç‰©ã¯1ã¤ã¾ã§ã—ã‹å…¥ã‚Œã‚‰ã‚Œãªã„å ´åˆã‚„ã€ã„ãã¤ã§ã‚‚å…¥ã‚Œã‚‰ã‚Œã‚‹å ´åˆãªã©ã€ã„ãã¤ã‹ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã€‚å‰è€…ã®å ´åˆã‚’ç‰¹ã«0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã¨å‘¼ã¶ã€‚æœ¬è¨˜äº‹ã§ã¯0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã‚’å¯¾è±¡ã«åˆ†æé™å®šæ³•ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\n0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã‚’å¼ã§è¡¨ã™ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\begin{array}{ll} \\text{maximize} \\ \u0026amp; \\sum_{i=1}^{N} p_i x_i \\\\ \\text{subject to} \\ \u0026amp; \\sum_{i=1}^{N} c_i x_i \\le C \\\\ \u0026amp; x_i \\in \\{0, 1\\}, (i=1, \u0026hellip;, N) \\end{array} $$\nã“ã“ã§ã€$x_i=0$ã¯è·ç‰©$i$ãŒãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯ã«è©°ã‚ã‚‰ã‚Œã¦ã„ãªã„ã“ã¨ã‚’è¡¨ã—ã€$x_i=1$ã¯è·ç‰©$i$ãŒãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯ã«è©°ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’è¡¨ã™ã€‚\n0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã®æœ€é©è§£ã‚’ç·å½“ãŸã‚Šã§æ±‚ã‚ã‚ˆã†ã¨ã™ã‚‹ã¨ã€$2^N$å›ã®è¨ˆç®—ãŒå¿…è¦ã«ãªã‚Šã€$N$ãŒå¤§ãããªã‚‹ã«ã¤ã‚Œã¦è¨ˆç®—æ™‚é–“ãŒæŒ‡æ•°é–¢æ•°çš„ã«å¢—åŠ ã—ã¦ã—ã¾ã†ã€‚\nåˆ†æé™å®šæ³• åˆ†æé™å®šæ³• (branch and bound) ã¯ã€å¤‰æ•°$x_i$ã®æ•´æ•°æ¡ä»¶ã‚’é€£ç¶šå€¤ã«ç·©å’Œã—ãŸå•é¡Œï¼ˆç·©å’Œå•é¡Œï¼‰ã‚’è§£ã„ã¦ã€ä¸Šç•Œã¨ä¸‹ç•Œã‚’ç”¨ã„ã¦ç„¡é§„ãªæ¢ç´¢ã‚’çœç•¥ã™ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚ï¼ˆç·©å’Œå•é¡ŒãŒå˜ç´”ãªç·šå½¢è¨ˆç”»å•é¡Œã§ã‚ã‚‹å ´åˆã€å¤§è¦æ¨¡ãªå•é¡Œã§ã‚ã£ãŸã¨ã—ã¦ã‚‚æ¯”è¼ƒçš„å®¹æ˜“ã«æœ€é©è§£ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒã€åˆ†æé™å®šæ³•ã®å‰æã«ã‚ã‚‹ï¼‰\né€šå¸¸ã€ç·©å’Œå•é¡Œã®æœ€é©è§£ã¯å…ƒã®æ•´æ•°è¨ˆç”»å•é¡Œã®æœ€é©è§£ã¨ä¸€è‡´ã—ãªã„(0, 1ã®çµ„ã¿åˆã‚ã›ã«ãªã‚‰ãªã„)ã®ã§ã€é€£ç¶šå€¤ã«ç·©å’Œã—ãŸå¤‰æ•°ã‚’1ã¤ãšã¤0ã¾ãŸã¯1ã«å›ºå®šã—ã¦ã€å•é¡Œã‚’åˆ†å‰²ã•ã›ãªãŒã‚‰æ¢ç´¢ã™ã‚‹ã€‚ã“ã®åˆ†å‰²æ“ä½œã‚’åˆ†æ (branching) ã¨å‘¼ã¶ã€‚\nã•ã‚‰ã«ã€åˆ†æé™å®šæ³•ã®å ´åˆã€ä¸Šç•Œ (upper bound) ã¨ã¯ç·©å’Œå•é¡Œã®æœ€é©å€¤ã§ã‚ã‚Šã€å…ƒã®æ•´æ•°è¨ˆç”»å•é¡Œã®æœ€é©å€¤ã‹ã€ãã‚Œã‚ˆã‚Šå¤§ãã„ã¨ã¿ãªã›ã‚‹å€¤ã§ã‚ã‚‹ã€‚ã¾ãŸã€ä¸‹ç•Œ (lower bound) ã¨ã¯å…ƒã®æ•´æ•°è¨ˆç”»å•é¡Œã®æœ€é©å€¤ã‹ãã‚Œã‚ˆã‚Šå°ã•ã„ã¨ã¿ãªã›ã‚‹å€¤ã§ã‚ã‚‹ã€‚ï¼ˆä¸Šç•Œï¼‰â‰¥ï¼ˆæœ€é©å€¤ï¼‰â‰¥ï¼ˆä¸‹ç•Œï¼‰ã®é–¢ä¿‚ãŒæˆã‚Šç«‹ã¤ã€‚\nã—ãŸãŒã£ã¦ã€ã‚ã‚‹åˆ†æã«ãŠã‘ã‚‹ä¸‹ç•ŒãŒã€åˆ¥ã®åˆ†æã«ãŠã‘ã‚‹ä¸Šç•Œã‚ˆã‚Šã‚‚å¤§ãã„å ´åˆã€å¾Œè€…ã®åˆ†æã‚’ãã‚Œä»¥ä¸Šæ¢ç´¢ã—ã¦ã‚‚ã€æœ€é©è§£ãŒå¾—ã‚‰ã‚Œã‚‹è¦‹è¾¼ã¿ãŒãªã„ãŸã‚ã€æ¢ç´¢ã‚’æ‰“ã¡åˆ‡ã‚‹ã€‚ã“ã®æ‰“ã¡åˆ‡ã‚Šæ“ä½œã‚’é™å®š (bounding) æ“ä½œã¨å‘¼ã¶ã€‚\nåˆ†æé™å®šæ³•ã®ä¾‹ æ¬¡ã®0-1ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œ(N=4)ã‚’å¯¾è±¡ã«ã€åˆ†æé™å®šæ³•ã®ä¾‹ã‚’ç¤ºã™ã€‚\n$$ \\begin{array}{ll} \\text{maximize} \\ \u0026amp; 2x_1 + 4x_2 + 20x_3 + 24x_4 \\\\ \\text{subject to} \\ \u0026amp; x_1 + 4x_2 + 5x_3 + 8x_4 \\le 9 \\\\ \u0026amp; x_i \\in \\{0, 1\\}, (i=1, \u0026hellip;, 4) \\end{array} $$\nã¾ãšã€$x_i (i=1,\u0026hellip;,4)$ã‚’å…¨ã¦é€£ç¶šå€¤ã¨ã—ãŸç·©å’Œå•é¡Œ(P0)ã‚’è€ƒãˆã‚‹ã€‚ç·©å’Œå•é¡ŒP0ã¯ã€$\\boldsymbol{x} =(0, 0, 1, 0.5)$ã§æœ€é©è§£32ã‚’ã¨ã‚‹ã€‚ã“ã®32ã¨ã„ã†å€¤ã¯æ•´æ•°æ¡ä»¶ã‚’ç·©ã‚ã¦å¾—ã‚‰ã‚ŒãŸè§£ã§ã‚ã‚‹ã‹ã‚‰ã€å…ƒã®æ•´æ•°è¨ˆç”»å•é¡Œã®è§£ã¯32ä»¥ä¸‹ã§ã‚ã‚‹ã¨è€ƒãˆã‚‰ã‚Œã‚‹ï¼ˆã™ãªã‚ã¡ã€32ã¯ä¸Šç•Œã§ã‚ã‚‹ï¼‰ã€‚\næ¬¡ã«ã€ç·©å’Œå•é¡ŒP0ã®æœ€é©è§£ã«ãŠã„ã¦æ•´æ•°ã§ãªã‹ã£ãŸ$x_4$ãŒã€0ã®å ´åˆã¨1ã®å ´åˆã«åˆ†ã‘ã¦è€ƒãˆã‚‹ï¼ˆåˆ†æï¼‰ã€‚$x_4=0$ã§å›ºå®šã¨ã—ã¦$x_1, x_2, x_3$ã‚’é€£ç¶šå€¤ã¨ã—ãŸç·©å’Œå•é¡Œã‚’P1, $x_4=1$ã§å›ºå®šã¨ã—ã¦$x_1, x_2, x_3$ã‚’é€£ç¶šå€¤ã¨ã—ãŸç·©å’Œå•é¡Œã‚’P2ã¨ã™ã‚‹ã€‚\nç·©å’Œå•é¡ŒP1ã‚’è§£ãã¨ã€$\\boldsymbol{x} =(1, 0.75, 1, 0)$ã§æœ€é©å€¤25ã‚’ã¨ã‚‹ã€‚P1ã®ä¸Šç•Œã¯25ã§ã‚ã‚‹ã€‚\nã¾ãŸã€ç·©å’Œå•é¡ŒP2ã¯ã€$\\boldsymbol{x} =(0, 0, 0.2, 1)$ã§æœ€é©å€¤28ã‚’ã¨ã‚‹ã€‚P2ã®ä¸Šç•Œã¯28ã§ã‚ã‚‹ã€‚\nP1ã¨P2ã®ã©ã¡ã‚‰ã‚’å…ˆã«æ¢ç´¢ã—ã¦ã‚‚è‰¯ã„ãŒã€ã“ã“ã§ã¯ä¸Šç•ŒãŒå¤§ãã„P2 (28 \u0026gt; 25) ã«æ•´æ•°è¨ˆç”»å•é¡Œã®æœ€é©è§£ãŒã‚ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã¨è€ƒãˆã€P2ã‚’å…ˆã«æ¢ç´¢ã™ã‚‹ã€‚ã“ã®æ¢ç´¢æ–¹æ³•ã‚’æœ€è‰¯å„ªå…ˆæ¢ç´¢ã¨å‘¼ã¶ã€‚\nP2ã®æœ€é©è§£$\\boldsymbol{x} =(0, 0, 0.2, 1)$ã«ãŠã„ã¦ã€æ•´æ•°ã§ãªã„ã®ã¯$x_3=0.2$ã§ã‚ã‚‹ã€‚P2ã‚’ã•ã‚‰ã«åˆ†æã—ã¦ã€\n$(x_3, x_4)=(0, 1)$ã§å›ºå®šã¨ã—ã¦$x_1, x_2$ã‚’é€£ç¶šå€¤ã¨ã—ãŸç·©å’Œå•é¡Œã‚’P3, $(x_3, x_4)=(1, 1)$ã§å›ºå®šã¨ã—ã¦$x_1, x_2$ã‚’é€£ç¶šå€¤ã¨ã—ãŸç·©å’Œå•é¡Œã‚’P4ã¨ã™ã‚‹ã€‚\nP3ã‚’è§£ãã¨ã€$\\boldsymbol{x} =(1, 0, 0, 1)$ã§æœ€é©å€¤26ã‚’ã¨ã‚‹ã€‚ã“ã®è§£ã¯å…¨ã¦æ•´æ•°ã§ã‚ã‚‹ã®ã§ã€å…ƒã®æ•´æ•°è¨ˆç”»å•é¡Œã®è§£ã®å€™è£œã¨ãªã‚‹ã€‚ã¾ãŸã€å…ƒã®æ•´æ•°è¨ˆç”»å•é¡Œã®è§£ã¯ã€P3ã®æœ€é©å€¤26ä»¥ä¸Šã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚ã€ã“ã®26ã¯ä¸‹ç•Œã§ã‚ã‚‹ã€‚ã¾ãŸã€P3ã«ãŠã„ã¦ã€$x_1, x_2$ã‚’ã•ã‚‰ã«0ã¾ãŸã¯1ã«å›ºå®šã—ãŸã¨ã—ã¦ã‚‚ã€P3ã‚ˆã‚Šè‰¯ã„è§£ãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ã¯ãªã„ãŸã‚ã€ã“ã‚Œä»¥ä¸Šã®åˆ†æã¯ä¸è¦ã§ã‚ã‚‹ã€‚\nã“ã“ã§ã€ç·©å’Œå•é¡ŒP1ã®ä¸Šç•Œã¯25ã§ã‚ã£ãŸã€‚ã“ã‚Œã¯ã€P1ã®é€£ç¶šå€¤ã‚’æ•´æ•°ã«ç¸›ã£ãŸå ´åˆã€ãã®æœ€é©å€¤ã¯25ä»¥ä¸‹ã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚ã™ãªã‚ã¡ã€P1ã‚’åˆ†æã—ã¦ã‚‚ã€P3ã®ä¸‹ç•Œ26ã‚ˆã‚Šè‰¯ã„è§£ãŒå¾—ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒãªã„ã“ã¨ã‚’æ„å‘³ã™ã‚‹ãŸã‚ã€P1ã®æ¢ç´¢ã‚’æ‰“ã¡åˆ‡ã‚‹ï¼ˆé™å®šæ“ä½œï¼‰ã€‚\næœ€å¾Œã«ã€ç·©å’Œå•é¡ŒP4ã¯$(x_3, x_4)=(1, 1)$ã¨ã—ãŸæ™‚ç‚¹ã§ã€åˆ¶ç´„æ¡ä»¶$x_1 + 4x_2 + 5x_3 + 8x_4 \\le 9$ã‚’æº€ãŸã•ãšå®Ÿè¡Œå¯èƒ½è§£ã‚’æŒãŸãªã„ãŸã‚ã€ã“ã‚Œä»¥ä¸Šåˆ†æã™ã‚‹å¿…è¦ã¯ãªã„ã€‚\nä»¥ä¸ŠãŒåˆ†æé™å®šæ³•ã®ä¾‹ã§ã‚ã‚‹ã€‚å…¨ã¦ã®è§£å€™è£œã‚’æ¢ç´¢ã™ã‚‹ã“ã¨ãªãã€åŠ¹ç‡çš„ã«å¤§åŸŸçš„æœ€é©è§£ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nãªãŠã€æœ€è‰¯å„ªå…ˆæ¢ç´¢ä»¥å¤–ã«ã‚‚æ§˜ã€…ãªæ¢ç´¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒã‚ã‚Šã€æ·±ã•å„ªå…ˆæ¢ç´¢ã¨ã„ã†æ‰‹æ³•ã‚‚è‰¯ãä½¿ã‚ã‚Œã‚‹ã€‚æ·±ã•å„ªå…ˆæ¢ç´¢ã¯ã€ä¸Šè¨˜ã®ä¾‹ã§ç¤ºã™ã¨P1ã‚’è§£ã„ãŸå¾Œã€P2ã‚ˆã‚Šå…ˆã«P1ã‚’åˆ†æã—ã¦æ¬¡ã€…è§£ã„ã¦ã„ãæ–¹æ³•ã§ã‚ã‚Šã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã€‚\n å®Ÿè£…ãŒç°¡å˜ ä½¿ç”¨ãƒ¡ãƒ¢ãƒªãŒå°‘ãªãã¦æ¸ˆã‚€ æ—©ãæš«å®šè§£ãŒå¾—ã‚‰ã‚Œã‚‹  ä¸€æ–¹ã€æœ€è‰¯å„ªå…ˆæ¢ç´¢ã¨æ¯”ã¹ã‚‹ã¨ã€è¨ˆç®—é‡ãŒå¤šããªã‚Šã‚„ã™ã„ãƒ‡ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ã€‚\nåˆ†æé™å®šæ³•ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ç„¡å„Ÿã‚½ãƒ«ãƒ åˆ†æé™å®šæ³•ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ä¸»ãªç„¡å„Ÿã‚½ãƒ«ãƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n CBC (COIN-OR branch and cut) GLPK (GNU Linear Programming Kit)  GLPKã¯condaç’°å¢ƒã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã€pyomoã¨ã„ã†ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã¨ã®é€£æºã‚‚å®¹æ˜“ã§ã‚ã‚‹ã€‚\næ¤œè¨¼ç”¨ã®Pythonã‚³ãƒ¼ãƒ‰ ä¸Šè¨˜ã®åˆ†æé™å®šæ³•ã®ä¾‹ã‚’æ¤œè¨¼ã—ãŸPythonã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚Pyomoã¨GLPKã‚’ä½¿ç”¨ã—ãŸã€‚ä¸¡è€…ã®å°å…¥ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nPyomoã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  import pyomo.environ as pyo def ObjRule(model): return 2*model.x1 + 4*model.x2 + 20*model.x3 + 24*model.x4 def ConstRule(model): return 1*model.x1 + 4*model.x2 + 5*model.x3 + 8*model.x4 \u0026lt;= 9 model = pyo.ConcreteModel() model.x1 = pyo.Var(domain=pyo.NonNegativeReals, bounds=(0, 1)) model.x2 = pyo.Var(domain=pyo.NonNegativeReals, bounds=(0, 1)) model.x3 = pyo.Var(domain=pyo.NonNegativeReals, bounds=(0, 1)) model.x4 = pyo.Var(domain=pyo.NonNegativeReals, bounds=(0, 1)) # boundsã®ç¯„å›²ã‚’(0, 0)ã‚„(1, 1)ã¨ã™ã‚Œã°å€¤ã‚’å›ºå®šã§ãã‚‹ model.OBJ = pyo.Objective(rule = ObjRule, sense = pyo.maximize) model.Constraint1 = pyo.Constraint(rule = ConstRule) opt = pyo.SolverFactory(\u0026#39;glpk\u0026#39;) res = opt.solve(model, tee=False) # tee=Trueã¨ã™ã‚Œã°ã‚½ãƒ«ãƒãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤º print(f\u0026#34;è©•ä¾¡é–¢æ•°ï¼š{model.OBJ()}\u0026#34;) print(f\u0026#34;x1: {model.x1()}\u0026#34;) print(f\u0026#34;x2: {model.x2()}\u0026#34;) print(f\u0026#34;x3: {model.x3()}\u0026#34;) print(f\u0026#34;x4: {model.x4()}\u0026#34;)   ã¾ãŸã€å¤‰æ•°x1, \u0026hellip;, x4ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç½®ãæ›ãˆã‚Œã°ã€æ•´æ•°è¨ˆç”»å•é¡Œã¨ã—ã¦GLPKã«è§£ã‹ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n1 2 3 4  model.x1 = pyo.Var(domain=pyo.Binary) model.x2 = pyo.Var(domain=pyo.Binary) model.x3 = pyo.Var(domain=pyo.Binary) model.x4 = pyo.Var(domain=pyo.Binary)   å‚è€ƒ ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã«ã¤ã„ã¦\nãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œ - Wikipedia\nåˆ†æé™å®šæ³•ã«ã¤ã„ã¦\næ•°ç†è¨ˆç”»æ³•ç¬¬6å›ï¼ˆæ±åŒ—å¤§å­¦è¬›ç¾©è³‡æ–™ã€PDFï¼‰\næœ€é©åŒ–æ‰‹æ³• ç¬¬ 5å› æ•´æ•°è¨ˆç”»æ³• (4)ï¼šåˆ†æé™å®šæ³•ï¼ˆé›»é€šå¤§è¬›ç¾©è³‡æ–™ã€PDFï¼‰\n","description":"åˆ†æé™å®šæ³•ã¯ã€çµ„åˆã›æœ€é©åŒ–å•é¡Œã®è§£ã‚’åŠ¹ç‡çš„ã«æ±‚ã‚ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚çµ„åˆã›æœ€é©åŒ–å•é¡Œã®1ã¤ã§ã‚ã‚‹ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã‚’å¯¾è±¡ã«ã€åˆ†æé™å®šæ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç¤ºã™ã€‚","id":30,"section":"posts","tags":["æœ€é©åŒ–"],"title":"ãƒŠãƒƒãƒ—ã‚µãƒƒã‚¯å•é¡Œã¨åˆ†æé™å®šæ³•","uri":"https://helve-blog.com/posts/math/knapsack-problem-branch-and-bound/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã¯ä»¥ä¸‹ã®è¨˜äº‹ã®ç¶šãã§ã‚ã‚‹ã€‚ç­‰å¼åˆ¶ç´„ã‚’2ã¤æŒã¤æœ€é©åŒ–å•é¡Œã‚’ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã§è§£ãã€ãã®å¹¾ä½•å­¦çš„ãªæ„å‘³ã‚’ç¤ºã™ã€‚\nç­‰å¼åˆ¶ç´„ä»˜ãæœ€é©åŒ–å•é¡Œã¨ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³• å‰ç·¨\nä¾‹é¡Œï¼ˆæ‰¿å‰ï¼‰ ä¾‹é¡Œ2 ç­‰å¼åˆ¶ç´„ãŒ2ã¤ã‚ã‚‹å ´åˆ 2æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«$\\boldsymbol{x}=(x_1, x_2)$ã«å¯¾ã—ã¦ã€æ¬¡å¼ã®ç­‰å¼åˆ¶ç´„ã‚’2ã¤æŒã¤æœ€å°åŒ–å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \\mathrm{min} \\ \u0026amp; f(\\boldsymbol{x}) = x_1^2 + x_2^2 \\\\ \\mathrm{s.t.}\\ \u0026amp; g_1(\\boldsymbol{x}) = x_1 + 2 x_2 - 6 = 0 \\\\ \u0026amp; g_2(\\boldsymbol{x}) = 2 x_1 + x_2 - 6 = 0 \\end{array}$$\nä¸Šè¨˜ã®$f$ã¯å‡¸é–¢æ•°ã‹ã¤ã€$g_i$ã¯å…¨ã¦1æ¬¡å¼ã§ã‚ã‚‹ã‹ã‚‰ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã§å¾—ã‚‰ã‚Œã‚‹è§£ã¯æœ€é©è§£ã«ãªã‚‹ã€‚ãªãŠã€æœ€é©è§£ã¯$(x_1, x_2)=(2, 2)$ã¨ãªã‚Šã€æœ€å°å€¤$f=8$ã‚’å¾—ã‚‹ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚\nä¸Šè¨˜ã®å•é¡Œã®ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã¯æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$$ L(\\boldsymbol{x}, \\boldsymbol{\\lambda}) = x_1^2 + x_2^2 - \\lambda_1 (x_1 + 2 x_2 - 6) - \\lambda_2 (2 x_1 + x_2 - 6) $$\næœ€é©è§£ã¯ã€ã“ã®ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã®å„æˆåˆ†ãŒ0ã¨ãªã‚‹$\\boldsymbol{x}$ã§ã‚ã‚‹ã€‚ã‚ˆã£ã¦ã€æ¬¡ã®é€£ç«‹æ–¹ç¨‹å¼ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n$$ \\nabla_\\boldsymbol{x} L(\\boldsymbol{x}, \\boldsymbol{\\lambda}) = \\left[ \\begin{array}{l} \\frac{\\partial L}{\\partial x_1} \\\\ \\frac{\\partial L}{\\partial x_2} \\end{array} \\right] = \\left[ \\begin{array}{l} 2 x_1 - \\lambda_1 - 2 \\lambda_2 \\\\ 2 x_2 - 2 \\lambda_1 - \\lambda_2 \\end{array} \\right] = \\left[ \\begin{array}{l} 0 \\\\ 0 \\end{array} \\right] $$\n$$ \\nabla_\\boldsymbol{\\lambda} L(\\boldsymbol{x}, \\boldsymbol{\\lambda}) = \\left[ \\begin{array}{l} \\frac{\\partial L}{\\partial \\lambda_1} \\\\ \\frac{\\partial L}{\\partial \\lambda_2} \\end{array} \\right] = \\left[ \\begin{array}{l} - (x_1 + 2 x_2 - 6) \\\\ - (2 x_1 + x_2 - 6) \\end{array} \\right] = \\left[ \\begin{array}{l} 0 \\\\ 0 \\end{array} \\right] $$\né€£ç«‹æ–¹ç¨‹å¼ã‚’è§£ãã¨ã€ä»¥ä¸‹ã®è§£ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n$$ (x_1, x_2, \\lambda_1, \\lambda_2) = (2, 2, \\frac{4}{3}, \\frac{4}{3}) $$\nã—ãŸãŒã£ã¦ã€æœ€é©è§£ã¯$\\boldsymbol{x}^{*}=(2, 2)$ã¨ãªã‚‹ã€‚ã“ã®ã¨ãã€ç›®çš„é–¢æ•°ã¯$f=8$ã¨ãªã‚‹ã€‚\nã¾ãŸã€æœ€é©è§£ã«ãŠã‘ã‚‹è©•ä¾¡é–¢æ•°ã¨ç­‰å¼åˆ¶ç´„ã®å„å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\nabla f(\\boldsymbol{x}^*) = \\left[ \\begin{array}{l} 4 \\\\ 4 \\end{array} \\right] $$\n$$ \\nabla g_1(\\boldsymbol{x}^*) = \\left[ \\begin{array}{l} 2 \\\\ 1 \\end{array} \\right]$$\n$$ \\nabla g_2(\\boldsymbol{x}^*) = \\left[ \\begin{array}{l} 1 \\\\ 2 \\end{array} \\right] $$\nã“ã“ã§ã€$(\\lambda_1, \\lambda_2)=(4/3, 4/3)$ã§ã‚ã‚‹ã‹ã‚‰ã€æ¬¡å¼ãŒæˆã‚Šç«‹ã¤ã€‚\n$$ \\nabla f(\\boldsymbol{x}^{*}) = \\lambda_1 \\nabla g_1(\\boldsymbol{x}^{*}) + \\lambda_2 \\nabla g_2(\\boldsymbol{x}^{*}) $$\n$$ \\left[ \\begin{array}{l} 4 \\\\ 4 \\end{array} \\right] = \\frac{4}{3} \\left[ \\begin{array}{l} 2 \\\\ 1 \\end{array} \\right] + \\frac{4}{3} \\left[ \\begin{array}{l} 1 \\\\ 2 \\end{array} \\right] $$\nã™ãªã‚ã¡ã€æœ€é©è§£ã«ãŠã„ã¦ã€è©•ä¾¡é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¨ã€ç­‰å¼åˆ¶ç´„ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã®ç·šå½¢å’Œã¯ç­‰ã—ã„ã€‚\n","description":"ç­‰å¼åˆ¶ç´„ä»˜ãæœ€é©åŒ–å•é¡Œã«å¯¾ã™ã‚‹ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚ç°¡å˜ãªä¾‹é¡Œã«å¯¾ã—ã¦ã€æœ€é©è§£ãŒæº€ãŸã™å¹¾ä½•å­¦çš„ãªæ„å‘³ã‚’ç¤ºã™ã€‚","id":31,"section":"posts","tags":["æœ€é©åŒ–"],"title":"ç­‰å¼åˆ¶ç´„ä»˜ãæœ€é©åŒ–å•é¡Œã¨ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³• å¾Œç·¨","uri":"https://helve-blog.com/posts/math/lagrange-multiplier-with-equality-constraints-2/"},{"content":"ã¯ã˜ã‚ã« ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã¯åˆ¶ç´„æ¡ä»¶ã‚’æŒã¤æœ€é©åŒ–å•é¡Œã‚’è§£ããŸã‚ã®æ‰‹æ³•ã§ã‚ã‚‹ã€‚ã“ã®æ‰‹æ³•ã¯éç·šå½¢å•é¡Œã«å¯¾ã—ã¦é©ç”¨ã§ãã€å†…ç‚¹æ³•ã‚„æœ‰åŠ¹åˆ¶ç´„æ³•ãªã©ã«ãŠã„ã¦ã‚‚åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã§ã¯ã€åˆ¶ç´„æ¡ä»¶ã«å®šæ•°ï¼ˆãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ä¹—æ•°ï¼‰ã‚’æ›ã‘ã¦ç›®çš„é–¢æ•°ã¨ç·šå½¢çµåˆã—ãŸãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã¨å‘¼ã°ã‚Œã‚‹é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚ã“ã®é–¢æ•°ã®æ¥µå€¤ã‚’æ±‚ã‚ã‚‹ã¨ã€å±€æ‰€æœ€é©è§£ãŒå¾—ã‚‰ã‚Œã‚‹ï¼ˆå•é¡ŒãŒç‰¹å®šã®æ¡ä»¶ã‚’æº€ãŸã›ã°æœ€é©è§£ãŒå¾—ã‚‰ã‚Œã‚‹ï¼‰ã€‚\nã¾ãŸã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã¯ã€ç­‰å¼åˆ¶ç´„ã‚’æŒã¤å ´åˆã€ä¸ç­‰å¼åˆ¶ç´„ã‚’æŒã¤å ´åˆã€ã¾ãŸã¯ãã‚Œã‚‰ä¸¡æ–¹ã‚’æŒã¤å ´åˆã®ã©ã¡ã‚‰ã§ã‚‚é©ç”¨ã§ãã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ç­‰å¼åˆ¶ç´„ã®ã¿æŒã¤å ´åˆã‚’å¯¾è±¡ã¨ã™ã‚‹ã€‚\nï¼ˆâ€»ãŸã ã—ã€ä¸ç­‰å¼åˆ¶ç´„ã¯ã‚¹ãƒ©ãƒƒã‚¯å¤‰æ•°ã‚’å°å…¥ã—ã¦ç­‰å¼åˆ¶ç´„ã«ç½®ãæ›ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¾‹ãˆã°ã€ä¸ç­‰å¼åˆ¶ç´„$g(x) \\le 0$ã¯ã€ã‚¹ãƒ©ãƒƒã‚¯å¤‰æ•°$s \\ge 0$ã‚’ç”¨ã„ã¦ç­‰å¼åˆ¶ç´„$g(x)+s=0$ã«ç½®ãæ›ãˆã‚‰ã‚Œã‚‹ã€‚ãã®ãŸã‚ã€å˜ã«æœ€é©åŒ–å•é¡Œã‚’è§£ããŸã‚ã§ã‚ã‚Œã°ã€ç­‰å¼åˆ¶ç´„ã®ã¿æ‰±ã†æ‰‹æ³•ã®ã¿çŸ¥ã£ã¦ã„ã‚Œã°å®Ÿç”¨ä¸Šã¯å•é¡Œãªã„ï¼‰\nå¯¾è±¡ã¨ã™ã‚‹å•é¡Œ ä»¥ä¸‹ã®ç­‰å¼åˆ¶ç´„ä»˜ãéç·šå½¢æœ€å°åŒ–å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \u0026amp; \\mathrm{min} \\ f(\\boldsymbol{x}) \\\\ \u0026amp; \\mathrm{s.t.}\\ g_i(\\boldsymbol{x})=0 \\ (i=1, \u0026hellip;, m) \\tag{1} \\end{array} $$\nã“ã“ã§ã€$\\boldsymbol{x} \\in \\mathbb{R}^n$, $n \\ge m$ã¨ã™ã‚‹ã€‚ã¾ãŸã€$f, g$ã¯å¾®åˆ†å¯èƒ½ã¨ã™ã‚‹ã€‚\nã“ã‚Œã¯ã€ç­‰å¼åˆ¶ç´„$g_i(\\boldsymbol{x})=0$ã‚’ã™ã¹ã¦æº€ãŸã—ã€é–¢æ•°$f(\\boldsymbol{x})$ã‚’æœ€å°åŒ–ã™ã‚‹å¤‰æ•°$\\boldsymbol{x}$ã‚’æ±‚ã‚ã‚‹å•é¡Œã¨ãªã‚‹ã€‚\nãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³• ä¸Šè¨˜ã®å•é¡Œã«å¯¾ã—ã¦ã€æ¬¡å¼ã®é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚\n$$ \\begin{array}{ll} L(\\boldsymbol{x}, \\boldsymbol{\\lambda}) \u0026amp; = f(\\boldsymbol{x}) - \\boldsymbol{\\lambda}^{\\top} \\boldsymbol{g}(\\boldsymbol{x}) \\\\ \u0026amp; = f(\\boldsymbol{x}) - \\sum_{i=1}^{m} \\lambda_i g_i(\\boldsymbol{x}) \\end{array} \\tag{2} $$\nã“ã‚Œã‚’ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã¨å‘¼ã¶ã€‚ã¾ãŸã€$\\lambda_i (i=1, \u0026hellip;, m)$ã‚’ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ä¹—æ•°ã€$\\boldsymbol{\\lambda}$ã‚’ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ä¹—æ•°ãƒ™ã‚¯ãƒˆãƒ«ã¨å‘¼ã¶ã€‚\nç­‰å¼ä»˜ãåˆ¶ç´„å•é¡Œã®å±€æ‰€è§£ã‚’$\\boldsymbol{x}^{*}$ã¨ã™ã‚‹ã¨ã€$\\boldsymbol{x}^{*}$ã¯æ¬¡ã®ç­‰å¼ã‚’æº€ãŸã™ã€‚\n$$ \\nabla_\\boldsymbol{x} L(\\boldsymbol{x}^*, \\boldsymbol{\\lambda}^*) = \\nabla f(\\boldsymbol{x}^*) - \\sum_{i=1}^{m} \\lambda_i^* \\nabla g_i(\\boldsymbol{x^*}) = \\boldsymbol{0} \\tag{3} $$\n$$ \\nabla_\\boldsymbol{\\lambda} L(\\boldsymbol{x}^*, \\boldsymbol{\\lambda}^*) = \\boldsymbol{g} (\\boldsymbol{x^*}) = \\boldsymbol{0} \\tag{4} $$\nã™ãªã‚ã¡ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã®å„æˆåˆ†ãŒ0ã¨ãªã‚‹å€¤ãŒæœ€é©è§£ã¨ãªã‚‹ã€‚\nå¼(3)ã‚’å¤‰å½¢ã™ã‚‹ã¨æ¬¡å¼ã‚’å¾—ã‚‹ã€‚\n$$ \\nabla f(\\boldsymbol{x}^*) = \\sum_{i=1}^{m} \\lambda_i^* \\nabla g_i(\\boldsymbol{x^*}) \\tag{5} $$\nã“ã‚Œã¯ã€ç­‰å¼åˆ¶ç´„$g_i$ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã«ã€ã‚ã‚‹ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ä¹—æ•°$\\lambda_i^{*}$ã‚’æ›ã‘ãŸåˆæˆãƒ™ã‚¯ãƒˆãƒ«ã¨ã€ç›®çš„é–¢æ•°$f$ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ãŒå¹³è¡Œã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚\nãªãŠã€$f$ãŒå‡¸é–¢æ•°ã‹ã¤ã€$g_i$ãŒå…¨ã¦1æ¬¡å¼ãªã‚‰ã°ã€$\\boldsymbol{x}^{*}$ã¯æœ€é©è§£ã«ãªã‚‹ã€‚ã“ã‚Œã¯KKTæ¡ä»¶ï¼ˆKarush-Kuhn-Tuckeræ¡ä»¶ï¼‰ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹ãŒã€æœ¬è¨˜äº‹ã§ã¯ã“ã‚Œä»¥ä¸Šè§¦ã‚Œãªã„ã€‚\nã¾ãŸã€å¼(4)ã¯ã€å±€æ‰€è§£ãŒå…ƒã®æœ€é©åŒ–å•é¡Œã®ç­‰å¼åˆ¶ç´„ã‚’æº€ãŸã™ã“ã¨ã‚’ç¤ºã™ã€‚\nä¾‹é¡Œ ä»¥ä¸‹ã®2ã¤ã®ä¾‹é¡Œã«å¯¾ã—ã¦ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã‚’é©ç”¨ã—ã€å¹¾ä½•å­¦çš„ãªæ„å‘³ã‚’ç¤ºã™ã€‚\n ç­‰å¼åˆ¶ç´„ãŒ1ã¤ã ã‘ã®å ´åˆ ç­‰å¼åˆ¶ç´„ãŒ2ã¤ã‚ã‚‹å ´åˆï¼ˆå¾Œç·¨ã®è¨˜äº‹ã«åˆ†å‰²ï¼‰  ä¾‹é¡Œ1 ç­‰å¼åˆ¶ç´„ãŒ1ã¤ã ã‘ã®å ´åˆ 2æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«$\\boldsymbol{x}=(x_1, x_2)$ã«å¯¾ã—ã¦ã€æ¬¡å¼ã®ç­‰å¼åˆ¶ç´„ã‚’1ã¤ã ã‘æŒã¤æœ€å°åŒ–å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \u0026amp; \\mathrm{min} \\ f(\\boldsymbol{x}) = x_1^2 + x_2^2 \\\\ \u0026amp; \\mathrm{s.t.}\\ g(\\boldsymbol{x}) = x_1 + x_2 - 2 = 0 \\end{array} $$\nä¸Šè¨˜ã®$f$ã¯å‡¸é–¢æ•°ã‹ã¤ã€$g_i$ã¯å…¨ã¦1æ¬¡å¼ã§ã‚ã‚‹ã‹ã‚‰ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã§å¾—ã‚‰ã‚Œã‚‹è§£ã¯æœ€é©è§£ã«ãªã‚‹ã€‚ãªãŠã€æœ€é©è§£ã¯$(x_1, x_2)=(1, 1)$ã¨ãªã‚Šã€æœ€å°å€¤$f=2$ã‚’å¾—ã‚‹ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚\nä¸Šè¨˜ã®å•é¡Œã®ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã¯æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$$ L(\\boldsymbol{x}, \\boldsymbol{\\lambda}) = x_1^2 + x_2^2 - \\lambda (x_1 + x_2 -2) $$\næœ€é©è§£ã¯ã€ã“ã®ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã®å„æˆåˆ†ãŒ0ã¨ãªã‚‹$\\boldsymbol{x}$ã§ã‚ã‚‹ã€‚ã‚ˆã£ã¦ã€æ¬¡ã®é€£ç«‹æ–¹ç¨‹å¼ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n$$ \\nabla_\\boldsymbol{x} L(\\boldsymbol{x}, \\boldsymbol{\\lambda}) = \\left[ \\begin{array}{l} \\frac{\\partial L}{\\partial x_1} \\\\ \\frac{\\partial L}{\\partial x_2} \\\\ \\end{array} \\right] = \\left[ \\begin{array}{l} 2 x_1 - \\lambda \\\\ 2 x_2 - \\lambda \\\\ \\end{array} \\right] = \\left[ \\begin{array}{l} 0 \\\\ 0 \\\\ \\end{array} \\right] $$\n$$ \\nabla_\\boldsymbol{\\lambda} L(\\boldsymbol{x}, \\boldsymbol{\\lambda}) = - (x_1 + x_2 - 2) = 0 $$\né€£ç«‹æ–¹ç¨‹å¼ã‚’è§£ãã¨ã€ä»¥ä¸‹ã®è§£ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n$$ (x_1, x_2, \\lambda) = (1, 1, 2) $$\nã—ãŸãŒã£ã¦ã€æœ€é©è§£ã¯$\\boldsymbol{x}^{*}=(1, 1)$ã¨ãªã‚‹ã€‚ã“ã®ã¨ãã€ç›®çš„é–¢æ•°ã¯$f=2$ã¨ãªã‚‹ã€‚\n$\\nabla_\\boldsymbol{x} L(\\boldsymbol{x}, \\boldsymbol{\\lambda})$ã¯ã€æœ€é©è§£ã«ãŠã„ã¦è©•ä¾¡é–¢æ•°$f$ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¨ç­‰å¼åˆ¶ç´„$g$ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ãŒå¹³è¡Œã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚å„å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯ã€\n$$ \\nabla f(\\boldsymbol{x}) = \\left[ \\begin{array}{l} 2 x_1 \\\\ 2 x_2 \\end{array} \\right] $$\n$$ \\nabla g(\\boldsymbol{x}) = \\left[ \\begin{array}{l} 1 \\\\ 1 \\end{array} \\right] $$\nã¨ãªã‚‹ã€‚æœ€é©è§£ã«ãŠã‘ã‚‹$f$ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯ã€\n$$ \\nabla f(\\boldsymbol{x}^*) = \\left[ \\begin{array}{l} 2 \\\\ 2 \\end{array} \\right] $$\nã§ã‚ã‚‹ã‹ã‚‰ã€$\\nabla g(\\boldsymbol{x})$ã«å¹³è¡Œã§ã‚ã‚‹ã€‚è¨€ã„æ›ãˆã‚‹ã¨ã€æœ€é©è§£ã«ãŠã„ã¦ã€$f$ã®ç­‰é«˜ç·šã¨$g$ã®æ¥ç·šã¯ä¸€è‡´ã™ã‚‹ã€‚\nç­‰å¼åˆ¶ç´„ãŒ2ã¤ã‚ã‚‹å ´åˆã«ã¤ã„ã¦ã¯ã€å¾Œç·¨ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nç­‰å¼åˆ¶ç´„ä»˜ãæœ€é©åŒ–å•é¡Œã¨ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³• å¾Œç·¨\n","description":"ç­‰å¼åˆ¶ç´„ä»˜ãæœ€é©åŒ–å•é¡Œã«å¯¾ã™ã‚‹ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚ ã¾ãŸã€ç°¡å˜ãªä¾‹é¡Œã‚’ç”¨ã„ã¦ã€æœ€é©è§£ãŒæº€ãŸã™å¹¾ä½•å­¦çš„ãªæ„å‘³ã‚’ç¤ºã™ã€‚","id":32,"section":"posts","tags":["æœ€é©åŒ–"],"title":"ç­‰å¼åˆ¶ç´„ä»˜ãæœ€é©åŒ–å•é¡Œã¨ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³• å‰ç·¨","uri":"https://helve-blog.com/posts/math/lagrange-multiplier-with-equality-constraints-1/"},{"content":"ã¯ã˜ã‚ã« ä¸»åŒå¯¾å†…ç‚¹æ³•ã¨ã¯ã€å®Ÿè¡Œå¯èƒ½é ˜åŸŸã®å†…éƒ¨ã‚’æœ€é©è§£ã«å‘ã‘ã¦æ¢ç´¢ã™ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã€éç·šå½¢å•é¡Œã«å¯¾ã™ã‚‹ä¸»åŒå¯¾å†…ç‚¹æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚ç·šå½¢å•é¡Œã«å¯¾ã™ã‚‹ä¸»åŒå¯¾å†…ç‚¹æ³•ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã®ã“ã¨ã€‚\nç·šå½¢è¨ˆç”»å•é¡Œã®ä¸»åŒå¯¾å†…ç‚¹æ³•\nå¯¾è±¡ã¨ã™ã‚‹éç·šå½¢å•é¡Œ ä»¥ä¸‹ã®åˆ¶ç´„ä»˜ãéç·šå½¢è¨ˆç”»å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{l} \\mathrm{min} \\ f(\\boldsymbol{x}) \\\\ \\mathrm{s.t.} \\ \\boldsymbol{g}(\\boldsymbol{x})=\\boldsymbol{0}, \\boldsymbol{x} \\ge \\boldsymbol{0} \\end{array} $$\nã“ã“ã§ã€$\\boldsymbol{x} \\in \\mathbb{R}^n, \\boldsymbol{g}(\\boldsymbol{x}) \\in \\mathbb{R}^m$ã§ã‚ã‚‹ã€‚\nã¾ãŸã€å•é¡Œã«$\\boldsymbol{x} \\ge \\boldsymbol{0}$ä»¥å¤–ã®ä¸ç­‰å¼åˆ¶ç´„ãŒå«ã¾ã‚Œã‚‹å ´åˆã«ã‚‚ã€ä¸Šè¨˜ã®å¼ã®å½¢ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ä¾‹ãˆã°ã€\n$\\boldsymbol{h}(\\boldsymbol{x}) \\le \\boldsymbol{0}$\nãªã‚‹ä¸ç­‰å¼åˆ¶ç´„$\\boldsymbol{h}(\\boldsymbol{x})$ãŒã‚ã‚‹ã¨ãã€æ–°ãŸã«å¤‰æ•°ãƒ™ã‚¯ãƒˆãƒ«$\\boldsymbol{s} \\ge \\boldsymbol{0}$ã‚’å°å…¥ã—ã¦ã€\n$ \\boldsymbol{h}(\\boldsymbol{x}) + \\boldsymbol{s} = \\boldsymbol{0}$\nã¨ã„ã†ç­‰å¼åˆ¶ç´„ã«å¤‰æ›ã§ãã‚‹ã€‚ãªãŠã€ã“ã®$\\boldsymbol{s}$ã‚’ã‚¹ãƒ©ãƒƒã‚¯å¤‰æ•°ã¨å‘¼ã¶ã€‚\næœ€é©è§£ãŒæº€ãŸã™æ¡ä»¶ æ¬¡ã«ã€ä¸Šè¨˜ã®æœ€é©åŒ–å•é¡Œã®æœ€é©è§£ãŒæº€ãŸã™æ¡ä»¶ï¼ˆæœ€é©æ€§æ¡ä»¶ï¼‰ã‚’è€ƒãˆã‚‹ã€‚æœ€é©æ€§æ¡ä»¶ã¯ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ã®æœªå®šä¹—æ•°æ³•ã«ã‚ˆã‚Šå¾—ã‚‰ã‚Œã‚‹ã€‚\nã¾ãšã€æœ€é©åŒ–å•é¡Œã®ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã‚’æ¬¡å¼ã§å®šç¾©ã™ã‚‹ã€‚\n$$ L(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = f(\\boldsymbol{x}) + \\boldsymbol{y}^{\\top} \\boldsymbol{g}(\\boldsymbol{x}) - \\boldsymbol{z}^{\\top} \\boldsymbol{x} $$\nã“ã“ã§ã€$\\boldsymbol{y}, \\boldsymbol{z}$ã¯ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥ä¹—æ•°ãƒ™ã‚¯ãƒˆãƒ«ã§ã‚ã‚‹ã€‚\nå±€æ‰€è§£ã¯ã€æ¬¡ã®5ã¤ã®å¼ã‚’æº€ãŸã™è§£ã§ã‚ã‚‹ã€‚\n$$ \\begin{array}{l} \\nabla_\\boldsymbol{x} L(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = \\boldsymbol{0} \\\\ \\nabla_\\boldsymbol{y} L(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = \\boldsymbol{g}(\\boldsymbol{x}) = \\boldsymbol{0} \\\\ \\nabla_\\boldsymbol{z} L(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = - \\boldsymbol{x} \\le \\boldsymbol{0} \\\\ \\boldsymbol{z} \\ge \\boldsymbol{0} \\\\ z_i x_i = 0 \\ (i=1, \u0026hellip;, m) \\end{array} $$\nä¸Šè¨˜ã®5ã¤ã®æ¡ä»¶ã‚’ Karush-Kuhn-Tuckeræ¡ä»¶ï¼ˆKKTæ¡ä»¶ï¼‰ ã¨å‘¼ã¶ã€‚ã¾ãŸã€$z_i x_i = 0 \\ (i=1, \u0026hellip;, m)$ã‚’ç›¸è£œæ€§æ¡ä»¶ (complementarity condition)ã¨å‘¼ã¶ã€‚\nã•ã‚‰ã«ã€\n$ \\boldsymbol{w}=[\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}]^{\\top} $\nã¨ãŠãã€KKTæ¡ä»¶ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰å½¢ã™ã‚‹ã€‚\n$$ \\begin{array}{c} \\boldsymbol{r_0} (\\boldsymbol{w}) = \\left[ \\begin{array}{c} \\nabla_\\boldsymbol{x} L(\\boldsymbol{w}) \\\\ \\boldsymbol{g}(\\boldsymbol{x}) \\\\ XZ \\boldsymbol{e} \\end{array} \\right] = \\left[ \\begin{array}{l} \\boldsymbol{0} \\\\ \\boldsymbol{0} \\\\ \\boldsymbol{0} \\end{array} \\right] \\\\ \\boldsymbol{x} \\ge \\boldsymbol{0} \\\\ \\boldsymbol{z} \\ge \\boldsymbol{0} \\end{array} $$\nã“ã“ã§ã€\n$$ \\begin{array}{c} X = \\mathrm{diag}(x_1, x_2, \u0026hellip;, x_n) \\in \\mathbb{R}^{n \\times n}, \\\\ Z = \\mathrm{diag}(z_1, z_2, \u0026hellip;, z_n) \\in \\mathbb{R}^{n \\times n}, \\\\ \\boldsymbol{e} = [1, 1, \u0026hellip;, 1 ] ^{\\top} \\in \\mathbb{R}^n \\end{array} $$\nã§ã‚ã‚‹ã€‚ãªãŠã€diagã¯å¯¾è§’è¡Œåˆ—ã§ã‚ã‚‹ã€‚\nä¸»åŒå¯¾å†…ç‚¹æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  ä¸­å¿ƒåŒ–KKTæ¡ä»¶ å¤‰å½¢å¾Œã®KKTæ¡ä»¶ã‚’ãã®ã¾ã¾å†…ç‚¹æ³•ã§è§£ãå ´åˆã€è¨ˆç®—é€”ä¸­ã®è§£ãŒ$\\boldsymbol{x} = \\boldsymbol{0}, \\boldsymbol{z} = \\boldsymbol{0}$ã®å¢ƒç•Œã«è¿‘ã¥ãã¨ã€åæŸãŒé…ããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ãã“ã§ã€ãƒãƒªã‚¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨å‘¼ã°ã‚Œã‚‹å¤‰æ•°ã‚’å°å…¥ã—ã€è¨ˆç®—é€”ä¸­ã®è§£ã‚’å¢ƒç•Œã‹ã‚‰é›¢ã—ãªãŒã‚‰æœ€é©è§£ã«è¿‘ã¥ã‘ã‚‹ã€‚\nãƒãƒªã‚¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$\\mu (\u0026gt; 0)$ã‚’å°å…¥ã—ãŸKKTæ¡ä»¶ã¯æ¬¡å¼ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\begin{array}{c} \\boldsymbol{r} (\\boldsymbol{w}; \\mu) = \\left[ \\begin{array}{c} \\nabla_\\boldsymbol{x} L(\\boldsymbol{w}) \\\\ \\boldsymbol{g}(\\boldsymbol{x}) \\\\ XZ \\boldsymbol{e} - \\mu \\boldsymbol{e} \\end{array} \\right] = \\left[ \\begin{array}{l} \\boldsymbol{0} \\\\ \\boldsymbol{0} \\\\ \\boldsymbol{0} \\end{array} \\right] \\\\ \\boldsymbol{x} \\ge \\boldsymbol{0} \\\\ \\boldsymbol{z} \\ge \\boldsymbol{0} \\end{array} $$\nã“ã‚Œã‚’ä¸­å¿ƒåŒ–KKTæ¡ä»¶ã¾ãŸã¯ãƒãƒªã‚¢KKTæ¡ä»¶ã¨å‘¼ã¶ã€‚$\\mu =0$ã¨ã™ã‚‹ã¨ã€ä¸­å¿ƒåŒ–KKTæ¡ä»¶ã®è§£ã¯ã‚‚ã¨ã®KKTæ¡ä»¶ã®è§£ã«ç­‰ã—ããªã‚‹ã€‚ä¸»åŒå¯¾å†…ç‚¹æ³•ã§ã¯ã€å§‹ã‚ã«é©å½“ãª$\\mu$ã®åˆæœŸå€¤ã‚’ä¸ãˆã€è§£ã®æ›´æ–°ã®åº¦ã«å¾ã€…ã«$\\mu$ã®å€¤ã‚’å°ã•ãã—ã¦0ã«è¿‘ã¥ã‘ã¦ã„ãã€‚\nè§£ã®æ›´æ–° ä¸­å¿ƒåŒ–KKTæ¡ä»¶ã®æ–¹ç¨‹å¼ã¯éç·šå½¢ã§ã‚ã‚‹ãŸã‚ã€æœ€é©è§£ã‚’ç›´æ¥æ±‚ã‚ã‚‹ã“ã¨ã¯å›°é›£ã§ã‚ã‚‹ã€‚ã‚ˆã£ã¦ã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚Šè§£å€™è£œã‚’å¾ã€…ã«æœ€é©è§£ã®æ–¹å‘ã«æ›´æ–°ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦æœ€é©è§£ã‚’æ±‚ã‚ã‚‹ã€‚\nè§£ã®æ›´æ–°æ–¹å‘ã‚’\n$ \\boldsymbol{\\Delta w} = [\\boldsymbol{\\Delta x}, \\boldsymbol{\\Delta y}, \\boldsymbol{\\Delta z}]^{\\top}$\nã¨ã™ã‚‹ã¨ã€ã“ã‚Œã‚’æ±‚ã‚ã‚‹ã«ã¯æ¬¡ã®1æ¬¡æ–¹ç¨‹å¼ã‚’è§£ã‘ã°ã‚ˆã„ã€‚\n$J(\\boldsymbol{w}) \\boldsymbol{\\Delta w} = - \\boldsymbol{r} (\\boldsymbol{w}; \\mu)$\nã“ã“ã§ã€$J(\\boldsymbol{w})$ã¯$\\boldsymbol{r} (\\boldsymbol{w}; \\mu)$ã®ãƒ¤ã‚³ãƒ“è¡Œåˆ—ã§ã‚ã‚Šã€\n$$ J(\\boldsymbol{w}) = \\left[ \\begin{array}{ccc} \\nabla_x^2 L(\\boldsymbol{w}) \u0026amp; \\nabla \\boldsymbol{g}(\\boldsymbol{x}) \u0026amp; -I \\\\ \\nabla \\boldsymbol{g}(\\boldsymbol{x})^{\\top} \u0026amp; O \u0026amp; O \\\\ Z \u0026amp; O \u0026amp; X \\end{array} \\right] $$\nã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚ãŸã ã—ã€$I$ã¯å˜ä½è¡Œåˆ—ã§ã‚ã‚‹ã€‚\nè§£ã®æ¢ç´¢æ–¹å‘ãŒå¾—ã‚‰ã‚Œã‚Œã°ã€é©å½“ãªã‚¹ãƒ†ãƒƒãƒ—ã‚µã‚¤ã‚º$\\alpha \u0026gt; 0$ã«ã‚ˆã‚Šã€è§£ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã™ã‚‹ã€‚\n$ \\boldsymbol{w}_{k+1} = \\boldsymbol{w}_k + \\alpha \\boldsymbol{\\Delta w}_k $\nãŸã ã—ã€æ·»ãˆå­—ã®$k$ã¯æ›´æ–°å›æ•°ã‚’ç¤ºã™ã€‚\nä»¥ä¸ŠãŒã€ä¸»åŒå¯¾å†…ç‚¹æ³•ã®åŸºæœ¬çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚‹ã€‚\nè£œè¶³ è§£ã®æ›´æ–°å¹… è§£ã®æ›´æ–°å¹…$\\alpha$ã®æ±ºã‚æ–¹ã¨ã—ã¦ã€Armijoï¼ˆã‚¢ãƒ«ãƒŸãƒ›ï¼‰æ¡ä»¶ã‚’ç”¨ã„ãŸç›´ç·šæ¢ç´¢ãŒå‚è€ƒæ–‡çŒ®ã®ã€Œæœ€é©åŒ–ã¨ãã®å¿œç”¨ã€ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã€‚ã¾ãŸã€Ipoptã¨ã„ã†æœ€é©åŒ–ã‚½ãƒ«ãƒã§ã¯ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ³•ã«ã‚ˆã‚‹ç›´ç·šæ¢ç´¢ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒ˜ãƒƒã‚»è¡Œåˆ—ã®è¨ˆç®— ä¸­å¿ƒåŒ–KKTæ¡ä»¶ã®ãƒ¤ã‚³ãƒ“è¡Œåˆ—$J(\\boldsymbol{w})$ã«ã¯ã€ãƒ©ã‚°ãƒ©ãƒ³ã‚¸ãƒ¥é–¢æ•°ã®ãƒ˜ãƒƒã‚»è¡Œåˆ—\n$ \\nabla^2_x L(\\boldsymbol{w}) $\nãŒç¾ã‚Œã¦ã„ã‚‹ã€‚ã“ã‚Œã¯ã€å…ƒã®æœ€é©åŒ–å•é¡Œã®ç›®çš„é–¢æ•°$f(\\boldsymbol{x})$ã®ãƒ˜ãƒƒã‚»è¡Œåˆ—ã®è¨ˆç®—ãŒå¿…è¦ãªã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚ã—ã‹ã—ãªãŒã‚‰ã€ãƒ˜ãƒƒã‚»è¡Œåˆ—ãŒå¾—ã‚‰ã‚Œãªã„å ´åˆã¯ã€æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•(L-BFGSæ³•)ã«ã‚ˆã‚‹è¿‘ä¼¼è¡Œåˆ—ã§ä»£ç”¨ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\nå‚è€ƒæ–‡çŒ® ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã€‚\néç·šå½¢æœ€é©åŒ–å•é¡Œã«å¯¾ã™ã‚‹ä¸»åŒå¯¾å†…ç‚¹æ³•ã®åæŸæ€§ã«ã¤ã„ã¦ (PDF)\nhttps://github.com/coin-or/Ipopt\n","description":"éç·šå½¢å•é¡Œã«å¯¾ã™ã‚‹ä¸»åŒå¯¾å†…ç‚¹æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":33,"section":"posts","tags":["æœ€é©åŒ–"],"title":"éç·šå½¢è¨ˆç”»å•é¡Œã®ä¸»åŒå¯¾å†…ç‚¹æ³•","uri":"https://helve-blog.com/posts/math/primal_dual_interior_point_methd_nlp/"},{"content":"ã¯ã˜ã‚ã« é–¢æ•°ã®2éšå¾®åˆ†ã‚’åˆ©ç”¨ã™ã‚‹æœ€é©åŒ–æ‰‹æ³•ã§ã‚ã‚‹ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã¤ã„ã¦ã€æ©Ÿæ¢°å­¦ç¿’ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚·ãƒªãƒ¼ã‚ºã®ã€Œæ©Ÿæ¢°å­¦ç¿’ã®ãŸã‚ã®é€£ç¶šæœ€é©åŒ–ã€ã§å‹‰å¼·ã—ãŸã®ã§ã€å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã™ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã¨ã€ç°¡å˜ãªé–¢æ•°ã‚’å¯¾è±¡ã«Pythonã§å®Ÿè£…ã—ãŸä¾‹ã‚’ç¤ºã™ã€‚ä½¿ç”¨ã—ãŸPythonã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   NumPy 1.16.5   matplotlib 3.1.1    ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³• ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã¯ã€é–¢æ•°ã®2éšå¾®åˆ†ã¾ã§ã®æƒ…å ±ã‚’ç”¨ã„ã‚‹æœ€é©åŒ–æ‰‹æ³•ã§ã‚ã‚‹ã€‚1éšå¾®åˆ†ã®æƒ…å ±ã¾ã§ã—ã‹ç”¨ã„ãªã„å†æ€¥é™ä¸‹æ³•ï¼ˆä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ï¼‰ã¨æ¯”è¼ƒã™ã‚‹ã¨ã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã¯è§£ã®åæŸé€Ÿåº¦ãŒé€Ÿã„åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nç›´ç·šæ¢ç´¢ã‚’ä½¿ã£ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…\næœ€å°åŒ–ã—ãŸã„é–¢æ•°$f(\\boldsymbol{x})$ãŒ2å›é€£ç¶šå¾®åˆ†å¯èƒ½ã§ã‚ã‚‹ã¨ã™ã‚‹ã€‚ã¾ãŸã€åå¾©æ³•ã«ã‚ˆã‚Šå¾—ã‚‰ã‚ŒãŸ$k$å›ç›®ã®è§£ã‚’$\\boldsymbol{x_k}$ã¨ã—ã€$\\boldsymbol{x_k}$ã«å¯¾ã™ã‚‹è§£ã®æ›´æ–°ãƒ™ã‚¯ãƒˆãƒ«ã‚’$\\boldsymbol{d}$ã¨ã™ã‚‹ã€‚ã“ã®ã¨ãã€æ›´æ–°å¾Œã®è§£$\\boldsymbol{x_k+d}$ã«ãŠã‘ã‚‹2æ¬¡ã®ãƒ†ã‚¤ãƒ©ãƒ¼å±•é–‹ã¯æ¬¡å¼ã§è¿‘ä¼¼ã•ã‚Œã‚‹ã€‚\n$$ f(\\boldsymbol{x_k+d}) = f(\\boldsymbol{x_k}) + \\nabla f(\\boldsymbol{x_k})^\\top \\boldsymbol{d} + \\frac{1}{2} \\boldsymbol{d}^\\top \\nabla ^2 f(\\boldsymbol{x_k}) \\boldsymbol{d} $$\nã“ã“ã§ã€$\\boldsymbol{x_k+d}$ãŒæœ€é©è§£ã¨ä»®å®šã™ã‚‹ã¨ã€$f(\\boldsymbol{x_k+d})$ã‚’å¾®åˆ†ã—ãŸå‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯$\\boldsymbol{0}$ã§ã‚ã‚‹ã€‚ã™ãªã‚ã¡ã€\n$$ \\nabla f(\\boldsymbol{x_k})^\\top + \\nabla ^2 f(\\boldsymbol{x_k}) \\boldsymbol{d} = 0 $$\nã“ã“ã§ã€ãƒ˜ãƒƒã‚»è¡Œåˆ—$\\nabla ^2 f(\\boldsymbol{x_k})$ãŒæ­£å®šå€¤è¡Œåˆ—ã¨ã™ã‚‹ã€‚\næ­£å®šå€¤è¡Œåˆ—ã¨ã¯ã€ä»»æ„ã®ãƒ™ã‚¯ãƒˆãƒ«$\\boldsymbol{x}$â‰ $0$ã«å¯¾ã—ã¦ã€\n$ \\boldsymbol{x}^\\top A \\boldsymbol{x} \u0026gt; 0 $\nã¨ãªã‚‹è¡Œåˆ—$A$ã®ã“ã¨ã§ã‚ã‚‹ã€‚ã¾ãŸã€å¯¾ç§°è¡Œåˆ—$A$ãŒæ­£å®šå€¤è¡Œåˆ—ã®å ´åˆã€$A$ã¯æ­£å‰‡ã§ã‚ã‚Šã€é€†è¡Œåˆ—ã‚’æŒã¤ã€‚\nã™ãªã‚ã¡ã€ãƒ˜ãƒƒã‚»è¡Œåˆ—ã¯å¯¾ç§°è¡Œåˆ—ã§ã‚ã‚‹ã‹ã‚‰ã€æ­£å®šå€¤è¡Œåˆ—ã§ã‚ã‚Œã°é€†è¡Œåˆ—ã‚’æŒã¤ã€‚\nå…ˆã»ã©ã®å¼ã‚’$\\boldsymbol{d}$ã«ã¤ã„ã¦è§£ãã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\boldsymbol{d} = - (\\nabla ^2 f(\\boldsymbol{x_k}))^{-1} \\nabla f(\\boldsymbol{x_k}) $$\nã—ãŸãŒã£ã¦ã€è§£ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã™ã‚Œã°ã€é–¢æ•°å€¤ãŒæ¸›å°‘ã™ã‚‹ã“ã¨ãŒæœŸå¾…ã§ãã‚‹ã€‚\n$$ \\begin{array}{ll} \\boldsymbol{x_{k+1}} \u0026amp; = \\boldsymbol{x_k} + \\boldsymbol{d} \\\\ \u0026amp; = \\boldsymbol{x_k} - (\\nabla ^2 f(\\boldsymbol{x_k}))^{-1} \\nabla f(\\boldsymbol{x_k}) \\end{array} $$\næ¡ä»¶ã‚’æº€ãŸã™ã¾ã§è§£ã®æ›´æ–°ã‚’ç¹°ã‚Šè¿”ã™ã€‚\nä»¥ä¸ŠãŒãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚‹ã€‚\nãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®å®Ÿè£…ä¾‹ ä»¥ä¸‹ã®ç›®çš„é–¢æ•°ã‚’è€ƒãˆã‚‹ã€‚\n$$ f(\\boldsymbol{x}) = x_1^4 + x_1^2 + x_1 x_2 + x_2^2 + 2 x_2^4 $$\nãŸã ã—ã€$\\boldsymbol{x}=[x_1, x_2 ]$ ã§ã‚ã‚‹ã€‚é–¢æ•°ã‚’å›³ç¤ºã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  import numpy as np import matplotlib.pyplot as plt from mpl_toolkits.mplot3d import Axes3D N = 41 x1 = np.linspace(-2, 2, N) x2 = np.linspace(-2, 2, N) X1, X2 = np.meshgrid(x1, x2) Y = X1**4 + X1**2 + X1*X2 + X2**2 + 2*X2**4 fig = plt.figure() ax = fig.add_subplot(111, projection=\u0026#39;3d\u0026#39;) surf = ax.plot_surface(X1, X2, Y, cmap=\u0026#39;bwr\u0026#39;, linewidth=0) fig.colorbar(surf) ax.set_xlabel(\u0026#34;x1\u0026#34;) ax.set_ylabel(\u0026#34;x2\u0026#34;) fig.show()   ç›®çš„é–¢æ•°$f(\\boldsymbol{x})$ã¯ã€$(x_1, x_2)=(0, 0)$ã§æœ€å°å€¤0ã‚’ã¨ã‚‹ã€‚\nã¾ãŸã€é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¨ãƒ˜ãƒƒã‚»è¡Œåˆ—ã¯ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\nabla f(\\boldsymbol{x}) = [4x_1^3 + 2x_1 + x_2, x_1+ 2x_2 + 8x_2^3 ]^{\\top} $$\n$$ \\nabla ^2 f(\\boldsymbol{x}) = \\begin{bmatrix} 12x_1^2 + 2 \u0026amp; 1 \\\\ 1 \u0026amp; 2+24x_2^2 \\end{bmatrix} $$\né–¢æ•°å€¤ã¨å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã€ãƒ˜ãƒƒã‚»è¡Œåˆ—ã‚’è¿”ã™é–¢æ•°ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã™ã‚‹ã€‚\n1 2 3 4 5 6 7  def f(x0, x1): y = x0**4 + x0**2 + x0*x1 + x1**2 + 2*x1**4 dydx = np.array([4*x0**3 + 2*x0 + x1, x0 + 2*x1 + 8*x1**3]) H = np.array([[12*x0+2, 1], [1, 2+24*x1**2]]) return y, dydx, H   ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã‚’ç”¨ã„ãŸé–¢æ•°ã®æœ€å°åŒ–ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚ã“ã“ã§ã¯ã€åˆæœŸå€¤ã‚’$(x_1, x_2)=(2, 2)$ã¨ã—ã€åå¾©å›æ•°ã‚’9å›ã¨ã—ãŸã€‚\n1 2 3 4 5 6 7 8  x0, x1 = 2, 2 print(\u0026#34;i x1 x2 f(x)\u0026#34;) for i in range(10): y, dydx, H = f(x0, x1) print(f\u0026#34;{i:3d} [{x0:10.3e}, {x1:10.3e}], {y:10.3e}\u0026#34;) d = - np.dot(np.linalg.inv(H), dydx) x0 += d[0] x1 += d[1]   çµæœ: ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚‹æœ€é©åŒ–è¨ˆç®—ã®æ¨ç§»ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚$(x_1, x_2)=(0, 0)$ã§æœ€å°å€¤0ã«åæŸã—ã¦ãŠã‚Šã€æœ€é©è§£ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\ni x1 x2 f(x)\r0 [ 2.000e+00, 2.000e+00], 6.000e+01\r1 [ 5.654e-01, 1.300e+00], 8.566e+00\r2 [ 2.610e-01, 8.201e-01], 1.864e+00\r3 [ 5.120e-02, 4.836e-01], 3.707e-01\r4 [-8.328e-02, 2.486e-01], 5.574e-02\r5 [ 2.092e-02, 6.459e-02], 5.997e-03\r6 [ 1.783e-03, 1.204e-03], 6.775e-06\r7 [ 2.504e-05, -1.251e-05], 4.703e-10\r8 [ 5.015e-09, -2.508e-09], 1.887e-17\r9 [ 2.012e-16, -1.006e-16], 3.037e-32\rå‚è€ƒ ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦ã€æ©Ÿæ¢°å­¦ç¿’ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã‚·ãƒªãƒ¼ã‚ºã®ã€Œæ©Ÿæ¢°å­¦ç¿’ã®ãŸã‚ã®é€£ç¶šæœ€é©åŒ–ã€ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã€‚\nã¾ãŸã€è¨˜äº‹ã§ã¯è§¦ã‚Œãªã‹ã£ãŸãŒã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚‹æ¢ç´¢æ–¹å‘ã¯é™ä¸‹æ–¹å‘ã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã€åˆæœŸå€¤ãŒå±€æ‰€è§£ã‹ã‚‰é›¢ã‚Œã¦ã„ã‚‹ã¨åæŸã—ãªã„å ´åˆãŒã‚ã‚‹ã€‚\nãã®æ¬ ç‚¹ã‚’è£œã†ãŸã‚ã€æ¢ç´¢æ–¹å‘ãŒé™ä¸‹æ–¹å‘ã¨ãªã‚‹ã‚ˆã†ã«ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã‚’æ”¹è‰¯ã—ãŸä¿®æ­£ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã¨å‘¼ã°ã‚Œã‚‹æ‰‹æ³•ãŒã‚ã‚Šã€åŒæ›¸ç±ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã€‚\n","description":"ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚‹æœ€é©åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¸ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã€Pythonã§å®Ÿè£…ã—ãŸã€‚","id":34,"section":"posts","tags":["Python","æœ€é©åŒ–"],"title":"ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚‹æœ€é©åŒ–ã¨Pythonã«ã‚ˆã‚‹å®Ÿè£…","uri":"https://helve-blog.com/posts/math/newtons-method-python/"},{"content":"ã¯ã˜ã‚ã« PowerShellã®Get-Processã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’ä½¿ã£ã¦ã€ç‰¹å®šã®ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ä¸€å®šå‘¨æœŸã§ãƒ­ã‚®ãƒ³ã‚°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ãŸã€‚\nãƒ­ã‚®ãƒ³ã‚°ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ ç‰¹å®šã®ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ä¸€å®šå‘¨æœŸã§å–å¾—ã—ã€ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«CSVå½¢å¼ã§ä¿å­˜ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nãŸã ã—ã€åŒã˜åå‰ã®è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã¨ãã«ã¯ã€ãã‚Œã‚‰ã®ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’åˆè¨ˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  $FileName = \u0026#34;log.txt\u0026#34; $ProcessName = \u0026#34;notepad\u0026#34; \u0026#34;Time,Working set(MB)\u0026#34; | Out-File -Append $FileName while($TRUE){ $d = Get-Date -Format \u0026#34;yyyy-MM-dd HH:mm:ss.ff\u0026#34; $p = Get-Process -Name $ProcessName | Select-Object WS $p | ForEach-Object {$mem = 0} {$mem += $_.WS} $mem = ($mem/1024/1024).ToString() $d+\u0026#39;,\u0026#39;+$mem | Out-File -Append $FileName Start-Sleep -Seconds 1 }   ã“ã“ã§ã€$FileNameã¯ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åã€$ProcessNameã¯å–å¾—ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹åã§ã‚ã‚‹ã€‚ã¾ãŸã€Start-Sleep -Secondsã§å®Ÿè¡Œå‘¨æœŸã‚’ç§’å˜ä½ã§æŒ‡å®šã™ã‚‹ã€‚\nã‚³ãƒ¼ãƒ‰ã‚’åœæ­¢ã™ã‚‹å ´åˆã«ã¯ã€Ctrl+Cã‚’æŠ¼ã™ã€‚\nå®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªCSVå½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚\nTime,Working set(MB) 2020-09-27 14:57:02.30,95.5 2020-09-27 14:57:03.32,94.4609375 2020-09-27 14:57:04.34,95.5 2020-09-27 14:57:05.37,95.5234375 2020-09-27 14:57:06.40,94.53515625 2020-09-27 14:57:07.43,94.53515625 2020-09-27 14:57:08.45,94.5234375 2020-09-27 14:57:09.49,95.5625 ä»¥ä¸‹ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è§£èª¬ã™ã‚‹ã€‚\nãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜(Out-File) ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹ã«ã¯ã€Out-Fileã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’ç”¨ã„ã‚‹ã€‚\n1 2  Get-Process | Out-File output.txt Get-Process | Out-File -Append output.txt   ä¸Šè¨˜ã®ã‚ˆã†ã«ã€æ–‡å­—åˆ—ï¼ˆã¾ãŸã¯åˆ¥ã®ã‚³ãƒãƒ³ãƒ‰ï¼‰ã‚’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§Out-Fileã«ä¸ãˆã‚‹ã“ã¨ã§ã€å‡ºåŠ›ã‚’æŒ‡å®šã—ãŸåå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã§ãã‚‹ã€‚\nã¾ãŸã€-Appendã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€å‡ºåŠ›ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ«å°¾ã«è¿½åŠ ã™ã‚‹ã€‚\næ™‚åˆ»ã®å–å¾—(Get-Date) ã‚·ã‚¹ãƒ†ãƒ ã®æ™‚åˆ»ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€Get-Dateã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’ç”¨ã„ã‚‹ã€‚\nGet-Dateã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ãªã„å ´åˆã€æˆ»ã‚Šå€¤ã¯System.DateTimeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãªã‚‹ã€‚\nä¸€æ–¹ã€-Formatã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã¨æˆ»ã‚Šå€¤ã¯æ–‡å­—åˆ—ã«ãªã‚‹ã€‚\n1  $d = Get-Date -Format \u0026#34;yyyy-MM-dd HH:mm:ss.ff\u0026#34;   ã“ã®ä¾‹ã«ãŠã‘ã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æ„å‘³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ èª¬æ˜     yyyy 4æ¡ã®è¥¿æš¦å¹´   MM 2æ¡ã®æœˆ   dd 2æ¡ã®æ—¥   HH 2æ¡ã®æ™‚é–“   mm 2æ¡ã®åˆ†   ss 2æ¡ã®ç§’   ff ç§’ã®ç«¯æ•°ï¼ˆãƒŸãƒªç§’ï¼‰ã®ä¸Šä½2æ¡    ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å–å¾—(Get-Process) Get-Processã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãªã©ã‚’å–å¾—ã§ãã‚‹ã€‚\nä¾‹\n1 2 3 4 5 6  PS \u0026gt; Get-Process Handles NPM(K) PM(K) WS(K) CPU(s) Id SI ProcessName ------- ------ ----- ----- ------ -- -- ----------- 855 44 40696 86404 106.11 3828 12 Code 330 17 3972 20736 0.50 6928 12 notepad 345 18 4116 21216 0.23 7432 12 notepad   Get-Processã®-Nameã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ProcessNameã®ãƒ—ãƒ­ã‚»ã‚¹åã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãã®ãƒ—ãƒ­ã‚»ã‚¹ã®ã¿ã®çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n1 2 3 4 5  PS \u0026gt; Get-Process -Name notepad Handles NPM(K) PM(K) WS(K) CPU(s) Id SI ProcessName ------- ------ ----- ----- ------ -- -- ----------- 330 17 3972 20736 0.50 6928 12 notepad 345 18 4116 21216 0.23 7432 12 notepad   ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¯WSï¼ˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚»ãƒƒãƒˆï¼‰ã§ã‚ã‚Šã€ã“ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯Select-Objectã‚’ç”¨ã„ã‚‹ï¼ˆWSã‚’å–å¾—ã™ã‚‹ç†ç”±ã«ã¤ã„ã¦ã¯å¾Œè¿°ï¼‰ã€‚\n1 2 3 4 5  PS \u0026gt; Get-Process -name notepad | Select-Object WS WS -- 21139456 21630976   ä¸Šè¨˜ã®ä¾‹ã®ã‚ˆã†ã«ã€ãƒ—ãƒ­ã‚»ã‚¹ãŒè¤‡æ•°èµ·å‹•ã—ã¦ã„ã‚‹å ´åˆã¯æˆ»ã‚Šå€¤ãŒè¤‡æ•°ã‚ã‚‹ã®ã§ã€ãã‚Œã‚‰ã‚’åˆè¨ˆã™ã‚‹ï¼ˆãŸã ã—ã€å˜ä½ãŒãƒã‚¤ãƒˆã«ãªã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ï¼‰ã€‚\n1 2  $p = Get-Process -Name $ProcessName | Select-Object WS $p | ForEach-Object {$mem = 0} {$mem += $_.WS}   ForEach-Objectã‚’ä½¿ã£ã¦ã€%pã®å„è¦ç´ ã‹ã‚‰WSã®å€¤ã‚’.WSãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã£ã¦å–ã‚Šå‡ºã—ã¦ã„ã‚‹ã€‚ã¾ãŸã€WSã®åˆè¨ˆå€¤ã¯$memã«æ ¼ç´ã•ã‚Œã‚‹ã€‚\nï¼ˆè£œè¶³ï¼‰ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç¨®é¡ Get-Processã§å–å¾—ã§ãã‚‹ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã«ã¯ã€æ¬¡ã®3ç¨®é¡ãŒã‚ã‚‹ã€‚\n NPM (Nonpaged System Memory) PM (Paged Memory) WS (Working Set)  æ­£å¼åç§°ã‚’è¦‹ã¦ã‚‚ã“ã‚Œã‚‰ã®é•ã„ã¯åˆ†ã‹ã‚Šã¥ã‚‰ã„ãŒã€ã‚¿ã‚¹ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ã®èª¬æ˜ãŒåˆ†ã‹ã‚Šã‚„ã™ã‹ã£ãŸã®ã§ã€ã“ã“ã«è¨˜è¼‰ã™ã‚‹ã€‚\nã‚¿ã‚¹ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ã®ã€Œè©³ç´°ã€ã‚¿ãƒ–ã‚’é–‹ãã€è¡¨ã®ãƒ˜ãƒƒãƒ€ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€Œåˆ—ã®é¸æŠã€ã‚’æŠ¼ã—ã€ä»¥ä¸‹ã®é …ç›®ã‚’è¡¨ç¤ºã•ã›ã‚‹ã€‚\n éãƒšãƒ¼ã‚¸ãƒ—ãƒ¼ãƒ« ã‚³ãƒŸãƒƒãƒˆã‚µã‚¤ã‚º ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚»ãƒƒãƒˆ(ãƒ¡ãƒ¢ãƒª)  è¡¨ç¤ºã—ãŸé …ç›®ã¨ã€Get-Processã®NPM, PM, WSã¯ãã‚Œãã‚Œä»¥ä¸‹ã®è¡¨ã®å€¤ãŒç­‰ã—ã„ã“ã¨ã‹ã‚‰ã€åŒã˜ã‚‚ã®ã‚’æŒ‡ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\n   Get-Process ã‚¿ã‚¹ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£     NPM éãƒšãƒ¼ã‚¸ãƒ—ãƒ¼ãƒ«   PM ã‚³ãƒŸãƒƒãƒˆã‚µã‚¤ã‚º   WS ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚»ãƒƒãƒˆ(ãƒ¡ãƒ¢ãƒª)    ã•ã‚‰ã«ã€ã‚¿ã‚¹ã‚¯ãƒãƒãƒ¼ã‚¸ãƒ£ã§è¡¨ç¤ºã—ãŸé …ç›®ã®ãƒ˜ãƒƒãƒ€ã«ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç½®ãã¨ã€æ¬¡ã®èª¬æ˜ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n éãƒšãƒ¼ã‚¸ãƒ—ãƒ¼ãƒ«ï¼šãƒ—ãƒ­ã‚»ã‚¹ã®ä»£ã‚ã‚Šã«ã‚«ãƒ¼ãƒãƒ«ã¾ãŸã¯ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã«ã‚ˆã£ã¦å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸã€ãƒšãƒ¼ã‚¸ãƒ³ã‚°ä¸å¯èƒ½ãªã‚«ãƒ¼ãƒãƒ«ãƒ¡ãƒ¢ãƒªã®é‡ ã‚³ãƒŸãƒƒãƒˆã‚µã‚¤ã‚ºï¼šãƒ—ãƒ­ã‚»ã‚¹ç”¨ã«ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦äºˆç´„ã•ã‚Œã¦ã„ã‚‹ä»®æƒ³ãƒ¡ãƒ¢ãƒªã®é‡ ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚»ãƒƒãƒˆ(ãƒ¡ãƒ¢ãƒª)ï¼šãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã£ã¦ç¾åœ¨ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ç‰©ç†ãƒ¡ãƒ¢ãƒªã®é‡  ã—ãŸãŒã£ã¦ã€ãƒ—ãƒ­ã‚»ã‚¹ãŒä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¨ã—ã¦ã¯ã€ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚»ãƒƒãƒˆ(WS)ã‚’è¦‹ã‚Œã°ã‚ˆã„ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nå‚è€ƒ Get-Processã«ã¤ã„ã¦\nPowerShell - Powershellã®psã‚³ãƒãƒ³ãƒ‰ã§è¡¨ç¤ºã•ã‚Œã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã®æƒ…å ±ã®æ„å‘³ï½œteratail\né€†å¼•ãï¼PowerShellã§ãƒ—ãƒ­ã‚»ã‚¹ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã¯ï¼Ÿãã®è¦‹æ–¹ã¯ï¼Ÿã€Get-Processã€‘ | ã€ï¾ï½ªï½¼ï½¬ã‚ã‚‰ã€‘PowerShellã¨ã¯ã€ã‹ã‚‰å­¦ã¶å…¥é–€è€…ã®æ•™ç§‘æ›¸-è„±ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ-\nãƒ¡ãƒ¢ãƒªã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ã‚»ãƒƒãƒˆã«ã¤ã„ã¦\nç¬¬4å› ãƒ¡ãƒ¢ãƒªç®¡ç†ï¼šWindows OSå…¥é–€ - ï¼ IT\n","description":"","id":35,"section":"posts","tags":["PowerShell"],"title":"Powershellã§ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’ãƒ­ã‚®ãƒ³ã‚°ã™ã‚‹","uri":"https://helve-blog.com/posts/powershell/powershell-memory-usage-logging/"},{"content":"ã¯ã˜ã‚ã« Poweshellã‚’ä½¿ã£ã¦ã€ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«é€£ç•ªã‚’æŒ¯ã£ã¦ãƒªãƒãƒ¼ãƒ ã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«åã®é †ã«é€£ç•ªã‚’æŒ¯ã‚‹å ´åˆã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆæ‹¡å¼µå­ã¯é©å®œå¤‰æ›´ã®ã“ã¨ï¼‰ã€‚\n1 2  ls | sort Name | % {$i = 1} { $NewName = \u0026#34;{0:000}.txt\u0026#34; -f $i; mv $_.Name $NewName; $i++ }   ã‚‚ã—ãã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã‚‚åŒã˜çµæœã«ãªã‚‹ã€‚\n1  ls | sort Name | % {$i = 1} {mv $_.Name (\u0026#34;{0:000}.txt\u0026#34; -f $i++)}   å¾Œè€…ã®ã‚³ãƒ¼ãƒ‰ã¯å°‘ã—è¤‡é›‘ãªãŸã‚ã€æœ¬è¨˜äº‹ã§ã¯å‰è€…ã‚’è§£èª¬ã™ã‚‹ã€‚\nå®Ÿè¡Œæ‰‹é † ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã«ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã¨ã™ã‚‹ï¼ˆæ‹¡å¼µå­ã¯txtä»¥å¤–ã§ã‚‚è‰¯ã„ï¼‰ã€‚\naaa.txt bbb.txt ccc.txt ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®é †ç•ªã‚’å¤‰æ›´ã›ãšã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«é€£ç•ªã‚’æŒ¯ã£ã¦ãƒªãƒãƒ¼ãƒ ã—ãŸã„ã€‚\n001.txt \u0026lt;- aaa.txtã‹ã‚‰ãƒªãƒãƒ¼ãƒ  002.txt \u0026lt;- bbb.txtã‹ã‚‰ãƒªãƒãƒ¼ãƒ  003.txt \u0026lt;- ccc.txtã‹ã‚‰ãƒªãƒãƒ¼ãƒ  Powershellã‚’ä½¿ã£ã¦ãƒªãƒãƒ¼ãƒ ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®æ‰‹é †ã§è¡Œã†ã€‚\nãŸã ã—ã€å¤±æ•—ã—ãŸå ´åˆã«å‚™ãˆã¦ã€ã‚ã‚‰ã‹ã˜ã‚ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã‹ã€æ•°å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§å‹•ä½œã‚’æ¤œè¨¼ã—ã¦ã‹ã‚‰å®Ÿè¡Œã•ã‚ŒãŸã„ã€‚\n ãƒ•ã‚©ãƒ«ãƒ€ã®ä½•ã‚‚ãªã„å ´æ‰€ã§Shiftã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰å³ã‚¯ãƒªãƒƒã‚¯ã—ã€ã€ŒPowerShell ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ã“ã“ã§é–‹ã(S)ã€ã‚’æŠ¼ã™ã€‚ PowerShellãŒèµ·å‹•ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ã©ã¡ã‚‰ã‹ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆæ‹¡å¼µå­ãŒtxtä»¥å¤–ã®å ´åˆã¯é©å®œå¤‰æ›´ã™ã‚‹ï¼‰ã€‚  1 2  ls | sort Name | % {$i = 1} { $NewName = \u0026#34;{0:000}.txt\u0026#34; -f $i; mv $_.Name $NewName; $i++ }   1  ls | sort Name | % {$i = 1} {mv $_.Name (\u0026#34;{0:000}.txt\u0026#34; -f $i++)}   è§£èª¬ å‰è€…ã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ï¼ˆPowerShellã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã¨å‘¼ã°ã‚Œã‚‹ï¼‰ã€‚ãªãŠã€ç–‘ä¼¼ã‚³ãƒ¼ãƒ‰ã«ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\nãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ã‚’å–å¾— ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’åå‰ã®é †ã«ã‚½ãƒ¼ãƒˆã™ã‚‹ i = 1 forã€€ï¼ˆå„ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦ãƒ«ãƒ¼ãƒ—ï¼‰ { æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«å = {i}.txt ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã€Œæ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«åã€ã«å¤‰æ›´ i = i+1 } ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆåˆ¥åï¼‰ ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã¯åŸºæœ¬çš„ã«ã€Œå‹•è©+åè©ã€ã®çµ„ã¿åˆã‚ã›ã§ã‚ã‚‹ãŒã€ä¸€éƒ¨ã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«ã¯Linuxã‚·ã‚§ãƒ«ãªã©ã¨åŒã˜åå‰ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆåˆ¥åï¼‰ãŒä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\n1 2  ls | sort Name | % {$i = 1} { $NewName = \u0026#34;{0:000}.txt\u0026#34; -f $i; mv $_.Name $NewName; $i++ }   ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«ã¯ã€ä»¥ä¸‹ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã€‚\n   ã‚¨ã‚¤ãƒªã‚¢ã‚¹ ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆ å‚™è€ƒ     ls Get-ChildItem ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæƒ…å ±ã®å–å¾—   sort Sort-Object ã‚½ãƒ¼ãƒˆ   % ForEach-Object é…åˆ—ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸€ã¤ãšã¤å‡¦ç†   mv Move-Item ãƒ•ã‚¡ã‚¤ãƒ«ã®ç§»å‹•ãƒ»ãƒªãƒãƒ¼ãƒ     ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ ã‚ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã®å®Ÿè¡Œçµæœã‚’åˆ¥ã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§å‡¦ç†ã—ãŸã„å ´åˆã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³|ã§ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆåŒå£«ã‚’ã¤ãªãã€‚\nlsã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å®Ÿè¡Œãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ•ã‚©ãƒ«ãƒ€ã®ãƒªã‚¹ãƒˆãŒè¿”ã•ã‚Œã‚‹ã€‚\nãã‚Œã‚’sort Nameã§åå‰ã®é †ã«ä¸¦ã¹æ›¿ãˆã‚‹ã€‚\nã•ã‚‰ã«ã€mvã§åå‰ã‚’å¤‰æ›´ã™ã‚‹ã€‚\nå¤‰æ•° PowerShellã§ã¯ã€æ–‡å­—åˆ—ã®å…ˆé ­ã«$ã‚’ä»˜ã‘ã‚‹ã¨å¤‰æ•°ã«ãªã‚‹ã€‚\nã“ã“ã§ã¯$i = 1ã§å¤‰æ•°ã‚’å®£è¨€ã—ã€åˆæœŸå€¤1ã‚’ä»£å…¥ã—ã¦ã„ã‚‹ã€‚\nã‚‚ã—ãƒ•ã‚¡ã‚¤ãƒ«åã‚’0å§‹ã¾ã‚Šã«ã—ãŸã„å ´åˆã¯$i = 0ã¨ã™ã‚‹ã€‚\nã¾ãŸã€$NewNameã«ã¯æ–‡å­—åˆ—ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\n$_ã¯å°‘ã—ç‰¹æ®Šã§ã‚ã‚Šã€å‰ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‹ã‚‰æ¸¡ã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ã™å¤‰æ•°ã§ã‚ã‚‹ã€‚\nã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã®å…ˆé ­ã‹ã‚‰è¿½ã£ã¦ã„ãã¨ã€æœ€åˆã®lsã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã‚’è¿”ã™ã€‚\nsort Nameã¯å˜ã«ã‚½ãƒ¼ãƒˆã™ã‚‹ã ã‘ã§ã‚ã‚‹ã®ã§ã€ã‚„ã¯ã‚Šãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã‚’è¿”ã™ã€‚\n2ç•ªç›®ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å¾Œã‚ã§ã¯ãƒ«ãƒ¼ãƒ—å‡¦ç†ãŒå…¥ã£ã¦ã„ã‚‹ï¼ˆå¾Œè¿°ï¼‰ã®ã§ã€$_ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã€‚\nã¾ãŸã€$_.Nameã¯ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆè¨€ã„æ›ãˆã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®Nameãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼‰ã§ã‚ã‚‹ã€‚\nForEach-Objectã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ—å‡¦ç† %ï¼ˆForEach-Objectã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼‰ã§ã¯ã€é…åˆ—ã®è¦ç´ ã‚’ä¸€å€‹ãšã¤å–ã‚Šå‡ºã—ã¦å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n1  % {$i = 1} { $NewName = \u0026#34;{0:000}.txt\u0026#34; -f $i ; mv $_.Name $NewName; $i++ }   ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€{$i = 1}ãŒæœ€åˆã«1å›ã ã‘å®Ÿè¡Œã•ã‚Œã€\n{ $NewName = \u0026quot;{0:000}.txt\u0026quot; -f $i ; mv $_.Name $NewName; $i++ }\nã¯é…åˆ—ã®é•·ã•ï¼ˆã“ã“ã§ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•°ï¼‰ã¨åŒã˜å›æ•°å®Ÿè¡Œã•ã‚Œã‚‹ã€‚\n%ã§ã¯ã€ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ«ãƒ¼ãƒ—ã®å‰ãŠã‚ˆã³å¾Œã«å‡¦ç†ã‚’è¿½åŠ ã§ãã‚‹ã€‚\n -Begin: ãƒ«ãƒ¼ãƒ—ã®å‰ã«å®Ÿè¡Œã™ã‚‹å‡¦ç† -Process: ãƒ«ãƒ¼ãƒ—å†…ã§å®Ÿè¡Œã™ã‚‹å‡¦ç† -End: ãƒ«ãƒ¼ãƒ—å¾Œã«å®Ÿè¡Œã™ã‚‹å‡¦ç†  è¿½åŠ ã™ã‚‹å‡¦ç†ã¯{ }ã§å›²ã‚€ï¼ˆå›²ã¾ã‚ŒãŸå˜ä½ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã¨å‘¼ã¶ï¼‰ã€‚\nä¾‹\næœ€åˆã«Aã¨è¡¨ç¤ºã—ã€ãƒ«ãƒ¼ãƒ—å›æ•°(3å›)ã ã‘Bã¨è¡¨ç¤ºã—ã€æœ€å¾Œã«Cã¨è¡¨ç¤ºã™ã‚‹ã€‚\n1 2 3 4 5 6  PS \u0026gt; 1..3 | % -Begin {\u0026#34;A\u0026#34;} -Process {\u0026#34;B\u0026#34;} -End {\u0026#34;C\u0026#34;} A B B B C   ã“ã“ã§1..3ã¯æ•°å€¤1, 2, 3ã®é…åˆ—ã§ã‚ã‚‹ã€‚ãªãŠã€-Begin, -Process, -Endã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãªã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«è§£é‡ˆã•ã‚Œã‚‹ã€‚\nã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ–ãƒ­ãƒƒã‚¯ãŒã€\n 1å€‹ã®å ´åˆï¼š-Process 2å€‹ã®å ´åˆï¼š1å€‹ç›®ã¯-Begin, 2å€‹ç›®ã¯-Process 3å€‹ä»¥ä¸Šã®å ´åˆï¼š1å€‹ç›®ã¯-Begin, æœ€å¾Œã¯-End, ãã‚Œä»¥å¤–ã¯-Process  ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ–ãƒ­ãƒƒã‚¯ãŒ4å€‹ã®ä¾‹ : æœ€åˆã«Aã¨è¡¨ç¤ºã—ã€ãƒ«ãƒ¼ãƒ—å›æ•°(3å›)ã ã‘B, Cã®é †ã«è¡¨ç¤ºã—ã€æœ€å¾Œã«Dã¨è¡¨ç¤ºã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  PS \u0026gt; 1..3 | % {\u0026#34;A\u0026#34;} {\u0026#34;B\u0026#34;} {\u0026#34;C\u0026#34;} {\u0026#34;D\u0026#34;} A B C B C B C D   æ•°å€¤â†’æ–‡å­—åˆ—å¤‰æ›ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ $iã¯æ•°å€¤ã§ã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚’ãƒ•ã‚¡ã‚¤ãƒ«åã«ã™ã‚‹ãŸã‚ã€ä»¥ä¸‹ã§æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹ã€‚\n1  $NewName = \u0026#34;{0:000}.txt\u0026#34; -f $i   {0:000}ã®æœ€åˆã®0ã¯ã€è¤‡æ•°ã®å¤‰æ•°ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã—ãŸã„ã¨ãã«ã€ä½•ç•ªç›®ã®å¤‰æ•°ã‚’å¤‰æ›ã™ã‚‹ã‹ã‚’æŒ‡å®šã™ã‚‹ã€‚\n2ã¤ã®å¤‰æ•°ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹ä¾‹\n1 2 3 4  PS \u0026gt; $i = 5 PS \u0026gt; $j = 10 PS \u0026gt; \u0026#34;{0:000}_{1:000}.txt\u0026#34; -f $i, $j 005_010.txt   ã¾ãŸã€{0:000}ã®:ä»¥é™ã§æ•°å€¤ã®æ›¸å¼ã‚’æŒ‡å®šã—ã¦ãŠã‚Šã€000ã¯å…ˆé ­ã‚’0åŸ‹ã‚ã—ãŸ3æ¡ã®æ•´æ•°ã‚’æ„å‘³ã™ã‚‹ã€‚\nãªãŠã€\u0026quot;{0:000}.txt\u0026quot; -f $iã¯ä»¥ä¸‹ã¨ç­‰ä¾¡ã§ã‚ã‚‹ã€‚\n \u0026quot;{0:D3}.txt\u0026quot; -f $i $i.ToString(\u0026quot;000\u0026quot;)+\u0026quot;.txt\u0026quot;  ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’å¤‰æ›´ã™ã‚‹ mvï¼ˆMove-Itemã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼‰ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•ãƒ»ã¾ãŸã¯åå‰ã‚’å¤‰æ›´ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§ã‚ã‚‹ã€‚\n1  mv [ç§»å‹•å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«å] [ç§»å‹•å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«å]   ãªãŠã€ç§»å‹•å…ˆã«åŒã˜åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆã€mvã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ã€‚ã“ã“ã§ã¯ã€\n1  mv $_.Name $NewName   ã¨ãªã£ã¦ã„ã‚‹ã®ã§ã€ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«å$_.Nameã‚’æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«å$NewNameã«å¤‰æ›´ã™ã‚‹ã€‚\nã¾ã¨ã‚ ãƒ•ã‚¡ã‚¤ãƒ«åã«é€£ç•ªã‚’æŒ¯ã£ã¦ãƒªãƒãƒ¼ãƒ ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’å†æ²ã™ã‚‹ã€‚\n1 2  ls | sort Name | % {$i = 1} { $NewName = \u0026#34;{0:000}.txt\u0026#34; -f $i; mv $_.Name $NewName; $i++ }   ã“ã“ã‹ã‚‰$NewNameã‚’çœç•¥ã—ã€ãƒ•ã‚¡ã‚¤ãƒ«åã®å®šç¾©æ™‚ã«$iã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«çŸ­ç¸®ã§ãã‚‹ã€‚\n1  ls | sort Name | % {$i = 1} {mv $_.Name (\u0026#34;{0:000}.txt\u0026#34; -f $i++)}   ã¡ãªã¿ã«ã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­++ã‚’å¤‰æ•°ã®å¾Œã‚ã«ç½®ãã¨ã€å¤‰æ•°ã®è©•ä¾¡å¾Œã«ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆã•ã‚Œã‚‹ã€‚\né€†ã«++ã‚’å¤‰æ•°ã®å‰ã«ç½®ã(++$i)ã¨ã€ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆå¾Œã«å¤‰æ•°ã®å€¤ãŒè©•ä¾¡ã•ã‚Œã‚‹ã®ã§æ³¨æ„ã€‚\nè¿½è¨˜: ãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ã‚’è‡ªå‹•ã§å¼•ãç¶™ãå ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  ls | sort Name | % {$i = 1} {mv $_.Name ((\u0026#34;{0:000}\u0026#34; -f $i++) + $_.Extension)}   å‚è€ƒ ã€Windowsã€‘ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä¸€æ‹¬ã§å¤‰æ›´ã™ã‚‹ï¼»é€£ç•ªãƒ•ã‚¡ã‚¤ãƒ«åï¼½ | BIZLOG.TECH\n","description":"","id":36,"section":"posts","tags":["PowerShell"],"title":"Powershellã§ãƒ•ã‚¡ã‚¤ãƒ«åã«é€£ç•ªã‚’æŒ¯ã£ã¦ãƒªãƒãƒ¼ãƒ ã™ã‚‹","uri":"https://helve-blog.com/posts/powershell/powershell-rename-files-serial-number/"},{"content":"ã¯ã˜ã‚ã« PowerShellã§ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹ã«ã¯ã€Get-ChildItem -Recurse -Name -Fileã‚’å®Ÿè¡Œã™ã‚‹ã€‚ã•ã‚‰ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«åã§æŠ½å‡ºã™ã‚‹å ´åˆã«ã¯-Filterã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\nå‹•ä½œã‚’ç¢ºèªã—ãŸç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Windows 10 Home 1909   PowerShell 5.1.18362.752    ãªãŠã€PowerShellã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è¡¨ç¤ºã•ã‚Œã‚‹PSVersionã®å€¤ã‹ã‚‰ç¢ºèªã§ãã‚‹ã€‚\n1  PS \u0026gt; $PSVersionTable   PowerShellã®èµ·å‹• ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ä¸Šã§Shiftã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨ï¼ˆã¾ãŸã¯ãƒã‚¦ã‚¹ã®å³ã‚¯ãƒªãƒƒã‚¯ï¼‰ã€ã€ŒPowerShell ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ã“ã“ã§é–‹ã(S)ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nã“ã‚Œã‚’é¸æŠã™ã‚‹ã¨ã€ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ã§é–‹ã„ã¦ã„ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã—ã¦ã€PowerShellãŒèµ·å‹•ã™ã‚‹ã€‚\nGet-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã®åŸºæœ¬ Get-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ãšã«å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nä¾‹ï¼š\n1 2 3 4 5 6 7 8 9 10  PS \u0026gt; Get-ChildItem ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: C:\\Test Mode LastWriteTime Length Name ---- ------------- ------ ---- d----- 2020/07/18 10:07 Subdir1 d----- 2020/07/18 10:07 Subdir2 -a---- 2020/07/18 10:07 11 aaa.txt -a---- 2020/07/18 10:07 8 bbb.txt -a---- 2020/07/18 10:08 30 ccc.txt   ã“ã“ã§ã€Lengthã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’è¡¨ã—ã€å˜ä½ã¯ãƒã‚¤ãƒˆã§ã‚ã‚‹ã€‚\nGet-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã®ä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚ªãƒ—ã‚·ãƒ§ãƒ³ èª¬æ˜     -Recurse ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã®çµæœã‚‚è¡¨ç¤º   -Depth -Recurseã‚’é©ç”¨ã™ã‚‹éšå±¤ã®æ·±ã•ã‚’æŒ‡å®š   -Name ãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ãƒ•ã‚©ãƒ«ãƒ€åã®ã¿è¡¨ç¤º   -File ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿çµæœã‚’è¡¨ç¤º   -Filter ãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ãƒ•ã‚©ãƒ«ãƒ€åã‚’çµã‚Šè¾¼ã¿    ä»¥ä¸‹ã§ã¯ã€å„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\n-Recurseã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚‚è¡¨ç¤º Get-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«-Recurseã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€å…¨ã¦ã®ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n1  PS \u0026gt; Get-ChildItem -Recurse   æ¢ç´¢ã™ã‚‹ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã®éšå±¤æ•°ã‚’åˆ¶é™ã™ã‚‹å ´åˆã¯ã€-Depthã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã€‚\n-Depthã®å¾Œã«0ä»¥ä¸Šã®æ•´æ•°ã‚’ä»˜ã‘ã‚‹ã¨ã€ãã®æ•°ã ã‘ä¸‹ã®éšå±¤ã‚’è¡¨ç¤ºã™ã‚‹ã€‚\n-Depth 0ã®ã¨ãã«ã¯ã‚«ãƒ¬ãƒ³ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã®çµæœã—ã‹è¡¨ç¤ºã—ãªã„ã€‚\nä¾‹ï¼š3éšå±¤ä¸‹ã¾ã§ã®çµæœã‚’è¡¨ç¤ºã™ã‚‹\n1  PS \u0026gt; Get-ChildItem -Recurse -Depth 3   -Nameã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ•ã‚©ãƒ«ãƒ€åãƒ»ãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿è¡¨ç¤º Get-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«-Nameã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ•ã‚©ãƒ«ãƒ€ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nä¾‹ï¼š\n1 2 3 4 5 6  PS C:\\Test\u0026gt; Get-ChildItem -Name Subdir1 Subdir2 aaa.txt bbb.txt ccc.txt   -Fileã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¡¨ç¤º Get-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«-Fileã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€çµæœã‹ã‚‰ãƒ•ã‚©ãƒ«ãƒ€ãŒé™¤å¤–ã•ã‚Œã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nä¾‹ï¼š\n1 2 3 4 5 6 7 8 9  PS C:\\Test\u0026gt; Get-ChildItem -File ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: C:\\Test Mode LastWriteTime Length Name ---- ------------- ------ ---- -a---- 2020/07/18 10:07 11 aaa.txt -a---- 2020/07/18 10:07 8 bbb.txt -a---- 2020/07/18 10:08 30 ccc.txt   -Filterã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«åã‚’çµã‚Šè¾¼ã¿ Get-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«-Filterã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ•ã‚©ãƒ«ãƒ€åãƒ»ãƒ•ã‚¡ã‚¤ãƒ«åã‚’çµã‚Šè¾¼ã‚“ã çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n-Filterã®å¾Œã«æ–‡å­—åˆ—ã‚’è¿½åŠ ã™ã‚‹ã¨ã€ãã®æ–‡å­—åˆ—ã«ä¸€è‡´ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿è¡¨ç¤ºã•ã‚Œã‚‹ã€‚æ–‡å­—åˆ—ã«ã¯ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰*ã‚’ä½¿ç”¨ã§ãã‚‹ã€‚\nä¾‹ï¼šæ‹¡å¼µå­ãŒtxtã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿è¡¨ç¤ºã™ã‚‹\n1  PS C:\\Test\u0026gt; Get-ChildItem -Filter *.txt   ã¾ã¨ã‚ ä¸Šè¨˜ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’çµ„ã¿åˆã‚ã›ã€Get-ChildItem -Recurse -Name -Fileã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä¸€è¦§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nãƒ•ã‚¡ã‚¤ãƒ«åã§æŠ½å‡ºã™ã‚‹å ´åˆã«ã¯-Filterã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚Œã°è‰¯ã„ã€‚\nå‚è€ƒ PowerShellã®Get-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§ãƒ•ã‚¡ã‚¤ãƒ«åã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ï¼ˆåŸºæœ¬ç·¨ï¼‰ï¼šTech TIPS - ï¼ IT\nGet-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã®ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚’å‚ç…§ã€‚\nGet-ChildItem (Microsoft.PowerShell.Management) - PowerShell | Microsoft Docs\n","description":"PowerShellã§Get-ChildItemã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã‚’ä½¿ã£ã¦ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚’å«ã‚€ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹æ–¹æ³•ã‚’èª¿ã¹ãŸã€‚","id":37,"section":"posts","tags":["PowerShell"],"title":"PowerShellã§ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ä¸€è¦§è¡¨ç¤ºã™ã‚‹","uri":"https://helve-blog.com/posts/powershell/powershell-get-childitem/"},{"content":"ã¯ã˜ã‚ã« C#ã§ã¯stringå‹ã‚’ä½¿ã£ã¦æ–‡å­—åˆ—ã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚ æœ¬è¨˜äº‹ã§ã¯stringã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã€ãŠã‚ˆã³æ–‡å­—åˆ—ã¨æ•°å€¤ã®å¤‰æ›ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚\nå¯¾è±¡ã¨ã™ã‚‹ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Visual Studio Community 2019 (Version 16.6.2) C# Version 8.0  stringå‹ã®åŸºæœ¬ C#ã«ãŠã‘ã‚‹stringå‹ã¯ã€System.Stringã‚¯ãƒ©ã‚¹ã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆåˆ¥åï¼‰ã§ã‚ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€ä¸‹ã®2è¡Œã®ã‚³ãƒ¼ãƒ‰ã¯ç­‰ä¾¡ã§ã‚ã‚‹ã€‚\n1 2  string str = \u0026#34;hoge\u0026#34;; System.String str = \u0026#34;hoge\u0026#34;; // ä¸Šã¨ç­‰ä¾¡   æ–‡å­—åˆ—ã®å®£è¨€ æ–‡å­—åˆ—å‹ã®å¤‰æ•°ã¯ã€ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³\u0026quot;ã§å›²ã‚“ã§å®£è¨€ã™ã‚‹ã€‚æ–‡å­—åˆ—ã«ã¯æ”¹è¡Œ\\nã®ã‚ˆã†ãªã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å«ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n1 2  string str = \u0026#34;hoge\\npiyo\u0026#34; Console.WriteLine(str);   å‡ºåŠ›\n1 2  hoge piyo   ã¾ãŸã€è¨˜è¿°ã—ãŸã¾ã¾ã®çŠ¶æ…‹ã‚’æ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã„ãŸã„å ´åˆã¯ã€å…ˆé ­ã«@ã‚’ä»˜ã‘ãŸé€èªçš„æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã¨ã™ã‚‹ã€‚\nä¾‹ãˆã°ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãªã©ã®ã‚ˆã†ã«\\ã‚’å«ã‚€æ–‡å­—åˆ—ã«å¯¾ã—ã¦ã€é€šå¸¸ã®æ–‡å­—åˆ—ã§ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’ä½¿ã£ã¦\\ã‚’\\\\ã¨è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nä¸€æ–¹ã€é€èªçš„æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã§ã¯ã€\\ã®ã¾ã¾ãƒ‘ã‚¹ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ã€‚\n1 2  string path1 = @\u0026#34;C:\\Users\\\\user\\Documents\u0026#34;; // é€èªçš„æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’ä½¿ã†å ´åˆ string path2 = \u0026#34;C:\\\\Users\\\\user\\\\Documents\u0026#34;; // é€èªçš„æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’ä½¿ã‚ãªã„å ´åˆ   stringå‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒ¡ã‚½ãƒƒãƒ‰ stringå‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ æˆ»ã‚Šå€¤ã®å‹ èª¬æ˜     Length int æ–‡å­—åˆ—ã®é•·ã•    stringå‹ã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ æˆ»ã‚Šå€¤ã®å‹ èª¬æ˜     CompareTo(string) int æ–‡å­—åˆ—ã‚’æ¯”è¼ƒ   Contains(string) bool æ–‡å­—åˆ—ã‚’å«ã‚€ã‹åˆ¤å®š   Remove(int[, int]) string æŒ‡å®šã—ãŸä½ç½®ã®æ–‡å­—ã‚’å‰Šé™¤   Replace(string, string) string æŒ‡å®šã—ãŸæ–‡å­—ã‚’ç½®æ›   Split(string) string[] æŒ‡å®šã—ãŸæ–‡å­—åˆ—ã§åˆ†å‰²   ToLower() string å…¨ã¦å°æ–‡å­—ã«ã™ã‚‹   ToUpper() string å…¨ã¦å¤§æ–‡å­—ã«ã™ã‚‹   Trim() string æ–‡å­—åˆ—ã®å…ˆé ­ã¨æœ«å°¾ã®åŠè§’ç©ºç™½ã‚’å‰Šé™¤   TrimStart() string æ–‡å­—åˆ—ã®å…ˆé ­ã®åŠè§’ç©ºç™½ã‚’å‰Šé™¤   TrimEnd() string æ–‡å­—åˆ—ã®æœ«å°¾ã®åŠè§’ç©ºç™½ã‚’å‰Šé™¤    CompareTo()ãƒ¡ã‚½ãƒƒãƒ‰ã¨Remove()ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã§è©³ç´°ã‚’è¿°ã¹ã‚‹ã€‚\næ–‡å­—åˆ—ã®æ¯”è¼ƒ(CompareTo) strA.CompareTo(string strB)ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ã€strAã¨strBã‚’ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ã«æ¯”è¼ƒã—ã¦ä»¥ä¸‹ã®çµæœã‚’è¿”ã™ã€‚\n   æ–‡å­—åˆ—ã®é †åº CompareToã®æˆ»ã‚Šå€¤     strAãŒstrBã‚ˆã‚Šå…ˆã«æ¥ã‚‹ -1   strAã¨strBãŒç­‰ã—ã„ 0   strAãŒstrBã‚ˆã‚Šå¾Œã«æ¥ã‚‹ 1    ä¾‹\n1 2 3 4 5  string str = \u0026#34;abc\u0026#34;; Console.WriteLine(str.CompareTo(\u0026#34;b\u0026#34;)); // -1 Console.WriteLine(str.CompareTo(\u0026#34;abc\u0026#34;)); // 0 Console.WriteLine(str.CompareTo(\u0026#34;aaa\u0026#34;)); // 1 Console.WriteLine(str.CompareTo(\u0026#34;ABC\u0026#34;)); // -1   ãªãŠã€å¤§æ–‡å­—ã¯å°æ–‡å­—ã‚ˆã‚Šå…ˆã«æ¥ã‚‹ã¨åˆ¤å®šã•ã‚Œã‚‹ã€‚\næ–‡å­—åˆ—ã®å‰Šé™¤(Remove) Remove(int startIndex, int count)ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ã€startIndexã§æŒ‡å®šã—ãŸä½ç½®ã‹ã‚‰countã®æ•°ã ã‘æ–‡å­—ã‚’å‰Šé™¤ã™ã‚‹ã€‚countã‚’æŒ‡å®šã—ãªã„å ´åˆã¯ã€æœ€å¾Œã®æ–‡å­—ã¾ã§å‰Šé™¤ã™ã‚‹ã€‚\n1 2 3  string str = \u0026#34;hogepiyo\u0026#34;; Console.WriteLine(str.Remove(4)); // hoge Console.WriteLine(str.Remove(4, 2)); // hogeyo   æ–‡å­—åˆ—ã®çµåˆ æ–‡å­—åˆ—ã‚’çµåˆã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚\n +, +=æ¼”ç®—å­ String.Concat()ãƒ¡ã‚½ãƒƒãƒ‰ String.Joint()ãƒ¡ã‚½ãƒƒãƒ‰  ãŸã ã—ã€stringå‹ã§ã¯ä¸€åº¦ä½œæˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å¤‰æ›´ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ãªã„ãŸã‚ã€æ–‡å­—åˆ—ã‚’çµåˆã™ã‚‹ã¨ã€æ–°ãŸãªstringã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚\nä½•åº¦ã‚‚æ–‡å­—åˆ—ã®å¤‰æ›´ã‚’ç¹°ã‚Šè¿”ã™å ´åˆã«ã¯ã€StringBuilderã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ãŸæ–¹ãŒåŠ¹ç‡ãŒè‰¯ã„ã€‚\næ–‡å­—åˆ—ã¨æ•°å€¤ã®å¤‰æ› æ–‡å­—åˆ—ã‚’æ•°å€¤ã«å¤‰æ›ã™ã‚‹å ´åˆã¯Parse()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1 2  int a = int.Parse(\u0026#34;123\u0026#34;); float b = float.Parse(\u0026#34;3.14\u0026#34;);   åå¯¾ã«ã€æ•°å€¤ã‚’æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹å ´åˆã¯ToString()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚æ–‡å­—åˆ—ã«ã™ã‚‹ã¨ãã®æ›¸å¼ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒå¯èƒ½ã€‚\n1 2 3 4 5  double x = 123.45; Console.WriteLine(x.ToString()); // 123.45 Console.WriteLine(x.ToString(\u0026#34;0000.0000\u0026#34;)); // 0123.4500ï¼ˆ0åŸ‹ã‚ï¼‰ Console.WriteLine(x.ToString(\u0026#34;F1\u0026#34;)); // 123.5ï¼ˆå°æ•°ç‚¹ä»¥ä¸‹1æ¡ï¼‰ Console.WriteLine(x.ToString(\u0026#34;E\u0026#34;)); // 1.234500E+002ï¼ˆæŒ‡æ•°è¡¨ç¤ºï¼‰   å‚è€ƒ æ–‡å­—åˆ— - C# ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° ã‚¬ã‚¤ãƒ‰ | Microsoft Docs\n","description":"C#ã§ã¯stringå‹ã‚’ä½¿ã£ã¦æ–‡å­—åˆ—ã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯stringã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã€ãŠã‚ˆã³æ–‡å­—åˆ—ã¨æ•°å€¤ã®å¤‰æ›ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚","id":38,"section":"posts","tags":["Python","C Sharp"],"title":"C#ã®stringå‹ã§æ–‡å­—åˆ—ã‚’æ‰±ã†","uri":"https://helve-blog.com/posts/csharp/csharp-string/"},{"content":"ã¯ã˜ã‚ã« æ™®æ®µã¯Pythonã‚’ä½¿ã£ã¦ã„ã‚‹ãŒã€C#ã‚’å‹‰å¼·ã™ã‚‹ã“ã¨ã«ãªã£ãŸã®ã§ã€ Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒã‹ã‚‰è¦‹ãŸç›¸é•ç‚¹ã‚’å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã™ã€‚\næ¯”è¼ƒã—ãŸè¨€èªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   è¨€èª ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.8.3   C# 8.0    ãªãŠã€C#ã‚’å‹‰å¼·ã—å§‹ã‚ã¦æ•°é€±é–“ç¨‹åº¦ãªã®ã§ã€C#ã«ã¤ã„ã¦ç†è§£ãŒæµ…ã‹ã£ãŸã‚Šã€ä¾‹å¤–ã‚’çŸ¥ã‚‰ãªã„ç®‡æ‰€ã‚‚ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚è¨˜äº‹ã«èª¤ã‚Šç­‰ã‚ã‚Šã¾ã—ãŸã‚‰ã€ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã«ã¦ã”æŒ‡æ‘˜ãã ã•ã„ã€‚\nã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä»¥å¤–ã®é•ã„ é–‹ç™ºç’°å¢ƒ Pythonã®çµ±åˆé–‹ç™ºç’°å¢ƒ (IDE) ã«ã¯ã€Spyderã‚„PyCharm, Jupyter, Visual Studioãªã©ãŒã‚ã‚‹ã€‚\nä¸€æ–¹ã€C#ã¯MicrosoftãŒè¨€èªã®é–‹ç™ºã‚’è¡Œã£ã¦ã„ã‚‹ãŸã‚ã€IDEã¯Visual Studioã»ã¼ä¸€æŠã¨ã„ã†çŠ¶æ³ã§ã‚ã‚‹ã€‚2020å¹´7æœˆ4æ—¥ç¾åœ¨ã€Visual Studioã«ã¯Windowsç‰ˆã¨Macç‰ˆãŒåˆ©ç”¨ã§ãã‚‹ã€‚\næœ€æ–°ã®Windowsç‰ˆã§ã‚ã‚‹Visual Studio 2019ã«ã¯ã€Community, Professional, Enterpriseã®3ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã€å€‹äººåˆ©ç”¨ã§ã‚ã‚Œã°Communityã‚’ç„¡å„Ÿã§åˆ©ç”¨ã§ãã‚‹ã€‚\nã¾ãŸã€Macç‰ˆã«ã¯ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã®é•ã„ã¯ãªãã€ç„¡å„Ÿã§åˆ©ç”¨ã§ãã‚‹ã€‚\nãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œå½¢å¼ Pythonã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ—ãƒªã‚¿æ–¹å¼ã®è¨€èªã§ã‚ã‚Šã€å®Ÿè¡Œæ™‚ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å…ˆé ­ã‹ã‚‰1è¡Œãšã¤èª­ã¿è¾¼ã‚“ã§å®Ÿè¡Œã•ã‚Œã‚‹ã€‚\nä¸€æ–¹ã€C#ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ–¹å¼ã®è¨€èªã§ã‚ã‚‹ã€‚ã—ã‹ã—ã€C/C++ã¨ç•°ãªã‚Šã€C#ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã¯ä¸­é–“è¨€èªã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã«å¤‰æ›ã•ã‚Œã‚‹ã ã‘ã§ã€æ©Ÿæ¢°èªã«ã¯å¤‰æ›ã•ã‚Œãªã„ã€‚ä¸­é–“è¨€èªãŒæ©Ÿæ¢°èªã«å¤‰æ›ã•ã‚Œã‚‹ã®ã¯ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã‚ã‚‹ã€‚\nã¾ãŸã€C#ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨å‘¼ã°ã‚Œã‚‹ç®‡æ‰€ã‹ã‚‰é–‹å§‹ã•ã‚Œã‚‹ã€‚ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¯Main()ã¨ã„ã†åå‰ã§å®šç¾©ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã«ãªã‚‹ã€‚\nåŸºæœ¬çš„ãªæ–‡æ³•ã®é•ã„ æ–‡æœ«ã®ã‚»ãƒŸã‚³ãƒ­ãƒ³ã®æœ‰ç„¡ Pythonã§ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ–‡ã®æœ€å¾Œã«ã‚»ãƒŸã‚³ãƒ­ãƒ³;ã¯å¿…é ˆã§ã¯ãªã„ï¼ˆãŸã ã—ã€åŒã˜è¡Œã§è¤‡æ•°ã®æ–‡ã‚’æ›¸ãå ´åˆã«ã¯ã€åŒºåˆ‡ã‚Šã‚’ç¤ºã™ãŸã‚ã«å¿…è¦ï¼‰ã€‚\nä¸€æ–¹ã€C#ã§ã¯æ–‡æœ«ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³ãŒå¿…é ˆã§ã‚ã‚‹ã€‚\nã‚ªãƒ•ã‚µã‚¤ãƒ‰ãƒ«ãƒ¼ãƒ«ãŒãªã„ Pythonã§ã¯ifæ–‡, foræ–‡ã‚„é–¢æ•°å®šç¾©ãªã©ã®ç¯„å›²ã‚’ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’ä½¿ã£ã¦è¡¨ç¾ã™ã‚‹ï¼ˆã‚ªãƒ•ã‚µã‚¤ãƒ‰ãƒ«ãƒ¼ãƒ«ï¼‰ã€‚\nC#ã§ã¯ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã¯å¯èª­æ€§ã‚’ä¸Šã’ã‚‹å½¹å‰²ã—ã‹ãªãã€æ³¢æ‹¬å¼§{ }ã§ifæ–‡ãªã©ã®ç¯„å›²ã‚’å®šã‚ã‚‹ã€‚\nPythonã®ä¾‹ï¼š\n1 2  for i in range(10): ï¼ˆå‡¦ç†ï¼‰   C#ã®ä¾‹ï¼š\n1 2 3 4  for (int i; i \u0026lt; 10; i++) { ï¼ˆå‡¦ç†ï¼‰ }   ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ C#ã¯Pythonã‚ˆã‚Šã‚‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã®è€ƒãˆæ–¹ãŒå¼·ã„ï¼ˆã¨å€‹äººçš„ã«æ„Ÿã˜ã‚‹ï¼‰ã€‚\nPythonã®å ´åˆã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’å½“ç„¶ã§ãã‚‹ãŒã€ã‚¯ãƒ©ã‚¹ã‚’ä½¿ã‚ãªã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã“ã¨ã‚‚ã§ãã‚‹ã€‚\nä¸€æ–¹ã€C#ã®å ´åˆã€å…¨ã¦ã®å¤‰æ•°ã¨é–¢æ•°ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰ï¼‰ã¯ã‚¯ãƒ©ã‚¹ã«å±ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã‚¯ãƒ©ã‚¹ã‚’ç†è§£ã›ãšã«ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã“ã¨ã¯é›£ã—ã„ï¼ˆã•ã‚‰ã«ã€ã‚¯ãƒ©ã‚¹ã¯åå‰ç©ºé–“ã«å±ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼‰ã€‚\nä¾‹ãˆã°ã€æ–‡å­—ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã€Pythonã§ã¯printé–¢æ•°ã‚’ä½¿ã†ãŒã€C#ã§ã¯System.Console.WriteLineãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\nã“ã“ã§ã€Systemã¯åå‰ç©ºé–“ã€Consoleã¯ã‚¯ãƒ©ã‚¹åã€WriteLineãŒãƒ¡ã‚½ãƒƒãƒ‰åã«ãªã‚‹ã€‚\nå¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ— Pythonã§ã¯ã€é–¢æ•°å†…ã§å®šç¾©ã•ã‚ŒãŸå¤‰æ•°ã¯ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã¨ãªã‚Šã€åŸºæœ¬çš„ã«é–¢æ•°ã®å¤–ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã“ã¨ã¯å‡ºæ¥ãªã„ã€‚\nC#ã§ã¯å¤‰æ•°ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¯{ }ã§å›²ã¾ã‚ŒãŸä¸­ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€\n1 2 3 4 5 6 7  static void Main(string[] args) { int a = 1; { Console.WriteLine($\u0026#34;{a}\u0026#34;); } }   ã¯æœ‰åŠ¹ã ãŒã€ä»¥ä¸‹ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚\n1 2 3 4 5 6 7  static void Main(string[] args) { { int b = 2; } Console.WriteLine($\u0026#34;{b}\u0026#34;); // {}ã®å¤–ã§ã¯bã¯æœ‰åŠ¹ã§ã¯ãªã„ }   å¤‰æ•°ã®å‹ å¤‰æ•°å‹ã®å®£è¨€ Pythonã§ã¯å¤‰æ•°ã®å‹ã‚’å®£è¨€ã™ã‚‹å¿…è¦ã¯ãªã„ã€‚\nC#ã§ã¯ã€å…¨ã¦ã®å¤‰æ•°ã¨ã€ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã®å‹ã‚’å®£è¨€ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚æ•´æ•°å‹ã¯int, å°æ•°å‹ã¯doubleãªã©ã¨å¤‰æ•°ã®å‰ã«ä»˜ã‘ã‚‹ã€‚\nC#ã®ä¾‹ï¼š\n1 2  int a = 3; double b = 4.2;   æ–‡å­—åˆ— Pythonã§ã¯strå‹ã§æ–‡å­—åˆ—ã‚’æ‰±ã†ã€‚\nC#ã§ã‚‚ã»ã¼åŒæ§˜ã®stringå‹ãŒã‚ã‚‹ã€‚\nC#ã®ä¾‹ï¼š\n1 2  string st = \u0026#34;abc\u0026#34;; Console.WriteLine(st.Length); // æ–‡å­—åˆ—ã®é•·ã•(3)ã‚’è¡¨ç¤º   ãŸã ã—ã€Pythonã§ã¯ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ã©ã¡ã‚‰ã§æ–‡å­—åˆ—ã‚’å›²ã£ã¦ã‚‚è‰¯ã‹ã£ãŸãŒã€C#ã§ã¯å¾Œè€…ã—ã‹ä½¿ãˆãªã„ã€‚\nC#ã§ã¯ã€charå‹ã¨ã„ã†1æ–‡å­—ã ã‘æ ¼ç´ã™ã‚‹å‹ã«ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã€stringå‹ã¨åŒºåˆ¥ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒªã‚¹ãƒˆå‹ãƒ»è¾æ›¸å‹ Pythonã§ã¯æ•°å€¤ã‚„æ–‡å­—åˆ—ã‚’æ··åœ¨ã—ãŸãƒªã‚¹ãƒˆå‹å¤‰æ•°ã€è¾æ›¸å‹å¤‰æ•°ã‚’ä½œæˆã§ãã‚‹ã€‚\nä¸€æ–¹ã€C#ã§ã¯ã€1ã¤ã®ãƒªã‚¹ãƒˆå‹å¤‰æ•°ã€è¾æ›¸å‹å¤‰æ•°ã«æ ¼ç´ã§ãã‚‹å‹ã¯1ç¨®é¡ã ã‘ã§ã‚ã‚‹ã€‚\nã¾ãŸã€ãƒªã‚¹ãƒˆã‚„è¾æ›¸ã¯ã€ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹ã€‚ãƒªã‚¹ãƒˆé…åˆ—ã®ä½¿ã„æ–¹ã®ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1 2 3  List\u0026lt;int\u0026gt; a = new List\u0026lt;int\u0026gt;(); // æ•´æ•°å‹ã®ãƒªã‚¹ãƒˆã‚’ä½œæˆ a.Add(1); // è¦ç´ ã‚’è¿½åŠ  int cnt = a.Count; // è¦ç´ æ•°(1)ã‚’å–å¾—   Pythonã§ã¯ãƒªã‚¹ãƒˆã«ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ä½¿ã£ã¦ã€ä¾‹ãˆã°5ç•ªç›®ã‹ã‚‰10ç•ªç›®ã®è¦ç´ ã‚’å–å¾—ã—ãŸã‚Šã€è¦ç´ ã‚’2ã¤é£›ã°ã—ã§å–å¾—ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ãŒã§ãã‚‹ã€‚\nä¸€æ–¹ã€C#ã«ã¯ã‚¹ãƒ©ã‚¤ã‚¹ãŒãªãã€ã“ã®ã‚ˆã†ãªå‡¦ç†ã‚’ç°¡å˜ã«è¨˜è¿°ã™ã‚‹ã“ã¨ã¯é›£ã—ã„ã€‚\nåˆ¶å¾¡æ–‡ Pythonã§ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æµã‚Œã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®æ–‡ã¨ã—ã¦if, for, whileãŒã‚ã‚‹ã€‚\nC#ã§ã¯ãã‚Œã‚‰ã«åŠ ãˆã¦ã€foreachã¨switchæ–‡, doãƒ«ãƒ¼ãƒ—ãŒã‚ã‚‹ã€‚\nä»¥ä¸‹ã€ä¸¡è€…ã®ä¸»ãªç›¸é•ã‚’è¿°ã¹ã‚‹ã€‚\nforæ–‡ãƒ»foreachæ–‡ å‰è¿°ã®ã‚ˆã†ã«ã€Pythonã§ã¯foræ–‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹ã€‚inã®å¾Œã‚ã«ã¯ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ï¼ˆç¹°ã‚Šè¿”ã—å¯èƒ½ãªï¼‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç½®ãã¨ã€forã®å¾Œã‚ã®å¤‰æ•°ã«1ã¤ãšã¤è¦ç´ ãŒä»£å…¥ã•ã‚Œã‚‹ã€‚\n1 2  for i in range(10): ï¼ˆå‡¦ç†ï¼‰   ä¸€æ–¹ã€C#ã®foræ–‡ã«ã¯forã¨foreachã®2ç¨®é¡ãŒã‚ã‚‹ã€‚foræ–‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¨ãªã‚‹å¤‰æ•°ã€ç¹°ã‚Šè¿”ã™æ¡ä»¶ã€1å‘¨ã”ã¨ã«ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å¤‰æ•°ã«è¡Œã†æ“ä½œã€ã‚’ã‚»ãƒŸã‚³ãƒ­ãƒ³;ã§åŒºåˆ‡ã£ã¦æ›¸ãã€‚\n1 2 3 4  for (int i; i \u0026lt; 10; i++) { ï¼ˆå‡¦ç†ï¼‰ }   ä¸€æ–¹ã€C#ã®foreachæ–‡ã¯é…åˆ—ã®è¦ç´ ã‚’é †ã«å–ã‚Šå‡ºã™ã‚‚ã®ã§ã‚ã‚Šã€Pythonã®foræ–‡ã«è¿‘ã„ä½¿ã„æ–¹ãŒã§ãã‚‹ã€‚\n1 2 3 4 5  int[] a = {0, 1, 2, 3}; foreach (int i in a) { ï¼ˆå‡¦ç†ï¼‰ }   switchæ–‡ãƒ»doãƒ«ãƒ¼ãƒ— switchæ–‡ã¯å¤‰æ•°ã®å€¤ã«ã‚ˆã£ã¦ã€å‡¦ç†ã‚’åˆ†å²ã•ã›ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚å‡¦ç†ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã«ã¯ã€foræ–‡ã‚ˆã‚Šã‚‚å¯èª­æ€§ãŒé«˜ã„ã€‚\ndoãƒ«ãƒ¼ãƒ—ã¯whileãƒ«ãƒ¼ãƒ—ã®ã‚ˆã†ã«ã€ç¹°ã‚Šè¿”ã—å‡¦ç†ã‚’è¡Œã†ã‚‚ã®ã§ã‚ã‚‹ã€‚\nç›¸é•ç‚¹ã¯ã€whileãƒ«ãƒ¼ãƒ—ãŒå†…éƒ¨å‡¦ç†ã®å‰ã«ãƒ«ãƒ¼ãƒ—ã®è„±å‡ºåˆ¤å®šã‚’è¡Œã†ã®ã«å¯¾ã—ã¦ã€doãƒ«ãƒ¼ãƒ—ã§ã¯å†…éƒ¨å‡¦ç†ã®å¾Œã«ãƒ«ãƒ¼ãƒ—ã®è„±å‡ºåˆ¤å®šã‚’è¡Œã†ã“ã¨ã§ã‚ã‚‹ã€‚ã™ãªã‚ã¡ã€doãƒ«ãƒ¼ãƒ—ã§ã¯æœ€ä½ã§ã‚‚ä¸€åº¦ã¯å‡¦ç†ãŒå®Ÿæ–½ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚\nãã®ä»– ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­ãƒ»ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­ C#ã§ã¯ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­++, ãƒ‡ã‚¯ãƒªãƒ¡ãƒ³ãƒˆæ¼”ç®—å­--ã‚’ä½¿ç”¨ã§ãã‚‹ã€‚\nC#ã®ä¾‹ï¼š\n1 2  int a = 0; a++; // aã‚’1ã ã‘å¢—åŠ ã•ã›ã‚‹   è«–ç†æ¼”ç®—å­ Pythonã§ã¯ã€boolå‹ (True, False) ã«å¯¾ã™ã‚‹è«–ç†æ¼”ç®—å­ã¨ã—ã¦and, or, notã‚’ä½¿ç”¨ã™ã‚‹ã€‚\nä¸€æ–¹ã€C#ã§ã¯boolå‹ã‚’true, falseï¼ˆå…¨ã¦å°æ–‡å­—ï¼‰ã¨ã—ã¦ã€è«–ç†æ¼”ç®—å­ã«\u0026amp;, |, !ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\nå‚è€ƒ ä»¥ä¸‹ã®è¨˜äº‹ã§ã¯ã€C#ãƒ—ãƒ­ã‚°ãƒ©ãƒã‹ã‚‰è¦‹ãŸPythonã®ç‰¹å¾´ã‚’æ‰±ã£ã¦ã„ã‚‹ã€‚\nC#ã‹ã‚‰Pythonã«ä¹—ã‚Šã‹ãˆã‚‹ãŸã‚ã®ä¸¡è€…ã®æ¯”è¼ƒ - Qiita\n","description":"æ™®æ®µã¯Pythonã‚’ä½¿ã£ã¦ã„ã‚‹ãŒã€C#ã‚’å‹‰å¼·ã™ã‚‹ã“ã¨ã«ãªã£ãŸã®ã§ã€Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒã‹ã‚‰è¦‹ãŸç›¸é•ç‚¹ã‚’å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã™ã€‚","id":39,"section":"posts","tags":["Python","C Sharp"],"title":"Pythonãƒ—ãƒ­ã‚°ãƒ©ãƒã‹ã‚‰è¦‹ãŸC#","uri":"https://helve-blog.com/posts/csharp/python-to-csharp/"},{"content":"ã¯ã˜ã‚ã« Pyomoã¯Pythonã§æ›¸ã‹ã‚ŒãŸæœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚Pyomoã®æ¦‚è¦ã¨åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nPyomoã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã\nGDPã¯æœ€é©åŒ–å•é¡Œã®è¡¨ç¾ã®1ã¤ã§ã‚ã‚Šã€Generalized Disjunctive Programming ã®é ­æ–‡å­—ã‚’ã¨ã£ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚ç›´è¨³ã™ã‚‹ã¨ä¸€èˆ¬åŒ–é›¢æ¥è¨ˆç”»å•é¡Œã¨ãªã‚‹ã€‚é›¢æ¥ã¨ã¯è«–ç†å’Œ (OR) ã®ã“ã¨ã§ã‚ã‚‹ã€‚\nGDPã§ã¯æœ€é©åŒ–å•é¡Œã«ãŠã‘ã‚‹è«–ç†çš„ãªåˆ¶ç´„ã‚’è¡¨ç¾ã§ãã‚‹ã€‚ä¾‹ãˆã°ã€2ã¤ã®ç­‰å¼åˆ¶ç´„ãŒã‚ã‚‹ãŒã€ã©ã¡ã‚‰ã‹ç‰‡æ–¹ã®ã¿æº€ãŸã›ã°è‰¯ã„ã€ã¨ã„ã†è¡¨ç¾ãŒã§ãã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Pyomoã‚’ä½¿ã£ãŸGDPå•é¡Œã®å®šç¾©ã€ãŠã‚ˆã³GDPã‚½ãƒ«ãƒã®å®Ÿè¡Œæ–¹æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚GDPã‚’è§£ãã¨ãã«ã¯MINLPãªã©ã«å¤‰æ›ã™ã‚‹ãŒã€è©³ç´°ã«ã¤ã„ã¦ã¯è§¦ã‚Œãªã„ã€‚\nã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   Pyomo 5.6.9   glpk 4.65    ç’°å¢ƒã®è¨­å®š Pyomoã«æ‹¡å¼µæ©Ÿèƒ½ã¨ã—ã¦GDPã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€Pyomoã¨é©å½“ãªã‚½ãƒ«ãƒã‚’å°å…¥ã™ã‚‹ã€‚ã“ã“ã§ã¯ã€pyomoã¨ç·šå½¢ã‚½ãƒ«ãƒGLPKã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\ncondaç’°å¢ƒã®å ´åˆã¯ã€æ¬¡ã®é€šã‚Šã€‚\nconda install -c conda-forge pyomo\rconda install -c conda-forge glpk\rpipç’°å¢ƒã®å ´åˆã¯ã€æ¬¡ã®é€šã‚Šã€‚\npip install pyomo\rpip install glpk\rGDPã®åŸºæœ¬å½¢ GDPã®åŸºæœ¬çš„ãªå¼ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨è¨˜ã•ã‚Œã‚‹ã€‚\nå‡ºå±•ï¼š\nhttps://www.gams.com/latest/docs/UG_EMP_DisjunctiveProgramming.html\nä¸»ãªå¤‰æ•°ã®æ„å‘³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n x: å¤‰æ•° f(x): ç›®çš„é–¢æ•° g(x): ä¸ç­‰å¼åˆ¶ç´„ Y: ãƒ–ãƒ¼ãƒªã‚¢ãƒ³ L: xã®ä¸‹é™ U: xã®ä¸Šé™ Î©(Y): Yã®è«–ç†åˆ¶ç´„ r(x): å¯¾å¿œã™ã‚‹YãŒTrueã®ã¨ãã®ã¿æœ‰åŠ¹ãªä¸ç­‰å¼åˆ¶ç´„ n: å¤‰æ•°ã®æ•° K: è«–ç†å’Œæ¡ä»¶ã®æ•°  ã¾ãŸã€è¨˜å·Vã¯è«–ç†å’Œã‚’ç¤ºã™ã€‚\nGDPã¯ã€åŒ–å­¦ãƒ—ãƒ©ãƒ³ãƒˆãªã©ã®æœ€é©ãªè£…ç½®ã®çµ„ã¿åˆã‚ã›ã‚’æ±‚ã‚ã‚‹ã®ã«ç”¨ã„ã‚‰ã‚Œã‚‹ã€‚ãƒ—ãƒ©ãƒ³ãƒˆã®ç”Ÿæˆç‰©ãªã©ãŒå¤‰æ•°ã€åˆ©ç›Šãªã©ãŒç›®çš„é–¢æ•°ã«ãªã‚‹ã€‚ã¾ãŸã€è£…ç½®ã«ã‚ˆã£ã¦ç”Ÿæˆç‰©ã®ä¸Šé™ã‚„ã‚³ã‚¹ãƒˆãªã©ã¯ç•°ãªã‚‹ãŒã€ã“ã®ã‚ˆã†ãªæ¡ä»¶ãŒåˆ¶ç´„æ¡ä»¶ã«ãªã‚‹ã€‚\nGDPã®ä¾‹ GDPã®ä¾‹ã‚’ç¤ºã™ã€‚2å¤‰æ•°$x_1, x_2$ã«å¯¾ã—ã¦ã€ç›®çš„é–¢æ•°$x_1+x_2$ã‚’æœ€å¤§åŒ–ã™ã‚‹å•é¡Œã‚’è€ƒãˆã‚‹ã€‚å®Ÿè¡Œå¯èƒ½é ˜åŸŸã¯ä¸‹å›³ã®æ–œç·šéƒ¨ã¨ã™ã‚‹ã¨ã€$(x_1, x_2)=(10, 7)$ã§å¤§åŸŸçš„æœ€é©è§£$ 17$ã‚’ã¨ã‚‹ã€‚\nã“ã®å•é¡Œã‚’GDPã§è¡¨ã™ã¨ã€æ¬¡å¼ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\begin{array}{ll} \\text{maximize} \u0026amp; x_1 + x_2 \\\\ \\text{subject to} \u0026amp; \\begin{bmatrix} Y_{1} \\\\ 5x_1 + 4x_2 \\le 20 \\end{bmatrix} \\vee \\begin{bmatrix} Y_{2} \\\\ 2x_1 + x_2 \\ge 23 \\end{bmatrix} \\\\ \u0026amp; Y_1 \\rightarrow \\neg Y_2 \\\\ \u0026amp; Y_2 \\rightarrow \\neg Y_1 \\\\ \u0026amp; 0 \\le x_1 \\le 10, 0 \\le x_2 \\le 7, \\\\ \u0026amp; Y_{1}, Y_{2} \\in { \\text{True, False} } \\end{array} $$\nã“ã“ã§ã€ï¿¢ã¯å¦å®š (NOT) ã®æ„å‘³ã§ã‚ã‚‹ã€‚ä¸Šè¨˜ã®å¼ã§ã¯ã€Y1ã¨Y2ã®ç‰‡æ–¹ã®ã¿Trueã«ãªã‚‹ã€‚\nãªãŠã€GDPã® disjuntive ã¯è«–ç†å’Œ (OR) ã‚’æ„å‘³ã™ã‚‹ãŒã€Pyomoã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã‚„é–¢é€£ã™ã‚‹è«–æ–‡ã‚’èª­ã‚€ã¨ã€æ’ä»–çš„è«–ç†å’Œ (XOR) ã®æ„å‘³ã§ã‚‚ç”¨ã„ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã‚ˆã†ã«æ€ã†ã€‚\nPyomoã§GDPã‚’è§£ã ä¸Šè¨˜ã®ä¾‹ã‚’pyomoã§å®Ÿè£…ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  import pyomo.environ as pe import pyomo.gdp as pg model = pe.ConcreteModel() model.x1 = pe.Var(domain=pe.Reals, bounds=(0, 10)) model.x2 = pe.Var(domain=pe.Reals, bounds=(0, 7)) model.Y1 = pg.Disjunct() model.Y1.c = pe.Constraint(expr = 5*model.x1+4*model.x2 \u0026lt;= 20) model.Y2 = pg.Disjunct() model.Y2.c = pe.Constraint(expr = 2*model.x1+model.x2 \u0026gt;= 23) model.c = pg.Disjunction(expr=[model.Y1, model.Y2]) model.OBJ = pe.Objective(expr=model.x1+model.x2, sense=pe.maximize) pe.SolverFactory(\u0026#39;gdpopt\u0026#39;).solve(model, mip_solver=\u0026#39;glpk\u0026#39;) print(f\u0026#34;è©•ä¾¡é–¢æ•°ï¼š{model.OBJ()}\u0026#34;) print(f\u0026#34;x1: {model.x1()}\u0026#34;) print(f\u0026#34;x2: {model.x2()}\u0026#34;)   å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€æœ€é©è§£ã‚’å¾—ã‚‰ã‚ŒãŸã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\n1 2 3  è©•ä¾¡é–¢æ•°ï¼š17.0 x1: 10.0 x2: 7.0   ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è§£èª¬ GDPã«é–¢ã™ã‚‹éƒ¨åˆ†ã®ã¿ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ç°¡å˜ã«è§£èª¬ã™ã‚‹ã€‚\n1 2  model.Y1 = pg.Disjunct() model.Y1.c = pe.Constraint(expr = 5*model.x1+4*model.x2 \u0026lt;= 20)   Disjunctã‚¯ãƒ©ã‚¹ã¯ã€ãƒ–ãƒ¼ãƒªã‚¢ãƒ³ã«ç›¸å½“ã™ã‚‹ã€‚ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€model.Y1ãŒTrueã®å ´åˆã®ã¿ã€model.Y1.cã§å®šç¾©ã•ã‚ŒãŸåˆ¶ç´„æ¡ä»¶ãŒæœ‰åŠ¹ã«ãªã‚‹ã€‚\n1  model.c = pg.Disjunction(expr=[model.Y1, model.Y2])   Disjunctionã‚¯ãƒ©ã‚¹ã¯ã€è«–ç†å’Œã®åˆ¶ç´„ã‚’ç¤ºã™ã€‚å¼•æ•°exprã«æ¸¡ã—ãŸ2ã¤ã®Disjunctã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†…ã€ã©ã¡ã‚‰ã‹ç‰‡æ–¹ã®ã¿Trueã«ãªã‚‹ã“ã¨ã‚’ç¤ºã™ã€‚\nâ€»å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ã¯\u0026quot;logical OR\u0026quot;ã¨ã„ã†è¡¨ç¾ã ãŒã€å®Ÿéš›ã¯æ’ä»–çš„è«–ç†å’Œ (XOR) ã®ã‚ˆã†ã«æŒ¯ã‚‹èˆã†ã€‚\n1  pe.SolverFactory(\u0026#39;gdpopt\u0026#39;).solve(model, mip_solver=\u0026#39;glpk\u0026#39;)   ã‚½ãƒ«ãƒã«ã¯GDPoptã‚’æŒ‡å®šã™ã‚‹ã€‚ãŸã ã—ã€GDPoptã¯GDPã‚’å¤‰æ›ã™ã‚‹ãŒMIPã‚½ãƒ«ãƒã‚’å«ã‚“ã§ã„ãªã„ã®ã§ã€GLPKã‚’æŒ‡å®šã™ã‚‹ã€‚\nå‚è€ƒ Pyomoã«ãŠã‘ã‚‹GDPã®ã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦\nGeneralized Disjunctive Programming â€” Pyomo 5.7.2 documentation\nGDPoptã‚½ãƒ«ãƒã«ã¤ã„ã¦\nGDPopt logic-based solver â€” Pyomo 5.7.2 documentation\n","description":"Pyomoã§GDP (Generalized Disjunctive Programming) ã¨å‘¼ã°ã‚Œã‚‹æœ€é©åŒ–å•é¡Œã‚’è§£ã„ãŸã€‚GDPã¯è«–ç†çš„ãªåˆ¶ç´„ã‚’æŒã¤æœ€é©åŒ–å•é¡Œã§ã‚ã‚‹ã€‚","id":40,"section":"posts","tags":["Pyomo","æœ€é©åŒ–"],"title":"Pyomoã§GDPæœ€é©åŒ–å•é¡Œã‚’è§£ã","uri":"https://helve-blog.com/posts/python/pyomo-gdp/"},{"content":"ã¯ã˜ã‚ã« Pyomoã¯Pythonã§æ›¸ã‹ã‚ŒãŸæœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚ä¸€èˆ¬ã«ã€é«˜é€Ÿãªæœ€é©åŒ–ã‚½ãƒ«ãƒã¯Cè¨€èªãªã©ã§æ›¸ã‹ã‚Œã¦ãŠã‚Šã€ æœ€é©åŒ–å•é¡Œã‚’AMPLãªã©ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ ãã®ãŸã‚ã€æœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã€ï¼ˆPythonãªã©ï¼‰ä»–ã®è¨€èªã§è¨˜è¿°ã•ã‚ŒãŸå•é¡Œã‚’å¤‰æ›ã—ã¦æœ€é©åŒ–ã‚½ãƒ«ãƒã«æ¸¡ã™ã€‚\nã¾ãŸã€Couenneã¯éå‡¸ãªMINLPå•é¡Œã‚’è§£ãã“ã¨ãŒã§ãã‚‹æœ€é©åŒ–ã‚½ãƒ«ãƒã§ã‚ã‚‹ï¼ˆè©³ç´°ã¯å¾Œè¿°ï¼‰ã€‚MINLPã¯æ··åˆæ•´æ•°éç·šå½¢è¨ˆç”»å•é¡Œ (Mixed Integer Nonlinear Programming) ã®ç•¥ã§ã‚ã‚‹ã€‚Pyomoã‹ã‚‰Couenneã‚’å‘¼ã³å‡ºã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Couenneã®ç´¹ä»‹ã€ãŠã‚ˆã³Windowsã«ãŠã‘ã‚‹å°å…¥æ–¹æ³•ã€Pyomoã¨Couenneã‚’ç”¨ã„ã¦MINLPå•é¡Œã‚’è§£ãä¾‹ã‚’ç¤ºã™ã€‚\nã¾ãŸã€Pyomoã¯æ—¢ã«å°å…¥ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã™ã‚‹ã€‚Pyomoã®å°å…¥æ–¹æ³•ã¨åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nPyomoã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã\nç’°å¢ƒ\n Windows 10 Home Couenne Ver. 0.3.2  Couenneã®åŸºæœ¬ Couenne (Convex Over and Under ENvelopes for Nonlinear Estimation) ã¯ã€éå‡¸ãªMINLPã‚’è§£ãã“ã¨ãŒã§ãã‚‹ã‚½ãƒ«ãƒã§ã‚ã‚‹ã€‚Couenneã«ã¯ã€spatial branch \u0026amp; boundï¼ˆæ—¥æœ¬èªè¨³ã¯ä¸æ˜ã ãŒã€ç©ºé–“åˆ†æé™å®šæ³•ï¼Ÿï¼‰ã¨å‘¼ã°ã‚Œã‚‹æœ€é©åŒ–æ‰‹æ³•ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\nãªãŠã€Couenneã¯åŒã˜COIN-ORãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§é–‹ç™ºã•ã‚ŒãŸä»¥ä¸‹ã®æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’é–“æ¥çš„ã«å‘¼ã³å‡ºã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\n CBC: MILPã‚½ãƒ«ãƒ CLP: LPã‚½ãƒ«ãƒï¼ˆCBCã‹ã‚‰ä½¿ç”¨ã•ã‚Œã‚‹ï¼‰ IPOPT: NLPã‚½ãƒ«ãƒ  Coueeneã®å°å…¥ Couenneã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®2ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚\n ãƒãƒƒãƒˆã‹ã‚‰å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ä½¿ã† ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ä½¿ã†  Windowsã§2ã®æ–¹æ³•ã‚’å–ã‚‹ã«ã¯ã€Cygwinã‚’å°å…¥ã—ãŸã‚Šã€Blasã‚„Lapackãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãªã©ãƒãƒ¼ãƒ‰ãƒ«ãŒé«˜ã„ã®ã§ã€ã“ã“ã§ã¯1ã®æ–¹æ³•ã‚’å–ã‚‹ã€‚\nã¾ãšã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã®\u0026quot;Couenne-0.3.2-win32-..\u0026gt;\u0026ldquo;ã‹ã‚‰zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚\nhttps://www.coin-or.org/download/binary/Couenne/\nãŸã ã—ã€2011å¹´ã‹ã‚‰å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®é…å¸ƒãŒæ­¢ã¾ã£ã¦ãŠã‚Šã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³0.3.2ã¾ã§ã—ã‹å…¥æ‰‹ã§ããªã„ã€‚æœ€æ–°ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸzipãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£å‡ã™ã‚‹ã¨ã€binãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã«couenne.exeãŒã‚ã‚‹ã€‚ã“ã®å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€CouenneãŒå‘¼ã³å‡ºã™ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå…¨ã¦å«ã¾ã‚Œã¦ã„ã‚‹ã€‚\næ¬¡ã«ã€Pyomoã‹ã‚‰couenne.exeã‚’å‘¼ã¶ãŸã‚ã«ãƒ‘ã‚¹ã‚’é€šã™ã€‚å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ãŒã‚ã‚‹ã€‚\n Windowsã®ç’°å¢ƒå¤‰æ•°ã®Pathã«couenne.exeãŒã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¿½åŠ ã™ã‚‹ Pythonã®ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«couenne.exeã‚’ç½®ã  ä»¥ä¸Šã§Pyomoã‹ã‚‰Couenneã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™ãŒæ•´ã£ãŸã€‚\nãªãŠã€binãƒ•ã‚©ãƒ«ãƒ€ã«å«ã¾ã‚Œã‚‹bonmin.exe, cbc.exe, ipopt.exeã‚‚ã€couenne.exeã¨åŒæ§˜ã«ãƒ‘ã‚¹ã‚’é€šã›ã°Pyomoã‹ã‚‰å‘¼ã³å‡ºã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\néå‡¸MINLPã®ä¾‹é¡Œ ä»¥ä¸‹ã®2å¤‰æ•°ã®éå‡¸MINLPã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \\text{minimize} \u0026amp; 3 x_1^4 - 4 x_1^3 -12 x_1^2 + 3 x_2^4 - 4 x_2^3 -12 x_2^2 \\\\ \\text{subject to} \u0026amp; -5 \\le x_1 \\le 5, -5 \\le x_2 \\le 5 \\\\ \u0026amp; x_1, x_2 \\in \\mathbb{Z} \\end{array} $$\nã“ã“ã§ã€$\\mathbb{Z}$ã¯æ•´æ•°ã®é›†åˆã‚’è¡¨ã™ã€‚ã¾ãŸã€$x_1, x_2$ãŒå®Ÿæ•°ã®å ´åˆã®-2ï½3ä»˜è¿‘ã‚’æ‹¡å¤§ã—ãŸã‚°ãƒ©ãƒ•ã‚’ç¤ºã™ã€‚\n$(x_1, x_2)=(2, 2)$ã§å¤§åŸŸçš„æœ€é©è§£$-64$ã‚’æŒã¤ãŒã€$(x_1, x_2)=(-1, -1), (-1, 2), (2, -1)$ã®3ç®‡æ‰€ã§å±€æ‰€è§£ã‚’æŒã¤éå‡¸ãªå•é¡Œã§ã‚ã‚‹ã€‚\nPyomoã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ ä¸Šè¨˜ã®å•é¡Œã‚’Pyomoã¨Couenneã§è§£ããŸã‚ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  import pyomo.environ as pyo def ObjRule(m): return 3*m.x1**4-4*m.x1**3-12*m.x1**2 + 3*m.x2**4-4*m.x2**3-12*m.x2**2 model = pyo.ConcreteModel(name=\u0026#34;Nonconvex MINLP sample\u0026#34;) model.x1 = pyo.Var(domain=pyo.Integers, bounds=(-5, 5), initialize=-1) model.x2 = pyo.Var(domain=pyo.Integers, bounds=(-5, 5), initialize=-1) model.OBJ = pyo.Objective(rule = ObjRule, sense = pyo.minimize) opt = pyo.SolverFactory(\u0026#39;couenne\u0026#39;) res = opt.solve(model, tee=False) # tee=Trueã¨ã™ã‚Œã°ã‚½ãƒ«ãƒãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤º print(f\u0026#34;è©•ä¾¡é–¢æ•°ï¼š{model.OBJ()}\u0026#34;) print(f\u0026#34;x1: {model.x1()}\u0026#34;) print(f\u0026#34;x2: {model.x2()}\u0026#34;)   ã“ã“ã§ã¯ã€å¤‰æ•°ã®åˆæœŸå€¤ã‚’ã‚ãˆã¦å±€æ‰€è§£ã¨ã—ãŸã€‚\nå®Ÿè¡Œçµæœ\nã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã€å¤§åŸŸçš„æœ€é©è§£ãŒå¾—ã‚‰ã‚ŒãŸã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\n1 2 3  è©•ä¾¡é–¢æ•°ï¼š-64.0 x1: 2.0 x2: 2.0   å‚è€ƒæ–‡çŒ® Couenneã®é–‹ç™ºå…ƒ (COIN-OR) ã®ãƒšãƒ¼ã‚¸\nCouenne\nCouenneã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦\nCouenneã®ãƒ¦ãƒ¼ã‚¶ãƒãƒ‹ãƒ¥ã‚¢ãƒ«(PDF)\n","description":"Pyomoã¨ã„ã†Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã€Couenneã¨ã„ã†æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’ä½¿ã£ã¦éå‡¸ã®æ··åˆæ•´æ•°éç·šå½¢è¨ˆç”»å•é¡Œ (MINLP) ã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":41,"section":"posts","tags":["Pyomo","æœ€é©åŒ–"],"title":"Pyomoã¨Couenneã§éå‡¸ã®æ··åˆæ•´æ•°éç·šå½¢è¨ˆç”»å•é¡Œ(MINLP)ã‚’è§£ã","uri":"https://helve-blog.com/posts/python/pyomo-couenne-nonconvex-minlp/"},{"content":"ã¯ã˜ã‚ã« Pyomoã¯Pythonã§æ›¸ã‹ã‚ŒãŸæœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚Pyomoã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ã€ç·šå½¢è¨ˆç”»å•é¡Œã®è§£ãæ–¹ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nPyomoã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã\næœ¬è¨˜äº‹ã§ã¯ã€Pyomoã‚’ä½¿ã£ã¦éç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ç¤ºã™ã€‚Pyomoã«ã¯æœ€é©åŒ–ã‚½ãƒ«ãƒãŒå«ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€IPOPT (Interior Point OPTimizer)ã¨ã„ã†ç„¡å„Ÿã‚½ãƒ«ãƒãƒ¼ã‚’ä½¿ã†ã€‚IPOPTã¯ä¸»åŒå¯¾å†…ç‚¹æ³•ã‚’åˆ©ç”¨ã—ãŸã‚½ãƒ«ãƒã§ã‚ã‚Šã€å¤§è¦æ¨¡ãªéç·šå½¢å•é¡Œã‚’é«˜é€Ÿã«è§£ãã“ã¨ãŒã§ãã‚‹ã€‚å•é¡Œã¯é€£ç¶šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã¾ãŸã€å¤§åŸŸçš„æœ€é©è§£ã‚’æ±‚ã‚ã‚‹ã«ã¯å•é¡ŒãŒå‡¸ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   Pyomo 5.6.9   IPOPT 3.11.1    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Pyomoã¨IPOPTã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚condaç’°å¢ƒã®å ´åˆã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nconda install -c conda-forge pyomo\rconda install -c conda-forge ipopt\rpipç’°å¢ƒã®å ´åˆã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\npip install pyomo\rpip install ipopt\rå¯¾è±¡ã¨ã™ã‚‹ç·šå½¢è¨ˆç”»å•é¡Œ ä»¥ä¸‹ã®åˆ¶ç´„ä»˜ãéç·šå½¢æœ€å°åŒ–å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$$ \\begin{array}{ll} \\text{minimize} \\ \u0026amp; f(x_1, x_2) = x_1^2 + x_2^2 \\\\ \\text{subject to} \\ \u0026amp; x_1 x_2 \\ge 1 \\\\ \u0026amp; x_1 \\ge 0, x_2 \\ge 0 \\end{array} $$\nå›³ç¤ºã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€$(x_1, x_2)=(1, 1)$ã§æœ€å°å€¤$ 2$ã‚’ã¨ã‚‹ã€‚é’è‰²ã§å›³ç¤ºã—ãŸé ˜åŸŸã¯å®Ÿè¡Œå¯èƒ½é ˜åŸŸã‚’ç¤ºã™ã€‚\nPyomoã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ ä¸Šè¨˜ã®å•é¡Œã‚’Pyomoã‚’ä½¿ã£ã¦è¨˜è¿°ã—ã€æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  import pyomo.environ as pyo model = pyo.ConcreteModel(name=\u0026#34;NLP sample\u0026#34;, doc=\u0026#34;2 variables, 1 constraints\u0026#34;) model.x = pyo.Var([1,2], domain=pyo.NonNegativeReals) # å¤‰æ•°ã‚’å®šç¾© model.OBJ = pyo.Objective(expr = model.x[1]**2 + model.x[2]**2, sense = pyo.minimize) # ç›®çš„é–¢æ•°ã‚’å®šç¾© model.Constraint = pyo.Constraint(expr = model.x[1] * model.x[2] \u0026gt;= 1) # åˆ¶ç´„æ¡ä»¶ã‚’å®šç¾© opt = pyo.SolverFactory(\u0026#39;ipopt\u0026#39;) # æœ€é©åŒ–ã‚½ãƒ«ãƒã‚’è¨­å®š res = opt.solve(model) # æœ€é©åŒ–è¨ˆç®—ã‚’å®Ÿè¡Œ print(f\u0026#34;è©•ä¾¡é–¢æ•°ï¼š{model.OBJ()}\u0026#34;) print(f\u0026#34;x1: {model.x[1]()}\u0026#34;) print(f\u0026#34;x2: {model.x[2]()}\u0026#34;)   å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€æœ€é©å€¤ã‚’å¾—ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\n1 2 3  è©•ä¾¡é–¢æ•°ï¼š1.9999999825046202 x1: 0.999999995626155 x2: 0.999999995626155   ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è§£èª¬ ä»¥ä¸‹ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è©³ç´°ã‚’è¿°ã¹ã‚‹ã€‚\nå•é¡Œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ ã¾ãšã€ConcreteModelã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦å•é¡Œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\n1 2  model = pyo.ConcreteModel(name=\u0026#34;NLP sample\u0026#34;, doc=\u0026#34;2 variables, 1 constraints\u0026#34;)   pyomoã§ã¯å•é¡Œã‚’å®šç¾©ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ã«ã¯ã€æ¬¡ã®2ç¨®é¡ãŒã‚ã‚‹ãŒã€ã“ã“ã§ã¯ConcreteModelã‚’ç”¨ã„ãŸã€‚\n ConcreteModel: å…·ä½“çš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ãªãŒã‚‰ä½œæˆã™ã‚‹ AbstractModel: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å¾Œã§è¨­å®šã™ã‚‹  ã¾ãŸã€name, docã¨ã„ã†å¼•æ•°ã§ã¯ã€ãã‚Œãã‚Œãƒ¢ãƒ‡ãƒ«ã®åå‰ã¨èª¬æ˜ã‚’æ–‡å­—åˆ— (str) ã§è¨­å®šã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã‚‰ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®name, docãƒ¡ãƒ³ãƒå¤‰æ•°ã‚’å‘¼ã¶ã€‚\nä¾‹ï¼š\n1 2  \u0026gt;\u0026gt;\u0026gt; model.name \u0026#39;NLP sample\u0026#39;   å‹¿è«–ã€ConcreteModelã‚¯ãƒ©ã‚¹ã¯å¼•æ•°ã‚’ä¸ãˆã‚‹å¿…è¦ã¯ãªãã€å˜ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚‚æœ€é©åŒ–ã®çµæœã«ã¯å½±éŸ¿ã—ãªã„ã€‚\n1  model = pyo.ConcreteModel()   å¤‰æ•°ã®å®šç¾© æ¬¡ã«ã€Varã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚\n1  model.x = pyo.Var([1,2], domain=pyo.NonNegativeReals) # å¤‰æ•°ã‚’å®šç¾©   modelã«xã¨ã„ã£ãŸé©å½“ãªãƒ¡ãƒ³ãƒå¤‰æ•°ã‚’ä½œã‚Šã€Varã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã™ã‚‹ã€‚\nVarã‚¯ãƒ©ã‚¹ã®ç¬¬1å¼•æ•°ã«æ•°å€¤ã®ãƒªã‚¹ãƒˆã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã§ã€xã¯ãã®ãƒªã‚¹ãƒˆã¨åŒã˜é•·ã•ã®ãƒ™ã‚¯ãƒˆãƒ«ã«ãªã‚‹ã€‚\nã¾ãŸã€Varã‚¯ãƒ©ã‚¹ã®å¼•æ•°domainã¯å¤‰æ•°ã®ç¨®é¡ã‚’è¡¨ã™ã€‚Pyomoã§å®šç¾©å¯èƒ½ãªdomainã®ä¸€éƒ¨ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n Reals PositiveReals NonPositiveReals NegativeReals NonNegativeReals Integers PositiveIntegers NonPositiveIntegers  ã¾ãŸã€Varã‚¯ãƒ©ã‚¹ã®å¼•æ•°boundsã¨initializeã§ãã‚Œãã‚Œå¤‰æ•°ã®ç¯„å›²ã¨åˆæœŸå€¤ã‚’å®šç¾©ã§ãã‚‹ã€‚\nä¾‹ï¼š\n1 2  pyo.Var([1,2], domain=pyo.NonNegativeReals, bounds=(3, 6), initialize=5)   ç›®çš„é–¢æ•°ã®å®šç¾© æ¬¡ã«ã€Objectiveã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦ã€ç›®çš„é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚\n1 2  model.OBJ = pyo.Objective(expr = model.x[1]**2 + model.x[2]**2, sense = pyo.minimize) # ç›®çš„é–¢æ•°ã‚’å®šç¾©   å…ˆã»ã©å®šç¾©ã—ãŸå¤‰æ•°xã‚’ç”¨ã„ã¦ã€exprã«ç›®çš„é–¢æ•°ã‚’è¨˜è¿°ã™ã‚‹ã€‚\nã¾ãŸã€senseã§æœ€å°åŒ–å•é¡Œ(minimize)ã‹æœ€å¤§åŒ–å•é¡Œ(maximize)ã‹ã‚’å®šç¾©ã™ã‚‹ï¼ˆåˆæœŸå€¤ã¯minimizeï¼‰ã€‚\nç›®çš„é–¢æ•°ã‚’å®šç¾©ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«é–¢æ•°ã‚’å®šç¾©ã—ã¦ã€ruleã«æ¸¡ã™æ–¹æ³•ã‚‚ã‚ã‚‹ã€‚\n1 2 3 4 5  def ObjRule(model): return model.x[1]**2 + model.x[2]**2 model.OBJ = pyo.Objective(rule = ObjRule, sense = pyo.minimize)   ãªãŠã€ConcreteModelã§ã¯exprã‚’ä½¿ã†æ–¹æ³•ã¨ruleã‚’ä½¿ã†æ–¹æ³•ã®ã©ã¡ã‚‰ã‚‚ä½¿ãˆã‚‹ãŒã€AbstractModelã§ã¯ruleã‚’ä½¿ã†æ–¹æ³•ã—ã‹ä½¿ãˆãªã„ã€‚\nåˆ¶ç´„æ¡ä»¶ã®å®šç¾© Constraintã‚¯ãƒ©ã‚¹ã§åˆ¶ç´„æ¡ä»¶ã‚’è¨­å®šã™ã‚‹ã€‚\n1 2  model.Constraint = pyo.Constraint(expr = model.x[1] * model.x[2] \u0026gt;= 1) # åˆ¶ç´„æ¡ä»¶ã‚’å®šç¾©   ç­‰å¼åˆ¶ç´„ã¯==ã§ã€ä¸ç­‰å¼åˆ¶ç´„ã¯\u0026lt;=, \u0026gt;=ã§ãã‚Œãã‚Œè¨­å®šã™ã‚‹ã€‚\nObjectiveã‚¯ãƒ©ã‚¹ã®å ´åˆã¨åŒæ§˜ã«ã€exprã®ä»£ã‚ã‚Šã«ã€ruleã¨é–¢æ•°ã§åˆ¶ç´„æ¡ä»¶ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nä¾‹ï¼š\n1 2 3 4  def ConstRule(model): return model.x[1] * model.x[2] \u0026gt;= 1 model.Constraint1 = pyo.Constraint(rule = ConstRule)   ã‚½ãƒ«ãƒã®æŒ‡å®šã¨æœ€é©åŒ– æœ€å¾Œã«ã€ã‚½ãƒ«ãƒã‚’æŒ‡å®šã—ã¦æœ€é©åŒ–ã‚’è¡Œã†ã€‚\n1 2  opt = pyo.SolverFactory(\u0026#39;ipopt\u0026#39;) res = opt.solve(model)   SolverFactoryã§ã‚½ãƒ«ãƒã‚’æŒ‡å®šã™ã‚‹ã€‚ã“ã“ã§ã¯IPOPTã‚’ç”¨ã„ã‚‹ã€‚æ¬¡ã«ã€SolverFactoryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®solveãƒ¡ã‚½ãƒƒãƒ‰ã«modelã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€æœ€é©åŒ–ãŒè¡Œã‚ã‚Œã‚‹ã€‚resã«ã¯æœ€é©åŒ–ã®çµæœãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\nã¾ãŸã€solveã§tee=Trueã¨ã™ã‚‹ã¨ã€ã‚½ãƒ«ãƒã®å‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n1  res = opt.solve(model, tee=True)   æœ€é©åŒ–ã‚½ãƒ«ãƒã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®š æœ€é©åŒ–ã‚½ãƒ«ãƒï¼ˆã“ã“ã§ã¯IPOPTï¼‰ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«ã¯ã€æœ€é©åŒ–è¨ˆç®—ã®å‰ã«ã€SolverFactoryã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®optionså¤‰æ•°ã«è¾æ›¸å½¢å¼ã§æ¸¡ã™ã€‚\nä¾‹ï¼š\n1 2 3 4 5  opt = pyo.SolverFactory(\u0026#39;ipopt\u0026#39;) opt.options = {\u0026#34;print_level\u0026#34; : 4, \u0026#34;tol\u0026#34; : 1E-3} res = opt.solve(model, tee=True)   ã‚‚ã—ãã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚‚ã‚ˆã„ã€‚\n1 2 3 4 5  opt = pyo.SolverFactory(\u0026#39;ipopt\u0026#39;) opt.options[\u0026#34;print_level\u0026#34;] = 4 opt.options[\u0026#34;tol\u0026#34;] = 1E-3 res = opt.solve(model, tee=True)   ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€\n æœ€é©åŒ–è¨ˆç®—ã®ãƒ­ã‚°å‡ºåŠ›ã®è©³ç´°åº¦åˆã„ (print_level) ã‚’4ï¼ˆ0ï½12ã®ç¯„å›²ã€‚æ•°å­—ãŒå¤§ãã„ã»ã©è©³ç´°ã«ãªã‚‹ï¼‰ æœ€é©è§£ã®è¨±å®¹èª¤å·® (tol) ã‚’1E-3  ã¨è¨­å®šã—ã¦ã„ã‚‹ã€‚\nIPOPTã§è¨­å®šå¯èƒ½ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nIpopt: Ipopt Options\nä¸€è¦§ã®å½¢å¼ã§ç¢ºèªã—ãŸã„å ´åˆã«ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nhttps://www.coin-or.org/Bonmin/option_pages/options_list_ipopt.html\næœ€é©åŒ–çµæœã®è©•ä¾¡ æœ€é©åŒ–å¾Œã®å¤‰æ•°ã‚„ç›®çš„é–¢æ•°ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€modelã®å¤‰æ•°ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; model.OBJ() 1.9999999825046202 \u0026gt;\u0026gt;\u0026gt; model.x[1]() 0.999999995626155 \u0026gt;\u0026gt;\u0026gt; model.x[2]() 0.999999995626155   æœ€é©åŒ–å•é¡Œã®æ¦‚è¦ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€model.display(), model.pprint()ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  \u0026gt;\u0026gt;\u0026gt; print(model.display()) Model NLP sample Variables: x : Size=2, Index=x_index Key : Lower : Value : Upper : Fixed : Stale : Domain 1 : 0 : 0.999999995626155 : None : False : False : NonNegativeReals 2 : 0 : 0.999999995626155 : None : False : False : NonNegativeReals Objectives: OBJ : Size=1, Index=None, Active=True Key : Active : Value None : True : 1.9999999825046202 Constraints: Constraint1 : Size=1 Key : Lower : Body : Upper None : 1.0 : 0.9999999912523101 : None None   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  \u0026gt;\u0026gt;\u0026gt; print(model.pprint()) 2 variables, 1 constraints 1 Set Declarations x_index : Dim=0, Dimen=1, Size=2, Domain=None, Ordered=False, Bounds=(1, 2) [1, 2] 1 Var Declarations x : Size=2, Index=x_index Key : Lower : Value : Upper : Fixed : Stale : Domain 1 : 0 : 0.999999995626155 : None : False : False : NonNegativeReals 2 : 0 : 0.999999995626155 : None : False : False : NonNegativeReals 1 Objective Declarations OBJ : Size=1, Index=None, Active=True Key : Active : Sense : Expression None : True : minimize : x[1]**2 + x[2]**2 1 Constraint Declarations Constraint1 : Size=1, Index=None, Active=True Key : Lower : Body : Upper : Active None : 1.0 : x[1]*x[2] : +Inf : True 4 Declarations: x_index x OBJ Constraint1 None   æœ€é©åŒ–ã®çµæœã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€opt.solve()ã®æˆ»ã‚Šå€¤ã‚’printã§è¡¨ç¤ºã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  \u0026gt;\u0026gt;\u0026gt; print(res) Problem: - Lower bound: -inf Upper bound: inf Number of objectives: 1 Number of constraints: 1 Number of variables: 2 Sense: unknown Solver: - Status: ok Message: Ipopt 3.11.1\\x3a Optimal Solution Found Termination condition: optimal Id: 0 Error rc: 0 Time: 0.35607051849365234 Solution: - number of solutions: 0 number of solutions displayed: 0   å‚è€ƒ Pyomoã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã\nIPOPTã«åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ä¸»åŒå¯¾å†…ç‚¹æ³•ã®æ¦‚è¦ã€‚\néç·šå½¢è¨ˆç”»å•é¡Œã®ä¸»åŒå¯¾å†…ç‚¹æ³•\nPyomoã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\nPyomo Documentation 5.7.2 â€” Pyomo 5.7.2 documentation\nIPOPTã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\nIpopt: Documentation\nPythonã§ä½¿ãˆã‚‹æœ€é©åŒ–ãƒ„ãƒ¼ãƒ«ã®æ¯”è¼ƒ(Pyomo, PuLPãªã©ï¼‰ã€‚\nã‚½ãƒ«ãƒã®å°å…¥ã«ã¤ã„ã¦ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã€‚\nPython + Pyomoã«ã‚ˆã‚‹(éç·šå½¢)æ•°å€¤æœ€é©åŒ– - Easy to type\n","description":"æœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«Pyomoã¨ã€æœ€é©åŒ–ã‚½ãƒ«ãƒIPOPTã‚’ä½¿ã£ã¦éç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":42,"section":"posts","tags":["Pyomo","æœ€é©åŒ–"],"title":"Pyomoã¨IPOPTã§éç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã","uri":"https://helve-blog.com/posts/python/pyomo-nonlinear-programming/"},{"content":"ã¯ã˜ã‚ã« Pyomoã¨ã„ã†Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Pyomoã®å°å…¥æ–¹æ³•ã¨ã€å•é¡Œã®è¨˜è¿°æ–¹æ³•ã«ã¤ã„ã¦ç¤ºã™ã€‚\nPyomoã¯Pythonã§æ›¸ã‹ã‚ŒãŸæœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚\nä¸€èˆ¬ã«ã€é«˜é€Ÿãªæœ€é©åŒ–ã‚½ãƒ«ãƒã¯Cè¨€èªãªã©ã§æ›¸ã‹ã‚Œã¦ãŠã‚Šã€æœ€é©åŒ–å•é¡Œã‚’AMPLãªã©ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚æœ€é©åŒ–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ã¯ã€ï¼ˆPythonãªã©ï¼‰ä»–ã®è¨€èªã§è¨˜è¿°ã•ã‚ŒãŸå•é¡Œã‚’å¤‰æ›ã—ã¦æœ€é©åŒ–ã‚½ãƒ«ãƒã«æ¸¡ã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€Pyomoã‚’ä½¿ã£ã¦ç°¡å˜ãªç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ç¤ºã™ã€‚ãªãŠã€ã‚½ãƒ«ãƒã¯GLPK (GNU Linear Programming Kit) ã¨ã„ã†ç„¡å„Ÿã‚½ãƒ«ãƒã‚’ä½¿ã†ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   Pyomo 5.6.9   GLPK 4.65    ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Pyomoã¨æœ€é©åŒ–ã‚½ãƒ«ãƒGLPKã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚Pyomoã«ã¯ã‚½ãƒ«ãƒãŒå«ã¾ã‚Œã¦ã„ãªã„ã®ã§ã€åˆ¥é€”ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\ncondaç’°å¢ƒã®å ´åˆã¯æ¬¡ã®é€šã‚Šã€‚\nconda install -c conda-forge pyomo\rconda install -c conda-forge glpk\rpipç’°å¢ƒã®å ´åˆã¯æ¬¡ã®é€šã‚Šã€‚\npip install pyomo\rpip install glpk\rãªãŠã€GLPKã¯ç·šå½¢è¨ˆç”»å•é¡Œ (LP, Linear Programming) ã¨æ··åˆæ•´æ•°å•é¡Œ (MIP, Mixed Integer Programming)ã‚’è§£ããŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚\nGLPKã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\n å˜ä½“æ³•ãƒ»åŒå¯¾å˜ä½“æ³• (primal and dual simplex method) ä¸»åŒå¯¾å†…ç‚¹æ³• (primal-dual interior-point method) åˆ†æé™å®šæ³• (branch-and-cut method)  æœ¬æ¥ã€GLPKã§æ•°ç†è¨ˆç”»å•é¡Œã‚’è§£ãå ´åˆã«ã¯ã€GNU MathProgã¨ã„ã†è¨€èªã§è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã—ã‹ã—ã€Pyomoã‚’ä½¿ã†ã“ã¨ã§ã€Pythonä¸Šã§å•é¡Œã‚’è¨˜è¿°ã—ã¦GLPKã«æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã€‚\nå¯¾è±¡ã¨ã™ã‚‹ç·šå½¢è¨ˆç”»å•é¡Œ ä»¥ä¸‹ã®æœ€å°åŒ–å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$ \\begin{array}{ll} \\text{minimize} \u0026amp; -5x_1-4x_2 \\\\ \\text{subject to} \u0026amp; 5x_1+2x_2 \\le 30 \\\\ \u0026amp; x_1 + 2x_2 \\le 14 \\\\ \u0026amp; x_1 \\ge 0, x_2 \\ge 0 \\end{array} $\nå›³ç¤ºã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€$(x_1, x_2)=(4, 5)$ã§æœ€å°å€¤$ -40$ã‚’ã¨ã‚‹ã€‚\nPyomoã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ ä¸Šè¨˜ã®ç·šå½¢è¨ˆç”»å•é¡Œã‚’Pyomoã‚’ä½¿ã£ã¦è¨˜è¿°ã—ã€æœ€é©åŒ–ã‚’å®Ÿè¡Œã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  import pyomo.environ as pyo model = pyo.ConcreteModel(name=\u0026#34;LP sample\u0026#34;, doc=\u0026#34;2 variables, 2 constraints\u0026#34;) model.x1 = pyo.Var(domain=pyo.NonNegativeReals) model.x2 = pyo.Var(domain=pyo.NonNegativeReals) model.OBJ = pyo.Objective(expr = -5*model.x1 -4*model.x2, sense = pyo.minimize) model.Constraint1 = pyo.Constraint(expr = 5*model.x1 + 2*model.x2 \u0026lt;= 30) model.Constraint2 = pyo.Constraint(expr = model.x1 + 2*model.x2 \u0026lt;= 14) opt = pyo.SolverFactory(\u0026#39;glpk\u0026#39;) res = opt.solve(model) print(f\u0026#34;è©•ä¾¡é–¢æ•°ï¼š{model.OBJ()}\u0026#34;) print(f\u0026#34;x1: {model.x1()}\u0026#34;) print(f\u0026#34;x2: {model.x2()}\u0026#34;)   å®Ÿè¡Œçµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€æœ€é©å€¤ã‚’å¾—ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\n1 2 3  è©•ä¾¡é–¢æ•°ï¼š-40.0 x1: 4.0 x2: 5.0   ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è§£èª¬ ä»¥ä¸‹ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è©³ç´°ã‚’è¿°ã¹ã‚‹ã€‚\nå•é¡Œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ ã¾ãšã€ConcreteModelã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦å•é¡Œã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\n1 2  model = pyo.ConcreteModel(name=\u0026#34;LP sample\u0026#34;, doc=\u0026#34;2 variables, 2 constraints\u0026#34;)   pyomoã§ã¯å•é¡Œã‚’å®šç¾©ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ã«ã¯ã€æ¬¡ã®2ç¨®é¡ãŒã‚ã‚‹ã€‚\n ConcreteModel: å…·ä½“çš„ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ãªãŒã‚‰ä½œæˆã™ã‚‹ AbstractModel: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯å¾Œã§è¨­å®šã™ã‚‹  ã“ã“ã§ã¯ConcreteModelã‚’ç”¨ã„ãŸã€‚\nã¾ãŸã€name, docã¨ã„ã†å¼•æ•°ã§ã¯ã€ãã‚Œãã‚Œãƒ¢ãƒ‡ãƒ«ã®åå‰ã¨èª¬æ˜ã‚’æ–‡å­—åˆ— (str) ã§è¨­å®šã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã‚‰ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®name, docãƒ¡ãƒ³ãƒå¤‰æ•°ã‚’å‘¼ã¶ã€‚\nä¾‹ï¼š\n1 2  \u0026gt;\u0026gt;\u0026gt; model.name \u0026#39;LP sample\u0026#39;   å‹¿è«–ã€name, docã¯è¨­å®šã™ã‚‹å¿…è¦ã¯ãªãã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚‚è‰¯ã„ã€‚\n1  model = pyo.ConcreteModel()   å¤‰æ•°ã®å®šç¾© æ¬¡ã«ã€Varã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚\n1 2  model.x1 = pyo.Var(domain=pyo.NonNegativeReals) model.x2 = pyo.Var(domain=pyo.NonNegativeReals)   modelã«x1, x2ã¨ã„ã£ãŸé©å½“ãªå¤‰æ•°ã‚’ä½œã‚Šã€Varã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã™ã‚‹ã€‚\nVarã‚¯ãƒ©ã‚¹ã®å¼•æ•°domainã¯å¤‰æ•°ã®ç¨®é¡ã‚’è¡¨ã™ã€‚Pyomoã§å®šç¾©å¯èƒ½ãªdomainã®ä¸€éƒ¨ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n Reals PositiveReals NonPositiveReals NegativeReals NonNegativeReals Integers PositiveIntegers NonPositiveIntegers  ã¾ãŸã€Varã‚¯ãƒ©ã‚¹ã®å¼•æ•°boundsã¨initializeã§ãã‚Œãã‚Œå¤‰æ•°ã®ç¯„å›²ã¨åˆæœŸå€¤ã‚’å®šç¾©ã§ãã‚‹ã€‚\nä¾‹ï¼š\n1 2  pyo.Var(domain=pyo.NonNegativeReals, bounds=(3, 6), initialize=5)   ç›®çš„é–¢æ•°ã®å®šç¾© æ¬¡ã«ã€Objectiveã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦ç›®çš„é–¢æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚\n1 2  model.OBJ = pyo.Objective(expr = -5*model.x1 -4*model.x2, sense = pyo.minimize)   å…ˆã»ã©å®šç¾©ã—ãŸå¤‰æ•°x1, x2ã‚’ç”¨ã„ã¦ã€exprã«ç›®çš„é–¢æ•°ã‚’è¨˜è¿°ã™ã‚‹ã€‚\nã¾ãŸã€senseã§æœ€å°åŒ–å•é¡Œ(minimize)ã‹æœ€å¤§åŒ–å•é¡Œ(maximize)ã‹ã‚’å®šç¾©ã™ã‚‹ï¼ˆåˆæœŸå€¤ã¯minimizeï¼‰ã€‚\nç›®çš„é–¢æ•°ã‚’å®šç¾©ã™ã‚‹æ–¹æ³•ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«é–¢æ•°ã‚’å®šç¾©ã—ã¦ruleã«æ¸¡ã™æ–¹æ³•ã‚‚ã‚ã‚‹ã€‚\n1 2 3 4 5  def ObjRule(model): return -5*model.x1 -4*model.x2 model.OBJ = pyo.Objective(rule = ObjRule, sense = pyo.minimize)   ãªãŠã€ConcreteModelã§ã¯exprã¨ruleã®ã©ã¡ã‚‰ã‚‚ä½¿ãˆã‚‹ãŒã€AbstractModelã§ã¯ruleã—ã‹ä½¿ãˆãªã„ã€‚\nåˆ¶ç´„æ¡ä»¶ã®å®šç¾© Constraintã‚¯ãƒ©ã‚¹ã§åˆ¶ç´„æ¡ä»¶ã‚’è¨­å®šã™ã‚‹ã€‚\n1 2  model.Constraint1 = pyo.Constraint(expr = 5*model.x1 + 2*model.x2 \u0026lt;= 30) model.Constraint2 = pyo.Constraint(expr = model.x1 + 2*model.x2 \u0026lt;= 14)   ç­‰å¼åˆ¶ç´„ã¯==ã§ã€ä¸ç­‰å¼åˆ¶ç´„ã¯\u0026lt;=, \u0026gt;=ã§ãã‚Œãã‚Œè¨­å®šã™ã‚‹ã€‚\nç›®çš„é–¢æ•°ã¨åŒæ§˜ã«ã€exprã®ä»£ã‚ã‚Šã«ruleã¨é–¢æ•°ã§åˆ¶ç´„æ¡ä»¶ã‚’å®šç¾©ã§ãã‚‹ã€‚\nä¾‹ï¼š\n1 2 3 4  def ConstRule1(model): return 5*model.x1 + 2*model.x2 \u0026lt;= 30 model.Constraint1 = pyo.Constraint(rule = ConstRule1)   ã‚½ãƒ«ãƒã®æŒ‡å®šã¨æœ€é©åŒ– æœ€å¾Œã«ã€ã‚½ãƒ«ãƒã‚’æŒ‡å®šã—ã¦æœ€é©åŒ–ã‚’è¡Œã†ã€‚\n1 2  opt = pyo.SolverFactory(\u0026#39;glpk\u0026#39;) res = opt.solve(model)   SolverFactoryã§ã‚½ãƒ«ãƒã‚’æŒ‡å®šã—ã€solveãƒ¡ã‚½ãƒƒãƒ‰ã§æœ€é©åŒ–ã‚’è¡Œã†ã€‚resã«ã¯æœ€é©åŒ–ã®çµæœãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\nã¾ãŸã€solveã§tee=Trueã¨ã™ã‚‹ã¨ã€ã‚½ãƒ«ãƒã®å‡ºåŠ›ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n1  res = opt.solve(model, tee=True)   æœ€é©åŒ–çµæœã®è©•ä¾¡ æœ€é©åŒ–å¾Œã®å¤‰æ•°ã‚„ç›®çš„é–¢æ•°ã®å€¤ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€modelã®å¤‰æ•°ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; model.OBJ() -40.0 \u0026gt;\u0026gt;\u0026gt; model.x1() 4.0 \u0026gt;\u0026gt;\u0026gt; model.x2() 5.0   æœ€é©åŒ–å•é¡Œã®æ¦‚è¦ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€model.display(), model.pprint()ãªã©ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  \u0026gt;\u0026gt;\u0026gt; print(model.display()) Model LP sample Variables: x1 : Size=1, Index=None Key : Lower : Value : Upper : Fixed : Stale : Domain None : 0 : 4.0 : None : False : False : NonNegativeReals x2 : Size=1, Index=None Key : Lower : Value : Upper : Fixed : Stale : Domain None : 0 : 5.0 : None : False : False : NonNegativeReals Objectives: OBJ : Size=1, Index=None, Active=True Key : Active : Value None : True : -40.0 Constraints: Constraint2 : Size=1 Key : Lower : Body : Upper None : None : 14.0 : 14.0 Constraint1 : Size=1 Key : Lower : Body : Upper None : None : 30.0 : 30.0 None   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  \u0026gt;\u0026gt;\u0026gt; print(model.pprint()) 2 variables, 2 constraints 2 Var Declarations x1 : Size=1, Index=None Key : Lower : Value : Upper : Fixed : Stale : Domain None : 0 : 4.0 : None : False : False : NonNegativeReals x2 : Size=1, Index=None Key : Lower : Value : Upper : Fixed : Stale : Domain None : 0 : 5.0 : None : False : False : NonNegativeReals 1 Objective Declarations OBJ : Size=1, Index=None, Active=True Key : Active : Sense : Expression None : True : minimize : -5*x1 - 4*x2 2 Constraint Declarations Constraint1 : Size=1, Index=None, Active=True Key : Lower : Body : Upper : Active None : -Inf : 5*x1 + 2*x2 : 30.0 : True Constraint2 : Size=1, Index=None, Active=True Key : Lower : Body : Upper : Active None : -Inf : x1 + 2*x2 : 14.0 : True 5 Declarations: x1 x2 OBJ Constraint2 Constraint1 None   ã‚½ãƒ«ãƒã®çµæœã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€opt.solve()ã®æˆ»ã‚Šå€¤ã‚’printã§è¡¨ç¤ºã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  \u0026gt;\u0026gt;\u0026gt; print(res) Problem: - Name: unknown Lower bound: -40.0 Upper bound: -40.0 Number of objectives: 1 Number of constraints: 3 Number of variables: 3 Number of nonzeros: 5 Sense: minimize Solver: - Status: ok Termination condition: optimal Statistics: Branch and bound: Number of bounded subproblems: 0 Number of created subproblems: 0 Error rc: 0 Time: 0.17183566093444824 Solution: - number of solutions: 0 number of solutions displayed: 0   å‚è€ƒ Pyomoã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\nPyomo Documentation 5.6.9 â€” Pyomo 5.6.9 documentation\nGLPKã«ã¤ã„ã¦\nGLPK - GNU Project - Free Software Foundation (FSF)\nå‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸæ—¥æœ¬èªã®è¨˜äº‹\nPythonã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãå³æˆ¦åŠ›ã‚³ãƒ¼ãƒ‰ with Pyomo â€“ Takala\u0026rsquo;s Memory\nPython + Pyomoã«ã‚ˆã‚‹(éç·šå½¢)æ•°å€¤æœ€é©åŒ– - Easy to type\n","description":"Pyomoã¨ã„ã†Pythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚æœ¬è¨˜äº‹ã§ã¯ã€Pyomoã®å°å…¥æ–¹æ³•ã¨ã€å•é¡Œã®è¨˜è¿°æ–¹æ³•ã«ã¤ã„ã¦ç¤ºã™ã€‚","id":43,"section":"posts","tags":["Pyomo","æœ€é©åŒ–"],"title":"Pyomoã§ç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ã","uri":"https://helve-blog.com/posts/python/pyomo-linear-programming/"},{"content":"ã¯ã˜ã‚ã« Pandasã®Timestampã‚¯ãƒ©ã‚¹ã§ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ‰±ã†æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚„ã€ç•°ãªã‚‹ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nTimestampã‚¯ãƒ©ã‚¹ã®åŸºæœ¬ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nPandasã®Timestampã§æ™‚åˆ»ã‚’æ‰±ã†\nä»¥é™ã§ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚ãªãŠã€pytzã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ‰±ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚\n1 2  import pandas as pd import pytz   ã¾ãŸã€ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   Pandas 0.25.1   pytz 2019.3    Timestampã‚¯ãƒ©ã‚¹ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ Timestampã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®æƒ…å ±ã‚’æŒã£ã¦ã„ãªã„çŠ¶æ…‹ã¨ã€æŒã£ã¦ã„ã‚‹çŠ¶æ…‹ã‚’å–ã‚Šå¾—ã‚‹ã€‚Pandasã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ã¯ã€å‰è€…ã‚’tz-native, å¾Œè€…ã‚’tz-awareã¨å‘¼ã¶ã€‚\nä¸¡ç¤¾ã®é•ã„ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;2020/03/14\u0026#34;) # ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’æŒãŸãªã„å ´åˆ Timestamp(\u0026#39;2020-03-14 00:00:00\u0026#39;) \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;2020/03/14\u0026#34;, tz=\u0026#34;Asia/Tokyo\u0026#34;) # ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’æŒã¤å ´åˆ Timestamp(\u0026#39;2020-03-14 00:00:00+0900\u0026#39;, tz=\u0026#39;Asia/Tokyo\u0026#39;)   ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒã£ãŸTimestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒã£ãŸTimestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã™ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ãŒã€ã“ã“ã§ã¯ä»¥ä¸‹ã®2ã¤ã‚’æ‰±ã†ã€‚\n pd.Timestampã®tzå¼•æ•°ã«æ–‡å­—åˆ—ã§ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ¸¡ã™ã€‚ pd.Timestampã®tzå¼•æ•°ã«pytz.timezoneã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ã€‚  æ–‡å­—åˆ—ã§è¨­å®šã™ã‚‹å ´åˆ pd.Timestampã®tzå¼•æ•°ã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¡¨ã™æ–‡å­—åˆ—ã‚’ä¸ãˆã‚‹ã¨ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;2020/03/14\u0026#34;, tz=\u0026#34;Asia/Tokyo\u0026#34;) Timestamp(\u0026#39;2020-03-14 00:00:00+0900\u0026#39;, tz=\u0026#39;Asia/Tokyo\u0026#39;)   æŒ‡å®šå¯èƒ½ãªã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æ–‡å­—åˆ—ã¯pytz.all_timezonesã§ç¢ºèªã§ãã‚‹ã€‚\nã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚éƒ½å¸‚åã‚„å›½åã€ã¾ãŸã¯ä¸€èˆ¬ã«è‰¯ãä½¿ã‚ã‚Œã‚‹ç•¥ç§°ãŒã‚ã¦ã¯ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\n   æ–‡å­—åˆ— UTCã¨ã®æ™‚å·® å‚™è€ƒ     \u0026lsquo;America/New_York\u0026rsquo; -5 ãƒ‹ãƒ¥ãƒ¼ãƒ¨ãƒ¼ã‚¯   Asia/Tokyo' +9 æ±äº¬   \u0026lsquo;EST\u0026rsquo; -5 ç±³å›½æ±éƒ¨æ™‚é–“   \u0026lsquo;Europe/Berlin\u0026rsquo; +1* ãƒ™ãƒ«ãƒªãƒ³   \u0026lsquo;Japan\u0026rsquo; +9 æ—¥æœ¬   \u0026lsquo;UCT\u0026rsquo; 0 ä¸–ç•Œæ¨™æº–æ™‚    * å¤æ™‚é–“ã®å ´åˆã¯+2\npytz.timezoneã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§è¨­å®šã™ã‚‹å ´åˆ pytz.timezoneã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¡¨ã™æ–‡å­—åˆ—ã‚’ä¸ãˆã€ã•ã‚‰ã«pd.Timestampã®tzå¼•æ•°ã«ä¸ãˆã‚‹ã¨ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã‚‹ã€‚\n1 2 3  \u0026gt;\u0026gt;\u0026gt; jst = pytz.timezone(\u0026#34;Asia/Tokyo\u0026#34;) \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;2020/03/14\u0026#34;, tz=jst) Timestamp(\u0026#39;2020-03-14 00:00:00+0900\u0026#39;, tz=\u0026#39;Asia/Tokyo\u0026#39;)   ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒã£ãŸç¾åœ¨æ™‚åˆ»ã‚’å–å¾— ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒã¤ç¾åœ¨æ™‚åˆ»ã‚’å–å¾—ã™ã‚‹å ´åˆã¯ã€pd.Timestamp.now()ã®tzå¼•æ•°ã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’æ¸¡ã™ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; pd.Timestamp.now(tz=\u0026#34;UTC\u0026#34;) Timestamp(\u0026#39;2020-03-14 05:22:50.800153+0000\u0026#39;, tz=\u0026#39;UTC\u0026#39;)   ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æƒ…å ±ã®å–å¾— Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®tzinfoå±æ€§ã‹ã‚‰pytz.timezoneã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã§ãã‚‹ã€‚ã•ã‚‰ã«ã€pytz.timezoneã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®zoneå±æ€§ã‹ã‚‰ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æ–‡å­—åˆ—ã‚’å–å¾—ã§ãã‚‹ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; t = pd.Timestamp(\u0026#34;2020/03/14\u0026#34;, tz=\u0026#34;Asia/Tokyo\u0026#34;) \u0026gt;\u0026gt;\u0026gt; t.tzinfo \u0026lt;DstTzInfo \u0026#39;Asia/Tokyo\u0026#39; JST+9:00:00 STD\u0026gt; \u0026gt;\u0026gt;\u0026gt; t.tzinfo.zone \u0026#39;Asia/Tokyo\u0026#39;   ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®å¤‰æ› ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒã‚ã‚‹Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç•°ãªã‚‹ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«å¤‰æ›ã™ã‚‹ã«ã¯ã€tz_convertãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚tz_convertã®å¼•æ•°ã¯æ–‡å­—åˆ—ã§ã‚‚pytz.timezoneã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚è‰¯ã„ã€‚\n1 2 3  \u0026gt;\u0026gt;\u0026gt; t = pd.Timestamp(\u0026#34;2020/03/14\u0026#34;, tz=\u0026#34;Asia/Tokyo\u0026#34;) \u0026gt;\u0026gt;\u0026gt; t.tz_convert(\u0026#34;UTC\u0026#34;) Timestamp(\u0026#39;2020-03-13 15:00:00+0000\u0026#39;, tz=\u0026#39;UTC\u0026#39;)   ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒã‚ã‚‹Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æƒ…å ±ã‚’å‰Šé™¤ã™ã‚‹å ´åˆã€2ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚UCTæ™‚åˆ»ã«å¤‰æ›ã—ã¦ã‹ã‚‰ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ã€tz_convertãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«Noneã‚’ä¸ãˆã‚‹ã€‚ã¾ãŸã€ç¾åœ°æ™‚åˆ»ã®ã¾ã¾ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ã€tz_localizeãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«Noneã‚’ä¸ãˆã‚‹ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; t = pd.Timestamp(\u0026#34;2020/03/14\u0026#34;, tz=\u0026#34;Asia/Tokyo\u0026#34;) \u0026gt;\u0026gt;\u0026gt; t.tz_convert(None) Timestamp(\u0026#39;2020-03-13 15:00:00\u0026#39;) \u0026gt;\u0026gt;\u0026gt; t.tz_localize(None) Timestamp(\u0026#39;2020-03-14 00:00:00\u0026#39;)   ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒãªã„Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã™ã‚‹ã«ã¯ã€tz_localizeãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚tz_localizeã®å¼•æ•°ã¯æ–‡å­—åˆ—ã§ã‚‚pytz.timezoneã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚è‰¯ã„ã€‚\n1 2 3  \u0026gt;\u0026gt;\u0026gt; t = pd.Timestamp(\u0026#34;2020/03/14\u0026#34;) \u0026gt;\u0026gt;\u0026gt; t.tz_localize(\u0026#34;Asia/Tokyo\u0026#34;) Timestamp(\u0026#39;2020-03-14 00:00:00+0900\u0026#39;, tz=\u0026#39;Asia/Tokyo\u0026#39;)   ä»¥ä¸Šã®å¤‰æ›ã‚’ã¾ã¨ã‚ã‚‹ã¨ã€ä»¥ä¸‹ã®è¡¨ã¨ãªã‚‹ã€‚\n   å¤‰æ›å‰/å¤‰æ›å¾Œ tzã‚ã‚Š tzãªã—     tzã‚ã‚Š tz_convert tz_convert/tz_localize   tzãªã— tz_localize -    å‚è€ƒ pandas.Timestamp â€” pandas 1.2.0 documentation\n","description":"Pandasã®Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚„ã€ç•°ãªã‚‹ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«å¤‰æ›ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚","id":44,"section":"posts","tags":["Python","Pandas"],"title":"Pandasã®Timestampã§ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ‰±ã†","uri":"https://helve-blog.com/posts/python/pandas-timestamp-timezone/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ã€Atomã‚’ä½¿ã£ã¦ä»¥ä¸‹ã®æŠ€è¡“æ–‡æ›¸ã‚’markdownã§æ›¸ããŸã‚ã®ç’°å¢ƒè¨­å®šæ–¹æ³•ã‚’ç¤ºã™ã€‚\n æ•°å¼ã‚’è¨˜è¿°ã§ãã‚‹ å›³ã€è¡¨ã«è‡ªå‹•ã§ç•ªå·ã‚’æŒ¯ã‚‹ A4ç¸¦é•·ã®ç”¨ç´™ã«å°åˆ·ã™ã‚‹  ä¸€æ–¹ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã¯å¯¾è±¡ã¨ã—ãªã„ã€‚\n å¼•ç”¨æ–‡çŒ®ã®ç®¡ç† æ–‡ç« ä¸­ã‹ã‚‰å›³ã€è¡¨ã«å¯¾ã—ã¦è‡ªå‹•ã§ãƒªãƒ³ã‚¯ã‚’å¼µã‚‹ æ•°å¼ã«è‡ªå‹•ã§ç•ªå·ã‚’æŒ¯ã‚‹  ã¾ãŸã€Atomã§ã¯markdownæ–‡æ›¸ã®HTMLå‡ºåŠ›ã¾ã§ã—ã‹å‡ºæ¥ãªã„ã€‚\nãã®ãŸã‚ã€PDFãŒå¿…è¦ã§ã‚ã‚Œã°ã€Chromeãªã©ã®é©å½“ãªãƒ–ãƒ©ã‚¦ã‚¶ã§å¤‰æ›ã™ã‚‹ã€‚\nç’°å¢ƒ æœ¬è¨˜äº‹ã§æ¤œè¨¼ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚ãŸã ã—ã€ä¸‹3ã¤ã¯å¿…é ˆã§ã¯ãªã„ã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³ å‚™è€ƒ     Atom 1.45.0    markdown-preview-plus 3.11.5 markdownã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤º   markdown-toc 0.4.2 ç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆ   document-outline 2.1.2 ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ã‚’è¡¨ç¤º   japanese-menu 1.15.0 Atomã‚’æ—¥æœ¬èªåŒ–    ã¾ãŸã€OSã¯Windows10ã§ã‚ã‚‹ã€‚\nAtomã®ç’°å¢ƒæº–å‚™ å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®šã‚’è¡Œã†ã€‚\nAtomã«ã¯ã€æ¨™æº–ã§markdownã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ãŸã‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸markdown-previewãŒã‚ã‚‹ãŒã€æ•°å¼ã‚’è¡¨ç¤ºã§ããªã„ãŸã‚markdown-preview-plusã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ãªãŠã€markdown-preview-plusã‚’å…¥ã‚Œã‚‹ã¨ã€markdown-previewãŒè‡ªå‹•ã§ç„¡åŠ¹ã«ãªã‚‹ã€‚\nã¾ãŸã€markdown-tocã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥ã‚Œã‚‹ã¨ã€ç›®æ¬¡ã‚’è‡ªå‹•ã§ç”Ÿæˆã§ãã‚‹ã€‚\nã•ã‚‰ã«ã€document-outlineã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã¯ã€markdownã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ä¾¿åˆ©ã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€markdownã‚’HTMLè¡¨ç¤ºã™ã‚‹ã¨ãã®ä½“è£ã‚’æ•´ãˆã‚‹ã€‚ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã€â†’ã€Œã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã€ã‚’æŠ¼ã™ã¨ã€style.lessã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒé–‹ãã®ã§ã€ãã‚Œã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74  // for markdown-preview-plus body{ counter-reset: figcnt; counter-reset: tablecnt; h1, h2, h3, h4, h5 { font-weight: normal; border-bottom-style: hidden !important; } h1 { text-align: center; counter-reset: h2cnt; } h2 { font-size: 25px; margin: 50px auto 25px; counter-reset: h3cnt; } h3 { font-size: 18px; margin-bottom: 10px; counter-reset: h4cnt; } h2::before { counter-increment: h2cnt; content: counter(h2cnt) \u0026#34;. \u0026#34;; } h3::before { counter-increment: h3cnt; content: counter(h2cnt) \u0026#34;-\u0026#34; counter(h3cnt) \u0026#34;. \u0026#34;; } h4::before { counter-increment: h4cnt; content: counter(h2cnt) \u0026#34;-\u0026#34; counter(h3cnt) \u0026#34;-\u0026#34; counter(h4cnt) \u0026#34;. \u0026#34;; } p { margin-bottom: 0em !important; // æ®µè½å¾Œã®ç©ºç™½ã‚’ãªãã™ \u0026amp;.figtitle::before { counter-increment: figcnt; content: \u0026#34;å›³\u0026#34; counter(figcnt) \u0026#34; \u0026#34;; } \u0026amp;.tabletitle::before { counter-increment: tablecnt; content: \u0026#34;è¡¨\u0026#34; counter(figcnt) \u0026#34; \u0026#34;; } } hr { margin: 50px 0; background-color: transparent; \u0026amp;:after{ content: \u0026#34;\u0026#34;; display: block; /* border-top-style: ridge; */ } \u0026amp;.pb { // \u0026lt;hr class=\u0026#34;pb\u0026#34;\u0026gt;ã‚’å…¥ã‚Œã‚‹äº‹ã§ã€ // ãƒ—ãƒªãƒ³ãƒˆæ™‚ã®æ”¹ãƒšãƒ¼ã‚¸ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ page-break-after: always; \u0026amp;:after { display: none; } } } // ãƒ†ã‚­ã‚¹ãƒˆã®ä¸­å¤®æƒãˆ .center { text-align: center; \u0026amp;:extend(.margin-clear); } }   ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®ä½œæˆã«ã¯ä»¥ä¸‹ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸã€‚\nCSSã§è¦‹å‡ºã—è¦ç´ (h1, h2\u0026hellip;)ã®å‰ã«è‡ªå‹•ã§æ¡ç•ªã™ã‚‹æ–¹æ³• - Qiita\nAtomã‚¨ãƒ‡ã‚£ã‚¿ã®Markdown Previewã®CSSã‚’å®Ÿå‹™æ›¸é¡çš„ã«èª¿æ•´ã™ã‚‹ | å¤§çŸ³åˆ¶ä½œãƒ–ãƒ­ã‚°\nãªãŠã€style.lessã¯CSSã‚’å®šç¾©ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚‹ï¼ˆå³å¯†ã«ã¯ã€LESSã¨å‘¼ã°ã‚Œã‚‹CSSã‚’æ‹¡å¼µã—ãŸè¨€èªï¼‰ã€‚CSSã¯HTMLã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’æ•´ãˆã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚å¾Œã»ã©ã€ä½œæˆã—ãŸmarkdownã‚’HTMLå‡ºåŠ›ã™ã‚‹ã¨ãã«ã€åŒã˜HTMLãƒ•ã‚¡ã‚¤ãƒ«å†…ã«style.lessã§å®šç¾©ã—ãŸãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒä¸€ç·’ã«å‡ºåŠ›ã•ã‚Œã‚‹ã€‚\nmarkdownã§æ–‡æ›¸ã‚’æ›¸ã å‡ºåŠ›ã•ã‚Œã‚‹æ–‡æ›¸ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚æ®µè½ã®å¾Œã®ç©ºç™½è¡Œã‚’ãªãã—ã¦ã„ã‚‹ã€‚\nä»¥ä¸‹ã®ãƒ«ãƒ¼ãƒ«ã§markdownã‚’æ›¸ã\n æ–‡æ›¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯#1ã¤ã¨ã™ã‚‹ ä»¥ä¸‹ã€ç« ã¯##, ç¯€ã¯###, \u0026hellip;ã¨ãªã‚‹ã€‚ ä¸­å¤®æƒãˆã®æ–‡ã¯\u0026lt;p class=\u0026quot;center\u0026quot;\u0026gt;hoge\u0026lt;/p\u0026gt;ã®ã‚ˆã†ã«æ›¸ã å›³ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯\u0026lt;p class=\u0026quot;figtitle\u0026quot;\u0026gt;piyo\u0026lt;/p\u0026gt;ã®ã‚ˆã†ã«æ›¸ãã¨ã€é †ã«ç•ªå·ãŒä»˜ä¸ã•ã‚Œã‚‹ è¡¨ã®ã‚¿ã‚¤ãƒˆãƒ«ã¯\u0026lt;p class=\u0026quot;tabletitle\u0026quot;\u0026gt;piyo\u0026lt;/p\u0026gt;ã®ã‚ˆã†ã«æ›¸ãã¨ã€é †ã«ç•ªå·ãŒä»˜ä¸ã•ã‚Œã‚‹  ãã®ä»–ã€æ•°å¼ã‚„å›³ã€è¡¨ã€ãƒªãƒ³ã‚¯ã®æŒ¿å…¥ã¯ã€markdownã®é€šå¸¸ã®è¨˜æ³•ã«å¾“ã†ã€‚\nã¾ãŸã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã¯ã€ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€â†’ã€ŒMarkdown Preview Plusã€â†’ã€ŒToggle Previewã€ã‚’é¸æŠã™ã‚‹ã€‚ã¾ãŸã¯ã€Ctrl+Shift+Mã‚’æŠ¼ã™ï¼ˆä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã¨ç«¶åˆã—ã¦ã„ãªã„å ´åˆï¼‰ã€‚\nç›®æ¬¡ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã«ã¯ã€ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€â†’ã€Œmarkdown-tocã€â†’ã€ŒToggleã€ã‚’é¸æŠã™ã‚‹ã€‚ãŸã ã—ã€ç« ç•ªå·ã¯è¡¨ç¤ºã•ã‚Œãªã„ã“ã¨ã«æ³¨æ„ã€‚\nã•ã‚‰ã«ã€æ–‡æ›¸ä¸­ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‹ã‚‰è¨­å®šã§ãã‚‹ã€‚\n ã€Œãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã€â†’ã€ŒMarkdown Preview Plusã€â†’ã€ŒSelect preview syntax themeã€ã‚’ã‚¯ãƒªãƒƒã‚¯ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸Šã§å³ã‚¯ãƒªãƒƒã‚¯ã—ã€ã€ŒChange syntax themeã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã€‚  æ–‡æ›¸ä¸­ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ³ãƒˆã¯ã€Atomã®è¨­å®šãŒå¼•ãç¶™ãŒã‚Œã‚‹ã€‚Atomã®ãƒ•ã‚©ãƒ³ãƒˆã¯ã€ã€Œè¨­å®šã€â†’ã€Œã‚¨ãƒ‡ã‚£ã‚¿è¨­å®šã€ã§font-familyã¨ã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚\nMenlo, Consolas, DejaVu Sans Mono, monospace ã“ã®å ´åˆã€HTMLã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3  \u0026lt;code style=\u0026#34;font-family: Menlo, Consolas, \u0026amp;quot;DejaVu Sans Mono\u0026amp;quot;, monospace;\u0026#34;\u0026gt; hoge \u0026lt;/code\u0026gt;   HTMLå‡ºåŠ›ã™ã‚‹ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸Šã§å³ã‚¯ãƒªãƒƒã‚¯ã—ã€ã€ŒSave As \u0026hellip;ã€ã‹ã‚‰HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã™ã‚‹ã€‚PDFã«å¤‰æ›ã—ãŸã„å ´åˆã¯ã€Chromeãªã©ã®é©å½“ãªãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã€ã€Œå°åˆ·ã€â†’ã€ŒPDFã«ä¿å­˜ã€ã¨ã™ã‚‹ã€‚\nå‚è€ƒ ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸï¼ˆãŸã ã—ã€ä¸¡ã‚µã‚¤ãƒˆã¨ã‚‚markdown-preview-plusã§ã¯ãªãã€markdown-previewã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®è¨­å®šã‚’å°‘ã—å¤‰æ›´ã—ã¦ã„ã‚‹ï¼‰ã€‚\nCSSã§è¦‹å‡ºã—è¦ç´ (h1, h2\u0026hellip;)ã®å‰ã«è‡ªå‹•ã§æ¡ç•ªã™ã‚‹æ–¹æ³• - Qiita\nAtomã‚¨ãƒ‡ã‚£ã‚¿ã®Markdown Previewã®CSSã‚’å®Ÿå‹™æ›¸é¡çš„ã«èª¿æ•´ã™ã‚‹ | å¤§çŸ³åˆ¶ä½œãƒ–ãƒ­ã‚°\n","description":"Atomã‚’ä½¿ã£ã¦æŠ€è¡“æ–‡æ›¸ã‚’Markdownã§æ›¸ããŸã‚ã®ç’°å¢ƒè¨­å®šæ–¹æ³•ã‚’ç¤ºã™ã€‚","id":45,"section":"posts","tags":["Atom","Markdown"],"title":"Atomã¨Markdownã§æŠ€è¡“æ–‡æ›¸ã‚’æ›¸ã","uri":"https://helve-blog.com/posts/text-editor/atom-markdown/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ã€ç·šå½¢è¨ˆç”»å•é¡Œã«å¯¾ã™ã‚‹ä¸»åŒå¯¾å†…ç‚¹æ³• (primal-dual interior point method) ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚\nå†…ç‚¹æ³• ä¸»åŒå¯¾å†…ç‚¹æ³•ã®å‰ã«å†…ç‚¹æ³• (interior point method) ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nå†…ç‚¹æ³•ã¨ã¯ã€ç·šå½¢è¨ˆç”»å•é¡Œã‚’å¤šé …å¼æ™‚é–“ã§è§£ãã“ã¨ãŒå¯èƒ½ãªæ‰‹æ³•ã§ã‚ã‚‹ã€‚\nç·šå½¢è¨ˆç”»å•é¡Œã‚’è§£ãæ‰‹æ³•ã¨ã—ã¦ã€å˜ä½“æ³• (simplex method) ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚‚ã‚ã‚‹ã€‚\nç·šå½¢è¨ˆç”»å•é¡Œã§ã¯ã€æœ€é©è§£ã¯å®Ÿè¡Œå¯èƒ½é ˜åŸŸã®ç«¯ç‚¹ã«ã‚ã‚‹ã“ã¨ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\nå˜ä½“æ³•ã§ã¯å®Ÿè¡Œå¯èƒ½é ˜åŸŸã®ç«¯ç‚¹ã‚’ç§»å‹•ã™ã‚‹ã“ã¨ã§ã€æœ‰é™å›ã®åå¾©ã§å³å¯†ãªæœ€é©è§£ãŒæ¢ç´¢ã•ã‚Œã‚‹ã€‚\nå˜ä½“æ³•ã¯ä¸€èˆ¬çš„ãªç·šå½¢è¨ˆç”»å•é¡Œã«å¯¾ã—ã¦æœ‰ç”¨ãªæ‰‹æ³•ã§ã‚ã‚‹ãŒã€å•é¡ŒãŒç‰¹æ®Šãªå ´åˆã«ã¯åå¾©å›æ•°ãŒæŒ‡æ•°é–¢æ•°çš„ã«å¢—åŠ ã™ã‚‹ã€‚\nä¸€æ–¹ã€å†…ç‚¹æ³•ã¯å®Ÿè¡Œå¯èƒ½é ˜åŸŸã®å†…éƒ¨ã‚’æœ€é©è§£ã«å‘ã‘ã¦æ¢ç´¢ã™ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚\nå†…ç‚¹æ³•ã§ã¯å•é¡Œã®è¦æ¨¡ã«å¯¾ã—ã¦è¨ˆç®—æ™‚é–“ãŒå¤šé …å¼çš„ã«ã—ã‹å¢—åŠ ã—ãªã„ã€‚\nãã®ãŸã‚ã€å¤§è¦æ¨¡ãªå•é¡Œã«å¯¾ã—ã¦ã¯å†…ç‚¹æ³•ãŒé©ã—ã¦ã„ã‚‹ã€‚\nä¸»åŒå¯¾å†…ç‚¹æ³• ä¸»åŒå¯¾å†…ç‚¹æ³•ã¯ã€åŒå¯¾å®šç†ã‚’åˆ©ç”¨ã—ã¦ã€ç·šå½¢è¨ˆç”»å•é¡Œã®ä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã‚’åŒæ™‚ã«è§£ãæ‰‹æ³•ã§ã‚ã‚‹ã€‚\nä¸»å•é¡Œã¾ãŸã¯åŒå¯¾å•é¡Œã‚’å˜ç‹¬ã«å†…ç‚¹æ³•ã§è§£ãæ‰‹æ³•ã‚‚ã‚ã‚‹ãŒã€ä¸»åŒå¯¾å†…ç‚¹æ³•ã¯ãã‚Œã‚‰ã®æ‰‹æ³•ã‚ˆã‚Šã‚‚è¨ˆç®—ãŒé€Ÿã„ã¨ã„ã†åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nã¾ãŸã€è©³ç´°ã¯æœ¬è¨˜äº‹ã§ã¯è§¦ã‚Œãªã„ãŒã€ä¸»åŒå¯¾å†…ç‚¹æ³•ã¯éç·šå½¢å•é¡Œã«ã‚‚é©ç”¨ã§ãã‚‹ã€‚\nä¸»åŒå¯¾å†…ç‚¹æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  æœ€é©æ€§æ¡ä»¶ åŒå¯¾å®šç†ã‚’ç”¨ã„ã¦ã€ç·šå½¢è¨ˆç”»å•é¡Œã®æœ€é©è§£ãŒæº€ãŸã™æ¡ä»¶ï¼ˆæœ€é©æ€§æ¡ä»¶ï¼‰ã‚’è€ƒãˆã‚‹ã€‚\nåŒå¯¾å®šç†ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚‚å‚è€ƒã®ã“ã¨ã€‚\nç·šå½¢è¨ˆç”»å•é¡Œã¨åŒå¯¾å•é¡Œ\nã¾ãšã€ä»¥ä¸‹ã®åˆ¶ç´„ä»˜ãç·šå½¢è¨ˆç”»å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$ \\mathrm{min} \\ f_p(\\boldsymbol{x}) = \\boldsymbol{c}^{\\top} \\boldsymbol{x} $\n$ \\mathrm{s.t.}\\ A\\boldsymbol{x}=\\boldsymbol{b}, \\boldsymbol{x} \\ge \\boldsymbol{0} $\nã“ã“ã§ã€$ \\boldsymbol{x} \\in \\mathbb{R}^n, A\\in \\mathbb{R}^{n\\times m}, \\boldsymbol{b} \\in \\mathbb{R}^m, \\boldsymbol{c} \\in \\mathbb{R}^n$ã§ã‚ã‚‹ã€‚\nã“ã®å•é¡Œã«å¯¾ã—ã¦ã€åŒå¯¾å•é¡Œ (dual problem) ã¯ä»¥ä¸‹ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$ \\mathrm{max} \\ f_d(\\boldsymbol{y}) = \\boldsymbol{b}^{\\top} \\boldsymbol{y} $\n$ \\mathrm{s.t.}\\ A^{\\top} \\boldsymbol{y}+\\boldsymbol{z} =\\boldsymbol{c}, \\boldsymbol{z} \\ge \\boldsymbol{0} $\nã“ã“ã§ã€$ \\boldsymbol{y} \\in \\mathbb{R}^m, \\boldsymbol{z} \\in \\mathbb{R}^m$ã§ã‚ã‚‹ã€‚\nåŒå¯¾å•é¡Œã«å¯¾ã—ã€å…ƒã®å•é¡Œã‚’ä¸»å•é¡Œ (primal problem) ã¨å‘¼ã¶ã€‚\nåŒå¯¾å®šç†ã«ã‚ˆã‚Šã€ä¸»å•é¡Œã¨åŒå¯¾å•é¡ŒãŒæœ€é©è§£ã‚’æŒã¤ãªã‚‰ã°ã€2ã¤ã®æœ€é©è§£ã®å€¤ã¯ä¸€è‡´ã™ã‚‹ã€‚\nã™ãªã‚ã¡ã€\n$\\boldsymbol{c}^{\\top} \\boldsymbol{x} = \\boldsymbol{b}^{\\top} \\boldsymbol{y}$\nã§ã‚ã‚‹ã€‚\nã“ã®å¼ã‚’å¤‰å½¢ã™ã‚‹ã¨ã€\n$$ \\begin{array}{rl} \\boldsymbol{c}^{\\top} \\boldsymbol{x} - \\boldsymbol{b}^{\\top} \\boldsymbol{y} = 0 \u0026amp; \\Leftrightarrow (A^{\\top} \\boldsymbol{y}+\\boldsymbol{z})^{\\top} \\boldsymbol{x} - (A\\boldsymbol{x})^{\\top} \\boldsymbol{y} = 0 \\\\ \u0026amp; \\Leftrightarrow \\boldsymbol{z}^{\\top} \\boldsymbol{x} = 0 \\\\ \u0026amp; \\Leftrightarrow x_i z_i = 0 (i=1, \u0026hellip;, n) \\\\ \u0026amp; \\Leftrightarrow X \\boldsymbol{z} = \\boldsymbol{0} \\end{array} $$\nãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\nãŸã ã—ã€$X$ã¯å¯¾è§’ãŒ$x_i (i=1, \u0026hellip;, n)$, ãã®ä»–ã®è¦ç´ ãŒ0ã®è¡Œåˆ—ã§ã‚ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€æœ€é©æ€§æ¡ä»¶ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$$ \\begin{array}{rl} \\left( \\begin{array}{l} A\\boldsymbol{x}=\\boldsymbol{b} \\\\ A^{\\top} \\boldsymbol{y}+\\boldsymbol{z} =\\boldsymbol{c} \\\\ X \\boldsymbol{z} = \\boldsymbol{0} \\\\ \\boldsymbol{x} \\ge \\boldsymbol{0}, \\boldsymbol{z} \\ge \\boldsymbol{0} \\\\ \\end{array} \\right. \\end{array} $$\n1ç•ªç›®ã¨2ç•ªç›®ã®æ¡ä»¶ã¯ã€ãã‚Œãã‚Œä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã®åˆ¶ç´„æ¡ä»¶ã§ã‚ã‚‹ã€‚\n3ç•ªç›®ã®æ¡ä»¶ã¯ã€åŒå¯¾å®šç†ã‚ˆã‚Šå¾—ã‚‰ã‚ŒãŸæ¡ä»¶ã§ã‚ã‚‹ã€‚\næœ€é©æ€§æ¡ä»¶ã‚’ä»¥ä¸‹ã®ãƒ™ã‚¯ãƒˆãƒ«è¡¨ç¾ã«å¤‰å½¢ã™ã‚‹ã€‚\n$ \\boldsymbol{r_0}(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = \\left[ \\begin{array}{c} A \\boldsymbol{x} - \\boldsymbol{b} \\\\ A^{\\top} \\boldsymbol{y} + \\boldsymbol{z} - \\boldsymbol{c} \\\\ X \\boldsymbol{z} \\end{array} \\right] = \\boldsymbol{0} $\n$ \\boldsymbol{x} \\ge \\boldsymbol{0}, \\boldsymbol{z} \\ge \\boldsymbol{0} $\nã™ãªã‚ã¡ã€æœ€é©è§£ã¯$\\boldsymbol{r_0}(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = \\boldsymbol{0}$ã‚’æº€ãŸã™$\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}$ã§ã‚ã‚‹ã€‚\nä¸Šè¨˜ã®æ–¹ç¨‹å¼ã¯éç·šå½¢ã§ã‚ã‚‹ãŸã‚ã€æœ€é©è§£ã‚’ç›´æ¥æ±‚ã‚ã‚‹ã“ã¨ã¯å›°é›£ã§ã‚ã‚‹ã€‚\nã‚ˆã£ã¦ã€ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ã«ã‚ˆã‚Šè§£å€™è£œã‚’å¾ã€…ã«æœ€é©è§£ã®æ–¹å‘ã«æ›´æ–°ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦æœ€é©è§£ã‚’æ±‚ã‚ã‚‹ã€‚\nè§£ã®æ›´æ–° è§£ã®æ›´æ–°æ–¹å‘ã‚’$[\\boldsymbol{\\Delta x}, \\boldsymbol{\\Delta y}, \\boldsymbol{\\Delta z}]$ã¨ã™ã‚‹ã¨ã€ã“ã‚Œã‚’æ±‚ã‚ã‚‹ã«ã¯ã€æ¬¡ã®1æ¬¡æ–¹ç¨‹å¼ã‚’è§£ã‘ã°ã‚ˆã„ã€‚\n$$ J(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) \\left[ \\begin{array}{c} \\boldsymbol{\\Delta x} \\\\ \\boldsymbol{\\Delta y} \\\\ \\boldsymbol{\\Delta z} \\\\ \\end{array} \\right] = - \\boldsymbol{r_0}(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) $$\nã“ã“ã§ã€$J(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z})$ã¯$\\boldsymbol{r_0}(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z})$ã®ãƒ¤ã‚³ãƒ“è¡Œåˆ—ã§ã‚ã‚Šã€\n$$ J(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = \\left[ \\begin{array}{ccc} O \u0026amp; A^{\\top} \u0026amp; I \\\\ A \u0026amp; O \u0026amp; O \\\\ Z \u0026amp; O \u0026amp; X \\\\ \\end{array} \\right] $$\nã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$Z$ã¯å¯¾è§’ãŒ$z_i (i=1, \u0026hellip;, n)$ã§ãã®ä»–ã®è¦ç´ ãŒ0ã®è¡Œåˆ—ã€$I$ã¯å˜ä½è¡Œåˆ—ã§ã‚ã‚‹ã€‚\nè§£ã®æ¢ç´¢æ–¹å‘ãŒæ±‚ã¾ã‚Œã°ã€é©å½“ãªã‚¹ãƒ†ãƒƒãƒ—ã‚µã‚¤ã‚º$\\alpha \u0026gt; 0$ã«ã‚ˆã‚Šã€è§£ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ›´æ–°ã™ã‚‹ã€‚\n$$ \\left[ \\begin{array}{c} \\boldsymbol{x_{k+1}} \\\\ \\boldsymbol{y_{k+1}} \\\\ \\boldsymbol{z_{k+1}} \\\\ \\end{array} \\right] = \\left[ \\begin{array}{c} \\boldsymbol{x_{k}} \\\\ \\boldsymbol{y_{k}} \\\\ \\boldsymbol{z_{k}} \\\\ \\end{array} \\right] + \\alpha \\left[ \\begin{array}{c} \\boldsymbol{\\Delta x} \\\\ \\boldsymbol{\\Delta y} \\\\ \\boldsymbol{\\Delta z} \\\\ \\end{array} \\right] $$\nãŸã ã—ã€$k$ã¯æ›´æ–°å›æ•°ã‚’ç¤ºã™ã€‚\nä»¥ä¸ŠãŒã€ä¸»åŒå¯¾å†…ç‚¹æ³•ã®åŸºæœ¬çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚‹ã€‚\nãŸã ã—ã€å®Ÿéš›ã«ã¯åæŸæ€§ã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã€æ§˜ã€…ãªå·¥å¤«ãŒãªã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒ‘ã‚¹è¿½è·¡æ³•ã€ã‚¢ãƒ•ã‚£ãƒ³ãƒ»ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æ³•ã€ãƒ—ãƒ¬ãƒ‡ã‚£ã‚¯ã‚¿ãƒ»ã‚³ãƒ¬ã‚¯ã‚¿æ³•ãªã©æ§˜ã€…ãªæ‰‹æ³•ãŒã‚ã‚‹ãŒã€ä»¥ä¸‹ã§ã¯ãƒ‘ã‚¹è¿½è·¡æ³•ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nãƒ‘ã‚¹è¿½è·¡æ³• è§£ã®æ›´æ–°æ™‚ã«éè² åˆ¶ç´„$\\boldsymbol{x} \\ge \\boldsymbol{0}, \\boldsymbol{z} \\ge \\boldsymbol{0}$ã®å¢ƒç•Œã«è¿‘ã¥ãã¨ã€æœ€é©è§£ã¸ã®åæŸãŒåœæ»ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€æœ€é©è§£ã¸ã®åæŸé€Ÿåº¦ã‚’ä¸Šã’ã‚‹ãŸã‚ã«ã¯ã€å¯èƒ½ãªé™ã‚Šå¢ƒç•Œã‹ã‚‰é ã„å ´æ‰€ã‚’é€šã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nãã“ã§ã€ä¸­å¿ƒãƒ‘ã‚¹ (central path) ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚’è€ƒãˆã‚‹ã€‚\nãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$\\mu \u0026gt;0$ã‚’å°å…¥ã—ã€æœ€é©æ€§æ¡ä»¶ã®æ–¹ç¨‹å¼ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç½®ãæ›ãˆã‚‹ã€‚\n$$ \\boldsymbol{r}(\\boldsymbol{x}, \\boldsymbol{y}, \\boldsymbol{z}) = \\left[ \\begin{array}{c} A\\boldsymbol{x} - \\boldsymbol{b} \\\\ A^{\\top} \\boldsymbol{y}+\\boldsymbol{z} - \\boldsymbol{c} \\\\ X \\boldsymbol{z} - \\mu \\boldsymbol{e} \\\\ \\end{array} \\right] = \\boldsymbol{0} $$\n$$ \\boldsymbol{x} \\ge \\boldsymbol{0}, \\boldsymbol{z} \\ge \\boldsymbol{0} $$\nã“ã“ã§ã€$\\boldsymbol{e}$ã¯è¦ç´ ãŒå…¨ã¦1ã®ãƒ™ã‚¯ãƒˆãƒ«ã§ã‚ã‚‹ã€‚\n$ X \\boldsymbol{z} = \\mu \\boldsymbol{e}$ã¨ã™ã‚‹ã“ã¨ã§ã€$x_i, z_i (i=0, \u0026hellip;, n)$ãŒ0ã«è¿‘ã¥ã‹ãªã„ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚\n$\\mu$ã®å€¤ã‚’å›ºå®šã—ãŸã¨ãã€ä¸Šè¨˜ã®æ–¹ç¨‹å¼ã¯ãŸã 1ã¤ã®è§£ã‚’æŒã¤ã€‚\nã“ã®è§£ã¯ã€$\\mu$ã®å€¤ã‚’å¤‰åŒ–ã•ã›ã‚‹ã¨æ»‘ã‚‰ã‹ãªæ›²ç·šã‚’æãã€$\\mu = 0$ã¨ãªã‚‹ã¨ãã«æœ€é©è§£ã¨ãªã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€è§£ã‚’æ›´æ–°ã—ãªãŒã‚‰ã€$\\mu$ã®å€¤ã‚’å¾ã€…ã«å°ã•ãã™ã‚‹ã“ã¨ã§æœ€é©è§£ã«åæŸã™ã‚‹ã“ã¨ãŒæœŸå¾…ã§ãã‚‹ã€‚\nå‚è€ƒ ä»¥ä¸‹ã®è«–æ–‡ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã€‚\nä¸­ç”° å’Œç§€ã€Œä¸»åŒå¯¾å†…ç‚¹æ³•ã€ã€ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚ºãƒ»ãƒªã‚µãƒ¼ãƒ 2019å¹´4æœˆå· (PDF)\n","description":"ç·šå½¢è¨ˆç”»å•é¡Œã«å¯¾ã™ã‚‹ä¸»åŒå¯¾å†…ç‚¹æ³• (primal-dual interior point method) ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚","id":46,"section":"posts","tags":["æœ€é©åŒ–"],"title":"ç·šå½¢è¨ˆç”»å•é¡Œã®ä¸»åŒå¯¾å†…ç‚¹æ³•","uri":"https://helve-blog.com/posts/math/primal_dual_interior_point_methd_lp/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ã€æœ€é©åŒ–ã§ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹åŒå¯¾å•é¡Œã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚\nã¾ãŸã€ã‚µãƒãƒ¼ãƒˆãƒ™ã‚¯ã‚¿ãƒ¼ãƒã‚·ãƒ³ã«ãŠã‘ã‚‹åŒå¯¾å•é¡Œã«ã¤ã„ã¦ã‚‚å°‘ã—è§¦ã‚Œã¦ã„ã‚‹ã€‚\nç·šå½¢è¨ˆç”»å•é¡Œã®æ¨™æº–å½¢ ã¾ãšã€ä»¥ä¸‹ã®åˆ¶ç´„ä»˜ãç·šå½¢è¨ˆç”»å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$ \\mathrm{min} \\ f_p(\\boldsymbol{x}) = \\boldsymbol{c}^{\\top} \\boldsymbol{x} $\n$ \\mathrm{s.t.}\\ A\\boldsymbol{x}=\\boldsymbol{b}, \\boldsymbol{x} \\ge \\boldsymbol{0} $\nã“ã“ã§ã€$ \\boldsymbol{x} \\in \\mathbb{R}^n, A\\in \\mathbb{R}^{n\\times m}, \\boldsymbol{b} \\in \\mathbb{R}^m, \\boldsymbol{c} \\in \\mathbb{R}^n$ã§ã‚ã‚‹ã€‚\nä¸Šè¨˜ã®å½¢ã¯ã€ç·šå½¢è¨ˆç”»å•é¡Œã®æ¨™æº–å½¢ã¨å‘¼ã°ã‚Œã‚‹ã€‚\nã¾ãŸã€å•é¡Œã«ä¸ç­‰å¼åˆ¶ç´„ãŒå«ã¾ã‚Œã‚‹å ´åˆã«ã‚‚ã€æ¨™æº–å½¢ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚ä¾‹ãˆã°ã€\n$ A\\boldsymbol{x} \\le \\boldsymbol{b}$\nãªã‚‹ä¸ç­‰å¼åˆ¶ç´„ãŒã‚ã‚‹ã¨ãã€æ–°ãŸã«å¤‰æ•°$ \\boldsymbol{y} \\ge \\boldsymbol{0}$ã‚’å°å…¥ã—ã¦ã€\n$ A\\boldsymbol{x}+ \\boldsymbol{y} =\\boldsymbol{b}$\nã¨ã§ãã‚‹ã€‚ã“ã®$ \\boldsymbol{y}$ã‚’ã‚¹ãƒ©ãƒƒã‚¯å¤‰æ•°ã¨å‘¼ã¶ã€‚\nåŒå¯¾å•é¡Œ å…ˆç¨‹ã®ç·šå½¢è¨ˆç”»å•é¡Œ\n$ \\mathrm{min} \\ f_p(\\boldsymbol{x}) = \\boldsymbol{c}^{\\top} \\boldsymbol{x} $\n$ \\mathrm{s.t.}\\ A\\boldsymbol{x}=\\boldsymbol{b}, \\boldsymbol{x} \\ge \\boldsymbol{0} $\nã«å¯¾ã—ã¦ã€åŒå¯¾å•é¡Œ (dual problem) ã¯ä»¥ä¸‹ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$ \\mathrm{max} \\ f_d(\\boldsymbol{y}) = \\boldsymbol{b}^{\\top} \\boldsymbol{y} $\n$ \\mathrm{s.t.}\\ A^{\\top} \\boldsymbol{y}+\\boldsymbol{z} =\\boldsymbol{c}, \\boldsymbol{z} \\ge \\boldsymbol{0} $\nã“ã“ã§ã€$ \\boldsymbol{y} \\in \\mathbb{R}^m, \\boldsymbol{z} \\in \\mathbb{R}^m$ã§ã‚ã‚‹ã€‚\nåŒå¯¾å•é¡Œã«å¯¾ã—ã€å…ƒã®å•é¡Œã‚’ä¸»å•é¡Œ (primal problem) ã¨å‘¼ã¶ã€‚\nåŒå¯¾å•é¡Œã¯ä¸»å•é¡Œã¨å¯†æ¥ãªé–¢ä¿‚ã«ã‚ã‚Šã€ãã®é–¢ä¿‚ã‚’åŒå¯¾æ€§ (duality) ã¨å‘¼ã¶ã€‚\nå¼±åŒå¯¾å®šç† ä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã®ç›®çš„é–¢æ•°ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®å¼±åŒå¯¾å®šç†ãŒæˆã‚Šç«‹ã¤ã€‚\nå¼±åŒå¯¾å®šç†\n$ \\boldsymbol{x}, \\boldsymbol{y}$ãŒãã‚Œãã‚Œä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã®å®Ÿè¡Œå¯èƒ½è§£ã§ã‚ã‚‹ã¨ãã€ä»¥ä¸‹ã®ä¸ç­‰å¼ãŒæˆã‚Šç«‹ã¤ã€‚\n$f_p(\\boldsymbol{x}) = \\boldsymbol{c}^{\\top} \\boldsymbol{x} \\ge \\boldsymbol{b}^{\\top} \\boldsymbol{y} = f_d(\\boldsymbol{y}) $\n[è¨¼æ˜]\n$ \\boldsymbol{x}, \\boldsymbol{y}$ã¯å®Ÿè¡Œå¯èƒ½è§£ã§ã‚ã‚‹ã‹ã‚‰ã€\n$$ \\begin{array}{rl} \\boldsymbol{c}^{\\top} \\boldsymbol{x} - \\boldsymbol{b}^{\\top} \\boldsymbol{y} \u0026amp;= (A^{\\top} \\boldsymbol{y}+\\boldsymbol{z})^{\\top} \\boldsymbol{x} - (A\\boldsymbol{x})^{\\top} \\boldsymbol{y} \\\\ \u0026amp;= (\\boldsymbol{y}^{\\top} A + \\boldsymbol{z}^{\\top})\\boldsymbol{x} - (\\boldsymbol{x}^{\\top} A^{\\top}) \\boldsymbol{y} \\\\ \u0026amp;= \\boldsymbol{y}^{\\top} A \\boldsymbol{x} + \\boldsymbol{z}^{\\top} \\boldsymbol{x} - \\boldsymbol{x}^{\\top} A^{\\top} \\boldsymbol{y} \\\\ \u0026amp;= \\boldsymbol{z}^{\\top}\\boldsymbol{x} \\\\ \u0026amp;\\ge 0 \\end{array} $$\nã‚ˆã£ã¦ã€\n$$ \\boldsymbol{c}^{\\top} \\boldsymbol{x} \\ge \\boldsymbol{b}^{\\top} \\boldsymbol{y} $$\nãŒæˆã‚Šç«‹ã¤ã€‚â– \nã¾ãŸã€ä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã®ç›®çš„é–¢æ•°ã®å·®\n$ f_p(\\boldsymbol{x}) - f_d(\\boldsymbol{y}) = \\boldsymbol{c}^{\\top} \\boldsymbol{x} - \\boldsymbol{b}^{\\top} \\boldsymbol{y} $\nã‚’åŒå¯¾ã‚®ãƒ£ãƒƒãƒ—ã¨å‘¼ã¶ã€‚\nåŒå¯¾å®šç† ä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®åŒå¯¾å®šç†ãŒæˆã‚Šç«‹ã¤ï¼ˆè¨¼æ˜ã¯çœç•¥ï¼‰ã€‚\nåŒå¯¾å®šç†\nä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã®ã„ãšã‚Œã‹ä¸€æ–¹ãŒæœ€é©è§£ã‚’æŒã¤ãªã‚‰ã€ã‚‚ã†ä¸€æ–¹ã‚‚æœ€é©è§£ã‚’æŒã¡ã€ä¸»å•é¡Œã®æœ€å°å€¤ã¨åŒå¯¾å•é¡Œã®æœ€å¤§å€¤ã¯ä¸€è‡´ã™ã‚‹ã€‚\nã™ãªã‚ã¡ã€\n$ \\boldsymbol{c}^{\\top} \\boldsymbol{x} = \\boldsymbol{b}^{\\top} \\boldsymbol{y}$\nãŒæˆã‚Šç«‹ã¤ãªã‚‰ã°ã€$ \\boldsymbol{x}, \\boldsymbol{y} $ã¯ãã‚Œãã‚Œä¸»å•é¡Œã¨åŒå¯¾å•é¡Œã®æœ€é©è§£ã§ã‚ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€åŒå¯¾å•é¡Œã‚’è§£ãã“ã¨ã§ã€ä¸»å•é¡Œã®æœ€é©è§£ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚\nã‚µãƒãƒ¼ãƒˆãƒ™ã‚¯ã‚¿ãƒ¼ãƒã‚·ãƒ³ã¨åŒå¯¾å®šç† ã‚µãƒãƒ¼ãƒˆãƒ™ã‚¯ã‚¿ãƒ¼ãƒã‚·ãƒ³ (SVM) ã§ã¯ã€ä»¥ä¸‹ã®2ã¤ã®åˆ©ç‚¹ã«ã‚ˆã‚ŠåŒå¯¾å®šç†ãŒåˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã€‚\n åŒå¯¾å•é¡Œã§ã¯ã‚«ãƒ¼ãƒãƒ«ãƒˆãƒªãƒƒã‚¯ã‚’åˆ©ç”¨ã§ãã€éç·šå½¢ãªåˆ†é¡ãŒå¯èƒ½ã«ãªã‚‹ è¨“ç·´ãƒ‡ãƒ¼ã‚¿æ•°ãŒæ¬¡å…ƒæ•°ã‚ˆã‚Šå°‘ãªã„å ´åˆã€è¨ˆç®—ãŒé«˜é€Ÿã«ãªã‚‹  2ã¤ç›®ã®åˆ©ç‚¹ã‚’è£œè¶³ã™ã‚‹ã¨ã€ä¸»å•é¡Œã®æœ€é©åŒ–å¤‰æ•°ã®æ¬¡å…ƒã‚’n, ç­‰å¼åˆ¶ç´„ã®æ•°ã‚’mã¨ã™ã‚‹ã¨ã€åŒå¯¾å•é¡Œã§ã¯æœ€é©åŒ–å¤‰æ•°ã®æ¬¡å…ƒãŒm, ç­‰å¼åˆ¶ç´„ã®æ•°ãŒnã¨å…¥ã‚Œæ›¿ã‚ã‚‹ã€‚ã‚ˆã£ã¦ã€n\u0026raquo;mã§ã‚ã‚Œã°ã€åŒå¯¾å•é¡Œã‚’è§£ãæ–¹ãŒè¨ˆç®—ãŒé€Ÿããªã‚‹ã€‚\nãŸã ã—ã€SVMã§ã¯ç·šå½¢è¨ˆç”»å•é¡Œã§ã¯ãªãäºŒæ¬¡è¨ˆç”»å•é¡Œã¨ãªã‚‹ã€‚\nå‚è€ƒ ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ãƒ»æ›¸ç±ã‚’å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã€‚\nåŒå¯¾å®šç† - æ•°ç†è¨ˆç”»ç”¨èªé›†\n","description":"æœ€é©åŒ–ã§ã‚ˆãç”¨ã„ã‚‰ã‚Œã‚‹åŒå¯¾å•é¡Œã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚","id":47,"section":"posts","tags":["æœ€é©åŒ–"],"title":"ç·šå½¢è¨ˆç”»å•é¡Œã¨åŒå¯¾å•é¡Œ","uri":"https://helve-blog.com/posts/math/dual_problem_lp/"},{"content":"ã¯ã˜ã‚ã« Pandasã®Timestampã‚’ä½¿ã£ãŸæ™‚åˆ»ã®ç”Ÿæˆã‚„ã€æ™‚åˆ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã®å±æ€§ã®å–å¾—ã€ä»»æ„å½¢å¼ã®æ–‡å­—åˆ—ã§ã®å‡ºåŠ›ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nPandasã«ã¯æ™‚åˆ»ã‚’æ‰±ã†ãŸã‚ã®Timestampã¨ã„ã†ã‚¯ãƒ©ã‚¹ãŒã‚ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã€Timestampã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ãŸæ™‚åˆ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç”Ÿæˆæ–¹æ³•ã‚„ã€ãã®æ™‚åˆ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å¹´æœˆæ—¥ãªã©ã®æƒ…å ±ã‚’å±æ€§ã¨ã—ã¦å–å¾—ã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚ã¾ãŸã€æ™‚åˆ»ã‚’æ–‡å­—åˆ—ã¨ã—ã¦å–å¾—ã™ã‚‹æ–¹æ³•ãªã©ã«ã¤ã„ã¦ã‚‚è¿°ã¹ã‚‹ã€‚\nPandasã®Timestampã¯ã€Pythonã®æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«å«ã¾ã‚Œã‚‹datetimeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã»ã¼åŒã˜æ©Ÿèƒ½ã‚’æŒã¤ã€‚ã—ãŸãŒã£ã¦ã€Pandasã‚’ã‚ˆãä½¿ã†å ´åˆã¯ã€æ™‚åˆ»ã‚‚Pandasã§çµ±ä¸€ã—ã¦æ‰±ã†ã¨ã€datetime.datetimeã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨å¤‰æ›ã—ãŸã‚Šã€datetimeãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸã‚Šã™ã‚‹æ‰‹é–“ã‚’çœã‘ã‚‹ã€‚\nä»¥é™ã§ã¯ã€Pandasã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1  import pandas as pd   ã¾ãŸã€ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.3   Pandas 0.24.2    Timestampã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦ Timestampã‚¯ãƒ©ã‚¹ã¯ã€æ—¥ä»˜ã‚„æ™‚åˆ»ã‚’æ‰±ã†ã‚¯ãƒ©ã‚¹ã§ã‚ã‚Šã€æ‰±ãˆã‚‹æœ€å°æ™‚åˆ»ã¯ãƒŠãƒç§’ã§ã‚ã‚‹ã€‚\nTimestampã‚’DataFrameé…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€æ™‚åˆ»ãƒ‡ãƒ¼ã‚¿ã‚’æŸ”è»Ÿã«æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚\nã¾ãŸã€Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåŒå£«ã®å·®ã‚’ã¨ã‚‹ã¨ã€Timedeltaã¨ã„ã†æ™‚é–“ã®é•·ã•ã‚’è¡¨ã™ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹ãŒã€æœ¬è¨˜äº‹ã§ã¯æ‰±ã‚ãªã„ã€‚\nã•ã‚‰ã«ã€Timestampã‚¯ãƒ©ã‚¹ã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ï¼ˆæ™‚å·®ã®æƒ…å ±ï¼‰ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹ãŒã€ã“ã‚Œã‚‚æ‰±ã‚ãªã„ã€‚\næ™‚åˆ»ï¼ˆTimestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã®ç”Ÿæˆ pd.Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ãŒã€ã“ã“ã§ã¯ã€pd.Timestampã‚¯ãƒ©ã‚¹ã‹ã‚‰ç›´æ¥ä½œæˆã™ã‚‹ä»¥ä¸‹3ã¤ã®æ–¹æ³•ã‚’ç¤ºã™ã€‚\n æ—¥ä»˜ã®æ–‡å­—åˆ—ã‹ã‚‰ç”Ÿæˆ UNIXæ™‚åˆ»ã‹ã‚‰ã®ç”Ÿæˆ ç¾åœ¨æ™‚åˆ»ã‹ã‚‰ç”Ÿæˆ  ã¾ãŸã€pd.date_range()é–¢æ•°ã‚’ä½¿ã£ã¦ã€é€£ç¶šã—ãŸæ™‚åˆ»ã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã‚‚è¿°ã¹ã‚‹ã€‚\næ—¥ä»˜ã®æ–‡å­—åˆ—ã‹ã‚‰ç”Ÿæˆ Timestampã«æ™‚åˆ»ã‚’è¡¨ã™æ–‡å­—åˆ—ã‚’æ¸¡ã™ã¨ã€æ™‚åˆ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚æ™‚åˆ»ã‚’è¡¨ã™æ–‡å­—åˆ—ã¯æŸ”è»Ÿã«è§£é‡ˆã•ã‚Œã‚‹ãŸã‚ã€å¹´ãƒ»æœˆãƒ»æ—¥ãªã©ã®åŒºåˆ‡ã‚Šã«-ã‚„/ãªã©ãŒå…¥ã£ã¦ã„ã¦ã‚‚å•é¡Œãªã„ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;20200103\u0026#34;) Timestamp(\u0026#39;2020-01-03 00:00:00\u0026#39;) \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;2020-01-03\u0026#34;) Timestamp(\u0026#39;2020-01-03 00:00:00\u0026#39;) \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;2020/01/03\u0026#34;) Timestamp(\u0026#39;2020-01-03 00:00:00\u0026#39;)   ã¾ãŸã€ãƒŠãƒç§’å˜ä½ã¾ã§æ‰±ãˆã‚‹ï¼ˆãƒŠãƒç§’æœªæº€ã‚’æŒ‡å®šã™ã‚‹ã¨åˆ‡ã‚Šæ¨ã¦ã‚‰ã‚Œã‚‹ï¼‰ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(\u0026#34;2020-01-03 01:23:45.6789012345\u0026#34;) Timestamp(\u0026#39;2020-01-03 01:23:45.678901234\u0026#39;)   UNIXæ™‚åˆ»ã‹ã‚‰ã®ç”Ÿæˆ Timestampã«UNIXæ™‚åˆ»ã‚’æ•´æ•°ã¾ãŸã¯å°æ•°ã§æ¸¡ã™ã¨ã€æ™‚åˆ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚UNIXæ™‚åˆ»ã¨ã¯ã€1970å¹´1æœˆ1æ—¥0æ™‚0åˆ†0ç§’ã‚’èµ·ç‚¹ã¨ã—ãŸæ™‚åˆ»ã§ã‚ã‚‹ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€UNIXæ™‚åˆ»ã®å˜ä½ã¯ãƒŠãƒç§’ã§ã‚ã‚‹ã€‚ã“ã‚Œã‚’å¤‰æ›´ã™ã‚‹ã«ã¯ã€Timestampã®unitå¼•æ•°ã«UNIXæ™‚åˆ»ã®å˜ä½ã‚’æ–‡å­—åˆ—ã§æŒ‡å®šã™ã‚‹ã€‚æœ‰åŠ¹ãªå˜ä½ã¯D, h, m, s, ms, us, nsã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(0) ### UNIXæ™‚åˆ»ã®èµ·ç‚¹ Timestamp(\u0026#39;1970-01-01 00:00:00\u0026#39;) \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(1) ### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯1ãƒŠãƒç§’ã«è§£é‡ˆã•ã‚Œã‚‹ Timestamp(\u0026#39;1970-01-01 00:00:00.000000001\u0026#39;) \u0026gt;\u0026gt;\u0026gt; pd.Timestamp(1, unit=\u0026#34;s\u0026#34;) ### 1ç§’å˜ä½ã«å¤‰æ›´ Timestamp(\u0026#39;1970-01-01 00:00:01\u0026#39;)   ç¾åœ¨æ™‚åˆ»ã‹ã‚‰ç”Ÿæˆ Timestampã®now()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ç¾åœ¨æ™‚åˆ»ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; pd.Timestamp.now() Timestamp(\u0026#39;2020-01-03 10:15:49.030441\u0026#39;)   é€£ç¶šã—ãŸæ™‚åˆ»ã®ç”Ÿæˆ ä¸€å®šã®é–“éš”ã§é€£ç¶šã—ãŸæ™‚åˆ»ã®é…åˆ—ã‚’ç”Ÿæˆã—ãŸã„å ´åˆã¯ã€\npd.date_range()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚\nã“ã®é–¢æ•°ã®ä¸»ãªå¼•æ•°ã‚’ç¤ºã™ã€‚\n1  pd.date_range(start=None, end=None, periods=None, freq=None)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¼•æ•° ãƒ‡ãƒ¼ã‚¿å‹ èª¬æ˜     start str, pd.Timestamp é–‹å§‹æ™‚åˆ»   end str, pd.Timestamp çµ‚äº†æ™‚åˆ»   periods int æ™‚åˆ»ã®æ•°   freq str æ™‚åˆ»ã®é–“éš”    4ã¤ã®å¼•æ•° (start, end, periods, freq) ã®å†…ã€3ã¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nã¾ãŸã€freqã¯æ™‚é–“ã®å˜ä½ã‚’è¡¨ã™æ–‡å­—åˆ—ã‚’ä¸ãˆã‚‹ã€‚ä¸»ãªæ™‚é–“ã®å˜ä½ã¨ã€å¯¾å¿œã™ã‚‹æ–‡å­—åˆ—ã‚’ç¤ºã™ã€‚\n   æ™‚é–“ã®å˜ä½ æ–‡å­—åˆ—     å¹´æœ« A, Y   å¹´å§‹ AS, YS   æœˆæœ« M   æœˆå§‹ MS   æ—¥ D   æ™‚é–“ H   åˆ† T, min   ç§’ S   ãƒŸãƒªç§’ L, ms   ãƒã‚¤ã‚¯ãƒ­ç§’ U, us   ãƒŠãƒç§’ N    ã¾ãŸã€æ–‡å­—åˆ—ã®å‰ã«æ•°å­—ã‚’ä»˜ã‘ã‚‹ã¨ã€ãã®æ™‚é–“ã®å€æ•°ã«ãªã‚‹ã€‚\nä¾‹ï¼š3åˆ†ã®å ´åˆã€freq=\u0026quot;3T\u0026quot;\nã¾ãŸã€ãã®ä»–ã®æ™‚é–“ã®å˜ä½ï¼ˆå››åŠæœŸã€å–¶æ¥­æ—¥ãªã©ï¼‰ã¯ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‚’å‚ç…§ã€‚\nTime series _ date functionality â€” pandas 1.2.0 documentation\nTimestampã®ä¸»ãªå±æ€§ Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸»ãªå±æ€§ã‚’ç¤ºã™ã€‚\nã¾ãšã€æ™‚åˆ»ã®å˜ä½ã‚’æ•°å­—ã§å–ã‚Šå‡ºã›ã‚‹å±æ€§ã‚’ç¤ºã™ï¼ˆãªãœã‹ãƒŸãƒªç§’ãŒãªã„ï¼‰ã€‚\n   æ™‚é–“ã®å˜ä½ å±æ€§å     å¹´ year   æœˆ month   æ—¥ day   æ™‚é–“ hour   åˆ† minute   ç§’ second   ãƒã‚¤ã‚¯ãƒ­ç§’ microsecond   ãƒŠãƒç§’ nanosecond    ã¾ãŸã€ãã®ä»–ã®å±æ€§ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n   èª¬æ˜ å±æ€§     UNIXæ™‚åˆ»ï¼ˆãƒŠãƒç§’å˜ä½ï¼‰ value   æ›œæ—¥(æœˆæ›œ: 0, \u0026hellip;, æ—¥æ›œ: 6) dayofweek   ãã®å¹´ã®ä½•æ—¥ç›®ã‹ dayofyear    ä¾‹\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; t1 = pd.Timestamp(\u0026#34;2020-01-03\u0026#34;) \u0026gt;\u0026gt;\u0026gt; t1.year ### å¹´ã‚’å–å¾— 2020 \u0026gt;\u0026gt;\u0026gt; t1.value ### UNIXæ™‚åˆ»ï¼ˆãƒŠãƒç§’å˜ä½ï¼‰ 1578009600000000000   Timestampã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ Timestampã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç¤ºã™ã€‚\næ™‚åˆ»ã®å˜ä½ã‚’ç½®æ›ã™ã‚‹(replace) replaceãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ãƒŸãƒªç§’ã‚’é™¤ãæ™‚åˆ»ã‚’ç½®æ›ã§ãã‚‹ã€‚\n1 2 3  Timestamp.replace(year=None, month=None, day=None, hour=None, minute=None, second=None, microsecond=None, nanosecond=None)   æ™‚åˆ»ã‚’æ–‡å­—åˆ—ã§å‡ºåŠ›ã™ã‚‹(strftime) strftimeãƒ¡ã‚½ãƒƒãƒ‰ã§ã€ä»»æ„ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§æ™‚åˆ»ã‚’æ–‡å­—åˆ—ã¨ã—ã¦å‡ºåŠ›ã§ãã‚‹ã€‚ãªãŠã€strftimeã®fã¯formatã®é ­æ–‡å­—ã§ã‚ã‚‹ã€‚\nä¸»ãªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ä»¥ä¸‹ã®è¡¨ã«ç¤ºã™ã€‚\n   æ™‚é–“ã®å˜ä½ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ     4æ¡ã®è¥¿æš¦ %Y   ä¸‹2æ¡ã®è¥¿æš¦ %y   æœˆ %m   æ—¥ %d   æ™‚(24æ™‚é–“åˆ¶) %H   åˆ† %M   ç§’ %S   ãƒã‚¤ã‚¯ãƒ­ç§’(6æ¡ã®0åŸ‹ã‚) %f    ã“ã‚Œã‚‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã€å…¨ã¦0åŸ‹ã‚ (0 padding) ã§ã‚ã‚‹ã€‚\nä¾‹\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; t1 = pd.Timestamp(\u0026#34;2020-01-03\u0026#34;) \u0026gt;\u0026gt;\u0026gt; t1.strftime(\u0026#34;%Y%m%d\u0026#34;) \u0026#39;20200103\u0026#39; \u0026gt;\u0026gt;\u0026gt; t1.strftime(\u0026#34;%Y/%m/%d\u0026#34;) \u0026#39;2020/01/03\u0026#39;   ãã®ä»–ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã®è¡¨ã‚’å‚ç…§ã®ã“ã¨ã€‚\ndatetime â€” Basic date and time types â€” Python 3.9.1 documentation\nå‚è€ƒ pandas.Timestamp â€” pandas 1.2.0 documentation\n","description":"Pandasã®Timestampã‚’ä½¿ã£ãŸæ™‚åˆ»ã®ç”Ÿæˆã‚„ã€æ™‚åˆ»ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã®å±æ€§ã®å–å¾—ã€ä»»æ„å½¢å¼ã®æ–‡å­—åˆ—ã§ã®å‡ºåŠ›ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚","id":48,"section":"posts","tags":["Python","Pandas"],"title":"Pandasã®Timestampã§æ™‚åˆ»ã‚’æ‰±ã†","uri":"https://helve-blog.com/posts/python/pandas-timestamp/"},{"content":"ã¯ã˜ã‚ã« è¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã£ã¦ã€Pandasã®Series, DataFrameã‚’å°‘ãªã„ã‚³ãƒ¼ãƒ‰é‡ã§ä½œæˆã™ã‚‹ã€‚\nè¾æ›¸å†…åŒ…è¡¨è¨˜ã¯ã€Pythonã®æ¨™æº–æ©Ÿèƒ½ã§ã‚ã‚Šã€è¾æ›¸(dict)å‹ã®å¤‰æ•°ã‚’ç°¡æ½”ã«ä½œæˆã§ãã‚‹ã€‚ã¾ãŸã€Pandasã®é…åˆ—ãƒ‡ãƒ¼ã‚¿å‹ã§ã‚ã‚‹Series, DataFrameã¯è¾æ›¸ã‹ã‚‰ä½œæˆã§ãã‚‹ã€‚\nãã®ãŸã‚ã€è¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã£ã¦ã€Series, DataFrameã‚’å°‘ãªã„ã‚³ãƒ¼ãƒ‰é‡ã§ä½œæˆã™ã‚‹æ–¹æ³•ã‚’ç¤ºã™ã€‚\nä»¥é™ã§ã¯ã€Pandasã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1  import pandas as pd   ã¾ãŸã€ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.3   Pandas 0.24.2    è¾æ›¸å†…åŒ…è¡¨è¨˜ è¾æ›¸å†…åŒ…è¡¨è¨˜ã®ä¾‹ã‚’ç¤ºã™ã€‚0ã‹ã‚‰9ã¾ã§ã®æ•°å­—ã‚’ã‚­ãƒ¼ã€å„ã‚­ãƒ¼ã‚’2å€ã«ã—ãŸã‚‚ã®ã‚’å€¤ã¨ã—ãŸè¾æ›¸ã‚’å¾—ã‚‹ã€‚\n1 2  doubles_dict = {x: x*2 for x in range(10)} print(doubles_dict)   å®Ÿè¡Œçµæœ\n1  {0: 0, 1: 2, 2: 4, 3: 6, 4: 8, 5: 10, 6: 12, 7: 14, 8: 16, 9: 18}   ä¸Šè¨˜ã®ä¾‹ã®ã‚ˆã†ã«ã€ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã®[...]ã‚’{...}ã¨ã—ã¦ã€ã‚³ãƒ­ãƒ³:ã‚’ä½¿ã£ã¦ã‚­ãƒ¼ã¨å€¤ã‚’æŒ‡å®šã™ã‚‹ã¨ã€è¾æ›¸å†…åŒ…è¡¨è¨˜ã¨ãªã‚‹ã€‚\nã¾ãŸã€è¾æ›¸å†…åŒ…è¡¨è¨˜ã§ã¯ifã‚„ifï½elseã‚’ä½¿ã†ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚è©³ç´°ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nPythonã®è¾æ›¸å†…åŒ…è¡¨è¨˜\nè¾æ›¸ã‚’ä½¿ã£ãŸSerie, DataFrameã®ä½œæˆ Pandasã®Seriesã®å ´åˆã€è¾æ›¸ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã¨ã€ã‚­ãƒ¼ã‚’indexã¨ã™ã‚‹Seriesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚\nä¾‹\n1 2 3  dict1 = {\u0026#34;a\u0026#34;: 1, \u0026#34;b\u0026#34;: 2, \u0026#34;c\u0026#34;:3} sr1 = pd.Series(dict1) print(sr1)   å®Ÿè¡Œçµæœ\n1 2 3 4  a 1 b 2 c 3 dtype: int64   ä¸€æ–¹ã€Pandasã®DataFrameã®å ´åˆã€å€¤ã‚’ãƒªã‚¹ãƒˆã§ã‚ã‚‹è¾æ›¸ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã¨ã€ã‚­ãƒ¼ã‚’columnsã¨ã™ã‚‹DataFrameã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚indexã¯0, 1, \u0026hellip;ã¨æ•´æ•°ãŒå‰²ã‚ŠæŒ¯ã‚‰ã‚Œã‚‹ã€‚\nä¾‹\n1 2 3  dict2 = {\u0026#34;a\u0026#34;: [1, 2], \u0026#34;b\u0026#34;: [3, 4], \u0026#34;c\u0026#34;:[5, 6]} df1 = pd.DataFrame(dict2) print(df1)   å®Ÿè¡Œçµæœ\n1 2 3  a b c 0 1 3 5 1 2 4 6   ã“ã“ã§ã€è¾æ›¸ã‚’DataFrameã®å¼•æ•°ã¨ã—ã¦ç›´æ¥æ¸¡ã™å ´åˆã€ãƒªã‚¹ãƒˆã®é•·ã•ã¯åŒã˜ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ãƒªã‚¹ãƒˆã®é•·ã•ãŒç•°ãªã‚‹å ´åˆã«DataFrameã‚’ä½œæˆã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nè¾æ›¸ã‚’pd.DataFrameã«å¤‰æ› - Qiita\nè¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã£ãŸSerie, DataFrameã®ä½œæˆ ã‚ˆã£ã¦ã€è¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã†ã¨ã€Serie, DataFrameã®ä½œæˆã‚’ç°¡æ½”ã«è¨˜è¿°ã§ãã‚‹ã€‚\nã¾ãšã€Seriesã®ä¾‹ã¨ã—ã¦ã€å¶æ•°ã‚’ä¸¦ã¹ãŸé…åˆ—ã‚’ä½œæˆã™ã‚‹ã€‚\n1 2  sr2 = pd.Series({x: x*2 for x in range(5)}) print(sr2)   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6  0 0 1 2 2 4 3 6 4 8 dtype: int64   æ¬¡ã«ã€DataFrameã®ä¾‹ã¨ã—ã¦ã€1è¡Œç›®ã«2ã®å€æ•°ã€2è¡Œç›®ã«3ã®å€æ•°ã‚’ä¸¦ã¹ãŸé…åˆ—ã‚’ä½œæˆã™ã‚‹ã€‚\n1 2  df2 = pd.DataFrame({x: [x*2, x*3] for x in range(5)}) print(df2)   å®Ÿè¡Œçµæœ\n1 2 3  0 1 2 3 4 0 0 2 4 6 8 1 0 3 6 9 12   å‚è€ƒ Pythonã®è¾æ›¸å†…åŒ…è¡¨è¨˜\nè¾æ›¸ã‚’pd.DataFrameã«å¤‰æ› - Qiita\n","description":"è¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã£ã¦ã€Pandasã®Series, DataFrameã‚’å°‘ãªã„ã‚³ãƒ¼ãƒ‰é‡ã§ä½œæˆã™ã‚‹ã€‚","id":49,"section":"posts","tags":["Python","Pandas"],"title":"è¾æ›¸å†…åŒ…è¡¨è¨˜ã§Pandasã®Series, DataFrameã‚’ä½œæˆ","uri":"https://helve-blog.com/posts/python/pandas-constructed-by-dict-comprehension/"},{"content":"ã¯ã˜ã‚ã« Pythonã«ã¯ã€ã‚ã‚‹é–¢æ•°ã®å‰å¾Œã«å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹ä»•çµ„ã¿ã¨ã—ã¦ã€ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã¨å‘¼ã°ã‚Œã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ä½¿ç”¨ä¾‹ã¨ã—ã¦ã€å›å¸°ã®ç²¾åº¦è©•ä¾¡ã§MSE, RMSEã®ä¸¡æ–¹ã‚’ç®—å‡ºã™ã‚‹å ´åˆã«ã€å…¥åŠ›é…åˆ—ã®å‹ã‚’å¤‰æ›ã™ã‚‹å‡¦ç†ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã«ã¾ã¨ã‚ãŸã‚‚ã®ã‚’ç¤ºã™ã€‚\nãªãŠã€æœ¬è¨˜äº‹ã®å†…å®¹ã¨ã¯ç›´æ¥é–¢ä¿‚ãªã„ãŒã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®Flaskã§ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã«ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãŒä½¿ã‚ã‚Œã¦ã„ãŸã“ã¨ãŒå‹‰å¼·ã®å‹•æ©Ÿã§ã‚ã‚‹ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   NumPy 1.16.5    ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ä¾‹ ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ç°¡å˜ãªä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  def decorator(func): def wrapper(*args, **kwargs): print(\u0026#39;--start--\u0026#39;) func(*args, **kwargs) print(\u0026#39;--end--\u0026#39;) return wrapper @decorator def hello(): print(\u0026#39;Hello World\u0026#39;) hello()   å®Ÿè¡Œçµæœ\n1 2 3  --start-- Hello World --end--   ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€decoratorãŒãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§ã‚ã‚Šã€helloãŒå‡¦ç†ã‚’è¿½åŠ ã•ã‚Œã‚‹é–¢æ•°ã§ã‚ã‚‹ã€‚helloé–¢æ•°ã‚’å®šç¾©ã™ã‚‹ç›´å‰ã«@ï¼ˆãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿åï¼‰ã¨ã™ã‚‹ã¨ã€helloã‚’å‘¼ã³å‡ºã—ãŸã¨ãã«ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚‚åŒæ™‚ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ã€‚\nãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿é–¢æ•°decoratorã®å†…éƒ¨ã«ã¯ã•ã‚‰ã«é–¢æ•°wrapperãŒå®šç¾©ã•ã‚Œã¦ãŠã‚Šã€decoratorã¯wrapperé–¢æ•°ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã€‚\nwrapperé–¢æ•°ã§ã¯ã€func(*args, **kwargs)ã®éƒ¨åˆ†ã§ãƒ‡ã‚³ãƒ¬ãƒ¼ãƒˆã•ã‚Œã‚‹é–¢æ•°ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã€‚ãã®å‰å¾Œã«å®Ÿè¡Œã—ãŸã„å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ã€‚\nãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®æ©Ÿèƒ½ ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã«ã¯ä»¥ä¸‹ã®ä½¿ã„æ–¹ã‚‚ã‚ã‚‹ã€‚\n ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’å¤šé‡ã«ãƒã‚¹ãƒˆã§ãã‚‹ ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãŒå¼•æ•°ã‚’ã¨ã‚‹  ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ä½¿ç”¨ä¾‹ ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªä½¿ã„é“ãŒã‚ã‚‹ã€‚\n é–¢æ•°ã®å®Ÿè¡Œæ™‚é–“ã‚’è¨ˆæ¸¬ã™ã‚‹ é–¢æ•°ã®å…¥åŠ›å€¤ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ é–¢æ•°ã‚’ã„ã¤å‘¼ã³å‡ºã—ãŸã‹ç­‰ã®å®Ÿè¡Œãƒ­ã‚°ã‚’æ®‹ã™  2ã¤ç›®ã®ä½¿ã„é“ã®ä¾‹ã¨ã—ã¦ã€å›å¸°ã®ç²¾åº¦è©•ä¾¡ã§MSE, RMSEã®ä¸¡æ–¹ã‚’ç®—å‡ºã™ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚ãªãŠã€MSEã¯äºŒä¹—å¹³å‡èª¤å·®ã€RMSEã¯äºŒä¹—å¹³å‡å¹³æ–¹æ ¹èª¤å·®ã§ã‚ã‚‹ã€‚\nã“ã“ã§ã€MSE, RMSEã¯ãã‚Œãã‚Œåˆ¥ã®é–¢æ•°ã§ç®—å‡ºã™ã‚‹ã‚‚ã®ã¨ã™ã‚‹ã€‚ã¾ãŸã€äºˆæ¸¬å€¤ã¨å®Ÿæ¸¬å€¤ã¯ã€ãƒªã‚¹ãƒˆã€NumPyé…åˆ—ã€Pandasã®Series, DataFrameã®ã„ãšã‚Œã®å‹ã§ä¸ãˆã‚‰ã‚Œã¦ã‚‚ç®—å‡ºã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚\nã“ã®ã¨ãã€äºˆæ¸¬å€¤ã¨å®Ÿæ¸¬å€¤ã‚’1ã¤ã®å‹ã«å¤‰æ›ã™ã‚‹å‡¦ç†ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã«ã¾ã¨ã‚ã‚‹ã“ã¨ã§ã€MSEã¨RMSEã‚’ç®—å‡ºã™ã‚‹é–¢æ•°ã¯ãã®å‹ã®ã¿ã«å¯¾å¿œã—ãŸå‡¦ç†ã®ã¿è¨˜è¿°ã™ã‚Œã°æ¸ˆã‚€ã‚ˆã†ã«ãªã‚‹ã€‚\nã“ã“ã§ã¯ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§NumPyé…åˆ—ã«å¤‰æ›ã™ã‚‹ã‚‚ã®ã¨ã—ã¦ã€ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  import numpy as np def conv2nparray(func): def wrapper(*args): a = np.array(args[0]).flatten() b = np.array(args[1]).flatten() res = func(a, b) return res return wrapper @conv2nparray def mse(a, b): return np.mean((a-b)**2) @conv2nparray def rmse(a, b): return np.sqrt(np.mean((a-b)**2))   conv2nparrayã§ã¯ã€2ã¤ã®å¼•æ•°ã‚’ãã‚Œãã‚Œ1æ¬¡å…ƒã®NumPyé…åˆ—ã«å¤‰æ›ã—ã¦ã„ã‚‹ã€‚ã¾ãŸã€é…åˆ—ã®é•·ã•ãŒç­‰ã—ããªã„å ´åˆã®å‡¦ç†ã‚„ã€NaNã‚’å«ã‚€ã¨ãã®å‡¦ç†ãŒå¿…è¦ã§ã‚ã‚Œã°ã€ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã®ä¸­ã«æ›¸ãã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\nå‚è€ƒ Pythonã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã«ã¤ã„ã¦ - Qiita\n","description":"Pythonã§é–¢æ•°ã®å‰å¾Œã«å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹ã€ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã¨å‘¼ã°ã‚Œã‚‹æ©Ÿèƒ½ã«ã¤ã„ã¦ç°¡å˜ã«ã¾ã¨ã‚ãŸã€‚","id":50,"section":"posts","tags":["Python"],"title":"Pythonã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§é–¢æ•°ã«å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹","uri":"https://helve-blog.com/posts/python/python-decorator/"},{"content":"ã¯ã˜ã‚ã« ã‚¦ã‚§ãƒ–UIã®ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹seleniumã‚’ä½¿ã£ãŸã€ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã®è‡ªå‹•åŒ–ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚\nseleniumã¯ã‚¦ã‚§ãƒ–UIã®ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚ã“ã‚Œã‚’Pythonã‹ã‚‰å‘¼ã³å‡ºã™ã“ã¨ã§ã€ã‚¦ã‚§ãƒ–ç”»é¢ä¸Šã®æ“ä½œã‚’è‡ªå‹•åŒ–ã§ãã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ç’°å¢ƒæ§‹ç¯‰ (seleniumã¨WebDriverã®æº–å‚™)ã¨ã€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã®è‡ªå‹•æ“ä½œã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.3   selenium 3.141.0    ã¾ãŸã€OSã¯Windows 8.1ã§ã‚ã‚‹ã€‚\nç’°å¢ƒæ§‹ç¯‰ seleniumã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã€WebDriverã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚’è¡Œã†ã€‚\ncondaç’°å¢ƒã§ã¯ã€seleniumã‚’ä»¥ä¸‹ã®é€šã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nconda install selenium ãã‚Œä»¥å¤–ã§ã¯ã€pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nconda install selenium æ¬¡ã«WebDriverã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚WebDriverã¯ãƒ–ãƒ©ã‚¦ã‚¶ã”ã¨ã«ç•°ãªã‚‹ã‚‚ã®ãŒå¿…è¦ã«ãªã‚‹ã€‚\n2020å¹´12æœˆ17æ—¥ç¾åœ¨ã€Chromeã®WebDriverã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã€‚\nDownloads - ChromeDriver - WebDriver for Chrome\nä¸Šè¨˜ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ã€Chromeã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ã€OSãŒä¸€è‡´ã™ã‚‹WebDriverã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚\nãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸzipãƒ•ã‚¡ã‚¤ãƒ«ã‚’å±•é–‹ã™ã‚‹ã¨chromedriver.exeã¨ã„ã†å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã®ã§ã€é©å½“ãªãƒ•ã‚©ãƒ«ãƒ€ã«ç½®ãã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹ã®ãƒ‘ã‚¹ã«ç½®ãã“ã¨ã¨ã™ã‚‹ã€‚\nC:\\selenium\\chromedriver.exe chromedriver.exeã«ãƒ‘ã‚¹ã‚’é€šã—ã¦ãŠãã¨å¾Œã€…ä¾¿åˆ©ã§ã‚ã‚‹ãŒã€ã“ã“ã§ã¯ãƒ‘ã‚¹ã‚’é€šã•ãšã«é€²ã‚ã‚‹ã€‚\nãŸã ã—ã€è¨˜äº‹ã‚’èª­ã¾ã‚Œã¦ã„ã‚‹æ™‚ç‚¹ã§ã¯ã€WebDriverã®æƒ…å ±ã¯å¤ããªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€é©å®œæœ€æ–°ã®æƒ…å ±ã‚’å‚ç…§ã•ã‚ŒãŸã„ã€‚æœ€æ–°ã®æƒ…å ±ã‚„ã€ä»–ã®ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ã€Œselenium WebDriver ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶åï¼‰ã€ã§æ¤œç´¢ã™ã‚‹ã¨å‡ºã¦ãã‚‹ã€‚\nseleniumã«ã‚ˆã‚‹ãƒšãƒ¼ã‚¸åˆ¶å¾¡ã®åŸºæœ¬ ä»¥ä¸‹ã®æ‰‹é †ã«ã‚ˆã‚Šã€Pythonã§seleniumã‚’ä½¿ã£ãŸãƒšãƒ¼ã‚¸åˆ¶å¾¡ã‚’è¡Œã†ã€‚\n WebDriverã§ãƒ–ãƒ©ã‚¦ã‚¶ã‚’èµ·å‹• get()ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒšãƒ¼ã‚¸ã‚’å–å¾— find_*ãƒ¡ã‚½ãƒƒãƒ‰ã§WebElementã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼ˆãƒšãƒ¼ã‚¸ã®è¦ç´ ï¼‰ã‚’å–å¾— WebElementã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ãƒšãƒ¼ã‚¸ã‚’æ“ä½œã™ã‚‹  ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã‚’é–‹ã ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€è‹±èªç‰ˆWikipediaã®ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãŒé–‹ãã€‚\nä¾‹1\n1 2 3  from selenium import webdriver driver = webdriver.Chrome(executable_path=\u0026#34;C:\\selenium\\chromedriver.exe\u0026#34;) driver.get(\u0026#34;https://en.wikipedia.org\u0026#34;)   ã¾ãšã€webdriver.Chromeã§ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ç«‹ã¡ä¸Šã’ã€WebDriverã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã™ã‚‹ã€‚ä½¿ç”¨ã™ã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦ã€Chromeã®éƒ¨åˆ†ã‚’é©å®œå¤‰æ›´ã™ã‚‹ã€‚ã¾ãŸã€executable_pathã§WebDriverã‚’æŒ‡å®šã™ã‚‹ãŒã€chromedriver.exeã«ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ã‚‹å ´åˆã¯æŒ‡å®šã™ã‚‹å¿…è¦ã¯ãªã„ã€‚\næ¬¡ã«ã€WebDriverã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®get()ãƒ¡ã‚½ãƒƒãƒ‰ã«é–‹ããŸã„URLã‚’æ¸¡ã™ã¨ã€ãƒšãƒ¼ã‚¸ã‚’é–‹ãã€‚\nãªãŠã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã‚‹ã¨ãã¯ã€WebDriverã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®quit()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã®è¦ç´ ã‚’æ¢ã™ WebDriverã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€æ“ä½œã—ãŸã„è¦ç´ ã‚’æ¢ã™ã€‚\nãƒ¡ã‚½ãƒƒãƒ‰ã¯å¤§ããåˆ†ã‘ã¦2ç¨®é¡ã‚ã‚Šã€æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹æœ€åˆã®è¦ç´ ã‚’WebElementã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¿”ã™ã‚‚ã®ã¨ã€æ¤œç´¢æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹å…¨ã¦ã®è¦ç´ ã‚’WebElementã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚¹ãƒˆã¨ã—ã¦è¿”ã™ã‚‚ã®ãŒã‚ã‚‹ã€‚\nå‰è€…ã¯find_element_ã‹ã‚‰å§‹ã¾ã‚‹åå‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚Šã€å¾Œè€…ã¯è¤‡æ•°å½¢ã®find_elements_ã‹ã‚‰å§‹ã¾ã‚‹åå‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚ã‚‹ã€‚\nfind_element_ã‹ã‚‰å§‹ã¾ã‚‹ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n   ãƒ¡ã‚½ãƒƒãƒ‰ å†…å®¹     find_element_by_id idå±æ€§ãŒä¸€è‡´ã™ã‚‹è¦ç´    find_element_by_name nameå±æ€§ãŒä¸€è‡´ã™ã‚‹è¦ç´    find_element_by_link_text å®Œå…¨ä¸€è‡´ã™ã‚‹\u0026lt;a\u0026gt;è¦ç´    find_element_by_partial_link_text éƒ¨åˆ†ä¸€è‡´ã™ã‚‹\u0026lt;a\u0026gt;è¦ç´    find_element_by_tag_name ã‚¿ã‚°åã¨ä¸€è‡´ã™ã‚‹è¦ç´    find_element_by_class_name CSSã‚¯ãƒ©ã‚¹ã¨ä¸€è‡´ã™ã‚‹è¦ç´    find_element_by_css_selector CSSã‚»ãƒ¬ã‚¯ã‚¿ã«ä¸€è‡´ã™ã‚‹è¦ç´     ã“ã‚Œã‚‰ã®elementã‚’elementsã«ç½®ãæ›ãˆã‚‹ã¨ã€å…¨ã¦ã®è¦ç´ ã‚’æ¤œç´¢ã§ãã‚‹ã€‚\nä¾‹2\nä»¥ä¸‹ã®HTMLãŒã‚ã£ãŸã¨ã™ã‚‹ã€‚\n1  \u0026lt;a href=\u0026#34;https://en.wikipedia.org\u0026#34;\u0026gt;Wiki\u0026lt;/a\u0026gt;   ã“ã®HTMLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã¨ã€https://en.wikipedia.orgã¸ãƒªãƒ³ã‚¯ã‚’å¼µã£ãŸã€Wikiã¨ã„ã†æ–‡å­—åˆ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nã¾ãŸã€ä¸Šè¨˜ã®ä¾‹ã§ã¯ã€HTMLã®å„æ§‹é€ ã¯ä»¥ä¸‹ã®åå‰ã§å‘¼ã°ã‚Œã‚‹ã€‚\n a: ã‚¿ã‚°å href: å±æ€§ Wiki: å†…éƒ¨ãƒ†ã‚­ã‚¹ãƒˆ  ã“ã“ã§ã€\u0026lt;a\u0026gt;ã®é–‹å§‹ã‚¿ã‚°ã¨çµ‚äº†ã‚¿ã‚°ã§å›²ã¾ã‚ŒãŸå…¨ä½“ã‚’è¦ç´ ã¨å‘¼ã¶ã€‚\nã“ã®è¦ç´ ã‚’Seleniumã§æ¢ã™ã«ã¯ã€\n1  WebDriver.find_element_by_link_text(\u0026#34;Wiki\u0026#34;)   ã¾ãŸã¯ã€\n1  WebDriver.find_element_by_tag_name(\u0026#34;a\u0026#34;)   ã®ã‚ˆã†ã«ã™ã‚‹ã€‚\nè¦ç´ ã®å†…å®¹ã‚’å–å¾—ã™ã‚‹ WebElementã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€è¦ç´ ã®å†…å®¹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå±æ€§ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚‹ã€‚\n   å±æ€§ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ å†…å®¹     tag_name ã‚¿ã‚°å   text è¦ç´ ã®å†…éƒ¨ãƒ†ã‚­ã‚¹ãƒˆ   get_attribute(name) nameå±æ€§ã®å€¤    ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã‚’æ“ä½œã™ã‚‹ ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ WebElementã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®click()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãã®è¦ç´ ä¸Šã§ãƒã‚¦ã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã€‚\nä¾‹3\nä¾‹1ã§é–‹ã„ãŸWikipediaã®å·¦ã‚«ãƒ©ãƒ ä¸Šéƒ¨ã«ã‚ã‚‹ã€\u0026ldquo;Contents\u0026quot;ã¨ã„ã†ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹å‹•ä½œã‚’è€ƒãˆã‚‹ã€‚\nã¾ãšã€å†…éƒ¨ãƒ†ã‚­ã‚¹ãƒˆãŒ\u0026quot;Contents\u0026quot;ã§ã‚ã‚‹è¦ç´ ã‚’ã€find_element_by_link_textãƒ¡ã‚½ãƒƒãƒ‰ã§WebElementã¨ã—ã¦å–å¾—ã™ã‚‹ã€‚æ¬¡ã«ã€ã“ã®WebElementã®click()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nä¾‹1ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨åˆã‚ã›ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6  from selenium import webdriver driver = webdriver.Chrome(executable_path=\u0026#34;C:\\selenium\\chromedriver.exe\u0026#34;) driver.get(\u0026#34;https://en.wikipedia.org\u0026#34;) link_ele = driver.find_element_by_link_text(\u0026#34;Contents\u0026#34;) link_ele.click()   ä¸Šè¨˜ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ãŒé–‹ãã€‚\nhttps://en.wikipedia.org/wiki/Wikipedia:Contents\nãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ãƒ»é€ä¿¡ã™ã‚‹ Wikipediaãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®å³ä¸Šã®æ¤œç´¢çª“ã«ã€å˜èªã‚’å…¥åŠ›ã—ã¦æ¤œç´¢ã™ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã€‚\nã“ã®æ¤œç´¢çª“ã®HTMLä¸Šã®æƒ…å ±ã‚’èª¿ã¹ã‚‹ãŸã‚ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’ç”¨ã„ã‚‹ã€‚Chromeã®å ´åˆã¯F12ã‚­ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\nç”»åƒå³ä¸Šã®HTMLã‚½ãƒ¼ã‚¹ã®èƒŒæ™¯ãŒç°è‰²ã«ãªã£ã¦ã„ã‚‹ç®‡æ‰€ã‚ˆã‚Šã€æ¤œç´¢çª“ã®idå±æ€§ã¯searchInputã§ã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚ã“ã‚Œã‚’find_element_by_idãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€WebElementã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å–å¾—ã™ã‚‹ã€‚\næ¬¡ã«ã€send_keysãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€æ¤œç´¢çª“ã«æ¸¡ã—ãŸã„æ–‡å­—åˆ—ã‚’æŒ‡å®šã™ã‚‹ã€‚æœ€å¾Œã«submitãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã€Œé€ä¿¡ã€ã‚’æŠ¼ã—ãŸã“ã¨ã«ãªã‚Šã€æ¤œç´¢çµæœã®ãƒšãƒ¼ã‚¸ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\nä¾‹4\nWikipediaã§\u0026quot;python\u0026quot;ã‚’æ¤œç´¢ã™ã‚‹ã€‚\n1 2 3 4 5 6 7  from selenium import webdriver driver = webdriver.Chrome(executable_path=\u0026#34;C:\\selenium\\chromedriver.exe\u0026#34;) driver.get(\u0026#34;https://en.wikipedia.org\u0026#34;) search_ele = driver.find_element_by_id(\u0026#34;searchInput\u0026#34;) search_ele.send_keys(\u0026#34;python\u0026#34;) search_ele.submit()   å®Ÿè¡Œçµæœ\nä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nå‚è€ƒ Pythonã§Seleniumã‚’æ“ä½œã™ã‚‹ â€” Selenium Python Bindings 2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n","description":"ã‚¦ã‚§ãƒ–UIã®ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹seleniumã‚’ä½¿ã£ãŸã€ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã®è‡ªå‹•åŒ–ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚","id":51,"section":"posts","tags":["Python","selenium"],"title":"Pythonã¨seleniumã‚’ä½¿ã£ãŸãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œè‡ªå‹•åŒ–","uri":"https://helve-blog.com/posts/python/python-selenium/"},{"content":"ã¯ã˜ã‚ã« Pythonã®reãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®åŸºæœ¬çš„ãªä½¿ã„æ–¹ã‚’ã¾ã¨ã‚ãŸã€‚ã¾ãŸã€æ­£è¦è¡¨ç¾ã‚’æ‰±ã†ãŸã‚ã«ä¾¿åˆ©ãªrawæ–‡å­—åˆ—ã€ãŠã‚ˆã³æ­£è¦è¡¨ç¾ã«ã¤ã„ã¦ã‚‚ç°¡å˜ã«è¿°ã¹ã‚‹ã€‚\næ­£è¦è¡¨ç¾ (Regular Expression) ã«ã‚ˆã‚Šã€æŸ”è»Ÿãªè¡¨ç¾ã§æ–‡å­—åˆ—ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œãˆã‚‹ã€‚\nä»¥é™ã§ã¯reãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1  import re   ç’°å¢ƒ\nPython 3.7.3\nrawæ–‡å­—åˆ—ã«ã¤ã„ã¦ æ­£è¦è¡¨ç¾ã®å‰ã«ã€rawæ–‡å­—åˆ—ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nPythonã§ã¯ã€æ­£è¦è¡¨ç¾ã‚’rawæ–‡å­—åˆ—ã§è¡¨ã™ã“ã¨ãŒå¤šã„ã€‚ã“ã‚Œã¯ã€æ­£è¦è¡¨ç¾ã‚’è¡¨ã™æ–‡å­—åˆ—ã«ã¯ã€ãƒãƒƒã‚¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ãŒå«ã¾ã‚Œã‚‹ã“ã¨ãŒå¤šã„ãŸã‚ã§ã‚ã‚‹ã€‚ä¾‹ãˆã°ã€1æ¡ã®æ•°å­—ã‚’è¡¨ã™æ­£è¦è¡¨ç¾ã¯\\dã¨ãªã‚‹ã€‚\nã—ã‹ã—ã€æ¨™æº–ã®Pythonã®æ–‡å­—åˆ—ã®ä»•æ§˜ã§ã¯ã€\\è¨˜å·ã¯ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—æ–‡å­—ã¨ãªã‚‹ãŸã‚ã€'\\d'ã¨ã„ã†æ­£è¦è¡¨ç¾ã‚’è¡¨ã™ãŸã‚ã«ã¯'\\\\d'ã¨æ›¸ãå¿…è¦ãŒã‚ã‚‹ã€‚\nãã“ã§ã€rawæ–‡å­—åˆ—ã‚’ç”¨ã„ã‚‹ã€‚rawæ–‡å­—åˆ—ã¨ã¯ã€å…ˆé ­ã«rãŒä»˜ã„ãŸæ–‡å­—åˆ—ã®ã“ã¨ã§ã‚ã‚Šã€æ–‡å­—åˆ—ä¸­ã®\\ã«ã‚ˆã‚‹ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚’ç„¡åŠ¹ã«ã§ãã‚‹ã€‚\nã™ãªã‚ã¡ã€'\\\\d'ã¨ã„ã†æ–‡å­—åˆ—ã¨r'\\d'ã¨ã„ã†rawæ–‡å­—åˆ—ã¯ç­‰ä¾¡ã§ã‚ã‚‹ã€‚\næ­£è¦è¡¨ç¾ã‚’ä½¿ã£ãŸæ–‡å­—åˆ—ã®æ¤œç´¢ä¾‹ reãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ˆã‚‹æ­£è¦è¡¨ç¾ã‚’ä½¿ã£ãŸæ–‡å­—åˆ—ã®æ¤œç´¢ä¾‹ã‚’ç¤ºã™ã€‚\næ¤œç´¢æ–¹æ³•ã¯ä¸»ã«ä»¥ä¸‹ã®2ç¨®é¡ãŒã‚ã‚‹ã€‚\n re.search()é–¢æ•°ã‚’ä½¿ã† æ­£è¦è¡¨ç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(re.compile)ã‚’ä½¿ã†  å‰è€…ã®æ–¹ãŒç°¡æ½”ã«è¨˜è¿°ã§ãã‚‹ã€‚ä¸€æ–¹ã€å¾Œè€…ã§ã¯ã€ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ã‚ˆã‚‹ã¨æ­£è¦è¡¨ç¾ãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ãŸã‚ã€åŒã˜æ­£è¦è¡¨ç¾ã§ä½•åº¦ã‚‚æ¤œç´¢ã™ã‚‹å ´åˆã¯ã€å‡¦ç†ã‚’é«˜é€Ÿã«è¡Œãˆã‚‹ã€‚\nä»¥ä¸‹ã®å•é¡Œã«å¯¾ã—ã¦ã€å„æ–¹æ³•ã®ä¾‹ã‚’ç¤ºã™ã€‚\nå•é¡Œï¼š\u0026quot;12 * 3 = 36\u0026quot;ã¨ã„ã†æ–‡å­—åˆ—ã®ä¸­ã‹ã‚‰ã€2æ¡ã®æ•°å­—ã‚’æ¢ã™ã€‚\nre.search()é–¢æ•°ã‚’ä½¿ã† re.search()é–¢æ•°ã®ç¬¬1å¼•æ•°ã«æ­£è¦è¡¨ç¾ã€ç¬¬2å¼•æ•°ã«æ¤œç´¢å¯¾è±¡ã®æ–‡å­—åˆ—ã‚’ã¨ã£ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒãƒƒãƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¿”ã•ã‚Œã‚‹ã€‚\nãƒãƒƒãƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®groupãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã¨ã€æ¤œç´¢çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã€‚ãŸã ã—ã€re.search()é–¢æ•°ã§ã¯æœ€åˆã«ãƒ’ãƒƒãƒˆã—ãŸæ¤œç´¢çµæœã—ã‹å¾—ã‚‰ã‚Œãªã„ã€‚\n1 2 3 4  reg_pat = r\u0026#34;\\d\\d\u0026#34; string = \u0026#34;12 * 3 = 36\u0026#34; mo = re.search(reg_pat, string) print(mo.group())   å®Ÿè¡Œçµæœ\n1  12   æ–‡å­—åˆ—ã®ä¸­ã‹ã‚‰ã€æ­£è¦è¡¨ç¾ã¨ä¸€è‡´ã™ã‚‹å…¨ã¦ã®æ¤œç´¢çµæœã‚’å¾—ãŸã„å ´åˆã¯ã€re.search()é–¢æ•°ã®ä»£ã‚ã‚Šã«re.findall()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚ãŸã ã—ã€findallãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã¯ãƒãƒƒãƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãªãã€ãƒãƒƒãƒã—ãŸæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã§ã‚ã‚‹ã€‚\næ­£è¦è¡¨ç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ(re.compile)ã‚’ä½¿ã† æ­£è¦è¡¨ç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†å ´åˆã€ä»¥ä¸‹ã®æ‰‹é †ã«ãªã‚‹ã€‚\n re.compileã«æ­£è¦è¡¨ç¾ã‚’æ¸¡ã—ã¦æ­£è¦è¡¨ç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚ searchãƒ¡ã‚½ãƒƒãƒ‰ã«æ¤œç´¢å¯¾è±¡ã®æ–‡å­—åˆ—ã‚’æ¸¡ã—ã¦ã€ãƒãƒƒãƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¾—ã‚‹ã€‚ groupãƒ¡ã‚½ãƒƒãƒ‰ã‹ã‚‰æ¤œç´¢çµæœã‚’å¾—ã‚‹ã€‚  1 2 3 4 5  reg_pat = r\u0026#34;\\d\\d\u0026#34; string = \u0026#34;12 * 3 = 36\u0026#34; reg = re.compile(reg_pat) mo = reg.search(string) print(mo.group())   å®Ÿè¡Œçµæœ\n1  12   æ–‡å­—åˆ—ã®ä¸­ã‹ã‚‰ã€æ­£è¦è¡¨ç¾ã¨ä¸€è‡´ã™ã‚‹å…¨ã¦ã®æ¤œç´¢çµæœã‚’å¾—ãŸã„å ´åˆã¯ã€searchãƒ¡ã‚½ãƒƒãƒ‰ã®ä»£ã‚ã‚Šã«findallãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚ãŸã ã—ã€findallãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã¯ãƒãƒƒãƒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãªãã€ãƒãƒƒãƒã—ãŸæ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã§ã‚ã‚‹ã€‚\næ­£è¦è¡¨ç¾ã®è¦å‰‡ ã‚ˆãä½¿ã†ã¨æ€ã‚ã‚Œã‚‹æ­£è¦è¡¨ç¾ã®è¦å‰‡ã«ã¤ã„ã¦ç¤ºã™ã€‚ï¼ˆå…¨ã¦ã®è¦å‰‡ã‚’ç¶²ç¾…ã™ã‚‹ã“ã¨ã¯å›°é›£ãªãŸã‚ã€è©³ç´°ã‚’çŸ¥ã‚ŠãŸã„æ–¹ã¯åˆ¥ã‚µã‚¤ãƒˆã‚‚å‚ç…§ãã ã•ã„ï¼‰\nåŒã˜è¡¨ç¾ã®ç¹°ã‚Šè¿”ã— ã‚ã‚‹è¡¨ç¾ãŒç¹°ã‚Šè¿”ã•ã‚Œã‚‹å›æ•°ã‚’æŒ‡å®šã™ã‚‹ã¨ãã¯ã€ãã®è¡¨ç¾ã®å¾Œã‚ã«{ï¼ˆæ•°å­—ï¼‰}ã‚’ä»˜ã‘ã‚‹ã€‚\nä¾‹\n3æ¡ã®é€£ç¶šã—ãŸæ•°å­—ã‚’æ¤œç´¢ã—ãŸã„å ´åˆï¼š\\d{3}\nã¾ãŸã€ç¹°ã‚Šè¿”ã—å›æ•°ã‚’ã€ŒNå›ä»¥ä¸Šã€Må›ä»¥ä¸‹ã€ã¨ã—ãŸã„å ´åˆã¯ã€{N, M}ã¨ã™ã‚‹ã€‚\nä»»æ„å›æ•°ã®ãƒãƒƒãƒ ã‚ã‚‹è¡¨ç¾ãŒ0å›ã¾ãŸã¯1å›ç¾ã‚Œã‚‹å ´åˆã«ã¯ã€ãã®è¡¨ç¾ã®å¾Œã‚ã«?ã‚’ä»˜ã‘ã‚‹ã€‚\nä¾‹\n\\d-?\\dã¨ã„ã†æ­£è¦è¡¨ç¾ã¯ã€ã€Œé€£ç¶šã—ãŸ2ã¤ã®æ•°å­—ã€ã¾ãŸã¯ã€Œé–“ã«-ã‚’æŒŸã‚“ã 2ã¤ã®æ•°å­—ã€ã®ã©ã¡ã‚‰ã«ã‚‚ãƒãƒƒãƒã™ã‚‹ã€‚\n ãƒãƒƒãƒã™ã‚‹ï¼š'11', '2-3' ãƒãƒƒãƒã—ãªã„ï¼š'1', 2+3', '2--3'  ã¾ãŸã€?ã¨åŒæ§˜ã«*ã¨+ã‚‚ç¹°ã‚Šè¿”ã—å›æ•°ã‚’æŒ‡å®šã™ã‚‹è¨˜å·ã§ã‚ã‚‹ã€‚*ã¯0å›ä»¥ä¸Šã®ãƒãƒƒãƒã‚’ã€+ã¯1å›ä»¥ä¸Šã®ãƒãƒƒãƒã‚’ãã‚Œãã‚Œç¤ºã™ã€‚\næ–‡å­—é›†åˆ /dã¯0ã‹ã‚‰9ã¾ã§ã®æ•°å­—ã®é›†åˆã§ã‚ã‚‹ãŒã€ä¸‹è¡¨ã®ã‚ˆã†ãªãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã€‚\n   ãƒ‘ã‚¿ãƒ¼ãƒ³ æ„å‘³     \\d 0ï½9ã®æ•°å­— [0-9]   \\D æ•°å­—ä»¥å¤–   \\w æ–‡å­—ã€æ•°å­—ã€ä¸‹ç·š [a-zA-Z0-9_]   \\w æ–‡å­—ã€æ•°å­—ã€ä¸‹ç·šä»¥å¤–    ã¾ãŸã€è§’æ‹¬å¼§ã‚’ä½¿ã†ã¨ã€æ–‡å­—é›†åˆã‚’å®šç¾©ã§ãã‚‹ã€‚[abc]ã¯a, b, cã®ã„ãšã‚Œã‹ã®æ–‡å­—ã‚’è¡¨ã™ã€‚\né€£ç¶šã—ãŸæ–‡å­—ã¯ãƒã‚¤ãƒ•ãƒ³ã‚’ä½¿ã£ã¦æŒ‡å®šã§ãã‚‹ã€‚[A-Z]ã¯å¤§æ–‡å­—ã®Aã‹ã‚‰Zã¾ã§ã®æ–‡å­—é›†åˆã‚’ç¤ºã™ã€‚\nå‚è€ƒ re \u0026mdash; æ­£è¦è¡¨ç¾æ“ä½œ â€” Python 3.9.1 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\næ­£è¦è¡¨ç¾ - Wikipedia\n","description":"","id":52,"section":"posts","tags":["Python","æ­£è¦è¡¨ç¾"],"title":"Pythonã®reãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ãŸæ­£è¦è¡¨ç¾ã®åŸºæœ¬","uri":"https://helve-blog.com/posts/python/python-regular-expression/"},{"content":"ã¯ã˜ã‚ã« Pythonã®è¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã£ã¦ã€è¾æ›¸(dict)å‹ã®å¤‰æ•°ã‚’ç°¡æ½”ã«ä½œæˆã™ã‚‹ä¾‹ã‚’ç¤ºã™ã€‚\nPythonã«ã¯ãƒªã‚¹ãƒˆå‹ã®å‡¦ç†ã‚’ç°¡æ½”ã«æ›¸ã‘ã‚‹ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ãŒã‚ã‚‹ãŒã€è¾æ›¸å‹ã«ã‚‚åŒæ§˜ã®å†…åŒ…è¡¨è¨˜ãŒã‚ã‚‹ã€‚ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã¨åˆã‚ã›ã¦ã€ä½œæˆä¾‹ã‚’ç¤ºã™ã€‚\nç’°å¢ƒ: Python 3.5ä»¥é™\nãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ å‚è€ƒã¾ã§ã«ã€ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã®ä¾‹ã‚’ç¤ºã™ã€‚0ã‹ã‚‰9ã¾ã§ã®æ•°å­—ã‚’2å€ã«ã—ãŸãƒªã‚¹ãƒˆã‚’å¾—ã‚‹ã€‚\n1 2  doubles = [x*2 for x in range(10)] print(doubles)   å®Ÿè¡Œçµæœ\n1  [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]   è¾æ›¸å†…åŒ…è¡¨è¨˜ æ¬¡ã«ã€è¾æ›¸å†…åŒ…è¡¨è¨˜ã®ä¾‹ã‚’ç¤ºã™ã€‚0ã‹ã‚‰9ã¾ã§ã®æ•°å­—ã‚’ã‚­ãƒ¼ã€å„ã‚­ãƒ¼ã‚’2å€ã«ã—ãŸã‚‚ã®ã‚’å€¤ã¨ã—ãŸè¾æ›¸ã‚’å¾—ã‚‹ã€‚\n1 2  doubles_dict = {x: x*2 for x in range(10)} print(doubles_dict)   å®Ÿè¡Œçµæœ\n1  {0: 0, 1: 2, 2: 4, 3: 6, 4: 8, 5: 10, 6: 12, 7: 14, 8: 16, 9: 18}   ä¸Šè¨˜ã®ä¾‹ã®ã‚ˆã†ã«ã€ãƒªã‚¹ãƒˆå†…åŒ…è¡¨è¨˜ã®[...]ã‚’{...}ã¨ã—ã¦ã€ã‚³ãƒ­ãƒ³:ã‚’ä½¿ã£ã¦ã‚­ãƒ¼ã¨å€¤ã‚’æŒ‡å®šã™ã‚‹ã¨ã€è¾æ›¸å†…åŒ…è¡¨è¨˜ã¨ãªã‚‹ã€‚\nè¾æ›¸å†…åŒ…è¡¨è¨˜ã®if è¾æ›¸å†…åŒ…è¡¨è¨˜ã§ã€ã‚ã‚‹æ¡ä»¶ã‚’æº€ãŸã™å¤‰æ•°ã®ã¿æŠ½å‡ºã™ã‚‹å ´åˆã¯ã€inç¯€ã®å¾Œã‚ã«ifç¯€ã‚’è¨­ã‘ã‚‹ã€‚\nä¾‹ï¼š0ã‹ã‚‰9ã¾ã§ã®å¶æ•°ã‚’ã‚­ãƒ¼ã€å„ã‚­ãƒ¼ã‚’2å€ã«ã—ãŸã‚‚ã®ã‚’å€¤ã¨ã—ãŸè¾æ›¸ã‚’å¾—ã‚‹ã€‚\n1 2  doubles_dict2 = {x: x*2 for x in range(10) if x%2==0} print(doubles_dict2)   å®Ÿè¡Œçµæœ\n1  {0: 0, 2: 4, 4: 8, 6: 12, 8: 16}   è¾æ›¸å†…åŒ…è¡¨è¨˜ã®ifï½else è¾æ›¸å†…åŒ…è¡¨è¨˜ã§ã€æ¡ä»¶ã«ã‚ˆã£ã¦å‡¦ç†ã‚’åˆ†å²ã•ã›ã‚‹å ´åˆã¯ã€forç¯€ã®å‰ã«ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ifï½elseç¯€ã‚’è¨­ã‘ã‚‹ã€‚\nï¼ˆæ¡ä»¶ãŒTrueã®ã¨ãã®å€¤ï¼‰ if ï¼ˆæ¡ä»¶ï¼‰ else ï¼ˆæ¡ä»¶ãŒFalseã®ã¨ãã®å€¤ï¼‰\nä¾‹ï¼š0ã‹ã‚‰9ã¾ã§ã®æ•´æ•°ã‚’ã‚­ãƒ¼ã¨ã—ã€ã‚­ãƒ¼ãŒå¶æ•°ã®å ´åˆã¯2å€ã€ã‚­ãƒ¼ãŒå¥‡æ•°ã®å ´åˆã¯3å€ã«ã—ãŸã‚‚ã®ã‚’å€¤ã¨ã—ãŸè¾æ›¸ã‚’å¾—ã‚‹ã€‚\n1 2  doubles_dict3 = {x: x*2 if x%2==0 else x*3 for x in range(10)} print(doubles_dict3)   å®Ÿè¡Œçµæœ\n1  {0: 0, 1: 3, 2: 4, 3: 9, 4: 8, 5: 15, 6: 12, 7: 21, 8: 16, 9: 27}   å‚è€ƒ 5. ãƒ‡ãƒ¼ã‚¿æ§‹é€  â€” Python 3.9.0 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\nè¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã†ã¨ã€Pandasã®Series, DataFrameã‚’ç°¡æ½”ã«ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nè¾æ›¸å†…åŒ…è¡¨è¨˜ã§Pandasã®Series, DataFrameã‚’ä½œæˆ\n","description":"Pythonã®è¾æ›¸å†…åŒ…è¡¨è¨˜ã‚’ä½¿ã£ã¦ã€è¾æ›¸(dict)å‹ã®å¤‰æ•°ã‚’ç°¡æ½”ã«ä½œæˆã™ã‚‹ä¾‹ã‚’ç¤ºã™ã€‚","id":53,"section":"posts","tags":["Python"],"title":"Pythonã®è¾æ›¸å†…åŒ…è¡¨è¨˜","uri":"https://helve-blog.com/posts/python/python-dict-comprehension/"},{"content":"ã¯ã˜ã‚ã« pandasã§1æ¬¡å…ƒé…åˆ—ã‚’æ‰±ã†Seriesã‚¯ãƒ©ã‚¹ã«ã¯ã€ä»–ã®Seriesã¨ã®ç›¸é–¢ä¿‚æ•°ã‚’æ±‚ã‚ã‚‹ãŸã‚ã®corrãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\nã—ã‹ã—ã€indexãŒæ™‚ç³»åˆ—ã§ã‚ã‚‹SeriesåŒå£«ã§ç›¸é–¢ä¿‚æ•°ã‚’æ±‚ã‚ã‚ˆã†ã¨ã™ã‚‹ã¨ã€åŒã˜æ™‚åˆ»ã®å€¤åŒå£«ã§ç›¸é–¢ã‚’è¨ˆç®—ã—ã¦ã—ã¾ã†ã€‚\nã“ã‚Œã‚’é¿ã‘ã‚‹ãŸã‚ã«ã¯ã€shiftãƒ¡ã‚½ãƒƒãƒ‰ã§æ™‚åˆ»ã‚’ãšã‚‰ã™å¿…è¦ãŒã‚ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ã“ã‚Œã«ã¤ã„ã¦å®Ÿä¾‹ã‚’ç¤ºã™ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.3   NumPy 1.16.2   Pandas 0.24.2    ã¾ãŸã€ä»¥ä¸‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2  import numpy as np import pandas as pd   corrãƒ¡ã‚½ãƒƒãƒ‰ã®åŸºæœ¬ pandasã§1æ¬¡å…ƒé…åˆ—ã‚’æ‰±ã†Seriesã‚¯ãƒ©ã‚¹ã«ã¯ã€ä»–ã®Seriesã¨ã®ç›¸é–¢ä¿‚æ•°ã‚’æ±‚ã‚ã‚‹ãŸã‚ã®corrãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\npandas.Series.corr â€” pandas 1.2.0 documentation\nä¾‹\n1 2 3 4  s1 = pd.Series([1, 2, 3, 4]) s2 = pd.Series([1, 3, 4, 4]) print(s1.corr(s2))   å®Ÿè¡Œçµæœ\n1  0.9128709291752768   æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã§corrãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ãã®å•é¡Œ ã—ã‹ã—ã€indexãŒæ™‚ç³»åˆ—ã§ã‚ã‚‹SeriesåŒå£«ã§ç›¸é–¢ä¿‚æ•°ã‚’æ±‚ã‚ã‚ˆã†ã¨ã™ã‚‹ã¨ã€åŒã˜æ™‚åˆ»ã®å€¤åŒå£«ã§ç›¸é–¢ã‚’è¨ˆç®—ã—ã¦ã—ã¾ã†ã€‚\nä¾‹ã‚’ç¤ºã™ã€‚ä¹±æ•°ã§ç”Ÿæˆã—ãŸé•·ã•10ã®é…åˆ—s1ã‚’ç”Ÿæˆã™ã‚‹ã€‚ã¾ãŸã€s1ã®indexã¯ã€2019å¹´12æœˆ1æ—¥ã‚’èµ·ç‚¹ã¨ã—ãŸã€1æ—¥å‘¨æœŸã®æ—¥ä»˜ã¨ã™ã‚‹ã€‚\n1 2 3 4 5  n_data = 10 start = pd.Timestamp(\u0026#34;2019/12/01\u0026#34;) s1 = pd.Series(np.random.rand(n_data), index=pd.date_range(start, freq=\u0026#34;D\u0026#34;, periods=n_data)) print(s1)   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6 7 8 9 10 11  2019-12-01 0.548814 2019-12-02 0.715189 2019-12-03 0.602763 2019-12-04 0.544883 2019-12-05 0.423655 2019-12-06 0.645894 2019-12-07 0.437587 2019-12-08 0.891773 2019-12-09 0.963663 2019-12-10 0.383442 Freq: D, dtype: float64   æ¬¡ã«ã€s1ã®1ï½9ç•ªç›®ã®è¦ç´ ã‚’æŠ½å‡ºã—ãŸs2ã¨ã€2ï½10ç•ªç›®ã®è¦ç´ ã‚’æŠ½å‡ºã—ãŸs3ã‚’å®šç¾©ã™ã‚‹ã€‚\n1 2 3 4  s2 = s1.iloc[:-1] s3 = s1.iloc[1:] print(s2) print(s3)   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  2019-12-01 0.548814 2019-12-02 0.715189 2019-12-03 0.602763 2019-12-04 0.544883 2019-12-05 0.423655 2019-12-06 0.645894 2019-12-07 0.437587 2019-12-08 0.891773 2019-12-09 0.963663 Freq: D, dtype: float64 2019-12-02 0.715189 2019-12-03 0.602763 2019-12-04 0.544883 2019-12-05 0.423655 2019-12-06 0.645894 2019-12-07 0.437587 2019-12-08 0.891773 2019-12-09 0.963663 2019-12-10 0.383442 Freq: D, dtype: float64   ç›´è¦³çš„ã«ã¯s2ã¨s3ã®ç›¸é–¢ä¿‚æ•°ã‚’è¨ˆç®—ã™ã‚‹ã¨ã€0ã«è¿‘ã„å€¤ãŒå¾—ã‚‰ã‚Œã‚‹ã‚ˆã†ã«æ€ã†ã€‚ã—ã‹ã—ãªãŒã‚‰ã€å®Ÿéš›ã«è¨ˆç®—ã™ã‚‹ã¨1ã¨ãªã‚‹ã€‚\n1  print(s2.corr(s3))   å®Ÿè¡Œçµæœ\n1  1.0   ã“ã‚Œã¯ã€corrãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§ã€é…åˆ—ã®è¦ç´ ã®ä½ç½®ã§ã¯ãªãã€indexã®æ—¥ä»˜ã‚’åŸºæº–ã¨ã—ã¦ç›¸é–¢ä¿‚æ•°ã®è¨ˆç®—ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚\nãªãŠã€ã“ã®ä»•æ§˜ã«ã¤ã„ã¦ã¯å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„ã€‚\nã“ã®ä»•æ§˜ãŒå•é¡Œã¨ãªã‚‹ã®ã¯ã€è‡ªå·±ç›¸é–¢ã®ç®—å‡ºãªã©ã€æ™‚é–“ã‚’ãšã‚‰ã—ã¦å¤‰æ•°é–“ã®ç›¸é–¢ã‚’æ±‚ã‚ãŸã„å ´åˆã§ã‚ã‚‹ã€‚\nã¡ãªã¿ã«ã€indexãŒæ™‚åˆ»ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«é•·ã•ã®ç•°ãªã‚‹é…åˆ—ã®ç›¸é–¢ä¿‚æ•°ã‚‚è¨ˆç®—ã§ãã‚‹ï¼ˆçµæœã¯ã‚‚ã¡ã‚ã‚“1ã§ã‚ã‚‹ï¼‰ã€‚\n1  print(s2.corr(s1))   æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã§corrãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ãã®å¯¾ç­– ä¸Šè¨˜ã®ä»•æ§˜ã«é–¢ã—ã¦ã€æ™‚é–“ã‚’ãšã‚‰ã—ã¦ç›¸é–¢ä¿‚æ•°ã‚’ç®—å‡ºã™ã‚‹ãŸã‚ã«ã¯ã€shiftãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦é…åˆ—ã®æ™‚åˆ»ã‚’ãšã‚‰ã™ã“ã¨ãŒå¿…è¦ã§ã‚ã‚‹ã€‚\nè©¦ã—ã«ã€s1ã®å€¤ã‚’1ã¤ã ã‘å¾Œã‚ã«ãšã‚‰ã—ãŸé…åˆ—s4ã‚’ä½œæˆã™ã‚‹ã€‚\ns1ã¯ä¹±æ•°ã§ç”Ÿæˆã—ãŸé…åˆ—ã§ã‚ã‚‹ã‹ã‚‰ã€s4ã¨ã®ç›¸é–¢ä¿‚æ•°ã¯ã»ã¼0ã«ãªã‚‹ã€‚\n1 2 3  s4 = s1.shift(1) print(s4) print(s4.corr(s1))   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6 7 8 9 10 11 12 13  2019-12-01 NaN 2019-12-02 0.548814 2019-12-03 0.715189 2019-12-04 0.602763 2019-12-05 0.544883 2019-12-06 0.423655 2019-12-07 0.645894 2019-12-08 0.437587 2019-12-09 0.891773 2019-12-10 0.963663 Freq: D, dtype: float64 -0.13136358697190584   shiftãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\npandas.Series.shift â€” pandas 1.2.0 documentation\nã¾ãŸã€ä»–ã«indexã‚’æ™‚åˆ»ä»¥å¤–ã«ã™ã‚‹ã¨ã„ã†å¯¾ç­–ã‚‚ã‚ã‚‹ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ ç›¸é–¢ä¿‚æ•°ã‚’ç®—å‡ºã™ã‚‹corrãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚\npandas.Series.corr â€” pandas 1.2.0 documentation\nPythonã§ç›¸é–¢ä¿‚æ•°ã‚’è¨ˆç®—ã™ã‚‹[4ãƒ‘ã‚¿ãƒ¼ãƒ³] - Qiita\npandasã®Series, DataFrameã‚’ãšã‚‰ã™shiftãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚\npandas.Series.shift â€” pandas 1.2.0 documentation\npandasã§ãƒ‡ãƒ¼ã‚¿ã‚’è¡Œãƒ»åˆ—ï¼ˆç¸¦ãƒ»æ¨ªï¼‰æ–¹å‘ã«ãšã‚‰ã™shift | note.nkmk.me\n","description":"","id":54,"section":"posts","tags":["Python","Pandas"],"title":"pandas.Seriesã®corrãƒ¡ã‚½ãƒƒãƒ‰ã§æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ç›¸é–¢ä¿‚æ•°ã‚’æ±‚ã‚ã‚‹éš›ã®æ³¨æ„ç‚¹","uri":"https://helve-blog.com/posts/python/pandas-corr-timeseries/"},{"content":"ã¯ã˜ã‚ã« ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®1ã¤ã§ã‚ã‚‹PyTorchã«ã¯ã€è‡ªå‹•å¾®åˆ†ã®æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\nè‡ªå‹•å¾®åˆ†ã‚’ä½¿ã†ã¨ã€é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã‚’è‡ªå‹•çš„ã«æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€å‹¾é…ã‚’ä½¿ã£ãŸæœ€é©åŒ–æ‰‹æ³•ã‚’å®¹æ˜“ã«è¡Œãˆã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€PyTorchã®tensorã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã—ã€1éšå¾®åˆ†ã€2éšå¾®åˆ†ã®æ±‚ã‚æ–¹ã¤ã„ã¦ã¾ã¨ã‚ã‚‹ã€‚\nâ€»æœ¬è¨˜äº‹ã¯Chainerã«é–¢ã™ã‚‹ä»¥ä¸‹ã®è¨˜äº‹ã‚’PyTorchå‘ã‘ã«æ›¸ãç›´ã—ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚\nChainerã®è‡ªå‹•å¾®åˆ†ã§å‹¾é…ã‚’æ±‚ã‚ã‚‹\nPyTorchã¨æœ€é©åŒ– PyTorchã¯ã€FacebookãŒæä¾›ã—ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚\nPyTorchã«ã¯ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å­¦ç¿’ã‚’é«˜é€Ÿã«è¡Œã†ãŸã‚ã€å®šç¾©ã—ãŸé–¢æ•°ã®å‹¾é…ã‚’è‡ªå‹•ã§æ±‚ã‚ã‚‹æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\nï¼ˆã“ã®æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§ã€æå¤±é–¢æ•°ã‚’æœ€å°åŒ–ã™ã‚‹ãŸã‚ã«ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å„ãƒãƒ¼ãƒ‰ã®é‡ã¿ã‚’ã©ã®æ–¹å‘ã«æ›´æ–°ã™ã‚Œã°è‰¯ã„ã‹åˆ†ã‹ã‚‹ï¼‰\nä¸€æ–¹ã€æœ€é©åŒ–å•é¡Œã‚’è§£ãã¨ãã€æœ€æ€¥é™ä¸‹æ³•ãªã©ã®æ‰‹æ³•ã§ã¯ã€é–¢æ•°ã®å‹¾é…ãŒå¿…è¦ã¨ãªã‚‹ã€‚\né–¢æ•°ã®å‹¾é…ã‚’æ±‚ã‚ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚\n é–¢æ•°ã®å°é–¢æ•°ã‚’æ‰‹è¨ˆç®—ã§æ±‚ã‚ã‚‹æ–¹æ³• æ•°å€¤å¾®åˆ†ï¼ˆå°‘ã—ã ã‘å¤‰åŒ–ã•ã›ãŸå…¥åŠ›å¤‰æ•°ã‚’ä¸ãˆã¦å‡ºåŠ›ã®å·®ã‹ã‚‰å‹¾é…ã‚’æ±‚ã‚ã‚‹ï¼‰ è‡ªå‹•å¾®åˆ†  å•é¡ŒãŒè¤‡é›‘ãªå ´åˆã€(1)ã¯å›°é›£ã§ã‚ã‚‹ã€‚\nã¾ãŸã€(2)ã¯è¨ˆç®—æ™‚é–“ã‚’è¦ã™ã‚‹å•é¡ŒãŒã‚ã‚‹ã€‚\n(3)ã¯ã€å®Ÿè£…ã«æ‰‹é–“ãŒæ›ã‹ã‚‹ã¨ã„ã†æ¬ ç‚¹ãŒã‚ã‚‹ãŒã€å•é¡Œã”ã¨ã«å°é–¢æ•°ã‚’æ±‚ã‚ã‚‹æ‰‹é–“ã‚‚ä¸è¦ã§ã€è¨ˆç®—æ™‚é–“ã‚‚çŸ­ã„åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nPyTorchã«ã¯(3)ã®æ©Ÿèƒ½ãŒtensorã¨ã„ã†ã‚¯ãƒ©ã‚¹ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€æœ€é©åŒ–ã«æ´»ç”¨ã™ã‚‹ãŸã‚ä»•æ§˜ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚\nã¾ãŸã€æœ€æ€¥é™ä¸‹æ³•ã®Pythonã§ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯ã€éå»è¨˜äº‹ã‚’ã”å‚è€ƒã¾ã§ã€‚\nç›´ç·šæ¢ç´¢ã‚’ä½¿ã£ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…\nPyTorchã¯Chainerã‹ã‚‰ãƒ•ã‚©ãƒ¼ã‚¯ï¼ˆåˆ†å²ï¼‰ã—ã¦ã„ã‚‹ãŸã‚ã€Chainerã®ç‰¹å¾´ã‚’å—ã‘ç¶™ã„ã§ã„ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Spyder 3.3.3   Python 3.7.3   NumPy 1.16.2   PyTorch 1.3.1    PyTorchã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ç’°å¢ƒã«ã‚ˆã£ã¦ç•°ãªã‚‹ãŸã‚ã€å…¬å¼ã‚µã‚¤ãƒˆã‚’å‚è€ƒã®ã“ã¨ã€‚\nPyTorch\nä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ã«PyTorchã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ã€OS, ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ã‚’é¸æŠã—ã€\u0026ldquo;Run this Command.\u0026ldquo;ã«ç¾ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦PyTorchã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nã¾ãŸã€ä»¥ä¸‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3  import numpy as np import torch from torch import tensor   tensorã‚¯ãƒ©ã‚¹ PyTorchã®tensorã‚¯ãƒ©ã‚¹ã¯ã€æ•°å€¤ã®é…åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹ã‚¯ãƒ©ã‚¹ã§ã‚ã‚Šã€NumPyé…åˆ—ã«è¿‘ã„æ„Ÿè¦šã§æ‰±ãˆã‚‹ã€‚\ntensorã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã¯ã€tensorã‚¯ãƒ©ã‚¹ã®å¼•æ•°ã«æ•°å€¤ã€ãƒªã‚¹ãƒˆå‹ã®é…åˆ—ã€ã¾ãŸã¯NumPyé…åˆ—ã‚’ä¸ãˆã‚‹ã€‚\nä¾‹ï¼š\n1 2 3  x0 = tensor(1.0) x1 = tensor([1.0, 2.0]) x2 = tensor(np.array([1.0, 2.0]))   ãŸã ã—ã€å‹¾é…ã‚’æ±‚ã‚ã‚‹ãŸã‚ã«ã¯ã€requires_gradã‚’Trueã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯Falseï¼‰ã€‚\nä¾‹ï¼š\n1  x0 = tensor(1.0, requires_grad=True)   tensorã‚¯ãƒ©ã‚¹ã§æ‰±ãˆã‚‹å°æ•°ã®ç²¾åº¦ã¯ã€16, 32, 64ãƒ“ãƒƒãƒˆã®3ç¨®é¡ãŒã‚ã‚‹ï¼ˆå‹¾é…è¨ˆç®—ã§ã¯ä¸è¦ã ãŒã€æ•´æ•°ã‚„ãƒ–ãƒ¼ãƒ«å‹ã‚‚æ‰±ãˆã‚‹ï¼‰ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯32ãƒ“ãƒƒãƒˆå°æ•°ã§ã‚ã‚Šã€å¤‰æ›´ã™ã‚‹å ´åˆã¯dtypeã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ä»¥ä¸‹ã®å‹ã‚’æŒ‡å®šã™ã‚‹ã€‚\n   ç²¾åº¦ å‹æŒ‡å®š     16ãƒ“ãƒƒãƒˆ torch.float16 or torch.half   32ãƒ“ãƒƒãƒˆ torch.float32 or torch.float   64ãƒ“ãƒƒãƒˆ torch.float64 or torch.double    ä¾‹ï¼š\n1 2  x0 = tensor(1.0, dtype=torch.float16) x1 = tensor([1.0, 2.0], dtype=torch.double)   ã¾ãŸã€tensorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåŒå£«ã®æ¼”ç®—ãŒã§ãã‚‹ï¼ˆé…åˆ—ã®ã‚µã‚¤ã‚ºãŒç•°ãªã‚‹å ´åˆã€ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã•ã‚Œã‚‹ï¼‰ã€‚\n1 2 3  x0 = tensor(1.0) x1 = tensor([1.0, 2.0]) print(x0+x1) # tensor([2., 3.])   é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®šã—ã¦ã€è¦ç´ ã‚’å–ã‚Šå‡ºã™ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\n1 2  x1 = tensor([1.0, 2.0]) print(x1[1]) # tensor(2.)   tensorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®numpyãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨ã€NumPyé…åˆ—ã«å¤‰æ›ã§ãã‚‹ã€‚\n1 2  x1 = tensor([1.0, 2.0]) x1.numpy() # array([1., 2.], dtype=float32)   ã•ã‚‰ã«ã€tensorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®gradå±æ€§ã‹ã‚‰ã€å‹¾é…ã®tensoré…åˆ—ã‚’å–å¾—ã§ãã‚‹ï¼ˆè©³ç´°ã¯å¾Œè¿°ï¼‰ã€‚\n1éšå¾®åˆ†ã®æ±‚ã‚æ–¹ tensorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ãŸ1éšå¾®åˆ†ã®æ±‚ã‚æ–¹ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nã¾ãšã€ä»¥ä¸‹ã®2å¤‰æ•°é–¢æ•°ã‚’è€ƒãˆã‚‹ã€‚\n$$ f(\\boldsymbol{x}) = 2x_0^2 + x_1^2 + 2x_0 + x_1, \\boldsymbol{x}=[ x_0, x_1 ]^\\mathrm{T} $$\nã“ã®é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$$ \\nabla f(\\boldsymbol{x}) = \\left[ \\frac{\\partial f}{\\partial x_0}, \\frac{\\partial f}{\\partial x_1} \\right]^\\mathrm{T} = [4x_0 + 2, 2x_1 + 1 ]^\\mathrm{T} $$\nç‚¹$ (x_0, x_1)=(1, 2)$ã«ãŠã„ã¦ã€é–¢æ•°å€¤ã¨å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$ f(\\boldsymbol{x})=10 $\n$ \\displaystyle \\nabla f(\\boldsymbol{x}) = [6, 5 ]^\\mathrm{T} $\nä¸Šè¨˜ã®é–¢æ•°ã‚’tensorã‚’ä½¿ã£ã¦è¨˜è¿°ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2  x = tensor([1.0, 2.0], requires_grad=True) y = 2*x[0]**2 + x[1]**2 + 2*x[0] + x[1]   é–¢æ•°ã®å€¤(10)ã¯æ—¢ã«å¾—ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; y tensor(10., grad_fn=\u0026lt;AddBackward0\u0026gt;)   grad_fnã¯yã«å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®è¨ˆç®—ã‚°ãƒ©ãƒ•ãŒæ§‹ç¯‰ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã™å±æ€§ã§ã‚ã‚‹ã€‚\nã“ã®æ®µéšã§ã¯å‹¾é…ã¯ã¾ã å¾—ã‚‰ã‚Œã¦ãŠã‚‰ãšã€å‹¾é…ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã¯backwardãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1  y.backward()   ã™ã‚‹ã¨ã€è‡ªå‹•å¾®åˆ†ãŒå®Ÿè¡Œã•ã‚Œã€x.gradã«å‹¾é…ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; x.grad tensor([6., 5.])   ã“ã“ã§ã€backwardãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å¤‰æ•°ãŒã‚¹ã‚«ãƒ©ãƒ¼ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã“ã¨ã«æ³¨æ„ã™ã‚‹ã€‚\n2ã¤ä»¥ä¸Šã®è¦ç´ ã‚’æŒã¤é…åˆ—ã§å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ã€‚\n1 2 3  x = tensor([1.0, 2.0], requires_grad=True) z = 2*x # tensor([2., 4.], grad_fn=\u0026lt;MulBackward0\u0026gt;) z.backward()   å®Ÿè¡Œçµæœï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  Traceback (most recent call last): File \u0026#34;\u0026lt;ipython-input-48-40c0c9b0bbab\u0026gt;\u0026#34;, line 1, in \u0026lt;module\u0026gt; z.backward() File \u0026#34;D:\\Anaconda\\lib\\site-packages\\torch\\tensor.py\u0026#34;, line 166, in backward torch.autograd.backward(self, gradient, retain_graph, create_graph) File \u0026#34;D:\\Anaconda\\lib\\site-packages\\torch\\autograd\\__init__.py\u0026#34;, line 93, in backward grad_tensors = _make_grads(tensors, grad_tensors) File \u0026#34;D:\\Anaconda\\lib\\site-packages\\torch\\autograd\\__init__.py\u0026#34;, line 34, in _make_grads raise RuntimeError(\u0026#34;grad can be implicitly created only for scalar outputs\u0026#34;) RuntimeError: grad can be implicitly created only for scalar outputs   ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ã€ã€Œã‚¹ã‚«ãƒ©ãƒ¼ã«å¯¾ã—ã¦ã®ã¿å‹¾é…ãŒè¨ˆç®—ã•ã‚Œã‚‹ã€ã¨ã‚ã‚‹ã€‚\nä¸­é–“å¤‰æ•°ã®å‹¾é…ã‚’æ±‚ã‚ã‚‹å ´åˆ ä¸Šè¨˜ã®æ–¹æ³•ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«tensorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ¼”ç®—ã‚’2å›ä»¥ä¸Šé‡ã­ãŸå ´åˆã«ã€ä¸­é–“ã®å¤‰æ•°ã®å‹¾é…ãŒä¿å­˜ã•ã‚Œãªã„ã€‚\n1 2 3 4 5 6  x = tensor(1.0, requires_grad=True) y = x**2 z = y**2 z.backward() y.grad # å‹¾é…ãŒæ ¼ç´ã•ã‚Œãªã„ (None) x.grad # zã«å¯¾ã™ã‚‹xã®å‹¾é… (tensor(4.))   ä¸­é–“ã®å¤‰æ•°ã®å‹¾é…ãŒæ¬²ã—ã„å ´åˆã«ã¯ã€ä¸­é–“å¤‰æ•°ã®retain_gradãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œå¾Œã«ã€backwardãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4 5 6 7  x = tensor(1.0, requires_grad=True) y = x**2 z = y**2 y.retain_grad() z.backward() y.grad # zã«å¯¾ã™ã‚‹yã®å‹¾é… (tensor(2.)) x.grad # zã«å¯¾ã™ã‚‹xã®å‹¾é… (tensor(4.))   2éšå¾®åˆ†ã®æ±‚ã‚æ–¹ 2éšå¾®åˆ†ã‚’æ±‚ã‚ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã€‚\n1 2 3 4 5  x = tensor(1.0, requires_grad=True) y = x**3 grads = torch.autograd.grad(outputs=y, inputs=x, create_graph=True) grads[0].backward() x.grad # yã«å¯¾ã™ã‚‹xã®2éšå¾®åˆ† (tensor(6.))   ç›®çš„å¤‰æ•°yã‚’å®šç¾©å¾Œã€torch.autograd.gradé–¢æ•°ã‚’ä½¿ã£ã¦ã€1éšã®å‹¾é…ã‚’å–å¾—ã™ã‚‹ã€‚\nã“ã®é–¢æ•°ã¯outputsã«å¯¾ã™ã‚‹inputsã®å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°ã§ã‚ã‚‹ã€‚\ncreate_graphã‚’Trueã«ã™ã‚‹ã“ã¨ã§ã€å¾®åˆ†ã‚°ãƒ©ãƒ•ãŒæ§‹ç¯‰ã•ã‚Œã€é«˜æ¬¡ã®å‹¾é…ã‚’è¨ˆç®—ã§ãã‚‹ã€‚\ninputsã¯è¤‡æ•°ã®tensoré…åˆ—ã‚’ã¨ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€æˆ»ã‚Šå€¤(grads)ã¯ã‚¿ãƒ—ãƒ«ã§ã‚ã‚‹ã€‚\nãã®ãŸã‚ã€ä¸­èº«ã‚’[0]ã§ä¸­èº«ã‚’å–ã‚Šå‡ºã—ã¦ã€backwardãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€x.gradã«2éšå¾®åˆ†ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ PyTorchã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã€‚\ntorch.Tensor â€” PyTorch master documentation\nAutomatic differentiation package - torch.autograd â€” PyTorch master documentation\ntensorã‚¯ãƒ©ã‚¹ã®ä½œæˆæ–¹æ³•ã‚„ã€ç°¡å˜ãªæ¼”ç®—ã«ã¤ã„ã¦ã€‚\nPytorch Tensorã«ã¤ã„ã¦ - Qiita\nè‡ªå‹•å¾®åˆ†ã®åŸºæœ¬ã«ã¤ã„ã¦ã€‚\nã€PyTorchå…¥é–€ã€‘ç¬¬2å› autograd:è‡ªå‹•å¾®åˆ† - Qiita\n3éšã®å‹¾é…ã‚„ã€åå°é–¢æ•°ã‚’æ‰±ã£ã¦ã„ã‚‹ã€‚\nPyTorchã§é«˜éšåå¾®åˆ†ä¿‚æ•° - Qiita\n","description":"PyTorchã®tensorã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ãŸ1éšå¾®åˆ†ã€2éšå¾®åˆ†ã®æ±‚ã‚æ–¹ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":55,"section":"posts","tags":["Python","PyTorch"],"title":"PyTorchã®è‡ªå‹•å¾®åˆ†ã§å‹¾é…ã‚’æ±‚ã‚ã‚‹","uri":"https://helve-blog.com/posts/python/pytorch-automatic-differentiation/"},{"content":"ã¯ã˜ã‚ã« Chainerã®Variableã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ãŸè‡ªå‹•å¾®åˆ†ã«é–¢ã™ã‚‹è¨˜äº‹ã§ã‚ã‚‹ã€‚å‰å›è¨˜äº‹ã®è£œè¶³ã¨ã—ã¦ã€backwardãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãã®æ³¨æ„ç‚¹ã¨ã€chainer.gradé–¢æ•°ã‚’ä½¿ã£ãŸè‡ªå‹•å¾®åˆ†ã®è¨ˆç®—ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nbackwardãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹åº¦ã«å‹¾é…ãŒåŠ ç®—ã•ã‚Œã‚‹ãŸã‚ã€2å›ä»¥ä¸Šä½¿ç”¨ã™ã‚‹ã¨ãã¯ã€å‹¾é…ã‚’é™¤å»ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã¾ãŸã€chainer.gradé–¢æ•°ã‚’ä½¿ã†ã¨ã€ä»»æ„ã®Variableå¤‰æ•°é–“ã®å‹¾é…ã‚’è¨ˆç®—ã§ãã‚‹ã€‚\nå‰å›è¨˜äº‹ï¼šChainerã®è‡ªå‹•å¾®åˆ†ã§å‹¾é…ã‚’æ±‚ã‚ã‚‹ \nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Spyder 3.3.3   Python 3.7.3   NumPy 1.16.2   Chainer 6.3.0    ä»¥ä¸‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3  import numpy as np import chainer from chainer import Variable   backwardãƒ¡ã‚½ãƒƒãƒ‰ã®æ³¨æ„ç‚¹ chainer.Variableã®backwardã‚’ä½¿ã†ã¨è‡ªå‹•å¾®åˆ†ãŒè¨ˆç®—ã•ã‚Œã‚‹ã€‚ãŸã ã—ã€Chainerã®ä»•æ§˜ä¸Šã€backwardã‚’å®Ÿè¡Œã™ã‚‹ãŸã³ã«ã€å¤‰æ•°ã®å‹¾é…ãŒåŠ ç®—ã•ã‚Œã¦ã—ã¾ã†ã€‚ãã®ãŸã‚ã€2å›ä»¥ä¸Šbackwardã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æœ›ã¾ã—ã„çµæœãŒå¾—ã‚‰ã‚Œãªããªã‚‹ã€‚\nä¾‹ï¼š\n$y = 2x$ã®å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹ã€‚$x=1$ã«å¯¾ã™ã‚‹å‹¾é…ã¯2ã§ã‚ã‚‹ãŒã€2åº¦backwardã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€èª¤ã£ãŸå‹¾é…ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  \u0026gt;\u0026gt;\u0026gt; x = Variable(np.array([1], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; y = 2*x \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; y.backward() # 1å›ç›®ã®å®Ÿè¡Œ \u0026gt;\u0026gt;\u0026gt; print(x.grad) # æ­£ã—ã„å‹¾é… [2.] \u0026gt;\u0026gt;\u0026gt; y.backward() # 2å›ç›®ã®å®Ÿè¡Œ \u0026gt;\u0026gt;\u0026gt; print(x.grad) # èª¤ã£ãŸå‹¾é… [4.]   ã•ã‚‰ã«y.backward()ã‚’å®Ÿè¡Œã™ã‚‹ãŸã³ã«xã®å‹¾é…ã¯2ãšã¤å¢—ãˆã¦ã„ãã€‚ã™ãªã‚ã¡ã€å‹¾é…ãŒè“„ç©ã•ã‚Œç¶šã‘ã¦ã„ã‚‹ã€‚\n2å›ä»¥ä¸Šbackwardã‚’å®Ÿè¡Œã—ã¦ã‚‚æ­£ã—ã„å‹¾é…ã‚’å¾—ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«backwardã‚’å®Ÿè¡Œã™ã‚‹åº¦ã«cleargradã§å‹¾é…ã‚’å‰Šé™¤ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; x = Variable(np.array([1], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; y = 2*x \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; y.backward() # 1å›ç›®ã®å®Ÿè¡Œ \u0026gt;\u0026gt;\u0026gt; print(x.grad) # æ­£ã—ã„å‹¾é… [2.] \u0026gt;\u0026gt;\u0026gt; x.cleargrad() # xã®å‹¾é…ã‚’å‰Šé™¤ \u0026gt;\u0026gt;\u0026gt; y.backward() # 2å›ç›®ã®å®Ÿè¡Œ \u0026gt;\u0026gt;\u0026gt; print(x.grad) # æ­£ã—ã„å‹¾é… [2.]   chainer.gradã«ã‚ˆã‚‹å‹¾é…è¨ˆç®— chainer.gradé–¢æ•°ã‚’ä½¿ã†ã¨ã€ä»»æ„ã®Variableå¤‰æ•°é–“ã®å‹¾é…ã‚’è¨ˆç®—ã§ãã‚‹ã€‚ä¸»ãªå¼•æ•°ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1  chainer.grad(outputs, inputs, set_grad=False, retain_grad=False)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\noutputs: (tuple or list of Variable) é€†èª¤å·®ä¼æ¬ã®èµ·ç‚¹ã¨ãªã‚‹ã€å‡ºåŠ›ã®å¤‰æ•°ã€‚\ninputs: (tuple or list of Variable) å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹å…¥åŠ›å´ã®å¤‰æ•°ã€‚\nset_grad: bool\nTrueã®å ´åˆã€inputsã®å¤‰æ•°ã®gradã«å‹¾é…ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Falseã€‚\nretain_grad: bool\nTrueã®å ´åˆã€ä¸­é–“å¤‰æ•°ã®gradã«å‹¾é…ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Falseã€‚\nchainer.gradé–¢æ•°ã§ã¯ã€å¿…è¦æœ€å°é™ã®è¨ˆç®—ãƒ‘ã‚¹ã®ã¿ã‚’å¯¾è±¡ã¨ã—ã¦å‹¾é…ãŒè¨ˆç®—ã•ã‚Œã‚‹ã€‚\nãªãŠã€backwardã¨ç•°ãªã‚Šã€chainer.gradã‚’ä½•åº¦å®Ÿè¡Œã—ã¦ã‚‚å‹¾é…ã¯è“„ç©ã•ã‚Œãšã€åŒã˜çµæœãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\nä¾‹ï¼šä»¥ä¸‹ã®è¨ˆç®—ã‚°ãƒ©ãƒ•ã‚’è€ƒãˆã‚‹ã€‚\nå®Ÿè¡Œçµæœ1ï½5ã§ã¯ã€å…¨ã¦ä»¥ä¸‹ã®å¤‰æ•°ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\n1 2 3 4  x0 = Variable(np.array([0,1], dtype=np.float32)) x1 = Variable(np.array([2,3], dtype=np.float32)) y = 2*x0 + 3*x1 z = 2*y   å®Ÿè¡Œçµæœ1: zã«å¯¾ã™ã‚‹x0ã®å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; chainer.grad([z], [x0]) [variable([4., 4.])] \u0026gt;\u0026gt;\u0026gt; print(x0.grad) # set_grad=Falseã®æ™‚ã€å‹¾é…ã¯æ®‹ã‚‰ãªã„ None \u0026gt;\u0026gt;\u0026gt; chainer.grad([z], [x0]) # cleargradã—ãªãã¦ã‚‚åŒã˜çµæœã«ãªã‚‹ [variable([4., 4.])]   å®Ÿè¡Œçµæœ2: zã«å¯¾ã™ã‚‹x0, x1ã®å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; chainer.grad([z], [x0, x1]) [variable([4., 4.]), variable([6., 6.])]   å®Ÿè¡Œçµæœ3: yã«å¯¾ã™ã‚‹x0ã®å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; chainer.grad([y], [x0]) [variable([2., 2.])]   å®Ÿè¡Œçµæœ4: gradã«å‹¾é…ã‚’æ®‹ã™\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; chainer.grad([y], [x0], set_grad=True) [variable([4., 4.])] \u0026gt;\u0026gt;\u0026gt; print(x0.grad) array([4., 4.], dtype=float32)   å®Ÿè¡Œçµæœ5: ä¸­é–“å¤‰æ•°yã«å‹¾é…ã‚’æ®‹ã™\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; chainer.grad([y], [x0], retain_grad=True) [variable([4., 4.])] \u0026gt;\u0026gt;\u0026gt; print(y.grad) # ä¸­é–“å¤‰æ•° array([2., 2.], dtype=float32) \u0026gt;\u0026gt;\u0026gt; print(x0.grad) # å…¥åŠ›å¤‰æ•°ã«ã¯å‹¾é…ã¯æ®‹ã‚‰ãªã„ None   ","description":"backwardãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ãã®æ³¨æ„ç‚¹ã¨ã€chainer.gradé–¢æ•°ã‚’ä½¿ã£ãŸè‡ªå‹•å¾®åˆ†ã®è¨ˆç®—ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚","id":56,"section":"posts","tags":["Python","Chainer"],"title":"Chainerã®è‡ªå‹•å¾®åˆ†ã§å‹¾é…ã‚’æ±‚ã‚ã‚‹ï¼ˆè£œè¶³ï¼‰","uri":"https://helve-blog.com/posts/python/chainer-automatic-differentiation2/"},{"content":"å½“ã‚µã‚¤ãƒˆã®ã”åˆ©ç”¨ãŠã‚ˆã³ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«ã¤ã„ã¦ã”æ¡ˆå†…ã—ã¾ã™ã€‚\nå€‹äººæƒ…å ±ã®åˆ©ç”¨ç›®çš„ å½“ã‚µã‚¤ãƒˆã§ã¯ã€ã‚³ãƒ¡ãƒ³ãƒˆã®æŠ•ç¨¿ãªã©ã®éš›ã«ã€åå‰ï¼ˆãƒãƒ³ãƒ‰ãƒ«ãƒãƒ¼ãƒ ï¼‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç­‰ã®å€‹äººæƒ…å ±ã‚’ã”ç™»éŒ²ã„ãŸã ãå ´åˆãŒã”ã–ã„ã¾ã™ã€‚\nä¸Šè¨˜ã®å€‹äººæƒ…å ±ã¯ã€è³ªå•ã«å¯¾ã™ã‚‹å›ç­”ã‚„å¿…è¦ãªæƒ…å ±ã‚’é›»å­ãƒ¡ãƒ¼ãƒ«ãªã©ã‚’ã§ã”é€£çµ¡ã™ã‚‹å ´åˆã«åˆ©ç”¨ã•ã›ã¦ã„ãŸã ãã‚‚ã®ã§ã‚ã‚Šã€ã“ã‚Œã‚‰ã®ç›®çš„ä»¥å¤–ã§ã¯åˆ©ç”¨ã„ãŸã—ã¾ã›ã‚“ã€‚\nå€‹äººæƒ…å ±ã®ç¬¬ä¸‰è€…ã¸ã®é–‹ç¤º å½“ã‚µã‚¤ãƒˆã§ã¯ã€å€‹äººæƒ…å ±ã‚’é©åˆ‡ã«ç®¡ç†ã—ã€ä»¥ä¸‹ã«è©²å½“ã™ã‚‹å ´åˆã‚’é™¤ãã€ç¬¬ä¸‰è€…ã«é–‹ç¤ºè‡´ã—ã¾ã›ã‚“ã€‚\n æœ¬äººã®ã”äº†è§£ã‚’é ‚ã„ãŸå ´åˆ æ³•ä»¤ç­‰ã¸ã®å”åŠ›ã®ãŸã‚ã€é–‹ç¤ºãŒå¿…è¦ã¨ãªã‚‹å ´åˆ  å€‹äººæƒ…å ±ã®é–‹ç¤ºãƒ»è¨‚æ­£ãƒ»è¿½åŠ ãƒ»å‰Šé™¤ãƒ»åˆ©ç”¨åœæ­¢ ã”æœ¬äººã‹ã‚‰ã®å€‹äººãƒ‡ãƒ¼ã‚¿ã®é–‹ç¤ºãƒ»è¨‚æ­£ãƒ»è¿½åŠ ãƒ»å‰Šé™¤ãƒ»åˆ©ç”¨åœæ­¢ã®ã”å¸Œæœ›ã®å ´åˆã«ã¯ã€ã”æœ¬äººã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã•ã›ã¦ã„ãŸã ã„ãŸä¸Šã€é€Ÿã‚„ã‹ã«å¯¾å¿œã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚\nã‚¢ã‚¯ã‚»ã‚¹è§£æãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦ å½“ã‚µã‚¤ãƒˆã¯ã€Googleã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚¹è§£æãƒ„ãƒ¼ãƒ«ã€ŒGoogleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã€ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚\nGoogleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã¯ã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’åé›†ã™ã‚‹ãŸã‚Cookieã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼ˆãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã¯åŒ¿åã§åé›†ã•ã‚Œã¦ãŠã‚Šã€å€‹äººã‚’ç‰¹å®šã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚\nCookieã‚’ç„¡åŠ¹ã«ã™ã‚‹ã“ã¨ã§ã€Googleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã®æ©Ÿèƒ½ã‚’ç„¡åŠ¹ã«ã—ã¦ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®åé›†ã‚’æ‹’å¦ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã™ã®ã§ã€ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’ã”ç¢ºèªãã ã•ã„ã€‚\nå…è²¬äº‹é … å½“ã‚µã‚¤ãƒˆã‹ã‚‰ãƒªãƒ³ã‚¯ç­‰ã«ã‚ˆã£ã¦ä»–ã®ã‚µã‚¤ãƒˆã«ç§»å‹•ã•ã‚ŒãŸå ´åˆã€ç§»å‹•å…ˆã‚µã‚¤ãƒˆã§æä¾›ã•ã‚Œã‚‹æƒ…å ±ã€ã‚µãƒ¼ãƒ“ã‚¹ç­‰ã«å¯¾ã—ã¦å½“ã‚µã‚¤ãƒˆã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚\nã¾ãŸã€å½“ã‚µã‚¤ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ»æƒ…å ±ã«ã¤ãã¾ã—ã¦ã€å¯èƒ½ãªé™ã‚Šæ­£ç¢ºã‚’æœŸã—ã¦ãŠã‚Šã¾ã™ãŒã€èª¤ã‚ŠãŒã‚ã£ãŸã‚Šã€æƒ…å ±ãŒå¤ããªã£ã¦ã„ã‚‹ã“ã¨ã‚‚ã”ã–ã„ã¾ã™ã€‚\nå½“ã‚µã‚¤ãƒˆã«è¨˜è¼‰ã•ã‚ŒãŸå†…å®¹ã«ã‚ˆã£ã¦ç”Ÿã˜ãŸæå®³ç­‰ã«å¯¾ã—ã€å½“ã‚µã‚¤ãƒˆã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã‹ã­ã¾ã™ã®ã§ã”äº†æ‰¿ãã ã•ã„ã€‚\nãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã®å¤‰æ›´ã«ã¤ã„ã¦ å½“ã‚µã‚¤ãƒˆã¯ã€å€‹äººæƒ…å ±ã«é–¢ã—ã¦é©ç”¨ã•ã‚Œã‚‹æ—¥æœ¬ã®æ³•ä»¤ã‚’éµå®ˆã—ã€æœ¬ãƒãƒªã‚·ãƒ¼ã®å†…å®¹ã‚’é©å®œè¦‹ç›´ã—ãã®æ”¹å–„ã«åŠªã‚ã¾ã™ã€‚\nä¿®æ­£ã•ã‚ŒãŸæœ€æ–°ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã¯å¸¸ã«æœ¬ãƒšãƒ¼ã‚¸ã«ã¦é–‹ç¤ºè‡´ã—ã¾ã™ã€‚\n","description":"Helve Tech Blogã«ã¤ã„ã¦","id":57,"section":"","tags":null,"title":"About","uri":"https://helve-blog.com/about/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ã€Chainerã®Variableã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã—ã€1éšå¾®åˆ†ã€2éšå¾®åˆ†ã®æ±‚ã‚æ–¹ã«ã¤ã„ã¦ã¾ã¨ã‚ã‚‹ã€‚\nè‡ªå‹•å¾®åˆ†ã‚’ä½¿ã†ã¨ã€é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã‚’è‡ªå‹•çš„ã«æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€å‹¾é…ã‚’ä½¿ã£ãŸæœ€é©åŒ–æ‰‹æ³•ã‚’å®¹æ˜“ã«è¡Œãˆã‚‹ã€‚\nChainerã¨æœ€é©åŒ– Chainerã¯ã€æ ªå¼ä¼šç¤¾Preferred NetworksãŒæä¾›ã—ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚\nChainerã«ã¯ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å­¦ç¿’ã‚’é«˜é€Ÿã«è¡Œã†ãŸã‚ã€è‡ªå‹•å¾®åˆ†ï¼ˆå®šç¾©ã—ãŸé–¢æ•°ã®å‹¾é…ã‚’è‡ªå‹•ã§æ±‚ã‚ã‚‹ï¼‰æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ï¼ˆã“ã®æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§ã€æå¤±é–¢æ•°ã‚’æœ€å°åŒ–ã™ã‚‹ãŸã‚ã«ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å„ãƒãƒ¼ãƒ‰ã®é‡ã¿ã‚’ã©ã®æ–¹å‘ã«æ›´æ–°ã™ã‚Œã°è‰¯ã„ã‹åˆ†ã‹ã‚‹ï¼‰ã€‚\nä¸€æ–¹ã€æœ€é©åŒ–å•é¡Œã‚’è§£ãã¨ãã€æœ€æ€¥é™ä¸‹æ³•ãªã©ã®æ‰‹æ³•ã§ã¯ã€é–¢æ•°ã®å‹¾é…ãŒå¿…è¦ã¨ãªã‚‹ã€‚\né–¢æ•°ã®å‹¾é…ã‚’æ±‚ã‚ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚\n é–¢æ•°ã®å°é–¢æ•°ã‚’æ‰‹è¨ˆç®—ã§æ±‚ã‚ã‚‹æ–¹æ³• æ•°å€¤å¾®åˆ†ï¼ˆå°‘ã—ã ã‘å¤‰åŒ–ã•ã›ãŸå…¥åŠ›å¤‰æ•°ã‚’ä¸ãˆã¦å‡ºåŠ›ã®å·®ã‹ã‚‰å‹¾é…ã‚’æ±‚ã‚ã‚‹ï¼‰ è‡ªå‹•å¾®åˆ†  å•é¡ŒãŒè¤‡é›‘ãªå ´åˆã€(1)ã¯å›°é›£ã§ã‚ã‚‹ã€‚\nã¾ãŸã€(2)ã¯è¨ˆç®—æ™‚é–“ã‚’è¦ã™ã‚‹å•é¡ŒãŒã‚ã‚‹ã€‚\n(3)ã¯ã€å®Ÿè£…ã«æ‰‹é–“ãŒæ›ã‹ã‚‹ã¨ã„ã†æ¬ ç‚¹ãŒã‚ã‚‹ãŒã€å•é¡Œã”ã¨ã«å°é–¢æ•°ã‚’æ±‚ã‚ã‚‹æ‰‹é–“ã‚‚ä¸è¦ã§ã€è¨ˆç®—æ™‚é–“ã‚‚çŸ­ã„åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nChianerã«ã¯(3)ã®æ©Ÿèƒ½ãŒVariableã¨ã„ã†ã‚¯ãƒ©ã‚¹ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€æœ€é©åŒ–ã«æ´»ç”¨ã™ã‚‹ãŸã‚ä»•æ§˜ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚\nã¾ãŸã€æœ€æ€¥é™ä¸‹æ³•ã®Pythonã§ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯ã€éå»è¨˜äº‹ã‚’ã”å‚è€ƒã¾ã§ã€‚\nç›´ç·šæ¢ç´¢ã‚’ä½¿ã£ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Spyder 3.3.3   Python 3.7.3   NumPy 1.16.2   Chainer 6.3.0    ä»¥ä¸‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3  import numpy as np import chainer from chainer import Variable   Variableã‚¯ãƒ©ã‚¹ Chainerã®Variableã‚¯ãƒ©ã‚¹ã¯ã€æ•°å€¤ã®é…åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹ã‚¯ãƒ©ã‚¹ã§ã‚ã‚‹ã€‚\nNumPyé…åˆ—ã«è¿‘ã„æ„Ÿè¦šã§æ‰±ãˆã‚‹ãŒã€ç›¸é•ç‚¹ã‚‚ã‚ã‚‹ã®ã§æ³¨æ„ã€‚\nVariableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€32ãƒ“ãƒƒãƒˆç²¾åº¦ã®NumPyé…åˆ—ã‚’ä½¿ã£ã¦ä½œæˆã•ã‚Œã‚‹ã€‚\nä¾‹ï¼š\n1 2  \u0026gt;\u0026gt;\u0026gt; x0 = Variable(np.array([0, 1], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; x1 = Variable(np.array([[0, 1, 2], [3, 4, 5]], dtype=np.float32))   ç”Ÿæˆã•ã‚ŒãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€Variableå‹ã®é…åˆ—ã§ã‚ã‚‹ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; x0 variable([0., 1.]) \u0026gt;\u0026gt;\u0026gt; x1 variable([[0., 1., 2.], [3., 4., 5.]])   Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€åŒã˜ã‚µã‚¤ã‚ºã®é…åˆ—åŒå£«ã®æ¼”ç®—ãŒã§ãã‚‹ã€‚\nï¼ˆé…åˆ—ã®ã‚µã‚¤ã‚ºãŒç•°ãªã‚‹å ´åˆã€NumPyã§ã¯ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ãã‚Œã‚‹ãŒã€Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™ï¼‰\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; x0 = Variable(np.array([0, 1], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; x2 = Variable(np.array([2, 3], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; x0+x2 variable([2., 4.])   ã¾ãŸã€é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®šã—ã¦ã€è¦ç´ ã‚’å–ã‚Šå‡ºã™ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; x1 = Variable(np.array([[0, 1, 2], [3, 4, 5]], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; x1[0] variable([0., 1., 2.]) \u0026gt;\u0026gt;\u0026gt; x1[0, 2] variable(2.)   Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®arrayå±æ€§ã‹ã‚‰ã€NumPyé…åˆ—ã‚’å–å¾—ã§ãã‚‹ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; x0 = Variable(np.array([0, 1], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; x0.array array([0., 1.], dtype=float32) \u0026gt;\u0026gt;\u0026gt; type(x0.array) numpy.ndarray   ãªãŠã€åŒæ§˜ã«dataå±æ€§ã‹ã‚‰ã‚‚NumPyé…åˆ—ã‚’å–å¾—ã§ãã‚‹ãŒã€chainerã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ã¯ã€ŒNumPyé…åˆ—ã®dataå±æ€§ã€ã¨ç´›ã‚‰ã‚ã—ã„ã¨ã„ã†ç†ç”±ã§ã€arrayå±æ€§ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¦ã„ã‚‹ã€‚\nVariables and Derivatives â€” Chainer 7.7.0 documentation\nã•ã‚‰ã«ã€Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®gradå±æ€§ã‹ã‚‰ã€å‹¾é…ã®NumPyé…åˆ—ã‚’å–å¾—ã§ãã‚‹ï¼ˆè©³ç´°ã¯å¾Œè¿°ï¼‰ã€‚\n1éšå¾®åˆ†ã®æ±‚ã‚æ–¹ Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ãŸ1éšå¾®åˆ†ã®æ±‚ã‚æ–¹ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nã¾ãšã€ä»¥ä¸‹ã®2å¤‰æ•°é–¢æ•°ã‚’è€ƒãˆã‚‹ã€‚\n$$ f(\\boldsymbol{x}) = 2x_0^2 + x_1^2 + 2x_0 + x_1, \\boldsymbol{x}=[ x_0, x_1 ]^\\mathrm{T} $$\nã“ã®é–¢æ•°ã®å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$$ \\nabla f(\\boldsymbol{x}) = \\left[ \\frac{\\partial f}{\\partial x_0}, \\frac{\\partial f}{\\partial x_1} \\right]^\\mathrm{T} = [4x_0 + 2, 2x_1 + 1 ]^\\mathrm{T} $$\nç‚¹$ (x_0, x_1)=(1, 2)$ã«ãŠã„ã¦ã€é–¢æ•°å€¤ã¨å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n$ f(\\boldsymbol{x})=10 $\n$ \\displaystyle \\nabla f(\\boldsymbol{x}) = [6, 5 ]^\\mathrm{T} $\nä¸Šè¨˜ã®é–¢æ•°ã‚’Variableã‚’ä½¿ã£ã¦è¨˜è¿°ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2  x = Variable(np.array([1,2], dtype=np.float32)) y = 2*x[0]**2 + x[1]**2 + 2*x[0] + x[1]   é–¢æ•°ã®å€¤(10)ã¯æ—¢ã«å¾—ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; y variable(10.)   ã“ã®æ®µéšã§ã¯ã€å‹¾é…ã¯ã¾ã å¾—ã‚‰ã‚Œã¦ãŠã‚‰ãšã€å‹¾é…ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; y.grad = np.ones_like(y.array, dtype=np.float32) \u0026gt;\u0026gt;\u0026gt; y.backward()   ã¾ãšã€yã®gradã«ã€å€¤ã¯ä½•ã§ã‚‚è‰¯ã„ã®ã§é…åˆ—ã‚’è¨­å®šã™ã‚‹ã€‚\nnp.ones_likeã¯ã€å¼•æ•°ã®é…åˆ—ã¨åŒã˜ã‚µã‚¤ã‚ºã§ã€è¦ç´ ãŒå…¨ã¦1ã®é…åˆ—ã‚’è¿”ã™é–¢æ•°ã§ã‚ã‚‹ã€‚\nï¼ˆãŸã ã—ã€å³å¯†ã«ã¯gradã«åˆæœŸå€¤ã‚’ä¸ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã¯ã€yãŒ2ã¤ä»¥ä¸Šã®è¦ç´ ã‚’æŒã¤é…åˆ—ã®å ´åˆã§ã‚ã‚‹ã€‚\nä»Šå›ã®ä¾‹ã®ã‚ˆã†ã«yãŒã‚¹ã‚«ãƒ©ãƒ¼ã®å ´åˆã¯ã€åˆæœŸå€¤ã®è¨­å®šã¯çœç•¥ã§ãã‚‹ï¼‰\næ¬¡ã«ã€y.backward()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€è‡ªå‹•å¾®åˆ†ãŒå®Ÿè¡Œã•ã‚Œã€x.gradã«å‹¾é…ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; x.grad array([6., 5.], dtype=float32)   ä¸­é–“å¤‰æ•°ã®å‹¾é…ã‚’æ±‚ã‚ã‚‹å ´åˆ ä¸Šè¨˜ã®æ–¹æ³•ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ¼”ç®—ã‚’2å›ä»¥ä¸Šé‡ã­ãŸå ´åˆã«ã€ä¸­é–“ã®å¤‰æ•°ã®å‹¾é…ãŒä¿å­˜ã•ã‚Œãªã„ã€‚\n1 2 3 4 5 6 7 8  \u0026gt;\u0026gt;\u0026gt; x = Variable(np.array([1], dtype=np.float32)) # å…¥åŠ› \u0026gt;\u0026gt;\u0026gt; y = x**2 # ä¸­é–“å¤‰æ•° \u0026gt;\u0026gt;\u0026gt; z = y**2 \u0026gt;\u0026gt;\u0026gt; z.backward() \u0026gt;\u0026gt;\u0026gt; y.grad # å‹¾é…ãŒæ ¼ç´ã•ã‚Œãªã„ (None) \u0026gt;\u0026gt;\u0026gt; x.grad # zã«å¯¾ã™ã‚‹xã®å‹¾é… array([4.], dtype=float32)   ä¸­é–“ã®å¤‰æ•°ã®å‹¾é…ãŒæ¬²ã—ã„å ´åˆã«ã¯ã€backwardãƒ¡ã‚½ãƒƒãƒ‰ã§retain_grad=Trueã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8  \u0026gt;\u0026gt;\u0026gt; x = Variable(np.array([1], dtype=np.float32)) # å…¥åŠ› \u0026gt;\u0026gt;\u0026gt; y = x**2 # ä¸­é–“å¤‰æ•° \u0026gt;\u0026gt;\u0026gt; z = y**2 \u0026gt;\u0026gt;\u0026gt; z.backward(retain_grad=True) \u0026gt;\u0026gt;\u0026gt; y.grad # zã«å¯¾ã™ã‚‹yã®å‹¾é… array([2.], dtype=float32) \u0026gt;\u0026gt;\u0026gt; x.grad # zã«å¯¾ã™ã‚‹xã®å‹¾é… array([4.], dtype=float32)   2éšå¾®åˆ†ã®æ±‚ã‚æ–¹ 2éšå¾®åˆ†ã‚’æ±‚ã‚ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  \u0026gt;\u0026gt;\u0026gt; x = Variable(np.array([1], dtype=np.float32)) \u0026gt;\u0026gt;\u0026gt; y = x**3 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; y.grad = np.ones_like(y.array, dtype=np.float32) \u0026gt;\u0026gt;\u0026gt; y.backward(enable_double_backprop=True) \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; gx = x.grad_var \u0026gt;\u0026gt;\u0026gt; x.cleargrad() \u0026gt;\u0026gt;\u0026gt; gx.backward() \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; x.grad # yã«å¯¾ã™ã‚‹xã®2éšå¾®åˆ† array([6.], dtype=float32)   ç›®çš„é–¢æ•°yã®backwardã‚’å®Ÿè¡Œã™ã‚‹ã¾ã§ã¯åŒã˜ã§ã‚ã‚‹ãŒã€\nãã®å¾Œã«x.grad_varã‚’å–å¾—ã™ã‚‹ã€‚\næ¬¡ã«ã€cleargradãƒ¡ã‚½ãƒƒãƒ‰ã§xã®å‹¾é…ã‚’å‰Šé™¤ã—ãŸã®ã¡ã€\nx.grad_varã‚’æ ¼ç´ã—ãŸå¤‰æ•°ã«å¯¾ã—ã¦ã€backwardã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€\nx.gradã«2éšå¾®åˆ†ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ Variables and Derivatives â€” Chainer 7.7.0 documentation\nchainer.Variable â€” Chainer 7.7.0 documentation\nChainerã®Variableã‚’ä½¿ã£ã¦è‡ªå‹•å¾®åˆ†ã‚’ç°¡å˜å®Ÿè£… | è‡ªèª¿è‡ªè€ƒã®æ—…\n","description":"Chainerã®Variableã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ãŸ1éšå¾®åˆ†ã€2éšå¾®åˆ†ã®æ±‚ã‚æ–¹ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":58,"section":"posts","tags":["Python","Chainer"],"title":"Chainerã®è‡ªå‹•å¾®åˆ†ã§å‹¾é…ã‚’æ±‚ã‚ã‚‹","uri":"https://helve-blog.com/posts/python/chainer-automatic-differentiation/"},{"content":"ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ã€æœ€æ€¥é™ä¸‹æ³•ã¨ã€Armijoæ¡ä»¶ã¨å‘¼ã°ã‚Œã‚‹ç›´ç·šæ¢ç´¢æ‰‹æ³•ã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã™ã‚‹ã€‚\næ•°ç†å·¥å­¦ç¤¾ã®ã€Œå·¥å­¦åŸºç¤ã€€æœ€é©åŒ–ã¨ãã®å¿œç”¨ã€ã‚’èª­ã‚“ã ã®ã§ã€4ç« ã€Œéç·šå½¢è¨ˆç”»æ³•Iï¼ˆç„¡åˆ¶ç´„æœ€å°åŒ–å•é¡Œï¼‰ã€ã‹ã‚‰ã€ç›´ç·šæ¢ç´¢ã‚’ä½¿ã£ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…ã—ãŸã€‚\nå·¥å­¦åŸºç¤æœ€é©åŒ–ã¨ãã®å¿œç”¨posted with ãƒ¨ãƒ¡ãƒ¬ãƒçŸ¢éƒ¨åš æ•°ç†å·¥å­¦ç¤¾ 2006å¹´03æœˆ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹Amazon \ræœ€æ€¥é™ä¸‹æ³•ã¨ã¯å‹¾é…ã‚’ç”¨ã„ã‚‹æœ€é©åŒ–æ‰‹æ³•ã®1ã¤ã§ã‚ã‚Šã€æœ€æ€¥é™ä¸‹æ³•ã§è§£ã®æ›´æ–°å¹…ã‚’æ±‚ã‚ã‚‹æ‰‹æ³•ã‚’ç›´ç·šæ¢ç´¢ã¨ã„ã†ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ã“ã‚Œã‚‰ã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã—ã€Pythonã§å®Ÿè£…ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ç¤ºã™ã€‚\næœ€å¾Œã«ã€å®Ÿè£…ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã€ç°¡å˜ãª2å¤‰æ•°é–¢æ•°ã‚’æœ€å°åŒ–ã™ã‚‹ã€‚\nã¾ãŸã€ä»¥é™ã§ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¬¡ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2  import numpy as np import matplotlib.pyplot as plt   ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     python 3.7.4   numpy 1.16.4   matplotlib 3.1.0    æœ€æ€¥é™ä¸‹æ³• æœ€æ€¥é™ä¸‹æ³• (gradient descent, ã¾ãŸã¯steepest descent) ã¯ã€æ•°å€¤æœ€é©åŒ–æ‰‹æ³•ã®1ã¤ã§ã‚ã‚Šã€é–¢æ•°ã®å‹¾é…ã®æ–¹å‘ã«è§£ã‚’æ›´æ–°ã—ã¦ã€æœ€é©è§£ã«åæŸã•ã›ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚\nã¾ãšã€$n$æ¬¡å…ƒãƒ™ã‚¯ãƒˆãƒ«$\\boldsymbol{x} \\in \\mathbb{R}^n$ã®é–¢æ•°$f(\\boldsymbol{x}) \\in \\mathbb{R}$ã‚’æœ€å°åŒ–ã™ã‚‹å•é¡Œã‚’è€ƒãˆã‚‹ã€‚\n$f(\\boldsymbol{x})$ã¯å¾®åˆ†å¯èƒ½ã§ã‚ã‚Šã€å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯æ¬¡å¼ã§è¡¨ã•ã‚Œã‚‹ã¨ã™ã‚‹ã€‚\n$$ \\nabla f(\\boldsymbol{x}) = \\left[ \\frac{\\partial f}{\\partial x_1}, \u0026hellip;, \\frac{\\partial f}{\\partial x_n} \\right]^\\mathrm{T} \\in \\mathbb{R}^n $$\næ¬¡ã«ã€æœ€æ€¥é™ä¸‹æ³•ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\n åå¾©å›æ•°ã‚’$ k=0$ã¨ã—ã¦ã€è§£ã®åˆæœŸå€¤$\\boldsymbol{x_k}$ã‚’ä¸ãˆã‚‹ã€‚ çµ‚äº†æ¡ä»¶ã‚’æº€ãŸã›ã°æœ€é©è§£ã‚’$\\boldsymbol{x_k}$ã¨ã—ã¦çµ‚äº†ã™ã‚‹ã€‚ãã†ã§ãªã‘ã‚Œã°ã€$\\boldsymbol{x_k}$ã«ãŠã‘ã‚‹å‹¾é…$ \\nabla f(\\boldsymbol{x_k})$ã‚’æ±‚ã‚ã‚‹ã€‚ è§£ã®æ¢ç´¢æ–¹å‘ã‚’$ \\boldsymbol{d_k} = -\\nabla f(\\boldsymbol{x_k})$ã¨ã™ã‚‹ã€‚ æ¢ç´¢æ–¹å‘ã®ã‚¹ãƒ†ãƒƒãƒ—å¹…$ \\alpha_k$ã‚’ç›´ç·šæ¢ç´¢ã«ã‚ˆã‚Šæ±‚ã‚ã€æ–°ãŸãªè§£ã‚’$ \\boldsymbol{x_{k+1}} = \\boldsymbol{x_k} + \\alpha_k \\boldsymbol{d_k}$ã¨æ›´æ–°ã™ã‚‹ã€‚ $ k \\leftarrow k+1$ã¨ã—ã¦ã€2ã«æˆ»ã‚‹ã€‚  ä¸‹å›³ã¯2å¤‰æ•°é–¢æ•°ã«ãŠã‘ã‚‹å‹¾é…é™ä¸‹æ³•ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã‚ã‚‹ã€‚\nç­‰é«˜ç·šã¯é–¢æ•°ã®å€¤ã‚’ç¤ºã—ã€$ (x_1, x_2)=(0, 0)$ã§æœ€å°å€¤ã‚’ã¨ã‚‹ã€‚\nè§£å€™è£œã®ç‚¹$\\boldsymbol{x_k}$ã«ãŠã‘ã‚‹æ¢ç´¢æ–¹å‘$ \\boldsymbol{d_k}$ã¯ã€å‹¾é…ãŒæœ€ã‚‚æ€¥ãªæ–¹å‘ï¼ˆç­‰é«˜ç·šã¨å‚ç›´ãªæ–¹å‘ï¼‰ã¨ãªã‚‹ã€‚\næœ€æ€¥é™ä¸‹æ³•ã«ã¯ã€ã‚¹ãƒ†ãƒƒãƒ—å¹…$ \\alpha_k$ãŒå¤§ãã™ãã‚‹ã¨è§£ãŒç™ºæ•£ã—ã€å°ã•ã™ãã‚‹ã¨åæŸãŒé…ããªã‚‹å•é¡ŒãŒã‚ã‚‹ã€‚\nã“ã®å•é¡Œã«å¯¾å‡¦ã§ãã‚‹ã‚ˆã†ã«$ \\alpha_k$ã‚’æ±ºã‚ã‚‹æ‰‹æ³•ãŒã€æ¬¡ç¯€ã®ç›´ç·šæ¢ç´¢ã§ã‚ã‚‹ã€‚\nç›´ç·šæ¢ç´¢ ç›´ç·šæ¢ç´¢ (line search) ã¯ã€æœ€æ€¥é™ä¸‹æ³•ã‚„æº–ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ³æ³•ãªã©ã®æœ€é©åŒ–æ‰‹æ³•ã«ãŠã„ã¦å¾—ã‚‰ã‚ŒãŸè§£ã®æ¢ç´¢æ–¹å‘ã«å¯¾ã—ã¦ã€é©åˆ‡ãªæ›´æ–°å¹…ã‚’æ±‚ã‚ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚\nè§£ã‚’å¤§åŸŸçš„ã«åæŸã•ã›ã‚‹ã“ã¨ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ã€‚\nå®Ÿç”¨çš„ãªç›´ç·šæ¢ç´¢æ‰‹æ³•ã¨ã—ã¦Armijoï¼ˆã‚¢ãƒ«ãƒŸãƒ›ï¼‰æ¡ä»¶ã¨Wolfï¼ˆã‚¦ãƒ«ãƒ•ï¼‰æ¡ä»¶ãŒã‚ã‚Šã€æœ¬è¨˜äº‹ã§ã¯å‰è€…ã®ã¿æ‰±ã†ã€‚\nArmijoæ¡ä»¶ã¨ã¯ã€$ 0\u0026lt;\\xi\u0026lt;1$ã§ã‚ã‚‹å®šæ•°$\\xi$ã«å¯¾ã—ã¦ã€\n$ f(\\boldsymbol{x_k}+\\alpha \\boldsymbol{d_k}) \\leq f(\\boldsymbol{x_k}) + \\xi \\alpha \\nabla f(\\boldsymbol{x_k})^\\mathrm{T} \\boldsymbol{d_k}$\nã‚’æº€ãŸã™$ \\alpha \u0026gt; 0$ã‚’é¸ã¶ã‚‚ã®ã§ã‚ã‚‹ã€‚\nä¸‹å›³ã«Armijoæ¡ä»¶ã‚’å¹¾ä½•çš„ã«ç¤ºã™ã€‚\né–¢æ•°$ y=f(\\boldsymbol{x_k}+\\alpha \\boldsymbol{d_k})$ã¯$ \\boldsymbol{d_k}$æ–¹å‘ã®ç›®çš„é–¢æ•°ã§ã‚ã‚‹ã€‚\nArmijoæ¡ä»¶ã‚’æº€ãŸã™$\\alpha$ã¨ã¯ã€ç›®çš„é–¢æ•°$ y=f(\\boldsymbol{x_k}+\\alpha \\boldsymbol{d_k})$ãŒã€ç›´ç·š$ f(\\boldsymbol{x_k}) + \\xi \\alpha \\nabla f(\\boldsymbol{x_k})^\\mathrm{T} \\boldsymbol{d_k}$ã‚ˆã‚Šã‚‚å°ã•ã„åŒºé–“ã«ã‚ã‚‹ã€‚\nãªãŠã€$ \\xi=0$ã®ã¨ãã€ç›´ç·šã®å€¤ã¯$ f(\\boldsymbol{x_k})$ã¨ç­‰ã—ããªã‚‹ã®ã§è§£ã®åæŸãŒä¿éšœã•ã‚Œãªããªã‚‹ã€‚\nã¾ãŸã€$ \\xi=1$ã®ã¨ãã€ç›´ç·šã¯æ¥ç·š$ y=f(\\boldsymbol{x_k}) + \\alpha \\nabla f(\\boldsymbol{x_k})^\\mathrm{T} \\boldsymbol{d_k}$ã¨ä¸€è‡´ã™ã‚‹ã®ã§$ \\alpha=0$ã¨ãªã‚Šã€è§£ã®æ›´æ–°å¹…ãŒ0ã«ãªã‚‹ã€‚\nArmijoæ¡ä»¶ã‚’æº€ãŸã™ã‚¹ãƒ†ãƒƒãƒ—å¹…$ \\alpha_k$ã‚’å¾—ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã€ä»¥ä¸‹ã®é€šã‚Šã€‚\n ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$ 0\u0026lt;\\xi\u0026lt;1, 0\u0026lt;\\tau\u0026lt;1$ã‚’ä¸ãˆã‚‹ã€‚ æ›´æ–°å¹…ã®åˆæœŸå€¤ã‚’$ \\alpha=1$ã¨ãŠãã€‚ $ \\alpha$ãŒArmijoæ¡ä»¶ã‚’æº€ãŸã™ãªã‚‰ã°çµ‚äº†ã€‚ æº€ãŸã•ãªã‘ã‚Œã°$ \\alpha \\leftarrow \\tau \\alpha$ã¨æ›´æ–°ã—ã¦3ã«æˆ»ã‚‹ã€‚  ä¸Šè¨˜ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã¯ã€åˆã‚ã«ã‚ã‚‹ç¨‹åº¦å¤§ããªã‚¹ãƒ†ãƒƒãƒ—å¹…ã‚’ä¸ãˆã€Armijoæ¡ä»¶ã‚’æº€ãŸã™ã¾ã§å¾ã€…ã«å°ã•ãã—ã¦ã„ã‚‹ã€‚ãã®ãŸã‚ã€æœ‰é™å›ã®åå¾©ã§Armijoæ¡ä»¶ã‚’æº€ãŸã™ã‚¹ãƒ†ãƒƒãƒ—å¹…ã‚’å¾—ã‚‰ã‚Œã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹ã€‚\nPythonã«ã‚ˆã‚‹å®Ÿè£… Armijoæ¡ä»¶ã‚’ç”¨ã„ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…ã—ãŸã€‚\nfunã«ç›®çš„é–¢æ•°ã€derã«å‹¾é…ã‚’è¿”ã™é–¢æ•°ã‚’ä¸ãˆã‚‹ã€‚ã¾ãŸã€minimizeãƒ¡ã‚½ãƒƒãƒ‰ã«xã‚’åˆæœŸå€¤ã¨ã—ã¦ä¸ãˆã‚‹ã¨ã€æœ€æ€¥é™ä¸‹æ³•ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  class GradientDescent: def __init__(self, fun, der, xi=0.3, tau=0.9, tol=1e-6, ite_max=2000): self.fun = fun # ç›®çš„é–¢æ•° self.der = der # é–¢æ•°ã®å‹¾é… self.xi = xi # Armijoæ¡ä»¶ã®å®šæ•° self.tau = tau # æ–¹å‘å¾®ä¿‚æ•°ã®å­¦ç¿’ç‡ self.tol = tol # å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã®L2ãƒãƒ«ãƒ ãŒã“ã®å€¤ã‚ˆã‚Šå°ã•ããªã‚‹ã¨è¨ˆç®—ã‚’åœæ­¢ self.path = None # è§£ã®ç‚¹åˆ— self.ite_max = ite_max # æœ€å¤§åå¾©å›æ•° def minimize(self, x): path = [x] for i in range(self.ite_max): grad = self.der(x) if np.linalg.norm(grad, ord=2)\u0026lt;self.tol: break else: beta = 1 while self.fun(x - beta*grad) \u0026gt; (self.fun(x) - self.xi*beta*np.dot(grad, grad)): # Armijoæ¡ä»¶ã‚’æº€ãŸã™ã¾ã§ãƒ«ãƒ¼ãƒ—ã™ã‚‹ beta = self.tau*beta x = x - beta * grad path.append(x) self.opt_x = x # æœ€é©è§£ self.opt_result = self.fun(x) # é–¢æ•°ã®æœ€å°å€¤ self.path = np.array(path) # æ¢ç´¢è§£ã®æ¨ç§»   æœ€é©åŒ–ã®ä¾‹ æ¬¡å¼ã®2å¤‰æ•°é–¢æ•°ã‚’æœ€å°åŒ–ã™ã‚‹ä¾‹ã‚’ç¤ºã™ã€‚\n$$ f(\\boldsymbol{x}) = 2x_1^2 + x_2^2 + x_1 x_2, (\\boldsymbol{x}=[ x_1, x_2 ]^\\mathrm{T}) $$\nã“ã®é–¢æ•°ã¯ã€$ (x_1, x_2)=(0, 0)$ã§æœ€å°å€¤0ã‚’ã¨ã‚‹ã€‚\nã¾ãŸã€å‹¾é…ãƒ™ã‚¯ãƒˆãƒ«ã¯æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$$ \\nabla f(\\boldsymbol{x}) = \\left[ \\frac{\\partial f}{\\partial x_1}, \\frac{\\partial f}{\\partial x_2} \\right]^\\mathrm{T} = [4x_1 + x_2, x_1 + 2x_2 ]^\\mathrm{T} $$\né–¢æ•°å€¤ã¨å‹¾é…ã‚’æ±‚ã‚ã‚‹é–¢æ•°ã‚’ã€ãã‚Œãã‚Œf(x), f_der(x)ã¨ã—ã¦å®šç¾©ã™ã‚‹ã€‚\n1 2 3 4 5  def f(x): return 2*x[0]**2 + x[1]**2 + x[0]*x[1] def f_der(x): return np.array([4*x[0] + x[1], x[0] + 2*x[1]])   é–¢æ•°ã®ç­‰é«˜ç·šã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11  x1 = np.linspace(-2, 2, 21) x2 = np.linspace(-2, 2, 21) x1_mesh, x2_mesh = np.meshgrid(x1, x2) z = f(np.array((x1_mesh, x2_mesh))) fig, ax = plt.subplots(figsize=(6, 6)) ax.contour(x1, x2, z, levels=np.logspace(-0.3, 1.2, 10)) ax.set_xlabel(\u0026#34;x1\u0026#34;) ax.set_ylabel(\u0026#34;x2\u0026#34;) ax.set_aspect(\u0026#39;equal\u0026#39;) plt.show()   ã¾ãŸã€å‹¾é…ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  x1 = np.linspace(-2, 2, 21) x2 = np.linspace(-2, 2, 21) x1_mesh, x2_mesh = np.meshgrid(x1, x2) grad = f_der(np.array((x1_mesh, x2_mesh))) U = grad[0] # x1æ–¹å‘ã®å‹¾é… V = grad[1] # x2æ–¹å‘ã®å‹¾é… fig, ax = plt.subplots(figsize=(6, 6)) ax.quiver(x1, x2, U, V, color=\u0026#39;blue\u0026#39;) ax.set_aspect(\u0026#39;equal\u0026#39;) plt.show()   å‰ç¯€ã®GradientDescentã‚¯ãƒ©ã‚¹ã‚’ç”¨ã„ã¦ã€æœ€æ€¥é™ä¸‹æ³•ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nåˆæœŸå€¤ã¯$ (x_1, x_2)=(1.5, 1.5)$ã¨ã™ã‚‹ã€‚\n1 2 3  gd = GradientDescent(f, f_der) init = np.array([1.5, 1.5]) gd.minimize(init)   è§£ã®æ¨ç§»ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  path = gd.path x1 = np.linspace(-2, 2, 21) x2 = np.linspace(-2, 2, 21) x1_mesh, x2_mesh = np.meshgrid(x1, x2) z = f(np.array((x1_mesh, x2_mesh))) fig, ax = plt.subplots(figsize=(6, 6)) ax.contour(x1, x2, z, levels=np.logspace(-0.3, 1.2, 10)) ax.plot(path[:,0], path[:,1], marker=\u0026#34;o\u0026#34;) ax.set_xlabel(\u0026#34;x1\u0026#34;) ax.set_ylabel(\u0026#34;x2\u0026#34;) ax.set_aspect(\u0026#39;equal\u0026#39;) plt.show()   ç™ºæ•£ã›ãšã«æœ€é©è§£ã¸åæŸã—ã¦ãŠã‚Šã€Armijoæ¡ä»¶ã‚’ç”¨ã„ãŸç›´ç·šæ¢ç´¢ãŒã†ã¾ãæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nå‚è€ƒ ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã«ã‚¹ãƒ†ãƒƒãƒ—å¹…ã‚’å›ºå®šã—ãŸæœ€æ€¥é™ä¸‹æ³•ã®ã‚³ãƒ¼ãƒ‰ãŒã‚ã‚Šã€å®Ÿè£…ã®ãƒ™ãƒ¼ã‚¹ã«ã•ã›ã¦é ‚ã„ãŸã€‚\næœ€æ€¥é™ä¸‹æ³•ã®æ¦‚è¦ - Qiita\nç›´ç·šæ¢ç´¢ã®è©³ç´°ãªã‚¢ãƒ«ã‚´ãƒªã‚¹ãƒ ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®æ›¸ç±ã‚’å‚è€ƒã¨ã—ãŸã€‚\nå·¥å­¦åŸºç¤æœ€é©åŒ–ã¨ãã®å¿œç”¨posted with ãƒ¨ãƒ¡ãƒ¬ãƒçŸ¢éƒ¨åš æ•°ç†å·¥å­¦ç¤¾ 2006å¹´03æœˆ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹Amazon\r","description":"æœ€æ€¥é™ä¸‹æ³•ã¨ç›´ç·šæ¢ç´¢æ‰‹æ³•ã‚’è§£èª¬ã—ã€Pythonã§å®Ÿè£…ã™ã‚‹ã€‚","id":59,"section":"posts","tags":["æœ€é©åŒ–"],"title":"ç›´ç·šæ¢ç´¢ã‚’ä½¿ã£ãŸæœ€æ€¥é™ä¸‹æ³•ã‚’Pythonã§å®Ÿè£…","uri":"https://helve-blog.com/posts/math/gradient-descent-armijo/"},{"content":"ã¯ã˜ã‚ã« æ¬¡å…ƒå‰Šæ¸› (dimensionality reduction) ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ã‚’ãªã‚‹ã¹ãä¿ã£ãŸã¾ã¾ã€ç‰¹å¾´é‡ã®æ•°ã‚’æ¸›ã‚‰ã™ã“ã¨ã§ã‚ã‚‹ã€‚\nç‰¹å¾´é‡ã®æ•°ã‚’æ¸›ã‚‰ã™ã“ã¨ã«ã‚ˆã‚Šã€æ©Ÿæ¢°å­¦ç¿’ã‚’é«˜é€Ÿã«å®Ÿè¡Œã§ããŸã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã‚’ã—ã‚„ã™ããªã‚‹åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\næ¬¡å…ƒå‰Šæ¸›ã«ã¯ã€å°„å½±ã¨å¤šæ§˜ä½“å­¦ç¿’ã¨ã„ã†2ã¤ã®ä¸»ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒã‚ã‚‹ã€‚å°„å½±ã‚’ä½¿ã£ãŸæ‰‹æ³•ã¨ã—ã¦ã¯ã€ä¸»æˆåˆ†åˆ†æ (PCA, Principal Components Analysis) ãŒæœ‰åã§ã‚ã‚‹ã€‚ä¸€æ–¹ã€æœ¬è¨˜äº‹ã§æ‰±ã†LLEã¯ã€å¤šæ§˜ä½“å­¦ç¿’ã¨å‘¼ã°ã‚Œã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«å±ã™ã‚‹ã€‚\nå¤šæ§˜ä½“ å¤šæ§˜ä½“ (manifold) ã¨ã¯ã€ç°¡å˜ã«è¡¨ã™ã¨ã€å±€æ‰€çš„ã«ä½æ¬¡å…ƒã®è¶…å¹³é¢ã¨è¦‹ãªã›ã‚‹å›³å½¢ã®ã“ã¨ã§ã‚ã‚‹ã€‚\nä¾‹ãˆã°ã€ä»¥ä¸‹ã«ç¤ºã™Swiss Rollã¯ã€3æ¬¡å…ƒç©ºé–“ã®ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ãŒã€å±€æ‰€çš„ã«ã¯2æ¬¡å…ƒã®å¹³é¢ã¨è¦‹ãªã›ã‚‹ã€‚\nã™ãªã‚ã¡ã€ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰2æ¬¡å…ƒå¹³é¢ã‚’ã†ã¾ãè¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚Œã°ã€æ§‹é€ ã‚’ä¿ã£ãŸã¾ã¾3æ¬¡å…ƒã‹ã‚‰2æ¬¡å…ƒã«åœ§ç¸®ã§ãã‚‹ã€‚\nã“ã®ã‚ˆã†ã«ã€å¤šæ§˜ä½“ã®ãƒ¢ãƒ‡ãƒ«ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã‚’å¤šæ§˜ä½“å­¦ç¿’ã¨å‘¼ã¶ã€‚å¤šæ§˜ä½“å­¦ç¿’ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ§˜ã€…ãªæ‰‹æ³•ãŒã‚ã‚‹ã€‚\n LLE å¤šæ¬¡å…ƒå°ºåº¦æ³• (multi-dimensional scaling, MDS) Isomap t-SNE (t-distributed Stochastic Neighbor Embedding) UMAP (Uniform Manifold Approximation and Projection)  LLEã«ã¯å¤§åŸŸçš„ãªä½ç½®é–¢ä¿‚ã‚’ä¿å­˜ã§ãã‚‹é•·æ‰€ãŒã‚ã‚‹ä¸€æ–¹ã€ä»¥ä¸‹ã®çŸ­æ‰€ã‚‚ã‚ã‚‹ã€‚\n å¤šæ§˜ä½“ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã€äº’ã„ã®ä½ç½®é–¢ä¿‚ã‚’ã†ã¾ãä¿å­˜ã§ããªã„ã€‚ åœ§ç¸®å¾Œã®ãƒ‡ãƒ¼ã‚¿ä½ç½®ã‚’å†æ§‹æˆã™ã‚‹è¨ˆç®—é‡ãŒãƒ‡ãƒ¼ã‚¿æ•°ã®2ä¹—ã«æ¯”ä¾‹ã™ã‚‹ãŸã‚ã€å¤§è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿ã«é©ç”¨ã—ã¥ã‚‰ã„ã€‚  LLEã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  LLEã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ã€2ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ãƒ‡ãƒ¼ã‚¿é–“ã®å±€æ‰€çš„ãªç·šå½¢ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã—ã€æ¬¡å…ƒã‚’å‰Šæ¸›ã™ã‚‹ã€‚\n å±€æ‰€çš„ãªé–¢ä¿‚ã®ç·šå½¢ãƒ¢ãƒ‡ãƒ«åŒ– é–¢ä¿‚ã‚’ç¶­æŒã—ãŸæ¬¡å…ƒå‰Šæ¸›  å±€æ‰€çš„ãªé–¢ä¿‚ã®ç·šå½¢ãƒ¢ãƒ‡ãƒ«åŒ– ã¾ãšã€ãƒ‡ãƒ¼ã‚¿ã®å„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¯¾ã—ã¦ã€è¿‘å‚ã«ã‚ã‚‹kç‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ¢ã—ã€ãã‚Œã‚‰ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç·šå½¢çµåˆã§è¡¨ã™ã“ã¨ã‚’è€ƒãˆã‚‹ã€‚ãŸã ã—ã€kã¯ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚‹ã€‚\nä¾‹ã¨ã—ã¦ã€ä¸‹å›³ã®ã‚ˆã†ã«2æ¬¡å…ƒç©ºé–“ã«ãŠã„ã¦5ã¤ã®ç‚¹Aï½EãŒä¸ãˆã‚‰ã‚ŒãŸå ´åˆã«ã€ç‚¹Cã‚’è¿‘å‚ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç·šå½¢å’Œã¨ã—ã¦è¡¨ã™ã“ã¨ã‚’è€ƒãˆã‚‹ã€‚\nk=2ã¨ã™ã‚‹ã¨ã€ç‚¹Cã®è¿‘å‚ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ç‚¹B, Dã§ã‚ã‚‹ã€‚\nã¾ãŸã€ç‚¹B, C, Dã®ä½ç½®ã¯$\\boldsymbol{x^{(B)}, x^{(C)}, x^{(D)}}$ã§ä¸ãˆã‚‰ã‚Œã‚‹ã¨ã™ã‚‹ã€‚\næ¬¡ã«ã€$\\boldsymbol{x^{(B)}, x^{(D)}}$ã®ç·šå½¢çµåˆã¨ã—ã¦æ¬¡å¼ã‚’è€ƒãˆã‚‹ã€‚\n$w_{C, B}\\boldsymbol{x^{(B)}} + w_{C, D}\\boldsymbol{x^{(D)}}$\nãŸã ã—ã€$w_{C, B}, w_{C, D}$ã¯ç‚¹Cã«å¯¾ã™ã‚‹ç‚¹B, Dã®é‡ã¿ä¿‚æ•°ã§ã‚ã‚‹ã€‚\nã¾ãŸã€\n$w_{C, B}+w_{C, D}=1$\nã§ã‚ã‚‹ã€‚\nã•ã‚‰ã«ã€ç‚¹Cã‚’ç‚¹B, Dã®ç·šå½¢çµåˆã§è¿‘ä¼¼ã™ã‚‹ãŸã‚ã€æ¬¡å¼ãŒæœ€å°ã¨ãªã‚‹$w_{C, B}, w_{C, D}$ã‚’æ±‚ã‚ã‚‹ã€‚\n$\\boldsymbol{x^{(C)}} - (w_{C, B}\\boldsymbol{x^{(B)}} + w_{C, D}\\boldsymbol{x^{(D)}})$\n$\\mathrm{subject\\ to\\ } w_{C, B}+w_{C, D}=1$\nä¸‹å›³ã¯ã€ä¸Šè¨˜ã®è€ƒãˆã‚’å¹¾ä½•çš„ã«ç¤ºã—ãŸã‚‚ã®ã§ã‚ã‚‹ã€‚\nå›³ã®ç‚¹B, Dã‚’çµã¶ç ´ç·šã¯ã€$\\boldsymbol{x^{(B)}, x^{(D)}}$ã®ç·šå½¢çµåˆã‚’è¡¨ã™ã€‚\nã¾ãŸã€æ±‚ã‚ã‚‹ä¿‚æ•°$w_{C, B}, w_{C, D}$ã¯ã€\n$w_{C, B}\\boldsymbol{x^{(B)}} + w_{C, D}\\boldsymbol{x^{(D)}}$\nã¨ã€\n$\\boldsymbol{x^{(C)}}$\nã®è·é›¢ã‚’æœ€å°ã¨ã™ã‚‹å€¤ã¨ãªã‚‹ã€‚\nä»¥ä¸Šã€ã‚ã‚‹ç‚¹ã«å¯¾ã™ã‚‹ç·šå½¢ãƒ¢ãƒ‡ãƒ«åŒ–ã‚’ç¤ºã—ãŸãŒã€å…¨ã¦ã®ç‚¹ã«å¯¾ã—ã¦ä¸€èˆ¬åŒ–ã—ãŸå¼ã‚’ç¤ºã™ã€‚\nã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æ•°ã‚’$N$ã¨ã—ã¦ã€é‡ã¿ä¿‚æ•°ã‚’è¡Œåˆ—$W\\in\\mathbb{R}^{N\\times N}$ã«ã¾ã¨ã‚ã‚‹ã€‚\né‡ã¿ä¿‚æ•°$w_{i,j}$ã‚’$W$ã®$(i,j)$æˆåˆ†ã¨ã™ã‚‹ã€‚\nã“ã®ã¨ãã€ç·šå½¢ãƒ¢ãƒ‡ãƒ«åŒ–ã¨ã¯ã€æ¬¡å¼ã‚’æœ€å°åŒ–ã™ã‚‹é‡ã¿è¡Œåˆ—$W$ã‚’æ±‚ã‚ã‚‹å•é¡Œã¨ãªã‚‹ã€‚\n$$ \\sum_{i=1}^{N} \\left( \\boldsymbol{x^{(i)}} - \\sum_{j=1}^{N} w_{i,j} \\boldsymbol{x^{(j)}} \\right)^2$$\n$$ \\mathrm{subject\\ to\\ } \\begin{cases} \\sum_{j=1}^{N} w_{i,j} = 1 \u0026amp; (\\mathrm{for\\ } i=1,2,\u0026hellip;,N) \\\\ w_{i,j} = 0 \u0026amp; (\\boldsymbol{x^{(j)}} ãŒ \\boldsymbol{x^{(i)}} ã®è¿‘å‚ç‚¹ã§ã¯ãªã„) \\end{cases} $$\né–¢ä¿‚ã‚’ç¶­æŒã—ãŸæ¬¡å…ƒå‰Šæ¸› å‰ç¯€ã§å¾—ã‚‰ã‚ŒãŸé‡ã¿è¡Œåˆ—$W$ã‚’ç”¨ã„ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®å±€æ‰€çš„ãªé–¢ä¿‚ã‚’ãªã‚‹ã¹ãç¶­æŒã§ãã‚‹ã‚ˆã†ã«ã€åœ§ç¸®å¾Œã®æ¬¡å…ƒã«ãŠã‘ã‚‹ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½ç½®ã‚’æ±‚ã‚ã‚‹ã€‚\nåœ§ç¸®å¾Œã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½ç½®ã‚’$\\boldsymbol{y^{(i)} (i=1,2,\u0026hellip;,N)}$ã¨ã™ã‚‹ã€‚\nãŸã ã—ã€$\\boldsymbol{y^{(i)}}$ã®æ¬¡å…ƒã¯$\\boldsymbol{x^{(i)}}$ã®æ¬¡å…ƒã‚ˆã‚Šå°ã•ããªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚\nã“ã®ã¨ãã€$\\boldsymbol{y^{(i)}}$ã¯æ¬¡å¼ã‚’æœ€å°åŒ–ã™ã‚‹å€¤ã¨ã—ã¦å¾—ã‚‰ã‚Œã‚‹ã€‚\n$$ \\sum_{i=1}^{N} \\left( \\boldsymbol{y^{(i)}} - \\sum_{j=1}^{N} w_{i,j} \\boldsymbol{y^{(j)}} \\right)^2 $$\nå…ˆç¨‹ã®ä¾‹ã®ç¶šãã§èª¬æ˜ã™ã‚‹ã€‚\n2æ¬¡å…ƒç©ºé–“ä¸Šã®ç‚¹B, C, Dã®ä½ç½®$\\boldsymbol{x^{(B)}, x^{(C)}, x^{(D)}}$ã‚’1æ¬¡å…ƒç©ºé–“ã«åœ§ç¸®ã™ã‚‹ã‚‚ã®ã¨ã—ã¦ã€åœ§ç¸®å¾Œã®ä½ç½®ã‚’$\\boldsymbol{y^{(B)}, y^{(C)}, y^{(D)}}$ã¨ã™ã‚‹ã€‚\nå¾—ã‚‰ã‚ŒãŸé‡ã¿ä¿‚æ•°$w_{C, B}, w_{C, D}$ã‚’ç”¨ã„ã‚‹ã¨ã€$\\boldsymbol{y^{(B)}}$ã®æœ€é©ãªä½ç½®ã¯æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚\n$$ w_{C, B}\\boldsymbol{y^{(B)}} + w_{C, D}\\boldsymbol{y^{(D)}} $$\nå‚è€ƒ LLEã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã€‚\nã€å¤šæ§˜ä½“å­¦ç¿’ã€‘LLEã¨ã¡ã‚‡ã£ã¨T-SNE - HELLO CYBERNETICS\n","description":"éç·šå½¢ãƒ‡ãƒ¼ã‚¿ã‚’å¯¾è±¡ã¨ã™ã‚‹æ¬¡å…ƒå‰Šæ¸›æ‰‹æ³•ã§ã‚ã‚‹LLE (Locally Linear Embedding) ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":60,"section":"posts","tags":["æ¬¡å…ƒå‰Šæ¸›"],"title":"LLE (Locally Linear Embedding) ã«ã‚ˆã‚‹éç·šå½¢ãƒ‡ãƒ¼ã‚¿ã®æ¬¡å…ƒå‰Šæ¸›","uri":"https://helve-blog.com/posts/math/locally-linear-embedding/"},{"content":"ã¯ã˜ã‚ã« èª¬æ˜å¤‰æ•°ãŒ2ã¤ä»¥ä¸Šã‚ã‚‹å›å¸°ãƒ¢ãƒ‡ãƒ«ï¼ˆé‡å›å¸°ãƒ¢ãƒ‡ãƒ«ï¼‰ã‚’ä½œæˆã™ã‚‹ã¨ãã€ç›¸é–¢ãŒå¼·ã„èª¬æ˜å¤‰æ•°ãŒã‚ã‚‹ã¨ã€æ¨å®šçµæœãŒä¸å®‰å®šã«ãªã‚‹ã€‚ã“ã®å•é¡Œã¯å¤šé‡å…±ç·šæ€§ã€ã‚ã‚‹ã„ã¯è‹±èªã®multi-collinearityã‹ã‚‰ãƒãƒ«ãƒã‚³ã¨å‘¼ã°ã‚Œã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€å¤šé‡å…±ç·šæ€§ãŒç”Ÿã˜ã‚‹åŸå› ã«ã¤ã„ã¦ã€æ•°å­¦çš„ãªå³å¯†ã•ã‚’çœã„ã¦ç›´è¦³çš„ã«èª¬æ˜ã™ã‚‹ã€‚\nå¤šé‡å…±ç·šæ€§ãŒç™ºç”Ÿã™ã‚‹åŸå›  3ã¤ã®å¤‰æ•°$x_1, x_2, x_3$ã‚’ç”¨ã„ã¦ã€å¤‰æ•°$y$ã‚’äºˆæ¸¬ã™ã‚‹é‡å›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’è€ƒãˆã‚‹ã€‚\nã™ãªã‚ã¡ã€å›å¸°å¼ã¯ä»¥ä¸‹ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$ y=ax_1+bx_2+cx_3+d$\nãŸã ã—ã€$a, b, c$ã¯å›å¸°ä¿‚æ•°ã€$d$ã¯å®šæ•°é …ã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€ãƒ‡ãƒ¼ã‚¿ãŒä¸‹å›³ã®ã‚ˆã†ã«ä¸ãˆã‚‰ã‚ŒãŸã¨ã™ã‚‹ã€‚\nå›³ã‚ˆã‚Šã€$y$ã¯$x_1$ã¨ç›¸é–¢ãŒé«˜ã„ä¸€æ–¹ã§ã€$y$ã¯$x_2, x_3$ã¨ã®ç›¸é–¢ã¯éå¸¸ã«ä½ã„ã€‚\nã™ãªã‚ã¡ã€$y$ã®å¤‰åŒ–ã¯$x_1$ã«ã‚ˆã£ã¦ã»ã¼èª¬æ˜ã§ãã‚‹ã€‚\n$y$ã®å¤‰åŒ–ã¨$x_1$ã®å¤‰åŒ–ã¯1:1ã§ã‚ã‚‹ã®ã§ã€å›å¸°ä¿‚æ•°$a$ã¯1ã§ã‚ã‚‹ã€‚\nå•é¡Œã¨ãªã‚‹ã®ã¯ã€ç›¸é–¢ã®é«˜ã„$x_2, x_3$ã®å›å¸°ä¿‚æ•°$b, c$ã§ã‚ã‚‹ã€‚$x_2$ã®å¤‰åŒ–ã‚’$x_3$ã«ã‚ˆã‚Šæ‰“ã¡æ¶ˆã›ã‚Œã°$b, c$ã®å€¤ã¯ä½•ã§ã‚‚è‰¯ã„ã®ã§ã€$(b, c)=(1, -1)$ã§ã‚‚ã€æ¥µç«¯ãªè©±ã€$(b, c)=(100, -100)$ã§ã‚‚è‰¯ã„ã€‚\nã™ãªã‚ã¡ã€ä»¥ä¸‹ã®å›å¸°å¼ãŒå¾—ã‚‰ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šå¾—ã‚‹ã€‚\n$ y= x_1+ 100 x_2 - 100 x_3$\nï¼ˆç°¡å˜ã®ãŸã‚ã€å®šæ•°é …ã¯ç„¡è¦–ã—ãŸï¼‰\nã“ã®ã‚ˆã†ãªä¿‚æ•°ãŒå¤§ãã„å›å¸°å¼ã‚’ç”¨ã„ã¦ã—ã¾ã†ã¨ã€$x_2$ã¾ãŸã¯$x_3$ã«ãƒã‚¤ã‚ºãŒå…¥ã£ãŸå ´åˆã€$y$ã®æ¨å®šå€¤ãŒéå¸¸ã«å¤§ããå¤‰åŒ–ã—ã¦ã—ã¾ã†ã€‚\nä»¥ä¸ŠãŒã€å¤šé‡å…±ç·šæ€§ã«ã‚ˆã‚Šé‡å›å¸°ãƒ¢ãƒ‡ãƒ«ã®æ¨å®šçµæœãŒä¸å®‰å®šã«ãªã‚‹åŸå› ã§ã‚ã‚‹ã€‚\nå¤šé‡å…±ç·šæ€§ã¸ã®å¯¾ç­– å¤šé‡å…±ç·šæ€§ã¸ã®å¯¾ç­–ã¨ã—ã¦æ­£å‰‡åŒ– (regularization) ãŒæŒ™ã’ã‚‰ã‚Œã‚‹ã€‚æ­£å‰‡åŒ–ã¨ã¯ä¿‚æ•°ã®å¤§ãã•ã«å¯¾ã—ã¦ç½°å‰‡ã‚’åŠ ãˆã€ä¿‚æ•°ã®çµ¶å¯¾å€¤ã‚’ãªã‚‹ã¹ãå°ã•ãã™ã‚‹æ–¹æ³•ã§ã‚ã‚‹ã€‚\nã™ãªã‚ã¡ã€ä¸Šè¨˜ã®ä¾‹ã§ã¯ä¿‚æ•°$b, c$ã‚’ã¨ã‚‚ã«0ã«è¿‘ã¥ã‘ã¦ã€æ¨å®šçµæœã‚’å®‰å®šã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\næ­£å‰‡åŒ–ã®æ–¹æ³•ã«ã¯ã„ãã¤ã‹ç¨®é¡ãŒã‚ã‚Šã€ãƒªãƒƒã‚¸ (Ridge) å›å¸°ã€ãƒ©ãƒƒã‚½ (Lasso) å›å¸°ã€Elastic Netã¨å‘¼ã°ã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«ãŒè‰¯ãç”¨ã„ã‚‰ã‚Œã‚‹ã€‚\nã“ã‚Œã‚‰ã®ãƒ¢ãƒ‡ãƒ«ã¯scikit-learnã«å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®è¨˜äº‹ã§ä½¿ã„æ–¹ã‚’è§£èª¬ã—ã¦ã„ã‚‹ã€‚\nScikit-learnã®æ­£å‰‡åŒ–ä»˜ãé‡å›å¸°ãƒ¢ãƒ‡ãƒ«\n","description":"é‡å›å¸°ãƒ¢ãƒ‡ãƒ«ã§å¤šé‡å…±ç·šæ€§ãŒç”Ÿã˜ã‚‹åŸå› ã‚’ç›´è¦³çš„ã«èª¬æ˜ã™ã‚‹ã€‚","id":61,"section":"posts","tags":["çµ±è¨ˆå­¦"],"title":"å¤šé‡å…±ç·šæ€§ï¼ˆãƒãƒ«ãƒã‚³ï¼‰ã®ç›´è¦³çš„èª¬æ˜","uri":"https://helve-blog.com/posts/math/multi-collinearity/"},{"content":"ã¯ã˜ã‚ã« å‰å›ã®è¨˜äº‹ã§scikit-learnã®BaggingClassifierã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦è§£èª¬ã—ãŸãŸã‚ã€æœ¬è¨˜äº‹ã§ã¯å®Ÿéš›ã®ä½¿ç”¨ä¾‹ã‚’ç¤ºã™ã€‚\nåŸºæœ¬çš„ãªä½¿ã„æ–¹ã¨ã€åˆ†é¡ç¢ºç‡ã‚’å‡ºåŠ›ã™ã‚‹æ–¹æ³•ã€warm startã«ã‚ˆã‚‹è¿½åŠ å­¦ç¿’ã«ã¤ã„ã¦ç¤ºã™ã€‚\nå‰å›ã®è¨˜äº‹ï¼š\nscikit-learnã®BaggingClassifierã§ãƒã‚®ãƒ³ã‚°ã™ã‚‹\næœ¬è¨˜äº‹ã§ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®é€šã‚Šã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3 4 5  import pandas as pd from sklearn.datasets import load_iris from sklearn.model_selection import train_test_split from sklearn.tree import DecisionTreeClassifier from sklearn.ensemble import BaggingClassifier   ã¾ãŸã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã‚ã‚‹ã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     pandas 0.25.0   scikit-learn 0.21.3    ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ Irisãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ä¾‹ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯3ç¨®é¡ã®å“ç¨®ã®ã‚¢ãƒ¤ãƒ¡ã‚’åˆ†é¡ã™ã‚‹å•é¡Œã§ã‚ã‚‹ã€‚\nã¾ãšã€scikit-learnã«ä»˜å±ã—ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã€‚\n1 2 3  data = load_iris() X = pd.DataFrame(data.data, columns=data.feature_names) # èª¬æ˜å¤‰æ•° y = pd.Series(data.target) # ç›®çš„å¤‰æ•°   æ¬¡ã«ã€train_test_splité–¢æ•°ã‚’ç”¨ã„ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å­¦ç¿’ç”¨ (train) ã¨æ¤œè¨¼ç”¨ (val) ã«åˆ†å‰²ã™ã‚‹ã€‚\n1  X_train, X_val, y_train, y_val = train_test_split(X, y, train_size=0.8, random_state=0)   åŸºæœ¬çš„ãªä½¿ã„æ–¹ BaggingClassifierã®base_estimatorã«å¼±å­¦ç¿’å™¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã ã‘ã§ã‚ã‚‹ã€‚\nä»Šå›ã€å¼±å­¦ç¿’å™¨ã¯æ±ºå®šæœ¨ (DecisionTreeClassifier) ã¨ã—ãŸã€‚\nå­¦ç¿’ã¨äºˆæ¸¬ã«ã¯ã€é€šå¸¸ã®åˆ†é¡å™¨ã¨åŒæ§˜ã«fitãƒ¡ã‚½ãƒƒãƒ‰ã¨predictãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3 4 5  base_clf = DecisionTreeClassifier(random_state=0) clf = BaggingClassifier(base_estimator=base_clf) clf.fit(X_train, y_train) bc_pred = clf.predict(X_val)   ã¾ãŸã€BaggingClassifierã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã—ãŸä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n1 2 3 4 5  clf1 = BaggingClassifier(base_estimator=base_clf, max_samples=0.5, n_estimators=40, random_state=0, n_jobs=-1)   ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ„å‘³ã¯æ¬¡ã®é€šã‚Šã€‚\n max_samples=0.5: å¼±å­¦ç¿’å™¨1å€‹å½“ã‚Šã®å­¦ç¿’ã‚µãƒ³ãƒ—ãƒ«æ•°ã‚’fitã§ä¸ãˆãŸãƒ‡ãƒ¼ã‚¿ã®50%ã¨ã™ã‚‹ã€‚ n_estimators=40: å¼±å­¦ç¿’å™¨ã®æ•°ã‚’40ã«ã™ã‚‹ã€‚ random_state=0: ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ã€‚ n_jobs=-1: CPUã®å…¨ã‚³ã‚¢ã‚’ä½¿ã£ã¦ä¸¦åˆ—è¨ˆç®—ã™ã‚‹ã€‚  åˆ†é¡ç¢ºç‡ã‚’ç¤ºã™ æ¤œè¨¼ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå„ã‚¯ãƒ©ã‚¹ã«å«ã¾ã‚Œã‚‹ç¢ºç‡ã‚’å‡ºåŠ›ã—ãŸã„å ´åˆã¯ã€predict_probaãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\nå¼±å­¦ç¿’å™¨ã«predict_probaãƒ¡ã‚½ãƒƒãƒ‰ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹å ´åˆã€å„å¼±å­¦ç¿’å™¨ãŒå‡ºåŠ›ã—ãŸç¢ºç‡ã®å¹³å‡ãŒè¿”ã•ã‚Œã‚‹ã€‚\nä¸€æ–¹ã€å®Ÿè£…ã•ã‚Œã¦ã„ãªã„å ´åˆã€å¼±å­¦ç¿’å™¨ãŒå‡ºåŠ›ã—ãŸåˆ†é¡çµæœã®æ¯”ç‡ãŒè¿”ã•ã‚Œã‚‹ã€‚\n1 2  pred_proba = clf.predict_proba(X_val) print(pred_proba)   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6 7 8 9 10 11  [[0. 0. 1. ] [0. 0.9 0.1] [1. 0. 0. ] [0. 0. 1. ] ï¼ˆä¸­ç•¥ï¼‰ [0. 0.1 0.9] [1. 0. 0. ] [1. 0. 0. ] [0. 1. 0. ] [0. 1. 0. ] [1. 0. 0. ]]   å¼±å­¦ç¿’å™¨ã‚’è¿½åŠ ã—ã¦å­¦ç¿’ã™ã‚‹ BaggingClassifierã®warm_startã‚’è¨­å®šã™ã‚‹ã¨ã€è¿½åŠ ã—ãŸå¼±å­¦ç¿’å™¨ã®ã¿ã‚’å†å­¦ç¿’ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nä¾‹ãˆã°ã€ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒã§å¼±å­¦ç¿’å™¨ã®æ•°ã‚’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸã„å ´åˆã«è¨ˆç®—æ™‚é–“ã‚’çŸ­ç¸®ã§ãã‚‹ã€‚\nä»¥ä¸‹ã®ä¾‹ã§ã¯ã€æœ€åˆã«å¼±å­¦ç¿’å™¨ã®æ•°ã‚’10ã¨ã—ã¦å­¦ç¿’ã—ãŸå¾Œã€set_paramsãƒ¡ã‚½ãƒƒãƒ‰ã§20ã«ã—ã¦ã€è¿½åŠ ã—ãŸ10å€‹ã®å¼±å­¦ç¿’ã®ã¿å­¦ç¿’ã•ã›ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7  base_clf = DecisionTreeClassifier(random_state=0) clf = BaggingClassifier(base_estimator=base_clf, n_estimators=10, warm_start=True) clf.fit(X_train, y_train) clf.set_params(n_estimators=20) # å¼±å­¦ç¿’å™¨ã®æ•°ã‚’è¿½åŠ ã™ã‚‹ clf.fit(X_train, y_train) # è¿½åŠ ã—ãŸå¼±å­¦ç¿’å™¨ã®ã¿å­¦ç¿’ã•ã›ã‚‹   å®Ÿéš›ã«è¨ˆç®—æ™‚é–“ã‚’æ¯”è¼ƒã™ã‚‹ï¼ˆIPythonã§å®Ÿè¡Œï¼‰ã€‚\nãƒ»è¿½åŠ ã§å­¦ç¿’ã•ã›ã‚‹å ´åˆï¼ˆ1å›ã®å®Ÿè¡Œã§20å€‹ã®æ±ºå®šæœ¨ã‚’å­¦ç¿’ã•ã›ã‚‹ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10  def warm_start(): base_clf = DecisionTreeClassifier(random_state=0) clf = BaggingClassifier(base_estimator=base_clf, n_estimators=10, warm_start=True) clf.fit(X_train, y_train) clf.set_params(n_estimators=20) clf.fit(X_train, y_train) %timeit warm_start()   å®Ÿè¡Œçµæœ\n1  17.8 ms Â± 198 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each)   ãƒ»åˆ¥é€”å­¦ç¿’ã•ã›ã‚‹å ´åˆï¼ˆ1å›ã®å®Ÿè¡Œã§30å€‹ã®æ±ºå®šæœ¨ã‚’å­¦ç¿’ã•ã›ã‚‹ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10  def cold_start(): base_clf = DecisionTreeClassifier(random_state=0) clf = BaggingClassifier(base_estimator=base_clf, n_estimators=10) clf.fit(X_train, y_train) clf = BaggingClassifier(base_estimator=base_clf, n_estimators=20) clf.fit(X_train, y_train) %timeit cold_start()   å®Ÿè¡Œçµæœ\n1  25.4 ms Â± 2.29 ms per loop (mean Â± std. dev. of 7 runs, 10 loops each)   è¨ˆç®—æ™‚é–“ã¯ã€è¿½åŠ å­¦ç¿’ã—ãŸå ´åˆã¯17.8ms, åˆ¥é€”å­¦ç¿’ã—ãŸå ´åˆã¯25.4msã§ã‚ã£ãŸã€‚\n17.8msÃ·25.4ms=70.1%ã§ã‚ã‚‹ã‹ã‚‰ã€è¨ˆç®—æ™‚é–“ã¯å­¦ç¿’ã—ãŸå¼±å­¦ç¿’å™¨ï¼ˆæ±ºå®šæœ¨ï¼‰ã®æ•°ã«ã»ã¼æ¯”ä¾‹ã—ã¦ã„ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€è¿½åŠ ã—ãŸå¼±å­¦ç¿’å™¨ã®ã¿å­¦ç¿’ã•ã›ã‚‹ã“ã¨ã§è¨ˆç®—æ™‚é–“ã‚’çŸ­ç¸®ã§ãã‚‹ã“ã¨ãŒç¤ºã•ã‚ŒãŸã€‚\nå‚è€ƒ sklearn.ensemble.BaggingClassifier â€” scikit-learn 0.24.0 documentation\n","description":"BaggingClassifierã‚¯ãƒ©ã‚¹ã®ä½¿ç”¨ä¾‹ã‚’ç¤ºã™ã€‚","id":62,"section":"posts","tags":["Python","Scikit-learn"],"title":"BaggingClassifierã®ä½¿ç”¨ä¾‹","uri":"https://helve-blog.com/posts/python/sklearn-bagging-classifier-example/"},{"content":"ã¯ã˜ã‚ã« scikit-learnã«ã¯ã€ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å­¦ç¿’ã‚’è¡Œã†ãŸã‚ã®BaggingClassifierãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€BaggingClassifierã‚’ç”¨ã„ãŸå­¦ç¿’ï¼ˆãƒã‚®ãƒ³ã‚°ã€ãƒšãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã€ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹ã€ãƒ©ãƒ³ãƒ€ãƒ ãƒ‘ãƒƒãƒï¼‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\nç’°å¢ƒ scikit-learn 0.21.3\nã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å­¦ç¿’ ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å­¦ç¿’ã¯ã€è¤‡æ•°ã®äºˆæ¸¬å™¨ï¼ˆåˆ†é¡å™¨ã‚„å›å¸°å™¨ãªã©ï¼‰ã®äºˆæ¸¬çµæœã‚’1ã¤ã«ã¾ã¨ã‚ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å­¦ç¿’ã«ã¯æ§˜ã€…ãªæ‰‹æ³•ãŒã‚ã‚Šã€ä»£è¡¨çš„ãªã‚‚ã®ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\n ãƒã‚®ãƒ³ã‚°ï¼šäºˆæ¸¬å™¨ã”ã¨ã«ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã‚“ã ãƒ‡ãƒ¼ã‚¿ã§å­¦ç¿’ã•ã›ã‚‹ã€‚ ãƒ–ãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°ï¼šé€æ¬¡çš„ã«äºˆæ¸¬å™¨ã‚’æ§‹ç¯‰ã—ã€ç›´å‰ã®äºˆæ¸¬å™¨ã®èª¤å·®ã‚’ä¿®æ­£ã™ã‚‹ã‚ˆã†ã«å­¦ç¿’ã•ã›ã‚‹ã€‚ ã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°ï¼šè¤‡æ•°ã®äºˆæ¸¬å™¨ã®çµæœã‚’ã¾ã¨ã‚ã‚‹äºˆæ¸¬å™¨ï¼ˆãƒ¡ã‚¿å­¦ç¿’å™¨ï¼‰ã‚’ç”¨ã„ã‚‹ã€‚  ä¸Šè¨˜ã®æ‰‹æ³•ã¯ã€å®Œå…¨ã«åˆ†é¡ã§ãã‚‹ã‚‚ã®ã§ã¯ãªã„ã€‚ä¾‹ãˆã°ã€ãƒã‚®ãƒ³ã‚°ã§å­¦ç¿’ã•ã›ãŸäºˆæ¸¬å™¨ã®çµæœã‚’ã€ã‚¹ã‚¿ãƒƒã‚­ãƒ³ã‚°ã§ã¾ã¨ã‚ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ãƒã‚®ãƒ³ã‚°ãŠã‚ˆã³ã€ãã‚Œã«é¡ä¼¼ã™ã‚‹æ‰‹æ³•ã‚’æ‰±ã†ã€‚\nBaggingClassifierã‚’ç”¨ã„ã‚‹ã¨ã€ã“ã‚Œã‚‰ã®æ‰‹æ³•ã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ã€‚\nãƒã‚®ãƒ³ã‚° (bagging) ã«è¿‘ã„æ‰‹æ³•ã¨ã—ã¦ã€ãƒšãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚° (pasting)ã€ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹ (random subspace)ã€ãƒ©ãƒ³ãƒ€ãƒ ãƒ‘ãƒƒãƒ (random patche) ãŒã‚ã‚‹ã€‚\nå„æ‰‹æ³•ã®é•ã„ã‚’ä¸‹è¡¨ã«ç¤ºã™ã€‚\n   æ‰‹æ³• å­¦ç¿’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®é¸æŠ ç‰¹å¾´é‡ã®é¸æŠ     ãƒã‚®ãƒ³ã‚° é‡è¤‡ã‚ã‚Šãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° å…¨ã¦é¸æŠ   ãƒšãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚° é‡è¤‡ãªã—ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° å…¨ã¦é¸æŠ   ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹ å…¨ã¦é¸æŠ é‡è¤‡ã‚ã‚Šãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°   ãƒ©ãƒ³ãƒ€ãƒ ãƒ‘ãƒƒãƒ é‡è¤‡ãªã—ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° é‡è¤‡ãªã—ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°    ãƒã‚®ãƒ³ã‚°ã§ã¯å­¦ç¿’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãŒé‡è¤‡ã‚ã‚Šã§è¡Œã‚ã‚Œã€ãƒšãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã§ã¯é‡è¤‡ãªã—ã§è¡Œã‚ã‚Œã‚‹ã€‚ã™ãªã‚ã¡ã€ãƒã‚®ãƒ³ã‚°ã§ã¯ã€åŒã˜äºˆæ¸¬å™¨ã«å¯¾ã—ã¦åŒã˜å­¦ç¿’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒè¤‡æ•°å›é¸ã°ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šå¾—ã‚‹ã€‚\nä¸€æ–¹ã€ãƒšãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã§ã¯åŒã˜äºˆæ¸¬å™¨ã¯ç•°ãªã‚‹å­¦ç¿’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã—ã‹é¸ã°ã‚Œãªã„ã€‚\nãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹ã§ã¯ã€ç‰¹å¾´é‡ã®æ–¹å‘ã«ã€é‡è¤‡ã‚ã‚Šã®ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’è¡Œã†ã€‚ã“ã®æ‰‹æ³•ãŒæœ‰åŠ¹ãªã®ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå ´åˆã§ã‚ã‚‹ã€‚\n å…ƒãƒ‡ãƒ¼ã‚¿ã®ç‰¹å¾´é‡ãŒéå¸¸ã«å¤šã„ ç‰¹å¾´é‡ã®æ•°ã®2ä¹—ã‚„3ä¹—ã«æ¯”ä¾‹ã—ã¦ã€äºˆæ¸¬å™¨ã®è¨ˆç®—è² è·ãŒå¢—åŠ ã™ã‚‹  ãƒ©ãƒ³ãƒ€ãƒ ãƒ‘ãƒƒãƒã§ã¯ã€å­¦ç¿’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨ç‰¹å¾´é‡ã®ä¸¡æ–¹ã«å¯¾ã—ã¦ã€é‡è¤‡ãªã—ã®ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’è¡Œã†ã€‚\nå„æ‰‹æ³•ã‚’å®Ÿè£…ã™ã‚‹ã«ã¯ã€å¾Œè¿°ã®BaggingClassifierã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä¸‹è¡¨ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚\n    bootstrap max_samples bootstrap_features max_features     ãƒã‚®ãƒ³ã‚° True 1.0æœªæº€ False 1.0   ãƒšãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚° False 1.0æœªæº€ False 1.0   ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹ False 1.0 True 1.0æœªæº€   ãƒ©ãƒ³ãƒ€ãƒ ãƒ‘ãƒƒãƒ False 1.0æœªæº€ False 1.0æœªæº€    BaggingClassifierã‚¯ãƒ©ã‚¹ã«ã¤ã„ã¦ å‰è¿°ã®é€šã‚Šã€scikit-learnã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹BaggingClassifierã‚’ç”¨ã„ã‚‹ã¨ã€ãƒã‚®ãƒ³ã‚°ç­‰ã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ã€‚\n1 2 3 4 5  BaggingClassifier(base_estimator=None, n_estimators=10, max_samples=1.0, max_features=1.0, bootstrap=True, bootstrap_features=False, oob_score=False, warm_start=False, n_jobs=None, random_state=None, verbose=0)   å¼•æ•° BaggingClassifierã®å¼•æ•°ã®è§£èª¬ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nbase_estimator: object or None\nãƒã‚®ãƒ³ã‚°ç­‰ã‚’è¡Œã†äºˆæ¸¬å™¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚Noneã®å ´åˆã¯ã€æ±ºå®šæœ¨ (decision tree) ã¨ãªã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯None.\nn_estimators: int\näºˆæ¸¬å™¨ã®æ•°ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯10ã€‚\nmax_samples: int or float\nå€‹ã€…ã®äºˆæ¸¬å™¨ã«ä¸ãˆã‚‹æœ€å¤§ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°ã€‚intã®å ´åˆã€æœ€å¤§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°ãã®ã‚‚ã®ã«ãªã‚‹ã€‚floatã®å ´åˆã€ãƒ‡ãƒ¼ã‚¿Xã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°ã«max_samplesã‚’æ›ã‘ãŸæ•°ã«ãªã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1.0ã€‚\nmax_features: int or float\nå€‹ã€…ã®äºˆæ¸¬å™¨ã«ä¸ãˆã‚‹æœ€å¤§ã®ç‰¹å¾´é‡ã®æ•°ã€‚intã®å ´åˆã€æœ€å¤§ç‰¹å¾´é‡æ•°ãã®ã‚‚ã®ã«ãªã‚‹ã€‚floatã®å ´åˆã€ãƒ‡ãƒ¼ã‚¿Xã®ç‰¹å¾´é‡æ•°ã«max_featuresã‚’æ›ã‘ãŸæ•°ã«ãªã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1.0ã€‚\nbootstrap: boolean\nTrueã®å ´åˆã€å€‹ã€…ã®äºˆæ¸¬å™¨ã«ä¸ãˆã‚‹å­¦ç¿’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®é‡è¤‡ã‚’è¨±ã™ã€‚Falseã®å ´åˆã€å­¦ç¿’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®é‡è¤‡ã‚’è¨±ã•ãªã„ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯True.\nbootstrap_features: boolean\nTrueã®å ´åˆã€å€‹ã€…ã®äºˆæ¸¬å™¨ã«ä¸ãˆã‚‹ç‰¹å¾´é‡ã®é‡è¤‡ã‚’è¨±ã™ã€‚Falseã®å ´åˆã€ç‰¹å¾´é‡ã®é‡è¤‡ã‚’è¨±ã•ãªã„ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Falseã€‚\noob_score: boolean\nTrueã®å ´åˆã€OOB (out-of-bag) ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ã™ã‚‹ã€‚\nãƒã‚®ãƒ³ã‚° (bagging) ã§ã¯å€‹ã€…ã®äºˆæ¸¬å™¨ã®å­¦ç¿’ç”¨ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’é‡è¤‡ã‚ã‚Šã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã€\nãã‚Œãã‚Œã®å­¦ç¿’å™¨ã«å¯¾ã—ã¦ã€å­¦ç¿’ã«ç”¨ã„ã‚‰ã‚Œãªã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒã‚ã‚‹ã€‚ã“ã‚Œã‚’OOBã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨å‘¼ã¶ã€‚\nå„äºˆæ¸¬å™¨ã®OOBã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¯¾ã™ã‚‹äºˆæ¸¬ç²¾åº¦ã‚’è¨ˆç®—ã—ã¦å¹³å‡ã™ã‚‹ã¨ã€ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«è‡ªä½“ã®äºˆæ¸¬ç²¾åº¦ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã“ã‚ŒãŒOOBã‚¹ã‚³ã‚¢ã§ã‚ã‚‹ã€‚\nãªãŠã€oob_scoreã§è¨ˆç®—ã•ã‚Œã‚‹ã€Œç²¾åº¦ã€ã¯æ­£è§£ç‡ (Accuracy) ã§ã‚ã‚Šã€sklearn.metrics.accuracy_scoreã¨ç­‰ä¾¡ã§ã‚ã‚‹ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Falseã€‚\nwarm_start: boolian\nTrueã®å ´åˆã€fitãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚‹å­¦ç¿’æ™‚ã«ã€ä»¥å‰ã®äºˆæ¸¬å™¨ã‚’ç¶­æŒã—ãŸã¾ã¾ã€æ–°ãŸãªäºˆæ¸¬å™¨ã‚’è¿½åŠ ã™ã‚‹ã€‚ä¾‹ãˆã°ã€ã‚°ãƒªãƒƒãƒ‰ã‚µãƒ¼ãƒã§äºˆæ¸¬å™¨ã®æ•°ã‚’å¢—ã‚„ã—ãªãŒã‚‰ç²¾åº¦å¤‰åŒ–ã‚’æ¤œè¨¼ã—ãŸã„å ´åˆã«ã€è¿½åŠ ã®äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®ã¿å­¦ç¿’ã•ã›ã‚Œã°è‰¯ã„ã®ã§ã€è¨ˆç®—æ™‚é–“ã‚’çŸ­ç¸®ã§ãã‚‹ã€‚ãŸã ã—ã€2å›ç›®ä»¥é™ã®fitã®å‰ã«ã€set_paramsãƒ¡ã‚½ãƒƒãƒ‰ã§n_estimatorsã®æ•°ã‚’å¢—ã‚„ã™å¿…è¦ãŒã‚ã‚‹ã€‚\nFalseã®å ´åˆã€fitãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†åº¦ã«å­¦ç¿’çµæœãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã€0ã‹ã‚‰å­¦ç¿’ãŒè¡Œã‚ã‚Œã‚‹ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Falseã€‚\nn_jobs: int or None\nintã§ä¸¦åˆ—è¨ˆç®—æ•°ã‚’æŒ‡å®šã™ã‚‹ã€‚-1ã®å ´åˆã€CPUã®å…¨ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’ä½¿ç”¨ã™ã‚‹ã€‚Noneã®å ´åˆã€ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚’1ã¤ã ã‘ä½¿ç”¨ã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Noneã€‚\nrandom_stateï¼š int, RandomState instance or None\nä¹±æ•°ã‚·ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Noneã€‚\nverbose: int\nå­¦ç¿’æ™‚ã¨äºˆæ¸¬æ™‚ã«ã€çŠ¶æ³ã‚’è¡¨ç¤ºã™ã‚‹ã‹è¨­å®šã™ã‚‹ã€‚æ•°å€¤ãŒå¤§ãã„ã»ã©è©³ç´°ã«è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nversion 0.21.2ã§ã¯ã€0ï½2ãŒæœ‰åŠ¹ã§ã‚ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯0ï¼ˆè¡¨ç¤ºã—ãªã„ï¼‰ã€‚\nå¤‰æ•° BaggingClassifierã‚¯ãƒ©ã‚¹ã®ãƒ¡ãƒ³ãƒå¤‰æ•°ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nbase_estimator_ : estimator\näºˆæ¸¬å™¨ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚\nestimators_ : list of estimators\nå­¦ç¿’ã—ãŸäºˆæ¸¬å™¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚¹ãƒˆã€‚\nestimators_samples_ : list of arrays\nå„äºˆæ¸¬å™¨ã®å­¦ç¿’ã«ä½¿ç”¨ã•ã‚ŒãŸã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç•ªå·ã€‚\nestimators_features_ : list of arrays\nå„äºˆæ¸¬å™¨ã®å­¦ç¿’ã«ä½¿ç”¨ã•ã‚ŒãŸç‰¹å¾´é‡ã®ç•ªå·ã€‚\nclasses_ : array of shape = [n_classes]\näºˆæ¸¬ã‚¯ãƒ©ã‚¹ã®ãƒ©ãƒ™ãƒ«\nn_classes_ : int or list\näºˆæ¸¬ã‚¯ãƒ©ã‚¹ã®æ•°ã€‚\noob_score_ : float\nOOBã‚¹ã‚³ã‚¢\noob_decision_function_ : array of shape = [n_samples, n_classes]\nå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ä¸­ã®OOBã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒã€ã©ã®ã‚¯ãƒ©ã‚¹ã«åˆ†é¡ã•ã‚ŒãŸã‹ã‚’è¡¨ã™é…åˆ—ã€‚\nn_estimatorsã®æ•°ãŒå°ã•ã„å ´åˆã¯ã€oob_decision_function_ã«NaNãŒå«ã¾ã‚Œã‚‹å ´åˆãŒã‚ã‚‹ã€‚\noob_scoreãŒTrueã®å ´åˆã«æœ‰åŠ¹ã€‚\nãƒ¡ã‚½ãƒƒãƒ‰ BaggingClassifierã‚¯ãƒ©ã‚¹ã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nfit(X, y)\nXã‚’èª¬æ˜å¤‰æ•°ã€yã‚’ç›®çš„å¤‰æ•°ã¨ã—ã¦å­¦ç¿’ã™ã‚‹ã€‚\npredict(X)\nèª¬æ˜å¤‰æ•°Xã®ã‚¯ãƒ©ã‚¹ã‚’äºˆæ¸¬ã™ã‚‹ã€‚\npredict_proba(X)\nXã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå„ã‚¯ãƒ©ã‚¹ã«å±ã™ã‚‹ç¢ºç‡ã‚’å‡ºåŠ›ã™ã‚‹ã€‚\npredict_log_proba(X)\nXã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå„ã‚¯ãƒ©ã‚¹ã«å±ã™ã‚‹ç¢ºç‡ã®å¯¾æ•°ã‚’å‡ºåŠ›ã™ã‚‹ã€‚\nset_params(**params)\nBaggingClassifierã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã™ã‚‹ã€‚\nå‚è€ƒ sklearn.ensemble.BaggingClassifier â€” scikit-learn 0.24.0 documentation\n","description":"BaggingClassifierã‚’ç”¨ã„ãŸå­¦ç¿’ï¼ˆãƒã‚®ãƒ³ã‚°ã€ãƒšãƒ¼ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã€ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ–ã‚¹ãƒšãƒ¼ã‚¹ã€ãƒ©ãƒ³ãƒ€ãƒ ãƒ‘ãƒƒãƒï¼‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":63,"section":"posts","tags":["Python","Scikit-learn"],"title":"scikit-learnã®BaggingClassifierã§ãƒã‚®ãƒ³ã‚°ã™ã‚‹","uri":"https://helve-blog.com/posts/python/sklearn-bagging-classifier/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æ©Ÿæ¢°å­¦ç¿’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªScikit-learnã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ä¸»æˆåˆ†åˆ†æã®ã‚¯ãƒ©ã‚¹ã‚’èª¿ã¹ãŸã€‚\næœ¬è¨˜äº‹ã§ã¯ã€PCAã‚¯ãƒ©ã‚¹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€å±æ€§ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\nä¸»æˆåˆ†åˆ†æ (PCA, Principal Component Analysis)ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ•£ã‚’ãªã‚‹ã¹ãç¶­æŒã—ã¤ã¤ã€ãƒ‡ãƒ¼ã‚¿ã®æ¬¡å…ƒã‚’æ¸›ã‚‰ã™æ‰‹æ³•ã§ã‚ã‚‹ã€‚\nä¸»æˆåˆ†åˆ†æã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ã‚‹ã‚µã‚¤ãƒˆã¯å¤šæ•°ã‚ã‚‹ãŸã‚ã€ã“ã“ã§ã¯èª¬æ˜ã‚’çœç•¥ã™ã‚‹ã€‚\nç’°å¢ƒ Scikit-learn 0.20.3\nä¸»æˆåˆ†åˆ†æã®ã‚¯ãƒ©ã‚¹ Scikit-learnã«ã¯ã€ä¸»æˆåˆ†åˆ†æã¯PCAã¨ã„ã†ã‚¯ãƒ©ã‚¹ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\n1 2 3  sklearn.decomposition.PCA(n_components=None, copy=True, whiten=False, svd_solver=\u0026#39;auto\u0026#39;, tol=0.0, iterated_power=\u0026#39;auto\u0026#39;, random_state=None)   ä»¥ä¸‹ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€ãƒ¡ã‚½ãƒƒãƒ‰ã€å±æ€§ã‚’è§£èª¬ã™ã‚‹ã€‚\nãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nn_components: int, float, None or string\næ•´æ•°ã‚’æŒ‡å®šã™ã‚‹ã¨ã€åœ§ç¸®å¾Œã®æ¬¡å…ƒæ•°ã«ãªã‚‹ã€‚\nã‚½ãƒ«ãƒãŒfullã®ã¨ãã€0ï½1ã®å°æ•°ã®æŒ‡å®šãŒå¯èƒ½ã§ã‚ã‚Šã€n_componentsã®å‰²åˆã§åˆ†æ•£ã‚’ç¶­æŒã§ãã‚‹ã ã‘ã®æœ€å°ã®æ¬¡å…ƒæ•°ãŒè‡ªå‹•ã§é¸ã°ã‚Œã‚‹ã€‚\nã¾ãŸã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®Noneã§ã¯ã€fitãƒ¡ã‚½ãƒƒãƒ‰ã«ä¸ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã€ã‚µãƒ³ãƒ—ãƒ«æ•°ã¨æ¬¡å…ƒæ•°ã®å°ã•ã„å€¤ãŒé¸ã°ã‚Œã‚‹ã€‚\ncopy: bool\nFalseãªã‚‰ã°ã€fitã‚„fit_transformã§å¤‰æ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¸Šæ›¸ãã™ã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯Trueï¼‰ã€‚\nwhiten: bool\nTrueãªã‚‰ã°ã€ç™½è‰²åŒ–ã¨ã‚ˆã°ã‚Œã‚‹ã€å¤‰æ•°é–“ã®ç›¸é–¢ã‚’ãªãã™å‡¦ç†ã‚’è¡Œã†ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯Falseï¼‰ã€‚è©³ç´°ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nç„¡ç›¸é–¢åŒ–ã¨ç™½è‰²åŒ–ã®æ„å‘³ã¨å¼ - å…·ä½“ä¾‹ã§å­¦ã¶æ•°å­¦\nsvd_solver : string\nç‰¹ç•°å€¤åˆ†è§£ã®ã‚½ãƒ«ãƒã‚’é¸ã¶ã€‚\n\u0026lsquo;auto\u0026rsquo;, \u0026lsquo;full\u0026rsquo;, \u0026lsquo;arpack\u0026rsquo;, \u0026lsquo;randomized\u0026rsquo;ã®4ã¤ã‹ã‚‰é¸æŠã§ãã‚‹ã€‚\u0026lsquo;full\u0026rsquo;ã¨\u0026rsquo;arpack\u0026rsquo;ã¯å³å¯†è§£ã§ã‚ã‚‹ã€‚\u0026lsquo;randomized\u0026rsquo;ã¯è¿‘ä¼¼è§£ã§ã‚ã‚‹ãŒã€ãƒ‡ãƒ¼ã‚¿æ•°ã‚„å…¥åŠ›æ¬¡å…ƒãŒéå¸¸ã«å¤šã„å ´åˆã¯éå¸¸ã«é«˜é€Ÿã§ã‚ã‚‹ã€‚\nå„ã‚½ãƒ«ãƒã®è¨ˆç®—é€Ÿåº¦ç­‰ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ãŒè©³ã—ã„ã€‚\nã€pythonã€‘sklearnã®PCAã§svd_solverã«ã‚ˆã‚‹é€Ÿåº¦å·®ã‚’æ¯”è¼ƒ - é™ã‹ãªã‚‹åè¾\ntol: float\u0026gt;= 0\nsvd_solverãŒ'arpack'ã®ã¨ãã€å›ºæœ‰å€¤ã®è¨±å®¹ç²¾åº¦ã‚’æŒ‡å®šã™ã‚‹ã€‚\niterated_power: int\u0026gt;=0\nsvd_solverãŒ'randomized'ã®ã¨ãã®è¨ˆç®—åå¾©å›æ•°ã‚’æŒ‡å®šã™ã‚‹ã€‚\nrandom_state: int, RandomState instance or None\nä¹±æ•°ã‚·ãƒ¼ãƒ‰ã€‚\nsvd_solverãŒ'arpack'ã¾ãŸã¯'randomized'ã®ã¨ãã«ä½¿ã‚ã‚Œã‚‹ã€‚\nãƒ¡ã‚½ãƒƒãƒ‰ ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nfit(X)\nPCAã‚’ã‚ã¦ã¯ã‚ã‚‹ã€‚\nXã¯ã‚µãƒ³ãƒ—ãƒ«æ•°Ã—ç‰¹å¾´é‡æ•°ã®2æ¬¡å…ƒé…åˆ—ã€‚\nfit_transform(X)\nPCAã‚’ã‚ã¦ã¯ã‚ã¦å¤‰æ›ã™ã‚‹ã€‚\næˆ»ã‚Šå€¤ã¯ã‚µãƒ³ãƒ—ãƒ«æ•°Ã—n_componentsã®2æ¬¡å…ƒé…åˆ—ã€‚\ntransform(X)\nfitã‚„fit_transformã§å®šç¾©ã—ãŸPCAã®å¤‰æ›ã‚’è¡Œã†ã€‚\næˆ»ã‚Šå€¤ã¯ã‚µãƒ³ãƒ—ãƒ«æ•°Ã—n_componentsã®2æ¬¡å…ƒé…åˆ—ã€‚\ninverse_transform(X)\nPCAã®é€†å¤‰æ›ã‚’è¡Œã†ã€‚\nXã¯ã‚µãƒ³ãƒ—ãƒ«æ•°Ã—n_componentsã®2æ¬¡å…ƒé…åˆ—ã€‚\næˆ»ã‚Šå€¤ã¯ã‚µãƒ³ãƒ—ãƒ«æ•°Ã—ç‰¹å¾´é‡æ•°ã®2æ¬¡å…ƒé…åˆ—ã€‚\nå±æ€§ PCAã‚¯ãƒ©ã‚¹ã®ä¸»ãªå±æ€§ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\ncomponents_: (n_components)Ã—(å…ƒã®ç‰¹å¾´é‡æ•°)ã®2æ¬¡å…ƒé…åˆ—ã€‚\nå…ƒã®è¡Œåˆ—ã‚’Xã¨ã™ã‚‹ã¨ã€transformãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®å¤‰æ›ã«ç­‰ã—ã„ã€‚\n1  np.dot(X-X.mean(axis=0), PCA.components_)   ã™ãªã‚ã¡ã€Xã®å¹³å‡ã‚’0ã¨ã—ã¦ã€n_componentsã¨ã®å†…ç©ã‚’ã¨ã‚‹ã€‚\nexplained_variance_ratio_:\nå€‹ã€…ã®ä¸»æˆåˆ†ã®å› å­å¯„ä¸ç‡ã‚’è¡¨ã™ã€é•·ã•n_componentsã®1æ¬¡å…ƒé…åˆ—ã€‚\nå› å­å¯„ä¸ç‡ã¨ã¯ã€ãƒ‡ãƒ¼ã‚¿å…¨ä½“ã®åˆ†æ•£ã«å¯¾ã™ã‚‹å€‹ã€…ã®ä¸»æˆåˆ†ã®åˆ†æ•£ã®å‰²åˆã§ã‚ã‚‹ã€‚\nn_componentsã‚’Noneã¨ã—ã¦å…¨ã¦ã®ä¸»æˆåˆ†ã‚’ä¿å­˜ã—ã¦ã„ã‚‹å ´åˆã€explained_variance_ratio_ã®åˆè¨ˆã¯1ã«ãªã‚‹ã€‚\nå‚è€ƒ sklearn.decomposition.PCA â€” scikit-learn 0.24.0 documentation\n","description":"Scikit-learnã®PCAã‚¯ãƒ©ã‚¹ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€å±æ€§ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":64,"section":"posts","tags":["Python","Scikit-learn"],"title":"Scikit-learnã®ä¸»æˆåˆ†åˆ†æ (PCA)","uri":"https://helve-blog.com/posts/python/sklearn-pca/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æ©Ÿæ¢°å­¦ç¿’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªScikit-learnã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹é‡å›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’èª¿ã¹ãŸã€‚\né€šå¸¸ã®ç·šå½¢å›å¸°ã«ã€å›å¸°ä¿‚æ•°ã‚’æ­£å‰‡åŒ–ã™ã‚‹Ridgeå›å¸°ã€Lassoå›å¸°ã€Elastic Netã‚’åŠ ãˆãŸ4ç¨®é¡ã®å›å¸°ãƒ¢ãƒ‡ãƒ«ã®åŸºæœ¬çš„ãªãƒ­ã‚¸ãƒƒã‚¯ã¨ä½¿ç”¨æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚\né€šå¸¸ã®é‡å›å¸°ãƒ¢ãƒ‡ãƒ«ã¯æ¬¡å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$ \\hat{y} = w_0 + w_1x_1 + w_2x_2 + \u0026hellip; + w_nx_n$\nã“ã“ã§ã€$\\hat{y}$ã¯äºˆæ¸¬å€¤ã€$w_0, w_1, \u0026hellip;, w_n$ã¯å›å¸°ä¿‚æ•°ã€$x_1, \u0026hellip;, x_n$ã¯èª¬æ˜å¤‰æ•°ã§ã‚ã‚‹ã€‚\nã•ã‚‰ã«ã€å›å¸°ä¿‚æ•°ã¨èª¬æ˜å¤‰æ•°ã‚’ãã‚Œãã‚Œãƒ™ã‚¯ãƒˆãƒ«$\\boldsymbol{w, x}$ã¨ã—ã¦æ¬¡å¼ã§è¡¨ã™ã€‚\n$ \\hat{y} = \\boldsymbol{w}^T \\boldsymbol{x}$\nã“ã“ã§ã€$\\boldsymbol{x}$ã¯$x_0$ã‹ã‚‰$x_n$ã‚’å«ã¿ã€$x_0$ã¯å¸¸ã«1ã§ã‚ã‚‹ã€‚\né€šå¸¸ã®é‡å›å¸°ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€èª¬æ˜å¤‰æ•°$y$ã¨äºˆæ¸¬å€¤$\\hat{y}$ã®å¹³å‡äºŒä¹—èª¤å·® (MSE, Mean Squared Error) ã‚’æœ€å°åŒ–ã™ã‚‹å›å¸°ä¿‚æ•°ãƒ™ã‚¯ãƒˆãƒ«$\\boldsymbol{w}$ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒç›®çš„ã¨ãªã‚‹ã€‚\nMSEã¯æ¬¡å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$$ {\\rm MSE}(\\boldsymbol{w})=\\frac{1}{m}\\sum_{i=1}^{m}(\\boldsymbol{w}^T \\boldsymbol{x}^i-y^i)$$\nè¤‡æ•°ã®èª¬æ˜å¤‰æ•°ãŒã‚ã‚‹å›å¸°ãƒ¢ãƒ‡ãƒ«ï¼ˆé‡å›å¸°ãƒ¢ãƒ‡ãƒ«ï¼‰ã¯ã€ç‰¹å¾´é‡ã”ã¨ã®å½±éŸ¿ã‚’å›å¸°ä¿‚æ•°ã‹ã‚‰è§£é‡ˆã—ã‚„ã™ã„ãŸã‚ã€åºƒãç”¨ã„ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\nã—ã‹ã—ã€èª¬æ˜å¤‰æ•°ã«ä¼¼ãŸã‚ˆã†ãªå¤‰æ•°ãŒ2ã¤ä»¥ä¸Šå«ã¾ã‚Œã‚‹å ´åˆã€å›å¸°ä¿‚æ•°ãŒæ­£ã—ãæ±‚ã‚ã‚‰ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ã€‚\nã“ã®å•é¡Œã¯å¤šé‡å…±ç·šæ€§ã¨å‘¼ã°ã‚Œã‚‹ã€‚è©³ç´°ã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚\nå¤šé‡å…±ç·šæ€§ã¨ã¯ä½•ï¼Ÿ Weblioè¾æ›¸\nå¤šé‡å…±ç·šæ€§ã®å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã€å›å¸°ä¿‚æ•°ã®å¤§ãã•ã«åˆ¶é™ã‚’åŠ ãˆã‚‹æ–¹æ³•ï¼ˆæ­£å‰‡åŒ–ï¼‰ãŒã‚ã‚‹ã€‚\nScikit-learnã«ã¯ã€ç•°ãªã‚‹åˆ¶é™ã‚’åŠ ãˆã‚‹é‡å›å¸°ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹Ridgeå›å¸°ã€Lassoå›å¸°ã€Elastic NetãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚\nç’°å¢ƒ è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Scikit-learn 0.20.2  é€šå¸¸ã®é‡å›å¸° é€šå¸¸ã®é‡å›å¸°ï¼ˆå˜å›å¸°ã‚‚å«ã‚€ï¼‰ã¯LinearRegressionã‚¯ãƒ©ã‚¹ã§è¡Œã†ã€‚\n1 2  sklearn.linear_model.LinearRegression(fit_intercept=True, normalize=False, copy_X=True, n_jobs=None)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¼•æ•° èª¬æ˜     fit_intercept åˆ‡ç‰‡ã‚’è¨ˆç®—ã™ã‚‹   normalize èª¬æ˜å¤‰æ•°Xã‚’äº‹å‰ã«æ­£è¦åŒ–ã™ã‚‹   copy_X Flaseãªã‚‰XãŒä¸Šæ›¸ãã•ã‚Œã‚‹   n_jobs=None ä¸¦åˆ—è¨ˆç®—æ•°ã€‚Noneã¯1ã‚³ã‚¢ã€-1ã¯å…¨ã‚³ã‚¢ã‚’ä½¿ã†    ã‚¯ãƒ©ã‚¹å¤‰æ•° (attribute)ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¤‰æ•° èª¬æ˜     coef_ å›å¸°ä¿‚æ•°   intercept_ åˆ‡ç‰‡    ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ¡ã‚½ãƒƒãƒ‰ èª¬æ˜     fit(X, y) å›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ã¦ã¯ã‚ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ã€‚y:ç›®çš„å¤‰æ•°ï¼‰   predict(X) äºˆæ¸¬ã™ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ï¼‰    Ridgeå›å¸° Ridgeå›å¸°ã§ã¯ã€å›å¸°ä¿‚æ•°ã®é‡ã¿ã‚’åˆ¶é™ã™ã‚‹ãŸã‚ã€æ¬¡å¼ã®ã‚³ã‚¹ãƒˆé–¢æ•°$J$ã‚’æœ€å°åŒ–ã™ã‚‹å›å¸°ä¿‚æ•°$\\boldsymbol{w}$ã‚’æ±‚ã‚ã‚‹ã€‚\n$$ J(\\boldsymbol{w})={\\rm MSE}(\\boldsymbol{w}) + \\alpha \\frac{1}{2} \\sum_{i=1}^{n} \\boldsymbol{w}_i^2$$\nå³è¾ºã®ç¬¬äºŒé …ã¯æ­£å‰‡åŒ–é …ã¨å‘¼ã°ã‚Œã‚‹ã€‚\nRidgeå›å¸°ã§åŠ ãˆã‚‹æ­£å‰‡åŒ–ã‚’L2æ­£å‰‡åŒ–ã¨ã„ã†ã€‚\nã¾ãŸã€$\\alpha$ã¯ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚Šã€æœ›ã¾ã—ã„å€¤ã‚’æ¢ã™å¿…è¦ãŒã‚ã‚‹ã€‚\n$\\alpha=0$ã®ã¨ãé€šå¸¸ã®é‡å›å¸°ã¨åŒã˜ã§ã‚ã‚‹ã€‚ä¸€æ–¹ã€$\\alpha$ãŒéå¸¸ã«å¤§ãã„å ´åˆã€å…¨ã¦ã®ä¿‚æ•°ãŒ0ã«è¿‘ã¥ããŸã‚ã€ãƒ‡ãƒ¼ã‚¿ã®å¹³å‡ã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nRidgeå›å¸°ã¯Ridgeã‚¯ãƒ©ã‚¹ã§è¡Œã†ã€‚\n1 2 3  sklearn.linear_model.Ridge(alpha=1.0, fit_intercept=True, normalize=False, copy_X=True, max_iter=None, tol=0.001, random_state=None)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¼•æ•° èª¬æ˜     alpha æ­£å‰‡åŒ–é …ã®ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿   fit_intercept åˆ‡ç‰‡ã‚’è¨ˆç®—ã™ã‚‹   normalize èª¬æ˜å¤‰æ•°Xã‚’äº‹å‰ã«æ­£è¦åŒ–ã™ã‚‹   copy_X Flaseãªã‚‰XãŒä¸Šæ›¸ãã•ã‚Œã‚‹   max_iter ã‚³ã‚¹ãƒˆé–¢æ•°ã®å‹¾é…è¨ˆç®—ã®æœ€å¤§åå¾©å›æ•°   tol è§£ã®è¨±å®¹ç²¾åº¦   random_state ä¹±æ•°ã‚·ãƒ¼ãƒ‰    ã‚¯ãƒ©ã‚¹å¤‰æ•° (attribute)ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¤‰æ•° èª¬æ˜     coef_ å›å¸°ä¿‚æ•°   intercept_ åˆ‡ç‰‡   n_ite_ åå¾©è¨ˆç®—å›æ•°    ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ¡ã‚½ãƒƒãƒ‰ èª¬æ˜     fit(X, y) å›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ã¦ã¯ã‚ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ã€‚y:ç›®çš„å¤‰æ•°ï¼‰   predict(X) äºˆæ¸¬ã™ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ï¼‰    Lassoå›å¸° Lassoå›å¸°ã§ã¯ã€å›å¸°ä¿‚æ•°ã®é‡ã¿ã‚’åˆ¶é™ã™ã‚‹ãŸã‚ã€æ¬¡å¼ã®ã‚³ã‚¹ãƒˆé–¢æ•°$J$ã‚’æœ€å°åŒ–ã™ã‚‹å›å¸°ä¿‚æ•°$\\boldsymbol{w}$ã‚’æ±‚ã‚ã‚‹ã€‚\n$$ J(\\boldsymbol{w})={\\rm MSE}(\\boldsymbol{w}) + \\alpha \\sum_{i=1}^{n} | \\boldsymbol{w}_i |$$\nLassoå›å¸°ã§åŠ ãˆã‚‹æ­£å‰‡åŒ–ã‚’L1æ­£å‰‡åŒ–ã¨ã„ã†ã€‚\nã¾ãŸã€$\\alpha$ã¯ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚Šã€æœ›ã¾ã—ã„å€¤ã‚’æ¢ã™å¿…è¦ãŒã‚ã‚‹ã€‚\nLassoã¯Least Absolute Shrinkage and Selection Operatorã®ç•¥ã§ã‚ã‚‹ã€‚\nLassoå›å¸°ã§ã¯ã€é‡è¦åº¦ã®ä½ã„èª¬æ˜å¤‰æ•°ã®ä¿‚æ•°ã¯0ã¨ãªã‚‹ã€‚\nLassoå›å¸°ã¯Lassoã‚¯ãƒ©ã‚¹ã§è¡Œã†ã€‚\n1 2 3 4 5  sklearn.linear_model.Lasso(alpha=1.0, fit_intercept=True, normalize=False, copy_X=True, max_iter=1000, tol=0.0001, warm_start=False, positive=False, random_state=None, selection=\u0026#34;cyclic\u0026#34;)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¼•æ•° èª¬æ˜     alpha æ­£å‰‡åŒ–é …ã®ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿   fit_intercept åˆ‡ç‰‡ã‚’è¨ˆç®—ã™ã‚‹   normalize èª¬æ˜å¤‰æ•°Xã‚’äº‹å‰ã«æ­£è¦åŒ–ã™ã‚‹   copy_X Flaseãªã‚‰XãŒä¸Šæ›¸ãã•ã‚Œã‚‹   max_iter ã‚³ã‚¹ãƒˆé–¢æ•°ã®è¨ˆç®—ã®æœ€å¤§åå¾©å›æ•°   tol è§£ã®è¨±å®¹ç²¾åº¦   warm_start Trueãªã‚‰å‰å›ã®è§£ã‚’åˆæœŸå€¤ã¨ã™ã‚‹   positive Trueãªã‚‰ä¿‚æ•°ã‚’å…¨ã¦æ­£ã¨ã™ã‚‹   random_state ä¹±æ•°ã‚·ãƒ¼ãƒ‰   selection \u0026quot;cyclic\u0026quot;ãªã‚‰ä¿‚æ•°ã‚’é †ç•ªã«æ›´æ–°ã€‚\u0026quot;random\u0026quot;ãªã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«æ›´æ–°    ä¸»ãªã‚¯ãƒ©ã‚¹å¤‰æ•° (attribute)ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¤‰æ•° èª¬æ˜     coef_ å›å¸°ä¿‚æ•°   intercept_ åˆ‡ç‰‡   n_ite_ åå¾©è¨ˆç®—å›æ•°    ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ¡ã‚½ãƒƒãƒ‰ èª¬æ˜     fit(X, y) å›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ã¦ã¯ã‚ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ã€‚y:ç›®çš„å¤‰æ•°ï¼‰   predict(X) äºˆæ¸¬ã™ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ï¼‰    Elastic Net Elastic Netã¯Lassoå›å¸°ã®L1æ­£å‰‡åŒ–ã¨Ridgeå›å¸°ã®L2æ­£å‰‡åŒ–ã‚’åˆã‚ã›ãŸã‚‚ã®ã§ã€æ¬¡å¼ã®ã‚³ã‚¹ãƒˆé–¢æ•°$J$ã‚’æœ€å°åŒ–ã™ã‚‹å›å¸°ä¿‚æ•°$\\boldsymbol{w}$ã‚’æ±‚ã‚ã‚‹ã€‚\n$$ J(\\boldsymbol{w})={\\rm MSE}(\\boldsymbol{w}) + \\alpha r \\sum_{i=1}^{n} | \\boldsymbol{w}_i | + \\frac{\\alpha(1-r)}{2} \\sum_{i=1}^{n} \\boldsymbol{w}_i^2 $$\nã“ã“ã§ã€$\\alpha$ã¨$r$ã¯ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚‹ã€‚\nElastic Netã¯ElasticNetã‚¯ãƒ©ã‚¹ã§è¡Œã†ã€‚\n1 2 3 4 5 6  sklearn.linear_model.ElasticNet(alpha=1.0, l1_ratio=0.5, fit_intercept=True, normalize=False, max_iter=1000, copy_X=True, tol=0.0001, warm_start=False, positive=False, random_state=None, selection=\u0026#39;cyclic\u0026#39;)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¼•æ•° èª¬æ˜     alpha ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿   l1_ratio ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿   fit_intercept åˆ‡ç‰‡ã‚’è¨ˆç®—ã™ã‚‹   normalize èª¬æ˜å¤‰æ•°Xã‚’äº‹å‰ã«æ­£è¦åŒ–ã™ã‚‹   max_iter ã‚³ã‚¹ãƒˆé–¢æ•°ã®è¨ˆç®—ã®æœ€å¤§åå¾©å›æ•°   copy_X Flaseãªã‚‰XãŒä¸Šæ›¸ãã•ã‚Œã‚‹   tol è§£ã®è¨±å®¹ç²¾åº¦   warm_start Trueãªã‚‰å‰å›ã®è§£ã‚’åˆæœŸå€¤ã¨ã™ã‚‹   positive Trueãªã‚‰ä¿‚æ•°ã‚’å…¨ã¦æ­£ã¨ã™ã‚‹   random_state ä¹±æ•°ã‚·ãƒ¼ãƒ‰   selection \u0026quot;cyclic\u0026quot;ãªã‚‰ä¿‚æ•°ã‚’é †ç•ªã«æ›´æ–°ã€‚\u0026quot;random\u0026quot;ãªã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«æ›´æ–°    ä¸»ãªã‚¯ãƒ©ã‚¹å¤‰æ•° (attribute)ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   å¤‰æ•° èª¬æ˜     coef_ å›å¸°ä¿‚æ•°   intercept_ åˆ‡ç‰‡   n_ite_ åå¾©è¨ˆç®—å›æ•°    ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ãƒ¡ã‚½ãƒƒãƒ‰ èª¬æ˜     fit(X, y) å›å¸°ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ã¦ã¯ã‚ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ã€‚y:ç›®çš„å¤‰æ•°ï¼‰   predict(X) äºˆæ¸¬ã™ã‚‹ï¼ˆX: èª¬æ˜å¤‰æ•°ï¼‰    å‚è€ƒ sklearn.linear_model.LinearRegression â€” scikit-learn 0.24.0 documentation\nsklearn.linear_model.Ridge â€” scikit-learn 0.24.0 documentation\nsklearn.linear_model.Lasso â€” scikit-learn 0.24.0 documentation\nsklearn.linear_model.ElasticNet â€” scikit-learn 0.24.0 documentation\n","description":"Scikit-learnã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹é‡å›å¸°ã€Ridgeå›å¸°ã€Lassoå›å¸°ã€Elastic Netã®ãƒ­ã‚¸ãƒƒã‚¯ã¨ä½¿ç”¨æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":65,"section":"posts","tags":["Python","Scikit-learn"],"title":"Scikit-learnã®æ­£å‰‡åŒ–ä»˜ãé‡å›å¸°ãƒ¢ãƒ‡ãƒ«","uri":"https://helve-blog.com/posts/python/sklearn-regularized-regression/"},{"content":"ã¯ã˜ã‚ã« Windows 10ã®PowerShellã§Anaconda Pythonã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¾ã§ã«è‹¦åŠ´ã—ãŸã®ã§ã€å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã™ã€‚\nPowerShellãŒèµ·å‹•æ™‚ã«èª­ã¿è¾¼ã‚€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã€AnacondaãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹è¨­å®šã‚’è¨˜è¿°ã—ã¦ãŠãã€‚ãªãŠã€æœ¬è¨˜äº‹ã®è¨­å®šã«ç®¡ç†è€…æ¨©é™ã¯ä¸è¦ã§ã‚ã‚‹ã€‚\nç’°å¢ƒ  Windows 10 Home Ver. 1809 Anaconda3 Ver. 2019.03  è¨­å®šæ–¹æ³•ã®ã¾ã¨ã‚ å§‹ã‚ã«ã€å®Ÿæ–½æ–¹æ³•ã‚’ç°¡æ½”ã«ã¾ã¨ã‚ã‚‹ã€‚Anacondaã¯ã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã™ã‚‹ã€‚\nã¾ãšã€PowerShellèµ·å‹•æ™‚ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ‘ã‚¹ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã€PowerShellã‚’èµ·å‹•ã—ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆ$ã®å…¥åŠ›ã‚‚å¿…è¦ï¼‰ã€‚\n1  $profile   å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‘ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nC:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Documents\\WindowsPowerShell\\Microsoft.PowerShell_profile.ps1 ãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ä½œæˆã—ã¦ã‹ã‚‰ã€\n1  notepad $profile   ã‚’å®Ÿè¡Œã—ã¦ã€ãƒ¡ãƒ¢å¸³ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«Microsoft.PowerShell_profile.ps1ã‚’é–‹ã„ã¦ãŠãï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„å ´åˆã¯ä½œæˆã•ã‚Œã‚‹ï¼‰ã€‚\næ¬¡ã«ã€Windowsã®ã€Œã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€â†’ã€Œã‚¢ãƒ—ãƒªä¸€è¦§ã€â†’ã€ŒAnaconda3 (64-bit)ã€ã¨é€²ã¿ã€ã€ŒAnaconda Powershell Promptã€ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ã€Œãã®ä»–ã€â†’ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ã‚‹å ´æ‰€ã‚’é–‹ãã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã€‚\nã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªAnacondaã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ãŒã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ã§é–‹ã‹ã‚Œã‚‹ã€‚\nC:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Anaconda3 (64-bit) ã•ã‚‰ã«ã€Anaconda Powershell Promptã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚¢ã‚¤ã‚³ãƒ³ã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é–‹ãã¨ã€ã€Œãƒªãƒ³ã‚¯å…ˆã€ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã‚ã‚‹ï¼ˆè¦‹ã‚„ã™ã„ã‚ˆã†ã«æ”¹è¡Œã—ãŸï¼‰ã€‚\n1 2 3 4  %windir%\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -ExecutionPolicy ByPass -NoExit -Command \u0026#34;\u0026amp; \u0026#39;C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\shell\\condabin\\conda-hook.ps1\u0026#39; ; conda activate \u0026#39;C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\u0026#39; \u0026#34;   ã“ã®ä¸­ã®\n1  C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\shell\\condabin\\conda-hook.ps1   ã‚’ãƒ¡ãƒ¢å¸³ã§é–‹ãã€ä¸­èº«ã‚’ã™ã¹ã¦å…ˆç¨‹ã®Microsoft.PowerShell_profile.ps1ã«ã‚³ãƒ”ãƒ¼ã—ã€ãã®å¾Œã‚ã«ã€\n1  conda activate   ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚\nMicrosoft.PowerShell_profile.ps1ã¨conda-hook.ps1ã‚’é–‰ã˜ã‚‹ã€‚\nPowerShellã‚’å†èµ·å‹•ã™ã‚‹ã¨ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡ŒãŒç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€Microsoft.PowerShell_profile.ps1ã‚’èª­ã¿è¾¼ã‚ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚ãã“ã§ã€ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãŒã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã€‚\n1  Set-ExecutionPolicy RemoteSigned -Scope CurrentUser   å…¥åŠ›ã™ã‚‹ã¨å®Ÿè¡Œãƒãƒªã‚·ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹ã‹ç¢ºèªã•ã‚Œã‚‹ã®ã§ã€ã•ã‚‰ã«Yã‚’å…¥åŠ›ã™ã‚‹ã€‚\nä»¥ä¸Šã§è¨­å®šã¯å®Œäº†ã§ã‚ã‚‹ã€‚ã‚‚ã†ä¸€åº¦PowerShellã‚’å†èµ·å‹•ã™ã‚‹ã¨ã€Pythonã¨IPythonã‚’è‡ªç”±ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nPythonã®å®Ÿè¡Œä¾‹\n1 2 3 4  (base) PS C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Documents\u0026gt; python Python 3.7.3 (default, Mar 27 2019, 17:13:21) [MSC v.1915 64 bit (AMD64)] :: Anaconda, Inc. on win32 Type \u0026#34;help\u0026#34;, \u0026#34;copyright\u0026#34;, \u0026#34;credits\u0026#34; or \u0026#34;license\u0026#34; for more information. \u0026gt;\u0026gt;\u0026gt;   IPythonã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ipythonã¨å…¥åŠ›ã™ã‚‹ã€‚\nè¨­å®šã®è©³ç´° ä¸Šè¨˜ã®è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦è£œè¶³ã™ã‚‹ã€‚\nWindows 7ã§ã¯ã€OSã®ç’°å¢ƒå¤‰æ•°ã«Anacondaã®ãƒ‘ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‹ã‚‰Pythonã‚’å®Ÿè¡Œã§ããŸã€‚\nãã®ãŸã‚ã€ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ä¸Šã§Shift+å³ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’èµ·å‹•ã—ã€ç¾åœ¨ã®ãƒ‘ã‚¹ã§Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã£ãŸã€‚\nã—ã‹ã—ã€å¾Œè¿°ã®ã‚ˆã†ã«Windows 10ã§ã¯ã“ã®æ–¹æ³•ãŒä½¿ãˆãªããªã£ãŸã®ã§ã€ä»£ã‚ã‚Šã®æ–¹æ³•ã‚’æ¢ã—ãŸã€‚\nã¾ãŸã€Windows 10ã§ã¯Shift+å³ã‚¯ãƒªãƒƒã‚¯ã§PowerShellãŒèµ·å‹•ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æˆ»ã™ã«ã¯ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã‚ã‚‹ã€‚\nç®¡ç†è€…æ¨©é™ãŒãªã„ç’°å¢ƒã§ã‚‚è¨­å®šã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ãŸã‚ã€PowerShellã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\nã¾ãšã€æ—¢ã«Anacondaã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒçµ‚ã‚ã£ã¦ã„ã‚‹ã‚‚ã®ã¨ã—ã¦ã€PowerShellã‹ã‚‰Pythonã‚’å®Ÿè¡Œã§ãã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  PS C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Documents\u0026gt; python python : ç”¨èª \u0026#39;python\u0026#39; ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã€é–¢æ•°ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆ ãƒ•ã‚¡ã‚¤ãƒ«ã€ã¾ãŸã¯æ“ä½œå¯èƒ½ãªãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®åå‰ã¨ã—ã¦èªè­˜ã•ã‚Œã¾ ã›ã‚“ã€‚åå‰ãŒæ­£ã—ãè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€ãƒ‘ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯ãã®ãƒ‘ã‚¹ãŒæ­£ã—ã„ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ã€å†è©¦è¡Œã—ã¦ã ã ã•ã„ã€‚ ç™ºç”Ÿå ´æ‰€ è¡Œ:1 æ–‡å­—:1 + python + ~~~~~~ + CategoryInfo : ObjectNotFound: (python:String) [], CommandNotFoundException + FullyQualifiedErrorId : CommandNotFoundException   ã‚„ã¯ã‚Šå®Ÿè¡Œã§ããªã„ã€‚\næ¬¡ã«ã€Windowsã®ç’°å¢ƒå¤‰æ•°ã«ã€Pythonã®å®Ÿè¡Œãƒ•ã‚©ãƒ«ãƒ€ã‚’è¿½åŠ ã—ã¦ã¿ãŸï¼ˆå®Ÿéš›ã«è¿½åŠ ã—ã¦ã‚‚ä¸Šæ‰‹ãã„ã‹ãªã„ã®ã§æ³¨æ„ï¼‰ã€‚\nAnaconda Powershell Promptã«ã¯Pythonã®ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ã‚‹ã¯ãšãªã®ã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ‘ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  (base) PS C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\u0026gt; $env:Path.split(\u0026#34;;\u0026#34;) C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3 C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\Library\\mingw-w64\\bin C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\Library\\usr\\bin C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\Library\\bin C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\Scripts C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\bin C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\condabin ï¼ˆä»¥ä¸‹ç•¥ï¼‰   ä»¥ä¸Šã®Anacondaé–¢ä¿‚ã®ãƒ•ã‚©ãƒ«ãƒ€ã‚’å…¨ã¦Windowsã®ãƒ‘ã‚¹ã«è¿½åŠ ã™ã‚‹ã€‚è¿½åŠ ã™ã‚‹æ–¹æ³•ã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚\nç’°å¢ƒå¤‰æ•°ã®è¨­å®šæ–¹æ³•\t| è‹¥è‘‰ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å¡¾\nè¿½åŠ ã™ã‚‹ã¨ä¸€å¿œPythonã‚’èµ·å‹•ã§ãã‚‹ãŒã€ç’°å¢ƒãŒactivateã•ã‚Œãšã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã‚ã¦ã„ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚\nå®Ÿéš›ã€NumPyãªã©ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ããšå®Ÿè³ªçš„ã«Pythonã‚’ä½¿ãˆãªã„ã€‚\n1 2 3 4 5 6 7 8 9 10  PS C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Documents\u0026gt; python Python 3.7.3 (default, Mar 27 2019, 17:13:21) [MSC v.1915 64 bit (AMD64)] :: Anaconda, Inc. on win32 Warning: This Python interpreter is in a conda environment, but the environment has not been activated. Libraries may fail to load. To activate this environment please see https://conda.io/activation Type \u0026#34;help\u0026#34;, \u0026#34;copyright\u0026#34;, \u0026#34;credits\u0026#34; or \u0026#34;license\u0026#34; for more information. \u0026gt;\u0026gt;   ãã“ã§ã€Anaconda 2019.03 for Windows Installerã‹ã‚‰å®Ÿè£…ã•ã‚ŒãŸAnaconda Powershell PromptãŒã©ã®ã‚ˆã†ã«èµ·å‹•ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚\nå‰è¿°ã®ã‚ˆã†ã«ã€Windowsã®ã€Œã‚¹ã‚¿ãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€â†’ã€Œãƒ—ãƒ­ã‚°ãƒ©ãƒ ã€â†’ã€ŒAnaconda3 (64-bit)ã€â†’ã€ŒAnaconda Powershell Promptã€ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã€Œãƒªãƒ³ã‚¯å…ˆã€ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ãŸã€‚\n1 2 3 4  %windir%\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -ExecutionPolicy ByPass -NoExit -Command \u0026#34;\u0026amp; \u0026#39;C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\shell\\condabin\\conda-hook.ps1\u0026#39; ; conda activate \u0026#39;C:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\u0026#39; \u0026#34;   ã™ãªã‚ã¡ã€powershell.exeã‚’èµ·å‹•ã—ã€\nC:\\Users\\ï¼ˆãƒ¦ãƒ¼ã‚¶åï¼‰\\Anaconda3\\shell\\condabin\\conda-hook.ps1\nã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ãŸå¾Œã€conda activateã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nã“ã‚Œã‚’PowerShellèµ·å‹•æ™‚ã«å®Ÿè¡Œã—ã¦ã‚„ã‚Œã°ã€Anaconda Powershell Promptã¨åŒã˜ç’°å¢ƒã«ãªã‚‹ã€‚\nPowerShellã¯ã€èµ·å‹•æ™‚ã«profileå¤‰æ•°ã«ã‚ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆåˆæœŸè¨­å®šã§ã¯Microsoft.PowerShell_profile.ps1ï¼‰ã‚’èª­ã¿è¾¼ã¿ã«è¡Œãã®ã§ã€ä»¥ä¸Šã®ã‚³ãƒãƒ³ãƒ‰ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã™ã‚‹ã€‚\nãŸã ã—ã€Windows 10ã®åˆæœŸè¨­å®šã§ã¯ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã«ã‚ˆã£ã¦è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ãŒåˆ¶é™ã•ã‚Œã¦ã„ã‚‹ã€‚\nãã“ã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹ã€‚\n-Scope CurrentUserã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®å¤‰æ›´ã‚’ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ã®ã¿ã«é™ã‚‹ã“ã¨ã§ã€ç®¡ç†è€…æ¨©é™ãŒä¸è¦ã«ãªã‚‹ã€‚\n1  Set-ExecutionPolicy RemoteSigned -Scope CurrentUser   ä»¥ä¸Šã®è¨­å®šã§ã€Shift+å³ã‚¯ãƒªãƒƒã‚¯ã§Pythonã‚’å®Ÿè¡Œå¯èƒ½ãªPowerShellãŒèµ·å‹•ã™ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nå‚è€ƒ ä¸‹2ã¤ã®ã®ã‚µã‚¤ãƒˆã§ã¯ã€ãƒ‘ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§Pythonã‚’å®Ÿè¡Œã§ãã‚‹ã¨ã‚ã£ãŸãŒã€ç­†è€…ã®ç’°å¢ƒã§ã¯å‡ºæ¥ãªã‹ã£ãŸã€‚\n2018å¹´ã®è¨˜äº‹ãªã®ã§ã€ãã‚Œä»¥é™ã®Windows 10ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã‚ˆã‚Šå‡ºæ¥ãªããªã£ãŸå¯èƒ½æ€§ãŒã‚ã‚‹ã€‚\nPowerShellã§Anacondaã‚’ä½¿ã†æ–¹æ³• | å±±æœ¬éš†ã®é–‹ç™ºæ—¥èªŒ\nWindowsã§PythonãŒã†ã¾ãå‹•ã‹ãªã„ã¨ã(PATHã®è¨­å®š) - Qiita\nPowerShellã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã‚’å‚ç…§ã€‚\nPowerShellã®ExecutionPolicyã®ã‚¹ã‚³ãƒ¼ãƒ—ã¨ã‹ã«ã¤ã„ã¦è©³ã—ã - Qiita\nAnacondaã‚’ä½¿ã£ã¦æ©Ÿæ¢°å­¦ç¿’ã‚’ã™ã‚‹ã®ã§ã‚ã‚Œã°ã€ã‚ªãƒ©ã‚¤ãƒªãƒ¼ã® ã€ŒPythonã§ã¯ã˜ã‚ã‚‹æ©Ÿæ¢°å­¦ç¿’ã€ ãŒã‚ªã‚¹ã‚¹ãƒ¡ã§ã‚ã‚‹ã€‚æ•™å¸«ã‚ã‚Šå­¦ç¿’ãƒ»æ•™å¸«ãªã—å­¦ç¿’ã‚„ã€ç‰¹å¾´é‡é¸æŠãªã©ã®åŸºæœ¬äº‹é …ãŒç¶²ç¾…ã•ã‚Œã¦ã„ã‚‹ã€‚\nPythonã§ã¯ã˜ã‚ã‚‹æ©Ÿæ¢°å­¦ç¿’posted with ãƒ¨ãƒ¡ãƒ¬ãƒAndreas C. Muller/ä¸­ç”° ç§€åŸº ã‚ªãƒ©ã‚¤ãƒªãƒ¼ãƒ»ã‚¸ãƒ£ãƒ‘ãƒ³ 2017å¹´05æœˆ25æ—¥é ƒ æ¥½å¤©ãƒ–ãƒƒã‚¯ã‚¹Amazon ","description":"Windows10ã®PowerShellã§Anaconda Pythonã‚’ä½¿ã†ãŸã‚ã®æ‰‹é †ã‚’ã¾ã¨ã‚ãŸã€‚","id":66,"section":"posts","tags":["Python","PowerShell","Conda"],"title":"Windows10ã®PowerShellã§Anaconda Pythonã‚’ä½¿ã†æ–¹æ³•","uri":"https://helve-blog.com/posts/python/powershell-anaconda-python/"},{"content":"ã¯ã˜ã‚ã« Python 3.6ã§å®Ÿè£…ã•ã‚ŒãŸf-stringsã¨å‘¼ã°ã‚Œã‚‹æ•°å­—ã‚„æ–‡å­—åˆ—ã®è¡¨è¨˜æ³•ã«ã¤ã„ã¦ã€å­¦è¡“è¨ˆç®—ã§æœ€ä½é™å¿…è¦ãªç¯„å›²ã§ã¾ã¨ã‚ãŸã€‚\næœ¬è¨˜äº‹ã§ã¯ã€æ•´æ•°ãƒ»å°æ•°ã®æ¡æ•°æŒ‡å®šã‚„ã€æŒ‡æ•°è¡¨ç¤ºã‚’æ‰±ã†ã€‚\nf-stringsã®åŸºæœ¬ f-stringsã§ã¯ã€å¤‰æ•°ã®æ¡æ•°ãªã©ã‚’æŒ‡å®šã—ã¦printæ–‡ã«ã‚ˆã‚‹è¡¨ç¤ºã‚„ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã§ãã‚‹ã€‚\nåŸºæœ¬çš„ãªä½¿ã„æ–¹ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; a = 123 # å¤‰æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a}\u0026#34;) # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæŒ‡å®šãªã— 123 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:08.2f}\u0026#34;) # ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæŒ‡å®šã‚ã‚Š 00123.00   fã®å¾Œã«ã‚¯ã‚ªãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’2ã¤ç½®ãã€ãã®ä¸­ã§æ³¢æ‹¬å¼§ã‚’é–‰ã˜ã‚‹ã€‚\næ³¢æ‹¬å¼§å†…ã«å¤‰æ•°ã‚’è¨˜è¿°ã™ã‚‹ã€‚\nã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€å¤‰æ•°ã®å¾Œã«ã‚³ãƒ­ãƒ³:ã‚’æŒŸã‚“ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹ã€‚\nãªãŠã€ã‚¯ã‚ªãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ'ã§ã‚‚ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆ\u0026quot;ã§ã‚‚å¯ã€‚\nå…¨ä½“ã®æ¡æ•°ã‚’æŒ‡å®šã™ã‚‹å ´åˆ æ›¸å¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æ•´æ•°ã«ã™ã‚‹ã¨ã€æ•°å€¤å…¨ä½“ã®æ¡æ•°ã‚’æŒ‡å®šã§ãã‚‹ã€‚\nå°æ•°ç‚¹ã¯1æ¡ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ã€‚\nå…ˆé ­ã‚’0åŸ‹ã‚ã™ã‚‹å ´åˆã¯ã€æœ€åˆã«0ã‚’ç½®ãã€‚\n1 2 3 4 5 6 7 8 9 10 11  \u0026gt;\u0026gt;\u0026gt; a = 123 # æ•´æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:5}\u0026#34;) # 5æ¡ã§è¡¨ç¤º 123 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:05}\u0026#34;) # 0åŸ‹ã‚ 00123 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; b = 12.3456 # å°æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:10}\u0026#34;) # 10æ¡ã§è¡¨ç¤º 12.3456 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:010}\u0026#34;) # 0åŸ‹ã‚ 00012.3456   ãªãŠã€å¤‰æ•°ã‚ˆã‚Šã‚‚å°‘ãªã„æ¡æ•°ã‚’æŒ‡å®šã™ã‚‹ã¨ã€å¤‰æ•°ã‚’æœ€ä½é™è¡¨ç¤ºã™ã‚‹ã®ã«å¿…è¦ãªæ¡æ•°ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7  \u0026gt;\u0026gt;\u0026gt; a = 123 # 3æ¡ã®æ•´æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:1}\u0026#34;) # 1æ¡ã«æŒ‡å®š-\u0026gt;3æ¡ã§è¡¨ç¤ºã•ã‚Œã‚‹ 123 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; b = 12.3456 # 7æ¡ã®å°æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:2}\u0026#34;) # 2æ¡ã«æŒ‡å®š-\u0026gt;7æ¡ã§è¡¨ç¤ºã•ã‚Œã‚‹ 12.3456   å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°ã‚’æŒ‡å®šã™ã‚‹å ´åˆ æ›¸å¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æœ«å°¾ã«fã‚’è¿½åŠ ã™ã‚‹ã¨ã€å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°ã‚’æŒ‡å®šã§ãã‚‹ã€‚\n.[æ•°å€¤]fã¨ã™ã‚‹ã¨å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°ãŒæ•°å€¤ã«ãªã‚‹ã€‚\nå¤‰æ•°ãŒæ•´æ•°å‹ã§ã‚‚å°æ•°å‹ã§ã‚‚åŒã˜å‹•ä½œã‚’ã™ã‚‹ã€‚\nã¾ãŸã€å°æ•°ã®æœ«å°¾ã¯å››æ¨äº”å…¥ã•ã‚Œã‚‹ã€‚\nå°æ•°ç‚¹ã‚’å«ã‚€å…¨ä½“ã®æ¡æ•°ã‚’ã•ã‚‰ã«æŒ‡å®šã™ã‚‹å ´åˆã€å°æ•°ç‚¹ã®å‰ã«è¨˜è¿°ã™ã‚‹ã€‚\nå…ˆé ­ã‚’0åŸ‹ã‚ã™ã‚‹å ´åˆã¯ã€ã•ã‚‰ã«æœ€åˆã«0ã‚’ç½®ãã€‚\nãŸã ã—ã€å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°ã‚’0ã«ã™ã‚‹ã¨ã€å°æ•°ç‚¹ã¯å‡ºåŠ›ã•ã‚Œãªã„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  \u0026gt;\u0026gt;\u0026gt; a = 123 # æ•´æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:.2f}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹2æ¡ 123.00 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:8.2f}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹2æ¡ã€å…¨ä½“ã¯8æ¡ 123.00 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:08.2f}\u0026#34;) # ã•ã‚‰ã«å…ˆé ­ã‚’0åŸ‹ã‚ã™ã‚‹ 00123.00 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:08.0f}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹0æ¡ 00000123 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; b = 12.3456 # å°æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:.2f}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹2æ¡ 12.35 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:8.2f}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹2æ¡ã€å…¨ä½“ã¯8æ¡ 12.35 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:08.2f}\u0026#34;) # ã•ã‚‰ã«å…ˆé ­ã‚’0åŸ‹ã‚ã™ã‚‹ 00012.35 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:08.0f}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹0æ¡ 00000012   æŒ‡æ•°è¡¨ç¤ºã®å ´åˆ æ›¸å¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®æœ«å°¾ã«eã¾ãŸã¯Eã‚’è¿½åŠ ã™ã‚‹ã¨ã€æŒ‡æ•°è¡¨ç¤ºã«ãªã‚‹ã€‚\nè¡¨ç¤ºã•ã‚Œã‚‹æŒ‡æ•°è¨˜å·ã®å¤§æ–‡å­—ãƒ»å°æ–‡å­—ã¯ã€æ›¸å¼ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨åŒã˜ã«ãªã‚‹ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¡¨ç¤ºæ¡æ•°ã¯12æ¡ï¼ˆæŒ‡æ•°éƒ¨åˆ†è¾¼ã¿ï¼‰ã§ã§ã‚ã‚‹ã€‚\nå¤‰æ•°ãŒæ•´æ•°å‹ã§ã‚‚å°æ•°å‹ã§ã‚‚åŒã˜å‹•ä½œã‚’ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11  \u0026gt;\u0026gt;\u0026gt; a = 123 # æ•´æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:e}\u0026#34;) # å°æ–‡å­— 1.230000e+02 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:E}\u0026#34;) # å¤§æ–‡å­— 1.230000E+02 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; b = 12.3456 # å°æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:e}\u0026#34;) # å°æ–‡å­— 1.234560e+01 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{b:E}\u0026#34;) # å¤§æ–‡å­— 1.234560E+01   æ¡æ•°ã®æŒ‡å®šã¯fã¨åŒã˜æ–¹æ³•ã€‚\n.[æ•°å€¤]e, .[æ•°å€¤]Eã¨ã™ã‚‹ã¨å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°ãŒæ•°å€¤ã«ãªã‚‹ã€‚\nã¾ãŸã€å°æ•°ã®æœ«å°¾ã¯å››æ¨äº”å…¥ã•ã‚Œã‚‹ã€‚\nå°æ•°éƒ¨ã¨æŒ‡æ•°éƒ¨ã‚’å«ã‚€å…¨ä½“ã®æ¡æ•°ã‚’ã•ã‚‰ã«æŒ‡å®šã™ã‚‹å ´åˆã€å°æ•°ç‚¹ã®å‰ã«è¨˜è¿°ã™ã‚‹ã€‚\nå…ˆé ­ã‚’0åŸ‹ã‚ã™ã‚‹å ´åˆã¯ã€ã•ã‚‰ã«æœ€åˆã«0ã‚’ç½®ãã€‚\nãŸã ã—ã€å°æ•°ç‚¹ä»¥ä¸‹ã®æ¡æ•°ã‚’0ã«ã™ã‚‹ã¨ã€å°æ•°ç‚¹ã¯å‡ºåŠ›ã•ã‚Œãªã„ã€‚\n1 2 3 4 5 6 7 8 9  \u0026gt;\u0026gt;\u0026gt; a = 123 # æ•´æ•° \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:.3e}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹3æ¡ 1.230e+02 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:10.3e}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹3æ¡ã€å…¨ä½“ã¯10æ¡ 1.230e+02 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:010.3e}\u0026#34;) # ã•ã‚‰ã«å…ˆé ­ã‚’0åŸ‹ã‚ã™ã‚‹ 01.230e+02 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a:10.0e}\u0026#34;) # å°æ•°ç‚¹ä»¥ä¸‹0æ¡ 1e+02   è¤‡æ•°ã®å¤‰æ•°ã‚„é€šå¸¸ã®æ–‡å­—åˆ—ã‚‚è¡¨ç¤ºã™ã‚‹ 1å€‹ã®f-stringså†…ã«ã€è¤‡æ•°ã®å¤‰æ•°ã‚’è¡¨ç¤ºã§ãã‚‹ã€‚\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; a = 123 \u0026gt;\u0026gt;\u0026gt; b = 12.3456 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;{a}{b}\u0026#34;) 12312.3456   ä¸Šè¨˜ã®ã‚ˆã†ã«å¤‰æ•°ã‚’ä¸¦ã¹ã‚‹ã¨ã‚¹ãƒšãƒ¼ã‚¹ãŒä»˜ã‹ãšã€è¦‹ã¥ã‚‰ã„ã€‚å¤‰æ•°ã§ã¯ãªã„æ–‡å­—åˆ—ã‚’è¡¨ç¤ºã—ãŸã„å ´åˆã¯ã€æ³¢æ‹¬å¼§ã®å¤–å´ã«æ–‡å­—åˆ—ã‚’ç½®ãã€‚\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; a = 123 \u0026gt;\u0026gt;\u0026gt; b = 12.3456 \u0026gt;\u0026gt;\u0026gt; print(f\u0026#34;figure1: {a}, figure2: {b}\u0026#34;) figure1: 123, figure2: 12.3456   å‚è€ƒ f-stringsã®è©³ç´°ã‚’ã‚ˆã‚ŠçŸ¥ã‚ŠãŸã„æ–¹ã¯ã€ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã®ã“ã¨ã€‚\nPython, formatã§æ›¸å¼å¤‰æ›ï¼ˆ0åŸ‹ã‚ã€æŒ‡æ•°è¡¨è¨˜ã€16é€²æ•°ãªã©ï¼‰ | note.nkmk.me\nf-strings ã®ä½¿ç”¨ä¾‹ - Qiita\n","description":"Python 3.6ã§å®Ÿè£…ã•ã‚ŒãŸf-stringsã¨å‘¼ã°ã‚Œã‚‹æ•°å­—ã‚„æ–‡å­—åˆ—ã®è¡¨è¨˜æ³•ã‚’ä½¿ã£ãŸã€æ•´æ•°ãƒ»å°æ•°ã®æ¡æ•°æŒ‡å®šã‚„æŒ‡æ•°è¡¨ç¤ºã®æ–¹æ³•ã‚’ã¾ã¨ã‚ãŸã€‚","id":67,"section":"posts","tags":["Python"],"title":"Pythonã®f-stringsã§æ–‡å­—åˆ—ã‚’æ‰±ã†","uri":"https://helve-blog.com/posts/python/python-f-strings/"},{"content":"ã¯ã˜ã‚ã« æƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®é«˜åº¦è©¦é¨“ã®1ã¤ã§ã‚ã‚‹ã€ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ (ES) ã®2018å¹´åˆå¾ŒIã®è¨ˆç®—å•é¡Œã‚’è§£èª¬ã™ã‚‹ã€‚\nã“ã®ãƒšãƒ¼ã‚¸ã§ã¯è§£èª¬ã®ã¿è¼‰ã›ã‚‹ãŸã‚ã€å•é¡Œæ–‡ã¯ä»¥ä¸‹ã®IPAï¼ˆæƒ…å ±å‡¦ç†æ¨é€²æ©Ÿæ§‹ï¼‰ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰å–å¾—ã•ã‚ŒãŸã„ã€‚\nIPA ç‹¬ç«‹è¡Œæ”¿æ³•äºº æƒ…å ±å‡¦ç†æ¨é€²æ©Ÿæ§‹ï¼šéå»å•é¡Œ\nå•1ï¼ˆãƒ‰ãƒ­ãƒ¼ãƒ³ï¼‰ è¨­å•2(2)\nå›³2ã®ãƒ‰ãƒ­ãƒ¼ãƒ³ã«å¯¾ã—ã€è¡¨1ã®f, gã«å…¥ã‚‹æ•°å€¤ã‚’ç­”ãˆã‚‹ã€‚\nå›³2ã‚ˆã‚Šã€ãƒ—ãƒ­ãƒšãƒ©a1, a3ã¯å·¦å›è»¢ã€ãƒ—ãƒ­ãƒšãƒ©a2, a4ã¯å³å›è»¢ã—ã¦ã„ã‚‹ã€‚\nã™ãªã‚ã¡ã€ãƒ—ãƒ­ãƒšãƒ©a1, a3ã®åä½œç”¨ã«ã‚ˆã‚Šæ©Ÿä½“ã¯å³å›è»¢ã—ã€ãƒ—ãƒ­ãƒšãƒ©a2, a4ã®åä½œç”¨ã«ã‚ˆã‚Šæ©Ÿä½“ã¯å·¦å›è»¢ã™ã‚‹ã€‚\næ©Ÿä½“ã‚’å³å›è»¢ã•ã›ã‚‹ãŸã‚ã«ã¯ã€ãƒ—ãƒ­ãƒšãƒ©a1ã¨a3ã®åˆè¨ˆå›è»¢æ•°ãŒã€ãƒ—ãƒ­ãƒšãƒ©a2ã¨a4ã®åˆè¨ˆå›è»¢æ•°ã‚’ä¸Šå›ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\næ¬¡ã«ã€ãƒ‰ãƒ­ãƒ¼ãƒ³ãŒãƒ›ãƒãƒªãƒ³ã‚°ã™ã‚‹ã¨ã„ã†æ¡ä»¶ã‚’è€ƒãˆã‚‹ã€‚\nãƒ‰ãƒ­ãƒ¼ãƒ³ãŒä¸Šæ˜‡ã‚„ä¸‹é™ã‚’ã—ãªã„ãŸã‚ã®4æšã®ãƒ—ãƒ­ãƒšãƒ©ã®åˆè¨ˆå›è»¢æ•°ã¯40ã§ã‚ã‚‹ã€‚\nã™ãªã‚ã¡ã€fã¨gã®å’Œã¯20ã§ã‚ã‚‹ã€‚\nã¾ãŸã€ãƒ‰ãƒ­ãƒ¼ãƒ³ãŒæ¨ªæ»‘ã‚Šã‚’ã—ãªã„ãŸã‚ã«ã¯ã€éš£ã‚Šåˆã†2ã¤ã®ãƒ—ãƒ­ãƒšãƒ©ã®åˆè¨ˆå›è»¢æ•°ã‚’ã€æ®‹ã‚Š2ã¤ã®ãƒ—ãƒ­ãƒšãƒ©ã®åˆè¨ˆå›è»¢æ•°ã¨ç­‰ã—ãã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nä»¥ä¸Šã‚ˆã‚Šã€fã¯9, gã¯11ã¨ãªã‚‹ã€‚\nå•2ï¼ˆå† æ°´é˜²æ­¢ã‚·ã‚¹ãƒ†ãƒ ï¼‰ è¨­å•1(3)(a)\nãƒãƒ³ãƒ—ã«ç¨¼åƒæŒ‡ç¤ºã‚’é€ä¿¡ã™ã‚‹æ™‚åˆ»ã‚’æ±‚ã‚ã‚‹ã€‚\n8ãƒšãƒ¼ã‚¸ä¸‹éƒ¨ã‚ˆã‚Šã€ãƒãƒ³ãƒ—ãŒåœæ­¢ä¸­ã§ç¨¼åƒæŒ‡ç¤ºã‚’å‡ºã—ã¦ã„ãªã„å ´åˆã€5åˆ†å¾Œã®è²¯æ°´æ§½ã®äºˆæ¸¬æ°´ä½ãŒ3mä»¥ä¸Šã®ã¨ãã€æ°´ä½ãŒ3mã¨ãªã‚‹æ™‚åˆ»ã‚’ç®—å‡ºã—ã€ãã®æ™‚åˆ»ã«ãƒãƒ³ãƒ—ã«ç¨¼åƒæŒ‡ç¤ºã‚’å‡ºã™ã€‚ã“ã“ã§ã€æ°´ä½ã®å¤‰åŒ–ç‡ã¯ä¸€å®šã¨ä»®å®šã—ã¦ã„ã‚‹ã€‚\nã¾ãŸã€å•é¡Œæ–‡ã‚ˆã‚Šã€è²¯æ°´æ§½ã®5åˆ†å‰ã®æ°´ä½ãŒ0.5m, ç¾åœ¨ã®æ°´ä½ãŒ2.5mã§ã‚ã‚‹ã€‚æ°´ä½è¨ˆã®æ°´ä½ã¯5åˆ†å‰ã‹ã‚‰åŒã˜ã§ã‚ã‚‹ã‹ã‚‰ã€5åˆ†å¾Œã®æ°´ä½ã¯4.5mã¨äºˆæ¸¬ã•ã‚Œã‚‹ã€‚\nã‚ˆã£ã¦ã€æ°´ä½ãŒ3mã¨ãªã‚‹æ™‚åˆ»ã‚’æ±‚ã‚ã‚‹ã€‚æ°´ä½ã®å¢—åŠ ç‡ã¯5åˆ†ã§2mã§ã‚ã‚‹ã‹ã‚‰ã€æ°´ä½ãŒ3mã«ãªã‚‹ã€ã™ãªã‚ã¡0.5må¢—åŠ ã™ã‚‹æ™‚åˆ»ã¯ã€\n(5(åˆ†)/2(m)) Ã— 0.5(m)=1.25åˆ†\nã—ãŸãŒã£ã¦ã€è§£ã¯1.25åˆ†å¾Œã§ã‚ã‚‹ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚\nè¨­å•1(3)(b)\n5åˆ†å¾Œã®äºˆæ¸¬æ°´ä½ã‚’æ±‚ã‚ã‚‹ã€‚ç¾åœ¨ã®æ°´ä½ãŒ2.5mã§ã‚ã‚‹ã€‚ã¾ãŸã€é›¨æ°´ç®¡ã‹ã‚‰ã®æµå…¥é‡ã¯5åˆ†ã§2mã€ã™ãªã‚ã¡0.4(m/åˆ†)ã§ã‚ã‚‹ã€‚\nã¾ãŸã€è¨­å•1(3)(a)ã§æ±‚ã‚ãŸã‚ˆã†ã«ã€1.25åˆ†ã«ãƒãƒ³ãƒ—ã«ç¨¼åƒæŒ‡ç¤ºãŒå‡ºã•ã‚Œã‚‹ã€‚8ãƒšãƒ¼ã‚¸ã®è¡¨1ã‚ˆã‚Šã€ãƒãƒ³ãƒ—ãŒç¨¼åƒæŒ‡ç¤ºã‚’å—ã‘ã¦ã‹ã‚‰æ’æ°´ã‚’é–‹å§‹ã™ã‚‹ã¾ã§ã«3åˆ†æ›ã‹ã‚‹ãŸã‚ã€æ’æ°´ãŒé–‹å§‹ã•ã‚Œã‚‹ã®ã¯4.25åˆ†å¾Œã§ã‚ã‚‹ã€‚\nã‚ˆã£ã¦ã€4.25åˆ†å¾Œã®æ°´ä½ã¯ã€\n2.5(m) + 0.4(m/åˆ†)Ã—4.25(åˆ†) = 4.2(m)\nã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€ãƒãƒ³ãƒ—ç¨¼åƒå¾Œã®æ°´ä½ã®å¤‰åŒ–ã‚’æ±‚ã‚ã‚‹ãŸã‚ã€ãƒãƒ³ãƒ—ã®æ’æ°´èƒ½åŠ›ã‚’æ±‚ã‚ã‚‹ã€‚è¡¨1ã‚ˆã‚Šã€ãƒãƒ³ãƒ—ãŒç¨¼åƒæŒ‡ç¤ºã‚’å—ã‘ã¦ã‹ã‚‰æº€æ¯ã®è²¯æ°´æ§½ã®æ°´ã‚’å…¨ã¦æ’æ°´ã™ã‚‹ã®ã«28åˆ†æ›ã‹ã‚‹ã€‚7ãƒšãƒ¼ã‚¸ä¸‹æ®µã‚ˆã‚Šã€è²¯æ°´æ§½ã®æ·±ã•ã¯10mã§ã‚ã‚‹ã€‚\nã¾ãŸã€å®Ÿéš›ã«æ’æ°´ã‚’è¡Œã†ã®ã¯25åˆ†é–“ã§ã‚ã‚‹ã‹ã‚‰ã€ç¨¼åƒæ™‚ã®æ’æ°´èƒ½åŠ›ã¯ã€\n10(m)/25(åˆ†) = 0.4(m/åˆ†)\nã§ã‚ã‚‹ã€‚ã“ã®å€¤ã¯é›¨æ°´ç®¡ã‹ã‚‰ã®æµå…¥é‡ã«ç­‰ã—ã„ãŸã‚ã€ãƒãƒ³ãƒ—ç¨¼åƒå¾Œã¯è²¯æ°´æ§½ã®æ°´ä½ã¯å¤‰åŒ–ã—ãªã„ã€‚\nã—ãŸãŒã£ã¦ã€5åˆ†å¾Œã®äºˆæ¸¬æ°´ä½ã¯4.2(m)ã§ã‚ã‚‹ã€‚\nè¨­å•2(4)\nå„ã‚¿ã‚¹ã‚¯ãŒæ›´æ–°ã—ãŸå±¥æ­´æƒ…å ±ã®ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã®åˆè¨ˆã‚’æ±‚ã‚ã‚‹ã€‚\n10ãƒšãƒ¼ã‚¸ã®å›³2ã‚ˆã‚Šã€å±¥æ­´æƒ…å ±ã‚’æ›´æ–°ã™ã‚‹ã‚¿ã‚¹ã‚¯ã¯ã€ãƒãƒ³ãƒ—åˆ¶å¾¡ã‚¿ã‚¹ã‚¯ã€è²¯æ°´æ§½æ°´ä½äºˆæ¸¬ã‚¿ã‚¹ã‚¯ã€æ°´ä½ã‚»ãƒ³ã‚µã‚¿ã‚¹ã‚¯ã®3ã¤ã§ã‚ã‚‹ã€‚å„ã‚¿ã‚¹ã‚¯ãŒæ›´æ–°ã™ã‚‹å±¥æ­´æƒ…å ±ã®ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã¯è¡¨2ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒãƒ³ãƒ—åˆ¶å¾¡ã‚¿ã‚¹ã‚¯ã¯ã€ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¹ã‚¯ã‹ã‚‰ãƒãƒ³ãƒ—ã®ç¨¼åƒæŒ‡ç¤ºã¾ãŸã¯åœæ­¢æŒ‡ç¤ºã‚’å—ã‘ãŸã¨ãã«å‡¦ç†ã‚’è¡Œã†ã€‚å•é¡Œæ–‡ã‚ˆã‚Šã€ãƒãƒ³ãƒ—ã¯ç¨¼åƒã‚‚åœæ­¢ã‚‚ã—ã¦ã„ãªã„ã®ã§ã€ãƒãƒ³ãƒ—åˆ¶å¾¡ã‚¿ã‚¹ã‚¯ã¯å±¥æ­´æƒ…å ±ã‚’æ›´æ–°ã—ã¦ã„ãªã„ã€‚\nè²¯æ°´æ§½æ°´ä½äºˆæ¸¬ã‚¿ã‚¹ã‚¯ã¯ã€2ãƒã‚¤ãƒˆã®ãƒ‡ãƒ¼ã‚¿2ã¤ã€5åˆ†å‘¨æœŸã§æ›´æ–°ã™ã‚‹ã€‚\n2æ™‚é–“ã®é–“ã«24å›æ›´æ–°ã™ã‚‹ã®ã§ã€åˆè¨ˆãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã¯ã€\n2Ã—2Ã—24 =96(ãƒã‚¤ãƒˆ)\næ°´ä½ã‚»ãƒ³ã‚µã‚¿ã‚¹ã‚¯ã¯ã€5åˆ†å‘¨æœŸã§æ°´ä½ã‚»ãƒ³ã‚µè¨ˆæ¸¬å€¤ã¨è²¯æ°´æ§½äºˆæ¸¬æµå…¥é‡ã®ãƒ‡ãƒ¼ã‚¿ã®è¨ˆæ¸¬å€¤ã‚’æ›´æ–°ã™ã‚‹ã€‚æ°´ä½ã‚»ãƒ³ã‚µè¨ˆæ¸¬å€¤ã¯ã€1å°ã‚ãŸã‚Š2ãƒã‚¤ãƒˆã§ã€æ°´ä½è¨ˆã¯50å°ã‚ã‚‹ãŸã‚ã€\n2Ã—50Ã—24 = 2400(ãƒã‚¤ãƒˆ)\nã¾ãŸã€è²¯æ°´æ§½äºˆæ¸¬æµå…¥é‡ã¯4ãƒã‚¤ãƒˆã§ã‚ã‚‹ã‹ã‚‰ã€\n4Ã—24 = 96(ãƒã‚¤ãƒˆ)\nã‚ˆã£ã¦ã€åˆè¨ˆã¯ã€\n2400+96 = 2496(ãƒã‚¤ãƒˆ)\nã§ã‚ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€è§£ã¯å„ã‚¿ã‚¹ã‚¯ã®ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã‚’åˆè¨ˆã—ã¦ã€\n96+2496 = 2592(ãƒã‚¤ãƒˆ)\nã§ã‚ã‚‹ã€‚\nå•3ï¼ˆãƒˆãƒ©ãƒƒã‚¯éšŠåˆ—èµ°è¡Œã‚·ã‚¹ãƒ†ãƒ ï¼‰ å¾Œæ—¥ã€è§£èª¬ã‚’è¼‰ã›ã¾ã™ã€‚\nå‚è€ƒ åˆå‰I, åˆå‰IIã®è§£èª¬ã¯ä»¥ä¸‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’ã”å‚è€ƒã®ã“ã¨ã€‚\næƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®å‹‰å¼·ã‚’ã‚„ã‚Šç›´ã— âˆ’ITãƒ‘ã‚¹ãƒãƒ¼ãƒˆã€æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã€åŸºæœ¬æƒ…å ±æŠ€è¡“è€…ã€å¿œç”¨æƒ…å ±æŠ€è¡“è€…ã€æƒ…å ±å‡¦ç†å®‰å…¨ç¢ºä¿æ”¯æ´å£«ãƒ»é«˜åº¦è©¦é¨“ã®éå»å•é¡Œã®è§£èª¬âˆ’\n","description":"æƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®é«˜åº¦è©¦é¨“ã®1ã¤ã§ã‚ã‚‹ã€ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ (ES) ã®2018å¹´åˆå¾ŒIã®è¨ˆç®—å•é¡Œã‚’è§£èª¬ã™ã‚‹ã€‚","id":68,"section":"posts","tags":["ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“"],"title":"ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ã€€2018å¹´åˆå¾ŒIã®è¨ˆç®—å•é¡Œè§£èª¬","uri":"https://helve-blog.com/posts/it-engineers-exam/embedded-systems-2018-pm1/"},{"content":"ã¯ã˜ã‚ã« æƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®é«˜åº¦è©¦é¨“ã®1ã¤ã§ã‚ã‚‹ã€ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ (ES) ã®2017å¹´åˆå¾ŒIIã®è¨ˆç®—å•é¡Œã‚’è§£èª¬ã™ã‚‹ã€‚\nã“ã®ãƒšãƒ¼ã‚¸ã§ã¯è§£èª¬ã®ã¿è¼‰ã›ã‚‹ãŸã‚ã€å•é¡Œæ–‡ã¯ä»¥ä¸‹ã®IPAï¼ˆæƒ…å ±å‡¦ç†æ¨é€²æ©Ÿæ§‹ï¼‰ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰å–å¾—ã•ã‚ŒãŸã„ã€‚\nIPA ç‹¬ç«‹è¡Œæ”¿æ³•äºº æƒ…å ±å‡¦ç†æ¨é€²æ©Ÿæ§‹ï¼šéå»å•é¡Œ\nå•1ï¼ˆã‚¹ãƒãƒ¼ãƒˆã‚°ãƒªãƒƒãƒ‰ï¼‰ è¨­å•1(2)\nFCã‹ã‚‰é›»åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã«å‡ºåŠ›ã§ãã‚‹æœ€å¤§é›»åŠ›é‡ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚\nè¡¨2ã‚ˆã‚Šã€æ°´ç´ ã‚¿ãƒ³ã‚¯ã®æœ€å¤§è²¯è”µé‡ã¯100m3ã§ã‚ã‚‹ã€‚\nã¾ãŸã€FCã¯1m3ã®æ°´ç´ ã‹ã‚‰4kWhã®é›»åŠ›é‡ã‚’ç™ºç”Ÿã—ã€å®šæ ¼é‹è»¢æ™‚ã«ã¯ç™ºé›»é›»åŠ›ã®2%ã‚’æ¶ˆè²»ã—ã¦å†·å´å™¨ã§å†·å´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nå›³3ã‚ˆã‚Šã€å†·å´é›»åŠ›ã¯FCã‹ã‚‰ç›´æ¥å–å¾—ã•ã‚Œã¦ãŠã‚Šã€æ®‹ã‚Šã®é›»åŠ›ãŒé›»åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã«å‡ºåŠ›ã•ã‚Œã‚‹ã€‚\nã™ãªã‚ã¡ã€FCã‹ã‚‰é›»åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã«å‡ºåŠ›ã§ãã‚‹é›»åŠ›ã¯ã€ç™ºç”Ÿã—ãŸé›»åŠ›ã®98%ã§ã‚ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€è§£ã¯ã€\n100[m3]Ã—4[kWh/m3]Ã—0.98=392.04[kWh]\nå°æ•°ç¬¬1ä½ã‚’å››æ¨äº”å…¥ã—ã¦ã€392[kWh]ã¨ãªã‚‹ã€‚\nè¨­å•1(4)\nè¡¨1ã‚ˆã‚Šã€FCã¯èµ·å‹•æŒ‡ç¤ºã‚’å—ã‘ã‚‹ã¨å‡ºåŠ›ãŒç›´ç·šçš„ã«ä¸Šæ˜‡ã—ã€20kWã®å‡ºåŠ›ã«é”ã™ã‚‹ã¾ã§ã«12åˆ†é–“æ›ã‹ã‚‹ã€‚\nã™ãªã‚ã¡ã€10kWã®å‡ºåŠ›ã«é”ã™ã‚‹ã¾ã§ã«6åˆ†é–“ï¼ˆ0.1æ™‚é–“ï¼‰æ›ã‹ã‚‹ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚\nã‚ˆã£ã¦ã€FCã®èµ·å‹•æ™‚ã«å¿…è¦ãªè“„é›»æ± ã®æ®‹é‡ã¯ã€\n(10[kW]Ã—0.1[h])/2=0.5[kWh]\nã§ã‚ã‚‹ã‹ã‚‰ã€å…¨ä½“ã®å®¹é‡ã«å¯¾ã™ã‚‹å‰²åˆã¯ã€\n0.5[kWh]/100[kWh]=0.5[%]\nã¨ãªã‚‹ã€‚\nè¨­å•1(5)(a)\nWGéƒ¨ï¼š\nè¡¨1ã‚ˆã‚Šã€WGéƒ¨ã®å‡ºåŠ›é›»åŠ›ã¯é¢¨é€Ÿ10m/ç§’ä»¥ä¸‹ã®ã¨ãé¢¨é€Ÿã«æ¯”ä¾‹ã™ã‚‹ã€‚\nã¾ãŸã€é¢¨é€Ÿ10m/ç§’ã®ã¨ãæœ€å¤§å‡ºåŠ›ã¨ãªã‚Šã€æœ€å¤§å‡ºåŠ›ã¯20kWã§ã‚ã‚‹ã€‚\nå›³8ã‚ˆã‚Šã€10ï½11æ™‚ã®é¢¨é€Ÿã¯6m/ç§’ã§ã‚ã‚‹ã‹ã‚‰ã€WGéƒ¨ã®ç™ºé›»å‡ºåŠ›ã¯æ¬¡ã®é€šã‚Šã€‚\n6[m/ç§’]Ã—(20[kW]/10[m/ç§’])Ã—1[h]=12[kWh]\nPVéƒ¨ï¼š\nè¡¨1ã‚ˆã‚Šã€PVéƒ¨ã®å‡ºåŠ›é›»åŠ›ã¯æ—¥å°„å¼·åº¦1000W/m2ä»¥ä¸‹ã®ã¨ãæ—¥å°„å¼·åº¦ã«æ¯”ä¾‹ã™ã‚‹ã€‚\nã¾ãŸã€æ—¥å°„å¼·åº¦1000W/m2ã®ã¨ãæœ€å¤§å‡ºåŠ›ã¨ãªã‚Šã€æœ€å¤§å‡ºåŠ›ã¯20kWã§ã‚ã‚‹ã€‚\nå›³9ã‚ˆã‚Šã€10ï½11æ™‚ã®æ—¥å°„å¼·åº¦ã¯1000W/m2ã§ã‚ã‚‹ã‹ã‚‰ã€PVéƒ¨ã®ç™ºé›»å‡ºåŠ›ã¯æ¬¡ã®é€šã‚Šã€‚\n1000[W/m2]Ã—(20[kW]/1000[W/m2])Ã—1[h]=20[kWh]\nè§£ã¯WGéƒ¨ã¨PVéƒ¨ã®å„ç™ºé›»å‡ºåŠ›ã®å’Œã§ã‚ã‚‹ã‹ã‚‰ã€ä»¥ä¸‹ã®é€šã‚Šã€‚\n12+20=32[kWh]\nè¨­å•1(5)(b)\nã¾ãšã€ç™ºé›»ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½™å‰°é›»åŠ›ã‚’æ±‚ã‚ã‚‹ã€‚\nè¨­å•1(5)(a)ã¨åŒæ§˜ã«ã€13ï½14æ™‚ã«ãŠã‘ã‚‹WGéƒ¨ã¨PVéƒ¨ã®å‡ºåŠ›é›»åŠ›ã‚’æ±‚ã‚ã‚‹ã¨ã€ãã‚Œãã‚Œ8[kW], 20[kW]ã§ã‚ã‚Šã€åˆè¨ˆã¯28[kW]ã§ã‚ã‚‹ã€‚\nã¾ãŸã€å•é¡Œæ–‡ã‚ˆã‚Šã€13ï½14æ™‚ã«ãŠã‘ã‚‹å¤–éƒ¨å‡ºåŠ›ã¸ã®é›»åŠ›ã®ä¾›çµ¦ã¯10[kW]ã§ã‚ã‚‹ã‹ã‚‰ã€28-10=18[kW]ã®é›»åŠ›ãŒä½™å‰°ã¨ãªã‚‹ã€‚\np. 6ã®ç®¡ç†CPUã®åˆ¶å¾¡ã‚ˆã‚Šã€ç™ºé›»ã—ãŸé›»åŠ›ã«ä½™å‰°ãŒã‚ã‚‹å ´åˆã¯ã€è“„é›»æ± ã®å……é›»ã€æ°´é›»è§£è£…ç½®ã®é‹è»¢ã€å•†ç”¨é›»åŠ›ç¶²ã¸ã®å£²é›»ã®å„ªå…ˆé †ä½ã§é›»åŠ›ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\nå•é¡Œæ–‡ã‚ˆã‚Šã€è“„é›»æ± ã®å……é›»ç‡ã¯100%, æ°´ç´ ã®è²¯è”µç‡ã¯100%ã§ã‚ã‚‹ã‹ã‚‰ã€è“„é›»æ± ã®å……é›»ã¨ã€æ°´é›»è§£è£…ç½®ã®é‹è»¢ã¯ä¸å¯èƒ½ã§ã‚ã‚‹ã€‚\nã¾ãŸã€å›³2ã®çŸ­æœŸå£²é›»æƒ…å ±ã‚ˆã‚Šã€13ï½14æ™‚ã«å£²é›»å¯èƒ½ãªé›»åŠ›ã¯12[kW]ã§ã‚ã‚‹ã€‚\nä½™å‰°é›»åŠ›18[kW]ã¯12[kW]ã‚ˆã‚Šå¤§ãã„ãŸã‚ã€å£²é›»å¯èƒ½ãªé›»åŠ›ã¯12[kW]ã§ã‚ã‚‹ã€‚\nã‚ˆã£ã¦ã€13ï½14æ™‚ã«å£²é›»å¯èƒ½ãªé›»åŠ›é‡ã¯æ¬¡ã®é€šã‚Šã€‚\n12[kW]Ã—1[h]=12[kWh]\nè¨­å•2(1)(a)\nå›³10, 11ã‚ˆã‚Šã€0ï½6æ™‚ã®WGéƒ¨ã®å‡ºåŠ›ã¯10[kW], PVéƒ¨ã®å‡ºåŠ›ã¯0[kW]ã§ã‚ã‚‹ã€‚\nã¾ãŸã€å›³12ã‚ˆã‚Šã€å¤–éƒ¨å‡ºåŠ›ã¸ã®é›»åŠ›ã®ä¾›çµ¦äºˆæ¸¬ã¯4[kW]ã§ã‚ã‚‹ã€‚\nã‚ˆã£ã¦ã€(10[kW]-4[kW])Ã—6[h]=36[kWh]ã®é›»åŠ›é‡ãŒä½™å‰°ã¨ãªã‚‹ã€‚\nè¡¨1ã‚ˆã‚Šè“„é›»æ± ã®å®¹é‡ã¯100[kWh]ã§ã‚ã‚Šã€å•é¡Œã‚ˆã‚Šå……é›»ç‡ã¯64%ã§ã‚ã‚‹.\nã™ãªã‚ã¡ã€è“„é›»æ± ã®ç©ºãå®¹é‡ã¯36[kWh]ã§ã‚ã‚‹ã€‚\np. 6ã®ç®¡ç†CPUã®åˆ¶å¾¡ã‚ˆã‚Šã€ç™ºé›»ã—ãŸé›»åŠ›ã«ä½™å‰°ãŒã‚ã‚‹å ´åˆã¯ã€è“„é›»æ± ã®å……é›»ã‚’å„ªå…ˆã—ã¦é›»åŠ›ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\nä½™å‰°é›»åŠ›ã¯å…¨ã¦è“„é›»å¯èƒ½ã§ã‚ã‚‹ã€‚\nã‚ˆã£ã¦ã€é›»åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã¸ã®æŒ‡ç¤ºã¯ã€æ¬¡ã®é€šã‚Šã€‚\nã€ŒWGéƒ¨ã§ç™ºé›»ã—ãŸé›»åŠ›ã‚’å¤–éƒ¨å‡ºåŠ›ã—ã€ä½™å‰°é›»åŠ›ã§è“„é›»æ± ã‚’å……é›»ã™ã‚‹ã€‚ã€\nè¨­å•2(2)\nç®¡ç†CPUãŒã‚¿ã‚¤ãƒå‰²è¾¼ã¿1ã®å‘¨æœŸã®é–“ã«ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ¼”ç®—ã‚’å®Ÿè¡Œã§ãã‚‹æ™‚é–“ã‚’æ±‚ã‚ã‚‹ã€‚\nè¡¨2ã‚ˆã‚Šã€ã‚¿ã‚¤ãƒå‰²è¾¼ã¿1ã®å‘¨æœŸã¯1ãƒŸãƒªç§’ã§ã‚ã‚‹ã€‚\nã“ã®é–“ã€ä¼é€å—ä¿¡å‰²è¾¼ã¿ã¨ä¼é€é€ä¿¡å‰²è¾¼ã¿ãŒã€åˆè¨ˆ5å›ç™ºç”Ÿã™ã‚‹ã€‚\nã¾ãŸã€ã‚¿ã‚¤ãƒå‰²è¾¼ã¿2ãŒæœ€å¤§1å›ç™ºç”Ÿã™ã‚‹ã€‚\næ¬¡ã«ã€å„å‰²è¾¼ã¿å‡¦ç†ã®å®Ÿè¡Œæ™‚é–“ã‚’æ±‚ã‚ã‚‹ã€‚\nå®Ÿè¡Œã‚¹ãƒ†ãƒƒãƒ—æ•°ã¯è¡¨2ã«ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚\nã¾ãŸã€è¡¨1ã‚ˆã‚Šã€ç®¡ç†CPUã®ã‚¯ãƒ­ãƒƒã‚¯å‘¨æœŸã¯1GHzã§ã‚ã‚Šã€2ã‚¯ãƒ­ãƒƒã‚¯ã§1ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nã‚ˆã£ã¦ã€ç®¡ç†CPUã§1ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œã«æ›ã‹ã‚‹æ™‚é–“ã¯ã€\n2[ã‚¯ãƒ­ãƒƒã‚¯/ã‚¹ãƒ†ãƒƒãƒ—]Ã·(1Ã—10^9[ã‚¯ãƒ­ãƒƒã‚¯/ç§’])=2Ã—10^(-9)[ç§’/ã‚¹ãƒ†ãƒƒãƒ—]\nã¨ãªã‚‹ã€‚\nå„å‰²è¾¼ã¿å‡¦ç†ã®å®Ÿè¡Œæ™‚é–“ã‚’è¨ˆç®—ã™ã‚‹ã¨ã€ä¸‹è¡¨ã®é€šã‚Šã€‚\n   å‡¦ç†å å®Ÿè¡Œã‚¹ãƒ†ãƒƒãƒ—æ•° å®Ÿè¡Œæ™‚é–“(ãƒã‚¤ã‚¯ãƒ­ç§’)     ã‚¿ã‚¤ãƒå‰²è¾¼ã¿1 2k 4   ä¼é€å—ä¿¡å‰²è¾¼ã¿ 2k 4   ä¼é€é€ä¿¡å‰²è¾¼ã¿ 2k 4   ã‚¿ã‚¤ãƒå‰²è¾¼ã¿2 20k 40    ã‚ˆã£ã¦ã€1ãƒŸãƒªç§’ã®é–“ã«ã€å‰²è¾¼ã¿å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹æœ€å¤§ã®æ™‚é–“ã¯ã€\n4+4Ã—5+40=64[ãƒã‚¤ã‚¯ãƒ­ç§’]\nã¨ãªã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ¼”ç®—ã‚’å®Ÿè¡Œã§ãã‚‹æ™‚é–“ã¯æ¬¡ã®é€šã‚Šã€‚\n1000-64=936.0[ãƒã‚¤ã‚¯ãƒ­ç§’]\nå•2ï¼ˆé§è¼ªå ´ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼‰ è¨ˆç®—å•é¡Œã¯å«ã¾ã‚Œãªã„ã€‚\nå‚è€ƒ åˆå‰I, åˆå‰IIã®è§£èª¬ã¯ä»¥ä¸‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’å‚è€ƒã®ã“ã¨ã€‚\næƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®å‹‰å¼·ã‚’ã‚„ã‚Šç›´ã— âˆ’ITãƒ‘ã‚¹ãƒãƒ¼ãƒˆã€æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã€åŸºæœ¬æƒ…å ±æŠ€è¡“è€…ã€å¿œç”¨æƒ…å ±æŠ€è¡“è€…ã€æƒ…å ±å‡¦ç†å®‰å…¨ç¢ºä¿æ”¯æ´å£«ãƒ»é«˜åº¦è©¦é¨“ã®éå»å•é¡Œã®è§£èª¬âˆ’\n","description":"æƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®é«˜åº¦è©¦é¨“ã®1ã¤ã§ã‚ã‚‹ã€ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ (ES) ã®2017å¹´åˆå¾ŒIIã®è¨ˆç®—å•é¡Œã‚’è§£èª¬ã™ã‚‹ã€‚","id":69,"section":"posts","tags":["ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“"],"title":"ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ã€€2017å¹´åˆå¾ŒIIã®è¨ˆç®—å•é¡Œè§£èª¬","uri":"https://helve-blog.com/posts/it-engineers-exam/embedded-systems-2017-pm2/"},{"content":"ã¯ã˜ã‚ã« æƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®é«˜åº¦è©¦é¨“ã®1ã¤ã§ã‚ã‚‹ã€ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ (ES) ã®2017å¹´åˆå¾ŒIã®è¨ˆç®—å•é¡Œã‚’è§£èª¬ã™ã‚‹ã€‚\nã“ã®ãƒšãƒ¼ã‚¸ã§ã¯è§£èª¬ã®ã¿è¼‰ã›ã‚‹ãŸã‚ã€å•é¡Œæ–‡ã¯ä»¥ä¸‹ã®IPAï¼ˆæƒ…å ±å‡¦ç†æ¨é€²æ©Ÿæ§‹ï¼‰ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰å–å¾—ã•ã‚ŒãŸã„ã€‚\nIPA ç‹¬ç«‹è¡Œæ”¿æ³•äºº æƒ…å ±å‡¦ç†æ¨é€²æ©Ÿæ§‹ï¼šéå»å•é¡Œ\nå•1ï¼ˆè¦³å…‰æ¡ˆå†…ç”¨ãƒ­ãƒœãƒƒãƒˆï¼‰ è¨­å•1 (1)\nLCDã®è¡¨ç¤ºãƒ‡ãƒ¼ã‚¿ã‚’æƒ…å ±ã‚µãƒ¼ãƒã‹ã‚‰å–å¾—ã—ã€è¡¨ç¤ºãƒãƒƒãƒ•ã‚¡ã¸ã®æ›¸ãè¾¼ã¿ã‚’å®Œäº†ã™ã‚‹æ™‚é–“ã‚’æ±‚ã‚ã‚‹ã€‚\nè¡¨2ã®ã€Œè¡¨ç¤ºã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã€ã®é …ã‚ˆã‚Šã€LCDã®è¡¨ç¤ºã¯1ç”»ç´ ãŒ16ãƒ“ãƒƒãƒˆã§ã€1ç”»é¢ãŒ500,000ç”»ç´ ã§ã‚ã‚‹ã€‚\nã™ãªã‚ã¡ã€1ç”»é¢ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€\n16[ãƒ“ãƒƒãƒˆ]Ã—500,000=8,000,000[ãƒ“ãƒƒãƒˆ]=8[Mãƒ“ãƒƒãƒˆ]\nã§ã‚ã‚‹ã€‚\nå•é¡Œæ–‡ã‚ˆã‚Šã€è¡¨ç¤ºãƒ‡ãƒ¼ã‚¿ã‚’LANã§è»¢é€ã™ã‚‹éš›ã®è»¢é€é€Ÿåº¦ã¯40[Mãƒ“ãƒƒãƒˆ/ç§’]ãªã®ã§ã€LANã®è»¢é€æ™‚é–“ã¯æ¬¡ã®é€šã‚Šã€‚\n8[Mãƒ“ãƒƒãƒˆ]/40[Mãƒ“ãƒƒãƒˆ/ç§’]=0.2[ç§’]=200[ãƒŸãƒªç§’]\nã¾ãŸã€LANã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‹ã‚‰è¡¨ç¤ºãƒãƒƒãƒ•ã‚¡ã¸ã®è»¢é€é€Ÿåº¦ã¯80[Mãƒã‚¤ãƒˆ/ç§’]ã§ã‚ã‚‹ã‹ã‚‰ã€è»¢é€æ™‚é–“ã¯æ¬¡ã®é€šã‚Šã€‚\n8[Mãƒ“ãƒƒãƒˆ]/(80Ã—8[Mãƒ“ãƒƒãƒˆ/ç§’])=0.0125[ç§’]=12.5[ãƒŸãƒªç§’]\nã—ãŸãŒã£ã¦ã€è§£ã¯ã€ã“ã‚Œã‚‰ã®è»¢é€æ™‚é–“ã®å’Œã®å°æ•°ç¬¬äºŒä½ã‚’å››æ¨äº”å…¥ã—ã€\n200+12.5=212.5[ãƒŸãƒªç§’]\nã¨ãªã‚‹ã€‚\nè¨­å•2 (1) (a)\nãƒ­ãƒœãƒƒãƒˆã®ä½“ã‚’ã€ãƒ¢ãƒ¼ã‚¿ã®200åº¦ã®ä½ç½®ã§åœæ­¢ã•ã›ã‚‹PWMã®ãƒ‡ãƒ¥ãƒ¼ãƒ†ã‚£æ¯”ã‚’æ±‚ã‚ã‚‹ã€‚\nè¡¨3, 4ã‚ˆã‚Šã€ãƒ¢ãƒ¼ã‚¿ã®è§’åº¦ã¯ãƒ‡ãƒ¥ãƒ¼ãƒ†ã‚£æ¯”ã«æ¯”ä¾‹ã—ã¦å¤‰åŒ–ã—ã€ã•ã‚‰ã«ãƒ‡ãƒ¥ãƒ¼ãƒ†ã‚£æ¯”ã‚’0ã‹ã‚‰1ã¾ã§å¤‰åŒ–ã•ã›ã‚‹ã¨ã€0åº¦ã‹ã‚‰360åº¦ã¾ã§å›è»¢ã™ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nã‚ˆã£ã¦ã€ãƒ¢ãƒ¼ã‚¿ã‚’200åº¦ã®ä½ç½®ã«åœæ­¢ã•ã›ã‚‹ãƒ‡ãƒ¥ãƒ¼ãƒ†ã‚£æ¯”ã¯ã€\n200[åº¦]/360[åº¦] = 5/9\nã§ã‚ã‚‹ã€‚\nè¨­å•2 (1) (b)\nã‚¿ã‚¤ãƒã‚’ä½¿ç”¨ã—ã¦ã€ä½“ã‚’ãƒ¢ãƒ¼ã‚¿ã®200åº¦ã«æœ€ã‚‚è¿‘ã„ä½ç½®ã§åœæ­¢ã•ã›ã‚‹ã‚¿ã‚¤ãƒã®è¨­å®šå€¤ã‚’æ±‚ã‚ã‚‹ã€‚ã¾ãŸã€ã“ã®ã¨ãã®è§’åº¦ã®èª¤å·®ã‚‚æ±‚ã‚ã‚‹ã€‚\nè¡¨1ã‚ˆã‚Šã€PWMä¿¡å·ã®å‘¨æœŸã¯1ãƒŸãƒªç§’ã§ã€ã‚ã‚‹ã‚¢ã‚¯ãƒ†ã‚£ãƒ–Highã§ã‚ã‚‹ã€‚\nã¾ãŸã€è¡¨2ã‚ˆã‚Šã€ã‚¿ã‚¤ãƒã¯240kHzã®ã‚¯ãƒ­ãƒƒã‚¯ã§ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã—ã€è¨­å®šã—ãŸHighã®å¹…ã¨ã‚¿ã‚¤ãƒã®ã‚«ã‚¦ãƒ³ã‚¿ãŒåŒã˜å€¤ã«ãªã‚‹ã¨ã€å‡ºåŠ›ã¯Lowã«ãªã‚‹ã€‚\nè¨­å®šã—ãŸå‘¨æœŸã¨ã‚¿ã‚¤ãƒã®ã‚«ã‚¦ãƒ³ã‚¿ãŒåŒã˜å€¤ã«ãªã‚‹ã¨ã€ã‚«ã‚¦ãƒ³ã‚¿ãŒ0ã«ãªã‚Šã€å‡ºåŠ›ã¯Highã«ãªã‚‹ã€‚\nè§£ç­”ã®æ–¹é‡ã¨ã—ã¦ã€ã¾ãšã‚¿ã‚¤ãƒã®è¨­å®šå‘¨æœŸã‚’æ±‚ã‚ã¦ã‹ã‚‰ã€Highã®è¨­å®šå€¤ã‚’æ±‚ã‚ã‚‹ã€‚\nã‚¿ã‚¤ãƒã®è¨­å®šå‘¨æœŸã¯ã€240[kHz]ã§ã‚«ã‚¦ãƒ³ãƒˆã—ãŸã¨ãã«1[ãƒŸãƒªç§’]ã«ãªã‚‹å›æ•°ã§ã‚ã‚‹ã‹ã‚‰ã€\n0.001[ç§’]Ã—(240Ã—10^3[Hz]) = 240\nã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€Highã®è¨­å®šå€¤ã‚’æ±‚ã‚ã‚‹ã€‚\nãƒ¢ãƒ¼ã‚¿ã‚’200åº¦ã®ä½ç½®ã«åœæ­¢ã•ã›ã‚‹ãƒ‡ãƒ¥ãƒ¼ãƒ†ã‚£æ¯”ã¯5/9ã§ã‚ã‚‹ã¨ã€(a)ã§æ—¢ã«æ±‚ã‚ãŸã€‚\nã‚ˆã£ã¦ã€æ±‚ã‚ã‚‹Highã®è¨­å®šå€¤ã¯ã€æ•´æ•°ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ã€\n240Ã—(5/9) = 133.33\u0026hellip; â‰’ 133\nã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€è§’åº¦ã®èª¤å·®ã‚’æ±‚ã‚ã‚‹ã€‚å…ˆç¨‹ã€Highã®è¨­å®šå€¤ã‚’133.33\u0026hellip;ã‚’å››æ¨äº”å…¥ã—ã¦133ã¨ã—ãŸãŒã€åˆ‡ã‚Šæ¨ã¦ãŸ0.33\u0026hellip;, ã™ãªã‚ã¡1/3ã«ç›¸å½“ã™ã‚‹ãƒ‡ãƒ¥ãƒ¼ãƒ†ã‚£æ¯”ãŒè§’åº¦ã®èª¤å·®ã«ãªã‚‹ã€‚\nã—ãŸãŒã£ã¦è§’åº¦ã®èª¤å·®ã¯ã€\n360[åº¦]Ã—((1/3)/240)=0.5[åº¦]\nè§£ã¯å°æ•°ç¬¬3ä½ã‚’å››æ¨äº”å…¥ã—ã¦ã€0.50[åº¦]ã§ã‚ã‚‹ã€‚\nå•2ï¼ˆã‚«ãƒ¡ãƒ©ä»˜ãé˜²çŠ¯ç¯ï¼‰ è¨­å•1 (2)\nç”»åƒãƒ‡ãƒ¼ã‚¿ã®è¨˜æ†¶ã«å¿…è¦ãªãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒ¢ãƒªã®å®¹é‡ã‚’è¨ˆç®—ã™ã‚‹ã€‚\np. 8ã®ä¸‹æ®µã‚ˆã‚Šã€ã‚«ãƒ¡ãƒ©ãƒ¦ãƒ‹ãƒƒãƒˆã¯1ç§’é–“ã«4ãƒ•ãƒ¬ãƒ¼ãƒ ã®ç”»åƒã‚’æ’®å½±ã—ã¦ã„ã‚‹ã€‚\nã¾ãŸã€p. 9ã®ä¸‹æ®µã‚ˆã‚Šã€ç”»åƒã‚’åœ§ç¸®ã—ã¦ã€6åˆ†é–“ã®ç”»åƒã‚’1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã—ã¦ã€ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒ¢ãƒªã«240æ™‚é–“ä¿å­˜ã™ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nã•ã‚‰ã«ã€å•é¡Œæ–‡ã‚ˆã‚Šã€1ãƒ•ãƒ¬ãƒ¼ãƒ ã®ç”»åƒã¯1Mãƒã‚¤ãƒˆã§ã€åœ§ç¸®ã™ã‚‹ã¨å…ƒãƒ‡ãƒ¼ã‚¿ã®1%ã®å®¹é‡ã«ãªã‚Šã€æš—å·åŒ–ã™ã‚‹ã¨åœ§ç¸®ã—ãŸãƒ‡ãƒ¼ã‚¿ã‹ã‚‰5%å®¹é‡ãŒå¢—åŠ ã™ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€ä»¥ä¸‹ã®é€šã‚Šã«è¨ˆç®—ã™ã‚‹ã¨ã€å›ç­”ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚\n1ãƒ•ãƒ¬ãƒ¼ãƒ ã®ç”»åƒã‚’åœ§ç¸®ã™ã‚‹ã¨ã€\n1[Mãƒã‚¤ãƒˆ]Ã—0.01=0.01[Mãƒã‚¤ãƒˆ]\nã§ã‚ã‚Šã€ã•ã‚‰ã«æš—å·åŒ–ã™ã‚‹ã¨ã€\n0.01[Mãƒã‚¤ãƒˆ]Ã—1.05=0.0105[Mãƒã‚¤ãƒˆ]\nã¨ãªã‚‹ã€‚\n240æ™‚é–“ã«æ’®å½±ã•ã‚Œã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ æ•°ã¯ã€\n(240Ã—3600)[ç§’]Ã—4[ãƒ•ãƒ¬ãƒ¼ãƒ /ç§’]=3456000[ãƒ•ãƒ¬ãƒ¼ãƒ ]\nã§ã‚ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€æ±‚ã‚ã‚‹ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ¡ãƒ¢ãƒªã®å®¹é‡ã¯ã€\n0.0105[Mãƒã‚¤ãƒˆ/ãƒ•ãƒ¬ãƒ¼ãƒ ]Ã—3456000[ãƒ•ãƒ¬ãƒ¼ãƒ ]=36288[Mãƒã‚¤ãƒˆ]\nã™ãªã‚ã¡ã€36.288[Gãƒã‚¤ãƒˆ]ã€‚\nè§£ã¯å°æ•°ç‚¹ä»¥ä¸‹ã‚’åˆ‡ã‚Šä¸Šã’ã¦37[Gãƒã‚¤ãƒˆ]ã§ã‚ã‚‹ã€‚\nå•3ï¼ˆç—…é™¢å†…è³‡æ–™é…é€ã‚·ã‚¹ãƒ†ãƒ ï¼‰ è¨­å•1 (1)\né…é€è»ŠãŒé€šä¿¡ç‚¹ã§ã‚„ã‚Šå–ã‚Šå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿é‡ã‚’æ±‚ã‚ã‚‹ã€‚\np. 17ã®ä¸Šæ®µã‚ˆã‚Šã€NFCã®é€šä¿¡é€Ÿåº¦ã¯400kãƒ“ãƒƒãƒˆ/ç§’ã§ã‚ã‚‹ã€‚\nã¾ãŸã€é€šä¿¡å¯èƒ½é ˜åŸŸã«å…¥ã£ãŸã“ã¨ã‚’æ¤œçŸ¥ã™ã‚‹ã®ã«ã€10ãƒŸãƒªç§’ã€é€šä¿¡æº–å‚™ãŒå®Œäº†ã™ã‚‹ã®ã«ã•ã‚‰ã«10ãƒŸãƒªç§’æ›ã‹ã‚‹ã€‚\nå•é¡Œæ–‡ã‚ˆã‚Šã€é…é€è»Šã¯1ãƒ¡ãƒ¼ãƒˆãƒ«/ç§’ã§èµ°è¡Œã—ã¦ãŠã‚Šã€é€šä¿¡ç‚¹ã®å‰å¾Œ4ã‚»ãƒ³ãƒãƒ¡ãƒ¼ãƒˆãƒ«ã§é€šä¿¡ã§ãã‚‹ã€‚\nã‚ˆã£ã¦ã€é…é€è»ŠãŒé€šä¿¡å¯èƒ½ãªæ™‚é–“ã¯ã€\n0.08[m]Ã·1[m/s] = 0.08[s]\nã§ã‚ã‚‹ã€‚\nã•ã‚‰ã«ã€é€šä¿¡ã§ãã‚‹ã¾ã§ã«ã€10[ãƒŸãƒªç§’]+10[ãƒŸãƒªç§’]æ›ã‹ã‚‹ãŸã‚ã€å®Ÿéš›ã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã§ãã‚‹ã®ã¯ã€\n0.08-(0.01+0.01)=0.06[s]\nã¨ãªã‚‹ã€‚\nNFCã®é€šä¿¡é€Ÿåº¦ã¯400kãƒ“ãƒƒãƒˆ/ç§’ã§ã‚ã‚‹ã‹ã‚‰ã€é€šä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿é‡ã¯æ¬¡ã®é€šã‚Šã€‚\n0.06[s]Ã—400[kãƒ“ãƒƒãƒˆ/ç§’]=24[kãƒ“ãƒƒãƒˆ]\nã•ã‚‰ã«ã€NFCã¯16ãƒã‚¤ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’200ãƒ“ãƒƒãƒˆã§é€šä¿¡ã™ã‚‹ã®ã§ã€\nå®Ÿéš›ã«ã‚„ã‚Šå–ã‚Šã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿é‡ã¯ã€\n24Ã—10^3[ãƒ“ãƒƒãƒˆ]Ã—(16[ãƒã‚¤ãƒˆ]/200[ãƒ“ãƒƒãƒˆ])=1920[ãƒã‚¤ãƒˆ]\nã¨ãªã‚‹ã€‚\nã™ãªã‚ã¡ã€1.92[kãƒã‚¤ãƒˆ]ã®å°æ•°ç¬¬äºŒä½ã‚’å››æ¨äº”å…¥ã—ã¦ã€è§£ã¯1.9[kãƒã‚¤ãƒˆ]ã§ã‚ã‚‹ã€‚\nå‚è€ƒ åˆå‰I, åˆå‰IIã®è§£èª¬ã¯ä»¥ä¸‹ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’å‚è€ƒã®ã“ã¨ã€‚\næƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®å‹‰å¼·ã‚’ã‚„ã‚Šç›´ã— âˆ’ITãƒ‘ã‚¹ãƒãƒ¼ãƒˆã€æƒ…å ±ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã€åŸºæœ¬æƒ…å ±æŠ€è¡“è€…ã€å¿œç”¨æƒ…å ±æŠ€è¡“è€…ã€æƒ…å ±å‡¦ç†å®‰å…¨ç¢ºä¿æ”¯æ´å£«ãƒ»é«˜åº¦è©¦é¨“ã®éå»å•é¡Œã®è§£èª¬âˆ’\n","description":"æƒ…å ±å‡¦ç†æŠ€è¡“è€…è©¦é¨“ã®é«˜åº¦è©¦é¨“ã®1ã¤ã§ã‚ã‚‹ã€ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ (ES) ã®2017å¹´åˆå¾ŒIã®è¨ˆç®—å•é¡Œã‚’è§£èª¬ã™ã‚‹ã€‚","id":70,"section":"posts","tags":["ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“"],"title":"ã‚¨ãƒ³ãƒ™ãƒ‡ãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆè©¦é¨“ã€€2017å¹´åˆå¾ŒIã®è¨ˆç®—å•é¡Œè§£èª¬","uri":"https://helve-blog.com/posts/it-engineers-exam/embedded-systems-2017-pm1/"},{"content":"ã¯ã˜ã‚ã« Kerasã®ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNãŠã‚ˆã³ã€Kerasã®ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\nã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã¯ã€å­¦ç¿’ãƒãƒƒãƒé–“ã§å†…éƒ¨çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹ãŸã‚ã€å­¦ç¿’ã‚’é«˜é€ŸåŒ–ã§ãã‚‹ã€‚\nå†å¸°å‹ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯(RNN)ã¯ã€æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚„è¨€èªãƒ‡ãƒ¼ã‚¿ãªã©ã€éå»ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ã€ä½•ã‚‰ã‹ã®ä¾å­˜æ€§ã‚’æŒã¤ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ã“ã¨ãŒå‡ºæ¥ã‚‹ã€‚\nã“ã‚Œã¯ã€RNNãŒãƒ¬ã‚¤ãƒ¤ã®å†…éƒ¨ã«éš ã‚Œå¤‰æ•°ã‚’æŒã¤ã“ã¨ã§ã€éå»ã®å¤‰æ•°ã‚’è¨˜æ†¶ã—ã¦ã„ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚\né€šå¸¸ã®RNNã§ã¯ã€å­¦ç¿’ãƒãƒƒãƒã”ã¨ã«éš ã‚Œå¤‰æ•°ã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ãŒã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã§ã¯éš ã‚Œå¤‰æ•°ã‚’ä¿æŒã™ã‚‹ã“ã¨ã§ã€å­¦ç¿’ã‚’é«˜é€ŸåŒ–ã§ãã‚‹ã€‚\nKerasã«ã¯ã€å˜ç´”ãªRNNã§ã‚ã‚‹SimpleRNNã®ã»ã‹ã«ã€LSTMã‚„GRUã¨ã„ã£ãŸRNNãƒ¬ã‚¤ãƒ¤ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŒã€ã“ã‚Œã‚‰3ã¤ã®RNNãƒ¬ã‚¤ãƒ¤ã¯å…¨ã¦ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã‚’åˆ©ç”¨ã§ãã‚‹ã€‚\nãªãŠã€æœ¬è¨˜äº‹ã§ã¯ã€Tensorflowçµ±åˆç‰ˆã®Keras(tf.keras)ã‚’ç”¨ã„ãŸãŒã€å˜ç‹¬ç‰ˆã®Kerasã§ã‚‚ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã‚’åˆ©ç”¨ã§ãã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3 4 5  import numpy as np import pandas as pd from sklearn.preprocessing import StandardScaler from tensorflow.keras.models import Sequential from tensorflow.keras.layers import Dense, SimpleRNN, GRU, LSTM   ã¾ãŸã€ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®Gistã«ã¾ã¨ã‚ã¦ã„ã‚‹ã€‚\nKerasã§ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã‚’ä½¿ã£ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ Â· GitHub\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.3   NumPy 1.16.2   Pandas 0.24.2   sklearn 0.20.3   TensorFlow 1.14.0    ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNN ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\nå˜ç´”ãªRNN(SimpleRNN)ã‚„LSTM, GRUã¨ã„ã£ãŸRNNãƒ¬ã‚¤ãƒ¤ã¯ã€éå»ã®å¤‰æ•°ã‚’è¨˜æ†¶ã™ã‚‹ãŸã‚ã€å†…éƒ¨ã«å¤‰æ•°ã‚’æŒã£ã¦ã„ã‚‹ã€‚ä¾‹ã¨ã—ã¦ã€SimpleRNNã®æ¦‚å¿µã‚’ä¸‹å›³ã«ç¤ºã™ã€‚\næ™‚åˆ»tã«ãŠã‘ã‚‹SimpleRNNã¸ã®å…¥åŠ›ã‚’x[t], å‡ºåŠ›ã‚’o[t], å†…éƒ¨ã®éš ã‚ŒçŠ¶æ…‹ã‚’h[t]ã¨ã™ã‚‹ã€‚ã“ã®ã¨ãã€h[t]ã¯1ã‚¹ãƒ†ãƒƒãƒ—å‰ã®éš ã‚ŒçŠ¶æ…‹h[t-1]ã‚’ç”¨ã„ã¦ã€\nh[t] = tanh( Vh[t-1] + Ux[t] )\nã¨æ›´æ–°ã•ã‚Œã‚‹ã€‚\nãŸã ã—ã€V, Uã¯é‡ã¿è¡Œåˆ—ã§ã‚ã‚‹ã€‚\nã¾ãŸã€å‡ºåŠ›o[t]ã¯ã€æ¬¡å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\no[t] = f( Wh[t] )\nãŸã ã—ã€Wã¯é‡ã¿è¡Œåˆ—ã€fã¯æ´»æ€§åŒ–é–¢æ•°ï¼ˆReLUã‚„ã‚·ã‚°ãƒ¢ã‚¤ãƒ‰é–¢æ•°ãªã©ï¼‰ã§ã‚ã‚‹ã€‚\nå›³ã®å‡ºå…¸ï¼šWikipedia\né€šå¸¸ã®RNNã§å†…éƒ¨çŠ¶æ…‹ãŒä¿æŒã•ã‚Œã‚‹ã®ã¯ã€é€£ç¶šã—ãŸãƒ‡ãƒ¼ã‚¿ãŒä¸ãˆã‚‰ã‚ŒãŸæœŸé–“ã®ã¿ã§ã‚ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿ãŒé€”åˆ‡ã‚Œã‚‹ã¨ã€å†…éƒ¨çŠ¶æ…‹hã¯ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã€‚\nã“ã“ã§ã€æ¬¡ã«ä¸ãˆã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ãŒã€å‰ã®ãƒ‡ãƒ¼ã‚¿ã«é€£ç¶šã—ã¦ã„ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚\nä»¥ä¸‹ã®å›³ã¯ã€èª¬æ˜å¤‰æ•°ã®æ•°ãŒ1ã§ã€ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚‚1ã®å ´åˆã§ã‚ã‚‹ã€‚ä¸€åº¦ã«å…¥åŠ›ãŒ3ã¤é€£ç¶šã™ã‚‹å ´åˆã€x[0]ï½x[2]ãŒä¸ãˆã‚‰ã‚ŒãŸå¾Œã«ã€x[3]ï½x[5]ãŒä¸ãˆã‚‰ã‚Œã‚‹ï¼ˆä¸‹å›³å‚ç…§ï¼‰ã€‚\nx[2]ãŒä¸ãˆã‚‰ã‚ŒãŸã¨ãã€å†…éƒ¨çŠ¶æ…‹ã¯h[2]ã§ã‚ã‚‹ãŒã€ãã®æ¬¡ã«x[3]ä»¥é™ã®ãƒ‡ãƒ¼ã‚¿ãŒé€£ç¶šã—ã¦ä¸ãˆã‚‰ã‚Œã‚‹ã®ã§ã‚ã‚Œã°ã€å†…éƒ¨çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã›ãšã«ãã®ã¾ã¾å¼•ãç¶™ãæ–¹ãŒè‰¯ã„ã€‚\nã“ã‚Œã¯ã€ä»¥ä¸‹ã®ç†ç”±ã«ã‚ˆã‚‹ã€‚\n å†…éƒ¨çŠ¶æ…‹ã‚’å¼•ãç¶™ãã“ã¨ã§ã€å­¦ç¿’ï¼ˆé‡ã¿è¡Œåˆ—ã®æ›´æ–°ï¼‰ã‚’é«˜é€ŸåŒ–ã§ãã‚‹ã€‚ ãƒãƒƒãƒã”ã¨ã«å†…éƒ¨çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹å‡¦ç†ãŒä¸è¦ã«ãªã‚‹ã€‚  ã“ã®ã‚ˆã†ã«ã€ãƒãƒƒãƒé–“ã§å†…éƒ¨çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹RNNã‚’ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã¨ã„ã†ã€‚\nã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã¨åŒºåˆ¥ã™ã‚‹ãŸã‚ã€å¾“æ¥ã®ãƒãƒƒãƒã”ã¨ã«å†…éƒ¨çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹RNNã‚’ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ (stateless) RNNã¨å‘¼ã¶ã€‚\næœ€å¾Œã«ã€ãƒ‡ãƒ¼ã‚¿ãŒãƒãƒƒãƒã§ä¸ãˆã‚‰ã‚Œã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚\nä¸‹å›³ã§ã¯ãƒãƒƒãƒã‚µã‚¤ã‚ºã‚’5ã¨ã—ãŸã€‚2ç•ªç›®ã®ãƒãƒƒãƒã§ä¸ãˆã‚‹ãƒ‡ãƒ¼ã‚¿ã¯ã€ãã‚Œãã‚Œ1ç•ªç›®ã®ãƒãƒƒãƒã§ä¸ãˆã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦ã€æ™‚é–“çš„ã«é€£ç¶šã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nKerasã®ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNN Kerasã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã‚’ä½¿ã†å ´åˆã«ã¯ã€ä»¥ä¸‹ã®ç‚¹ã«ç•™æ„ã™ã‚‹ã€‚\n ãƒ‡ãƒ¼ã‚¿ã®ä¸¦ã³ã¯æ™‚ç³»åˆ—é †ã¨ã™ã‚‹ï¼ˆã‚·ãƒ£ãƒƒãƒ•ãƒ«ç¦æ­¢ï¼‰ ã‚¨ãƒãƒƒã‚¯æ¯ã«ãƒ¢ãƒ‡ãƒ«ã®å†…éƒ¨çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹ ãƒ‡ãƒ¼ã‚¿ã®é•·ã•ã¯ãƒãƒƒãƒã‚µã‚¤ã‚ºã®æ•´æ•°å€ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„\nå…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ã¯å¾Œè¿°ã™ã‚‹ã€‚  å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ æ°—æ¸©ã®äºˆæ¸¬ã‚’å¯¾è±¡ã¨ã—ã¦ã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã¨ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹RNNã‚’æ¯”è¼ƒã™ã‚‹ã€‚\næ°—æ¸©ã®ãƒ‡ãƒ¼ã‚¿ã¯ã€æ°—è±¡åºã‹ã‚‰å–å¾—ã—ãŸ2009å¹´1æœˆ1æ—¥ã‹ã‚‰2018å¹´12æœˆ31æ—¥ã¾ã§ã®å¤§é˜ªã®æ°—æ¸©ã§ã‚ã‚‹ã€‚1æ™‚é–“å‘¨æœŸã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã¯87,648ç‚¹ã«ãªã‚‹ã€‚\nPythonã§æ‰±ã„ã‚„ã™ã„ã‚ˆã†ã«ãƒ‡ãƒ¼ã‚¿ã‚’åŠ å·¥ã—ã€CSVå½¢å¼ã¨ã—ãŸã€‚ä»¥ä¸‹ã®Dropboxã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ï¼ˆDropboxã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²ã¯ä¸è¦ï¼‰ã€‚\nDropbox - osaka_temperature2009_2018.csv\nã‚°ãƒ©ãƒ•ã«ã™ã‚‹ã¨ä»¥ä¸‹ã®é€šã‚Šã€‚ãŸã ã—ã€æ¬ æå€¤ãŒã‚ã‚‹ã®ã§ç·šå½¢è£œé–“ã—ã¦ã„ã‚‹ã€‚\n1 2 3 4  df = pd.read_csv(\u0026#34;osaka_temperature2009_2018.csv\u0026#34;, index_col=0, parse_dates=True) df = df.interpolate(method=\u0026#34;linear\u0026#34;) df.plot()   ã¾ãŸã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§æ‰±ãˆã‚‹ã‚ˆã†ã«ã€StandardScalerã§ã‚ã‚‰ã‹ã˜ã‚æ¨™æº–åŒ–ã—ã¦ãŠãã€‚\n1 2 3  ss = StandardScaler() std = ss.fit_transform(df) std = std.astype(np.float32)   StandardScalerã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã€‚\nScikit-learnã§ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã™ã‚‹\næ¬¡ã«ã€èª¬æ˜å¤‰æ•°ã¨ç›®çš„å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã€‚\nã“ã“ã§ã¯ã€éå»6æ™‚é–“ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ã€1æ™‚é–“å¾Œã®æ°—æ¸©ã‚’äºˆæ¸¬ã™ã‚‹ã€‚ã™ãªã‚ã¡ã€timestepsã¯6ã¨ã™ã‚‹ã€‚\nãƒãƒƒãƒã‚µã‚¤ã‚ºã«ç‰¹ã«åˆ¶ç´„ã¯ãªã„ãŒã€é…åˆ—ã‚’å¤‰å½¢ã™ã‚‹ã ã‘ã§ç°¡å˜ã«å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«ã€ãƒãƒƒãƒã‚µã‚¤ã‚ºã¯timestepsã¨åŒã˜6ã¨ã™ã‚‹ã€‚\nâ€»ãƒãƒƒãƒã‚µã‚¤ã‚ºãŒ6ã‚ˆã‚Šå¤§ãã„ã¨ã€åŒã˜æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒè¤‡æ•°ã®ãƒãƒƒãƒã«å«ã¾ã‚Œã‚‹ã€‚ãã®ãŸã‚ã€ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€é€æ¬¡çš„ã«å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã—ãŸæ–¹ãŒãƒ¡ãƒ¢ãƒªæ¶ˆè²»ãŒå°‘ãªã„ã€‚RNNç”¨ã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã€‚\nKerasã®æ™‚ç³»åˆ—äºˆæ¸¬ã§generatorã‚’ä½¿ã£ã¦å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã† å‰ç·¨\nKerasã®æ™‚ç³»åˆ—äºˆæ¸¬ã§generatorã‚’ä½¿ã£ã¦å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã† å¾Œç·¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  timesteps = 6 batch_size = timesteps x = np.empty([len(std)-timesteps, timesteps], dtype=np.float32) y = np.empty(len(std)-timesteps, dtype=np.float32) for i in range(len(x)): x[i] = std[i:i+timesteps].T y[i] = std[i+timesteps] data_len = batch_size*int(len(x)/batch_size) x = x[:data_len].reshape(data_len,timesteps,-1) y = y[:data_len].reshape(data_len,-1)   ã¾ãŸã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã§ã¯å†…éƒ¨çŠ¶æ…‹ãŒä¿å­˜ã•ã‚Œã‚‹ãŸã‚ã€å„ãƒãƒƒãƒã®ã‚µã‚¤ã‚ºã¯åŒã˜ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ãã®ãŸã‚ã€æœ€å¾Œã®ãƒãƒƒãƒã§ãƒ‡ãƒ¼ã‚¿ãŒä½™ã‚‰ãªã„ã‚ˆã†ã«ã€ãƒ‡ãƒ¼ã‚¿ã®é•·ã•ã‚’batch_sizeã®æ•´æ•°å€ã¨ã—ã¦ã„ã‚‹ã€‚\nãƒ¢ãƒ‡ãƒ«ã®å®šç¾©ãƒ»å­¦ç¿’ ç”¨æ„ã—ãŸæ°—æ¸©ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ã€RNNã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚\nã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ã¨ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã®2ã¤ã®ãƒ¢ãƒ‡ãƒ«ã‚’æ¯”è¼ƒã™ã‚‹ã€‚ã©ã¡ã‚‰ã®ãƒ¢ãƒ‡ãƒ«ã‚‚ã€1å±¤ç›®ã¯ãƒãƒ¼ãƒ‰æ•°10ã®SimpleRNN, 2å±¤ç›®ã¯ãƒãƒ¼ãƒ‰æ•°10ã®å…¨çµåˆ(Dense)å±¤ã¨ã™ã‚‹ã€‚ã¾ãŸã€æ´»æ€§åŒ–é–¢æ•°ã¯tanh, ã‚¨ãƒãƒƒã‚¯æ•°ã¯3ã¨ã™ã‚‹ã€‚\nã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹RNNã®ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ãƒ»å®Ÿè¡Œã™ã‚‹ã€‚\nã¾ãŸã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãƒ¢ãƒ‡ãƒ«ã¨æ¡ä»¶ã‚’ãã‚ãˆã‚‹ãŸã‚ã€fité–¢æ•°ã§shuffle=Falseã¨ã—ãŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  actfunc = \u0026#34;tanh\u0026#34; N_EPOCH = 3 model = Sequential() model.add(SimpleRNN(10, activation=actfunc, stateful=False, input_shape=(timesteps, 1))) model.add(Dense(10, activation=actfunc)) model.add(Dense(1)) model.compile(optimizer=\u0026#39;RMSprop\u0026#39;, loss=\u0026#39;mean_squared_error\u0026#39;) history = model.fit(x, y, epochs=N_EPOCH, batch_size=batch_size, verbose=1, shuffle=False)   å®Ÿè¡Œçµæœï¼š\n1 2 3 4 5 6  Epoch 1/3 87642/87642 [==============================] - 33s 374us/sample - loss: 0.0112 Epoch 2/3 87642/87642 [==============================] - 32s 366us/sample - loss: 0.0063 Epoch 3/3 87642/87642 [==============================] - 31s 354us/sample - loss: 0.0062   ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ« ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã®ãƒ¢ãƒ‡ãƒ«ã‚’å®šç¾©ãƒ»å®Ÿè¡Œã™ã‚‹ã€‚\nSimpleRNNãƒ¬ã‚¤ãƒ¤ã§stateful=Trueã¨ã™ã‚‹ã¨ã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã«ãªã‚‹ã€‚ã¾ãŸã€SimpleRNNã¨fitã®ä¸¡æ–¹ã§batch_sizeã‚’å®šç¾©ã™ã‚‹ã€‚ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãƒ¢ãƒ‡ãƒ«ã§ã¯å†…éƒ¨çŠ¶æ…‹ãŒè‡ªå‹•ã§ãƒªã‚»ãƒƒãƒˆã•ã‚Œãªã„ãŸã‚ã€ã‚¨ãƒãƒƒã‚¯æ¯ã«model.reset_states()ã§ãƒªã‚»ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  model = Sequential() model.add(SimpleRNN(10, activation=actfunc, stateful=True, input_shape=(timesteps, 1), batch_size=batch_size)) model.add(Dense(10, activation=actfunc)) model.add(Dense(1)) model.compile(optimizer=\u0026#39;RMSprop\u0026#39;, loss=\u0026#39;mean_squared_error\u0026#39;) for i in range(N_EPOCH): history = model.fit(x, y, epochs=1, batch_size=batch_size, verbose=1, shuffle=False) model.reset_states()   1 2 3  87642/87642 [==============================] - 30s 343us/sample - loss: 0.0074 87642/87642 [==============================] - 30s 337us/sample - loss: 0.0061 87642/87642 [==============================] - 30s 339us/sample - loss: 0.0061   ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹ã¨ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã‚’æ¯”è¼ƒã™ã‚‹ã¨ã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãŒ1ã‚¨ãƒãƒƒã‚¯ã®å®Ÿè¡Œæ™‚é–“ãŒã‚„ã‚„çŸ­ã„ã€‚ã¾ãŸã€1ã‚¨ãƒãƒƒã‚¯ç›®ã®æå¤±é–¢æ•°ãŒå°ã•ããªã£ã¦ãŠã‚Šã€å­¦ç¿’ãŒé€Ÿã„ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nã¾ã¨ã‚ æ°—æ¸©ã®ãƒ‡ãƒ¼ã‚¿ã‚’å¯¾è±¡ã¨ã—ã¦ã€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã§å­¦ç¿’ã‚’é«˜é€Ÿã«ã§ãã‚‹ã“ã¨ã‚’ç¤ºã—ãŸã€‚\nå‚è€ƒ æ°—è±¡åº\næ°—è±¡åºï½œéå»ã®æ°—è±¡ãƒ‡ãƒ¼ã‚¿æ¤œç´¢\nå¤§é˜ªã®æ°—æ¸©ãƒ‡ãƒ¼ã‚¿(Dropbox)\nDropbox - osaka_temperature2009_2018.csv\nä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰(Gist)\nKerasã§ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã‚’ä½¿ã£ãŸã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ Â· GitHub\n","description":"Kerasã®ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":71,"section":"posts","tags":["Python","Keras"],"title":"Kerasã®ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«RNNã§å­¦ç¿’ã‚’é«˜é€ŸåŒ–ã™ã‚‹","uri":"https://helve-blog.com/posts/python/keras-stateful-rnn/"},{"content":"ã¯ã˜ã‚ã« ã“ã®è¨˜äº‹ã¯å‰ç·¨ã®ç¶šãã§ã‚ã‚‹ã€‚ä½œæˆã—ãŸgeneratorã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ãŸæ™‚ç³»åˆ—äºˆæ¸¬ã®æ–¹æ³•ã‚’è§£èª¬ã™ã‚‹ã€‚\nå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ å›³ã®ã‚ˆã†ã«ã€\n[-1, -1, 0, 0, 1, 1, 0, 0, \u0026hellip;]\nã‚’ç¹°ã‚Šè¿”ã™æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒä¸ãˆã‚‰ã‚ŒãŸã¨ãã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å€¤ã‚’äºˆæ¸¬ã•ã›ã‚‹ã€‚\næ­£ã—ãäºˆæ¸¬ã™ã‚‹ãŸã‚ã«ã¯ã€æœ€ä½ã§ã‚‚3å€‹ä»¥ä¸Šã®éå»ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜æ†¶ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nä¾‹ãˆã°ã€[0, 0]ã¨ãƒ‡ãƒ¼ã‚¿ãŒä¸ãˆã‚‰ã‚Œã¦ã‚‚ã€æ¬¡ã®å€¤ã¯1ã‹-1ã‹åˆ†ã‹ã‚‰ãªã„ã€‚\nã•ã‚‰ã«1ã‚¹ãƒ†ãƒƒãƒ—å‰ã‹ã‚‰[-1, 0, 0]ã¨é€£ç¶šã—ã¦åˆã‚ã¦ã€æ¬¡ã®å€¤ãŒ1ã¨äºˆæ¸¬ã§ãã‚‹ã€‚\nèª¬æ˜å¤‰æ•°x_setã¨ç›®çš„å¤‰æ•°y_setã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä½œæˆã™ã‚‹ã€‚\nã“ã“ã§ã€x_setã¨y_setã¯è¡Œæ•°ãŒç­‰ã—ã„2æ¬¡å…ƒé…åˆ—ã§ã‚ã‚Šã€åŒã˜è¡Œã®ãƒ‡ãƒ¼ã‚¿ã¯åŒã˜æ™‚åˆ»ã®ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ã€‚\nï¼ˆå®Ÿå‹™ã§å¾—ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã‚ã‚‹ã¨æ€ã†ï¼‰\n1 2 3 4 5 6 7  x_base = np.array([-1,-1,0,0,1,1,0,0], dtype=np.float32).reshape(-1, 1) x_set = np.empty([0, 1], dtype=np.float32) for i in range(10): x_set = np.vstack([x_set, x_base]) # èª¬æ˜å¤‰æ•° y_set = x_set.copy() # ç›®çš„å¤‰æ•°   å­¦ç¿’ åˆã‚ã«ã€x_setã¨y_setã‚’ã€è‡ªä½œã—ãŸå­¦ç¿’ç”¨ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ReccurentTrainingGeneratorã«ä¸ãˆã‚‹ã€‚\nã“ã“ã§ã€batch_sizeã¯10, timestepsã¯5ã¨ã—ãŸã€‚\nã¾ãŸã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’äºˆæ¸¬ã™ã‚‹ãŸã‚ã€delayã¯1ã¨ã—ãŸã€‚\n1 2 3 4  timesteps = 5 RTG = ReccurentTrainingGenerator(x_set, y_set, batch_size=10, timesteps=timesteps, delay=1)   æ¬¡ã«ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã€å­¦ç¿’ã•ã›ã‚‹ã€‚\n1å±¤ç›®ã¯SimpleRNNãƒ¬ã‚¤ãƒ¤ã€2å±¤ç›®ã¯å…¨çµåˆãƒ¬ã‚¤ãƒ¤ã¨ã™ã‚‹ã€‚ã¨ã‚‚ã«ãƒãƒ¼ãƒ‰æ•°ã¯10ã§ã‚ã‚‹ã€‚\nã¾ãŸã€å­¦ç¿’ã«ã¯é€šå¸¸ã®fitãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãªãã€fit_generatorãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦ã€å¼•æ•°ã«ReccurentTrainingGeneratorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ã¨ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11  actfunc = \u0026#34;tanh\u0026#34; model = Sequential() model.add(SimpleRNN(10, activation=actfunc, batch_input_shape=(None, timesteps, 1))) model.add(Dense(10, activation=actfunc)) model.add(Dense(1)) model.compile(optimizer=\u0026#39;sgd\u0026#39;, loss=\u0026#39;mean_squared_error\u0026#39;) history = model.fit_generator(RTG, epochs=20, verbose=1) # å­¦ç¿’ã™ã‚‹   äºˆæ¸¬ æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã€ä»¥ä¸‹ã®é…åˆ—x_testã‚’ä¸ãˆã‚‹ã€‚ã“ã‚Œã«ç¶šããƒ‡ãƒ¼ã‚¿ï¼ˆæ­£è§£ãƒ‡ãƒ¼ã‚¿ï¼‰ã¯1ã§ã‚ã‚‹ã€‚\nx_testã‚’ReccurentPredictingGeneratorã‚¯ãƒ©ã‚¹ã«ä¸ãˆã‚‹ã€‚\näºˆæ¸¬ã«ã¯ã€é€šå¸¸ã®predictãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãªãã€predict_generatorãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8  x_test = np.array([-1,-1,0,0,1], dtype=np.float32).reshape(-1, 1) # æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ RPG = ReccurentPredictingGenerator(x_test, batch_size=1, timesteps=5) # äºˆæ¸¬ç”¨ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ pred = model.predict_generator(RPG) # äºˆæ¸¬ã™ã‚‹ print(pred)   å®Ÿè¡Œçµæœ\n1  [[1.011917]]   äºˆæ¸¬å€¤ã¯1.012ã¨ãªã‚Šã€æ­£è§£(1)ã«è¿‘ã„å€¤ã¨ãªã£ãŸã€‚\nå‚è€ƒ å‰å›ã¨ä»Šå›ã®è¨˜äº‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã‚’Githubã«ãŠã„ã¦ã„ã‚‹ã€‚\nhttps://gist.github.com/helve2017/c20d6106a5dab00a8afa942584b60580\nKerasã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã€‚\nSequentialãƒ¢ãƒ‡ãƒ« - Keras Documentation\nãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ - Keras Documentation\n","description":"å‰ç·¨ã§ä½œæˆã—ãŸæ™‚ç³»åˆ—äºˆæ¸¬ç”¨generatorã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ã¦äºˆæ¸¬ã‚’è¡Œã†ã€‚","id":72,"section":"posts","tags":["Python","Keras"],"title":"Kerasã®æ™‚ç³»åˆ—äºˆæ¸¬ã§generatorã‚’ä½¿ã£ã¦å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã† å¾Œç·¨","uri":"https://helve-blog.com/posts/python/keras-rnn-generator-2/"},{"content":"ã¯ã˜ã‚ã« å‰å›ã€Kerasã®Recurrentãƒ¬ã‚¤ãƒ¤ã‚’ä½¿ã£ãŸæ™‚ç³»åˆ—äºˆæ¸¬ã‚’æ‰±ã£ãŸã€‚\nKerasã‚’ä½¿ã£ãŸRNN, GRU, LSTMã«ã‚ˆã‚‹æ™‚ç³»åˆ—äºˆæ¸¬\nã“ã®ã¨ãã€Reccurentå±¤ã«å…¥åŠ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ä¸‹å›³ã®ã‚ˆã†ã«å¤‰å½¢ã—ã¦ã„ãŸãŒã€ã“ã®æ–¹æ³•ã§ã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºãŒç´„timestepså€ã«å¢—åŠ ã—ã¦ã—ã¾ã†ã€‚\nãã“ã§ã€Pythonã®ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ (generator) ã‚’ä½¿ã„ã€ãƒ‡ãƒ¼ã‚¿ã‚’å‘¼ã³å‡ºã™ã¨ãã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã ã‘å¤‰å½¢ã™ã‚‹ã“ã¨ã§ã€å¤§å®¹é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†å ´åˆã§ã‚‚ãƒ¡ãƒ¢ãƒªãŒä¸è¶³ã—ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚\nãªãŠã€ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã¨ã¯ã€foræ–‡ãªã©ã‚’ä½¿ã£ã¦è¦ç´ ã‚’é€æ¬¡çš„ã«å‡ºåŠ›ã§ãã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Šã€ãªãŠã‹ã¤ã€1è¦ç´ ã‚’å–ã‚Šå‡ºãã†ã¨ã™ã‚‹åº¦ã«å‡¦ç†ã‚’è¡Œã†ã‚‚ã®ã§ã‚ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã«é–¢ã™ã‚‹çŸ¥è­˜ã¯å¿…è¦ãªã„ãŒã€è©³ç´°ã‚’çŸ¥ã‚ŠãŸã„æ–¹ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã®ã“ã¨ã€‚\nPythonã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿ã¨ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ - Qiita\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Anaconda3 2019.03   Python 3.7.3   TensorFlow 1.13.1   keras 2.2.4   NumPy 1.16.2    æœ¬è¨˜äº‹ã§ã¯ã€Pythonã§ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3 4  import numpy as np from keras.utils import Sequence from keras.models import Sequential from keras.layers import Dense, SimpleRNN   Sequentialãƒ¢ãƒ‡ãƒ«ã®generatorã«é–¢ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ Kerasã®Sequentialãƒ¢ãƒ‡ãƒ«ã«ã¯ã€generatorã‚’ä½¿ã£ãŸå­¦ç¿’ãƒ»æ¤œè¨¼ãƒ»äºˆæ¸¬ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã€‚\nå­¦ç¿’ã¯fit_generatorãƒ¡ã‚½ãƒƒãƒ‰ã€æ¤œè¨¼ã¯evaluate_generatorãƒ¡ã‚½ãƒƒãƒ‰ã€äºˆæ¸¬ã¯predict_generatorãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãã‚Œãã‚Œç”¨ã„ã‚‹ã€‚\nfit_generatorãƒ¡ã‚½ãƒƒãƒ‰ã¨predict_generatorãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ç°¡å˜ã«è§£èª¬ã™ã‚‹ã€‚ã“ã“ã§ã¯ä¸€éƒ¨ã®å¼•æ•°ã—ã‹è¨˜è¼‰ã—ã¦ã„ãªã„ãŸã‚ã€å…¨ã¦ã®å¼•æ•°ã‚’çŸ¥ã‚ŠãŸã„æ–¹ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã®ã“ã¨ã€‚\nSequentialãƒ¢ãƒ‡ãƒ« - Keras Documentation\nfit_generatorãƒ¡ã‚½ãƒƒãƒ‰ 1 2  fit_generator(self, generator, epochs=1, validation_data=None, shuffle=True)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\ngenerator: å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®generatorã‚¯ãƒ©ã‚¹ã€‚å‘¼ã³å‡ºã™åº¦ã«(inputs, targets)ã®ã‚¿ãƒ—ãƒ«ã‚’è¿”ã™ã€‚\nepochs: ã‚¨ãƒãƒƒã‚¯æ•° (int). ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯1.\nvalidation_data: æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã®generatorã‚¯ãƒ©ã‚¹ã¾ãŸã¯(inputs, targets)ã®ã‚¿ãƒ—ãƒ«ï¼ˆä»»æ„ï¼‰ã€‚\nshuffle: å„è©¦è¡Œã®åˆã‚ã«ãƒãƒƒãƒã®é †ç•ªã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹ã‹ã©ã†ã‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\npredict_generatorãƒ¡ã‚½ãƒƒãƒ‰ 1  predict_generator(self, generator)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\ngenerator: èª¬æ˜å¤‰æ•°ã‚’è¿”ã™generatorã‚¯ãƒ©ã‚¹ã€‚\ngeneratorã‚¯ãƒ©ã‚¹ã®ä½œæˆ Recurrentãƒ¬ã‚¤ãƒ¤ã«å…¥åŠ›ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹generatorã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã€‚\ngenaratorã‚¯ãƒ©ã‚¹ã¯ã€keras.utils.Sequence()ã‚¯ãƒ©ã‚¹ã‚’åŸºåº•ã‚¯ãƒ©ã‚¹ã¨ã™ã‚‹ã€‚\nã¾ãŸã€å­¦ç¿’(fit_generatorãƒ¡ã‚½ãƒƒãƒ‰)ã§ã¯èª¬æ˜å¤‰æ•°ã¨ç›®çš„å¤‰æ•°ã®ä¸¡æ–¹ã€äºˆæ¸¬(predict_generatorãƒ¡ã‚½ãƒƒãƒ‰)ã§ã¯èª¬æ˜å¤‰æ•°ã®ã¿æ‰±ã†ãŸã‚ã€ãã‚Œãã‚Œç•°ãªã‚‹generatorã‚¯ãƒ©ã‚¹ã‚’ä½œã‚‹ã€‚\nå­¦ç¿’ç”¨generatorã‚¯ãƒ©ã‚¹ æ¬¡ã®ReccurentTrainingGeneratorã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ãŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48  class ReccurentTrainingGenerator(Sequence): \u0026#34;\u0026#34;\u0026#34; Reccurent ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’è¨“ç·´ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿generatorã‚¯ãƒ©ã‚¹ \u0026#34;\u0026#34;\u0026#34; def _resetindices(self): \u0026#34;\u0026#34;\u0026#34;ãƒãƒƒãƒã¨ã—ã¦å‡ºåŠ›ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä¹±æ•°ã§ç”Ÿæˆã™ã‚‹ \u0026#34;\u0026#34;\u0026#34; self.num_called = 0 # åŒä¸€ã®ã‚¨ãƒãƒƒã‚¯å†…ã§ __getitem__ã€€ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚ŒãŸå›æ•° all_idx = np.random.permutation(np.arange(self.num_samples)) remain_idx = np.random.choice(np.arange(self.num_samples), size=(self.steps_per_epoch*self.batch_size-len(all_idx)), replace=False) self.indices = np.hstack([all_idx, remain_idx]).reshape(self.steps_per_epoch, self.batch_size) def __init__(self, x_set, y_set, batch_size, timesteps, delay): \u0026#34;\u0026#34;\u0026#34; x_set : èª¬æ˜å¤‰æ•° (ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°Ã—ç‰¹å¾´é‡æ•°)ã®NumPyé…åˆ— y_set : ç›®çš„å¤‰æ•° (ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°Ã—1)ã®NumPyé…åˆ— batch_size: ãƒãƒƒãƒã‚µã‚¤ã‚º timesteps : ã©ã®ç¨‹åº¦éå»ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’Reccurentå±¤ã«ä¸ãˆã‚‹ã‹ delay : ç›®çš„å¤‰æ•°ã‚’ã©ã®ç¨‹åº¦é…ã‚‰ã›ã‚‹ã‹ \u0026#34;\u0026#34;\u0026#34; self.x = np.array(x_set) self.y = np.array(y_set) self.batch_size = batch_size self.steps = timesteps self.delay = delay self.num_samples = len(self.x)-timesteps-delay+1 self.steps_per_epoch = int(np.ceil( self.num_samples / float(batch_size))) self._resetindices() def __len__(self): \u0026#34;\u0026#34;\u0026#34; 1ã‚¨ãƒãƒƒã‚¯ã‚ãŸã‚Šã®ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’è¿”ã™ \u0026#34;\u0026#34;\u0026#34; return self.steps_per_epoch def __getitem__(self, idx): \u0026#34;\u0026#34;\u0026#34; ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒãƒã«ã¾ã¨ã‚ã¦å‡ºåŠ›ã™ã‚‹ \u0026#34;\u0026#34;\u0026#34; indices_temp = self.indices[idx] batch_x = np.array([self.x[i:i+self.steps] for i in indices_temp]) batch_y = self.y[indices_temp+self.steps+self.delay-1] if self.num_called==(self.steps_per_epoch-1): self._resetindices() # 1ã‚¨ãƒãƒƒã‚¯å†…ã®å…¨ã¦ã®ãƒãƒƒãƒã‚’è¿”ã™ã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹ else: self.num_called += 1 return batch_x, batch_y   ä»¥ä¸‹ã€ç°¡å˜ãªè§£èª¬ã§ã‚ã‚‹ã€‚\nKerasã®ä»•æ§˜ä¸Šã€Sequenceã‚’ç¶™æ‰¿ã™ã‚‹ã‚¯ãƒ©ã‚¹ã¯ã€__len__, __getitem__ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‚™ãˆãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚\n__len__ãƒ¡ã‚½ãƒƒãƒ‰ã¯1ã‚¨ãƒãƒƒã‚¯ã§ç”Ÿæˆã™ã‚‹ãƒãƒƒãƒæ•°ã‚’è¿”ã™ã€‚\nã¾ãŸã€__getitem__ãƒ¡ã‚½ãƒƒãƒ‰ã¯ReccurentTrainingGeneratorã‚¯ãƒ©ã‚¹ã‚’å‘¼ã³å‡ºã™åº¦ã«å®Ÿè¡Œã•ã‚Œã€èª¬æ˜å¤‰æ•°ã¨ç›®çš„å¤‰æ•°ã‚’ãƒãƒƒãƒã§è¿”ã™ã€‚\n__getitem__ãƒ¡ã‚½ãƒƒãƒ‰ã§è¿”ã•ã‚Œã‚‹batch_xã¨batch_yã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®å›³ã®é€šã‚Šã§ã‚ã‚‹ã€‚\nã“ã“ã§ã€x1, x2, x3ã¯ç•°ãªã‚‹èª¬æ˜å¤‰æ•°ã§ã‚ã‚Šã€æ‹¬å¼§å†…ã®æ•°å­—ã¯æ™‚åˆ»ã‚’ç¤ºã™ã€‚\nã¾ãŸã€batch_sizeã¯5, timestepsã¯3, delayã¯1ã§ã‚ã‚‹ã€‚\ndelayãŒ1ã¨ã¯ã€æ™‚åˆ»tã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ã€æ™‚åˆ»t+1ã®ãƒ‡ãƒ¼ã‚¿ã‚’äºˆæ¸¬ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã™ã‚‹ã€‚\nbatch_xã¯ï¼ˆãƒãƒƒãƒã‚µã‚¤ã‚ºÃ—timestepsÃ—ç‰¹å¾´é‡æ•°ï¼‰ã®3æ¬¡å…ƒé…åˆ—ã€\nbatch_yã¯ï¼ˆãƒãƒƒãƒã‚µã‚¤ã‚ºÃ—1ï¼‰ã®2æ¬¡å…ƒé…åˆ—ã§ã‚ã‚‹ã€‚\nãŸã ã—ã€å®Ÿéš›ã«ã¯ãƒãƒƒãƒæ–¹å‘ã®æ™‚ç³»åˆ—ã®ä¸¦ã³ã¯ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚Œã‚‹ã€‚\nå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ãŸReccurentTrainingGeneratorã‚’fit_generatorãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã—ã¦ã‚„ã‚Œã°ã‚ˆã„ã€‚\näºˆæ¸¬ç”¨generatorã‚¯ãƒ©ã‚¹ æ¬¡ã®ReccurentPredictingGeneratorã‚¯ãƒ©ã‚¹ã‚’å®Ÿè£…ã—ãŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  class ReccurentPredictingGenerator(Sequence): \u0026#34;\u0026#34;\u0026#34; Reccurent ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§äºˆæ¸¬ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿generatorã‚¯ãƒ©ã‚¹ \u0026#34;\u0026#34;\u0026#34; def __init__(self, x_set, batch_size, timesteps): \u0026#34;\u0026#34;\u0026#34; x_set : èª¬æ˜å¤‰æ•° (ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°Ã—ç‰¹å¾´é‡æ•°)ã®NumPyé…åˆ— batch_size: ãƒãƒƒãƒã‚µã‚¤ã‚º timesteps : ã©ã®ç¨‹åº¦éå»ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’Reccurentå±¤ã«ä¸ãˆã‚‹ã‹ \u0026#34;\u0026#34;\u0026#34; self.x = np.array(x_set) self.batch_size = batch_size self.steps = timesteps self.num_samples = len(self.x)-timesteps+1 self.steps_per_epoch = int(np.floor( self.num_samples / float(batch_size))) def __len__(self): \u0026#34;\u0026#34;\u0026#34; 1ã‚¨ãƒãƒƒã‚¯ã‚ãŸã‚Šã®ã‚¹ãƒ†ãƒƒãƒ—æ•°ã‚’è¿”ã™ \u0026#34;\u0026#34;\u0026#34; return self.steps_per_epoch def __getitem__(self, idx): \u0026#34;\u0026#34;\u0026#34; ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒƒãƒã«ã¾ã¨ã‚ã¦å‡ºåŠ›ã™ã‚‹ \u0026#34;\u0026#34;\u0026#34; start_idx = idx*self.batch_size batch_x = [self.x[start_idx+i : start_idx+i+self.steps] for i in range(self.batch_size)] return np.array(batch_x)   ç›®çš„å¤‰æ•°ã‚’å‡ºåŠ›ã›ãšã€ãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã™ã‚‹å¿…è¦ãŒãªã„ä»¥å¤–ã¯ã€ReccurentTrainingGeneratorã‚¯ãƒ©ã‚¹ã¨åŒã˜ã§ã‚ã‚‹ã€‚\n__getitem__ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯å…ˆç¨‹ã®å›³ã®batch_xã®ã¿è¿”ã•ã‚Œã‚‹ã€‚\nãŸã ã—ã€ãƒãƒƒãƒæ–¹å‘ã®æ™‚ç³»åˆ—ã®ä¸¦ã³ã¯ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚Œãªã„ã€‚\näºˆæ¸¬ç”¨ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã—ãŸReccurentPredictingGeneratorã‚’predict_generatorãƒ¡ã‚½ãƒƒãƒ‰ã«æ¸¡ã—ã¦ã‚„ã‚Œã°ã‚ˆã„ã€‚\nè¨˜äº‹ãŒé•·ããªã£ãŸãŸã‚ã€generatorã®ä½¿ã„æ–¹ã¯å¾Œç·¨ã«åˆ†ã‘ãŸã€‚\nKerasã®æ™‚ç³»åˆ—äºˆæ¸¬ã§generatorã‚’ä½¿ã£ã¦å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã† å¾Œç·¨\nå‚è€ƒ ä»Šå›ã¨æ¬¡å›ã®è¨˜äº‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã‚’Githubã«ãŠã„ã¦ã„ã‚‹ã€‚\nhttps://gist.github.com/helve2017/c20d6106a5dab00a8afa942584b60580\nKerasã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã€‚\nSequentialãƒ¢ãƒ‡ãƒ« - Keras Documentation\nãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ - Keras Documentation\n","description":"Kerasã®æ™‚ç³»åˆ—äºˆæ¸¬ã§ã€Recurrentãƒ¬ã‚¤ãƒ¤ã«å…¥åŠ›ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹generatorã‚¯ãƒ©ã‚¹ã®ä½œã‚Šæ–¹ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚","id":73,"section":"posts","tags":["Python","Keras"],"title":"Kerasã®æ™‚ç³»åˆ—äºˆæ¸¬ã§generatorã‚’ä½¿ã£ã¦å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã† å‰ç·¨","uri":"https://helve-blog.com/posts/python/keras-rnn-generator-1/"},{"content":"ã¯ã˜ã‚ã« Kerasã®RNN, GRU, LSTMãƒ¬ã‚¤ãƒ¤ã‚’ä½¿ã£ã¦æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚Kerasã‚’åˆã‚ã¦ä½¿ã‚ã‚Œã‚‹æ–¹ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ä¸‹ã•ã„ã€‚\nKeraså…¥é–€ ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹æ­£å¼¦æ³¢ã®å›å¸°\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Anaconda3 5.2.0   Python 3.6.5   TensorFlow 1.12.0   keras 2.2.4   NumPy 1.14.3   matplotlib 2.2.2    Kerasã¨TensorFlowãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã€Anaconda Promptã§ä»¥ä¸‹ã®é€šã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n1 2  conda install tensorflow conda install keras   æ¬¡ã«ã€Pythonã§ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚\n1 2 3 4  import numpy as np import matplotlib.pyplot as plt from keras.models import Sequential from keras.layers import Dense, SimpleRNN, GRU, LSTM   Recurrentãƒ¬ã‚¤ãƒ¤ Kerasã«ã¯ã€ã„ãã¤ã‹ã®Recurrentï¼ˆå†å¸°ï¼‰ãƒ¬ã‚¤ãƒ¤ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€‚æœ¬ç¨¿ã§ã¯RNN, GRU, LSTMã‚’ä½¿ã£ã¦ã€å­¦ç¿’é€Ÿåº¦ã‚’ç°¡å˜ã«æ¯”è¼ƒã™ã‚‹ã€‚\nRNN (Recurrent Neural Network) ã¯ã€1ã‚¹ãƒ†ãƒƒãƒ—å‰ã®å‡ºåŠ›ã‚’è‡ªèº«ã®å…¥åŠ›ã¨ã—ã¦ä¸ãˆã‚‹ã“ã¨ã§ã€éå»ã®æƒ…å ±ã‚’åˆ©ç”¨ã§ãã‚‹ã€‚ãŸã ã—ã€RNNã§ã¯é•·æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ãˆãªã„ãŸã‚ã€GRU (Gated Recurrent Unit) ã‚„LSTM (Long Short Term Memory) ãŒä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã€‚\nGRUã¨LSTMã¯ã€RNNã‚’æ”¹è‰¯ã—ãŸãƒ¬ã‚¤ãƒ¤ã§ã‚ã‚Šã€ã‚ˆã‚Šé•·æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ã®ä¾å­˜é–¢ä¿‚ã‚’å­¦ç¿’ã§ãã‚‹ã€‚GRUã¯LSTMã«æ¯”ã¹ã¦å­¦ç¿’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå°‘ãªãã€è¨ˆç®—æ™‚é–“ãŒçŸ­ã„ç‰¹å¾´ãŒã‚ã‚‹ã€‚\nå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ å›³ã®ã‚ˆã†ã«ã€\n[-1, -1, 0, 0, 1, 1, 0, 0, \u0026hellip;]\nã‚’ç¹°ã‚Šè¿”ã™æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒä¸ãˆã‚‰ã‚ŒãŸã¨ãã€æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å€¤ã‚’äºˆæ¸¬ã•ã›ã‚‹ã€‚æ­£ã—ãäºˆæ¸¬ã™ã‚‹ãŸã‚ã«ã¯ã€æœ€ä½ã§ã‚‚3å€‹ä»¥ä¸Šã®éå»ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¨˜æ†¶ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nä¾‹ãˆã°ã€[0, 0]ã¨ãƒ‡ãƒ¼ã‚¿ãŒä¸ãˆã‚‰ã‚Œã¦ã‚‚ã€æ¬¡ã®å€¤ã¯1ã‹-1ã‹åˆ†ã‹ã‚‰ãªã„ã€‚ã•ã‚‰ã«1ã‚¹ãƒ†ãƒƒãƒ—å‰ã‹ã‚‰[-1, 0, 0]ã¨é€£ç¶šã—ã¦åˆã‚ã¦ã€æ¬¡ã®å€¤ãŒ1ã¨äºˆæ¸¬ã§ãã‚‹ã€‚\nKerasã§å­¦ç¿’ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã®é…åˆ—ã®å½¢çŠ¶ã¯ä»¥ä¸‹ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚\nå·¦å´ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’ã€èª¬æ˜å¤‰æ•°xdataã¨ç›®çš„å¤‰æ•°ydataã«å¤‰æ›ã™ã‚‹ã€‚\n1å€‹ã®ç›®çš„å¤‰æ•°ã«å¯¾ã—ã¦ã€äºˆæ¸¬ã«ç”¨ã„ã‚‹ã‚¹ãƒ†ãƒƒãƒ—æ•°ãŒtimestepsã§ã‚ã‚‹ã€‚\nä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆã¨å¤‰æ›ã‚’è¡Œã†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  timesteps = 5 x_base = np.array([-1,-1,0,0,1,1,0,0], dtype=np.float32) x = np.empty(0, dtype=np.float32) for i in range(1000): x = np.hstack([x, x_base]) xdata = np.array([x[i:i+timesteps] for i in range(len(x)-timesteps)]) xdata = xdata.reshape(xdata.shape[0], timesteps, -1) ydata = x[timesteps:].reshape(xdata.shape[0], -1)   timestepsã¯5ã¨ã—ãŸã€‚\nã¾ãŸã€reshapeãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€\nxdataã¯ï¼ˆãƒ‡ãƒ¼ã‚¿æ•°Ã—timestepsÃ—èª¬æ˜å¤‰æ•°ã®æ•°ï¼‰ã®3æ¬¡å…ƒé…åˆ—ã€\nydataã¯ï¼ˆãƒ‡ãƒ¼ã‚¿æ•°Ã—ç›®çš„å¤‰æ•°ã®æ•°ï¼‰ã®2æ¬¡å…ƒé…åˆ—\nã«ãã‚Œãã‚Œå¤‰æ›ã—ã¦ã„ã‚‹ã€‚\nkerasã«ã‚ˆã‚‹å­¦ç¿’ NNãƒ¢ãƒ‡ãƒ« èª¬æ˜å¤‰æ•°ã¨ç›®çš„å¤‰æ•°ã®æ¬¡å…ƒã¯ã¨ã‚‚ã«1ãªã®ã§ã€å…¥åŠ›å±¤ã¨å‡ºåŠ›å±¤ã®ãƒãƒ¼ãƒ‰æ•°ã¯1ã¨ãªã‚‹ã€‚\n1å±¤ç›®ã‚’RNNãƒ¬ã‚¤ãƒ¤ã€2å±¤ç›®ã‚’å…¨çµåˆ(Dense)ãƒ¬ã‚¤ãƒ¤ã¨ã™ã‚‹ã€‚\nä¸­é–“ãƒãƒ¼ãƒ‰æ•°ã¯ãã‚Œãã‚Œ10ã¨ã—ã€æ´»æ€§åŒ–é–¢æ•°ã¯tanhã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7  actfunc = \u0026#34;tanh\u0026#34; model = Sequential() model.add(SimpleRNN(10, activation=actfunc, batch_input_shape=(None, timesteps, 1))) model.add(Dense(10, activation=actfunc)) model.add(Dense(1))   ãªãŠã€SimpleRNNãƒ¬ã‚¤ãƒ¤ã®batch_input_shapeã«ã¯ã€\nï¼ˆãƒãƒƒãƒæ•°ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ã‚¹ãƒ†ãƒƒãƒ—æ•°ã€èª¬æ˜å¤‰æ•°ã®æ•°ï¼‰\nã‚’ã‚¿ãƒ—ãƒ«ã§æŒ‡å®šã™ã‚‹ã€‚\nãƒãƒƒãƒæ•°ã¯å­¦ç¿’æ™‚ã«æŒ‡å®šã™ã‚‹ã®ã§ã€ã“ã“ã§ã¯Noneã¨ã™ã‚‹ã€‚\nã¾ãŸã€GRUãƒ¬ã‚¤ãƒ¤ã‚„LSTMãƒ¬ã‚¤ãƒ¤ã«å¤‰æ›´ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«SimpleRNNã‚’GRU, LSTMã«å¤‰æ›´ã™ã‚‹ã ã‘ã§ã‚ˆã„ã€‚\n1 2  model.add(GRU(10, activation=actfunc, batch_input_shape=(None, timesteps, 1)))   1 2  model.add(LSTM(10, activation=actfunc, batch_input_shape=(None, timesteps, 1)))   å­¦ç¿’ã®å®Ÿè¡Œ NNãƒ¢ãƒ‡ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚PCã®æ€§èƒ½ã«ã‚ˆã‚‹ãŒã€æ•°åç§’ç¨‹åº¦ã§çµ‚äº†ã™ã‚‹ã€‚\n1 2 3 4 5 6 7  model.compile(optimizer=\u0026#39;sgd\u0026#39;, loss=\u0026#39;mean_squared_error\u0026#39;) history = model.fit(xdata, ydata, batch_size=100, epochs=500, verbose=1)   å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡ å­¦ç¿’ã—ãŸãƒ¢ãƒ‡ãƒ«ã‹ã‚‰äºˆæ¸¬å€¤ã‚’å‡ºåŠ›ã™ã‚‹ï¼ˆç°¡å˜ã®ãŸã‚ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰äºˆæ¸¬ã•ã›ã‚‹ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10  pred = model.predict(xdata) fig, ax = plt.subplots() ax.plot(ydata[:20, :].reshape(-1), linewidth=0, marker=\u0026#34;o\u0026#34;, markersize=8) ax.plot(pred[:20, :].reshape(-1), linewidth=0, marker=\u0026#34;o\u0026#34;, markersize=5) ax.set_xticks(np.arange(0, 20, 2)) ax.set_yticks([-1, 0, 1]) ax.legend([\u0026#34;training\u0026#34;, \u0026#34;prediction\u0026#34;]) ax.grid() plt.show()   å‡ºåŠ›\nå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨äºˆæ¸¬å€¤ã®æœ€åˆã®20ç‚¹ã‚’æ¯”è¼ƒã™ã‚‹ï¼ˆäºˆæ¸¬å€¤ã¯RNNã§å­¦ç¿’ã—ãŸãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å‡ºåŠ›ã—ãŸã‚‚ã®ï¼‰ã€‚å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨äºˆæ¸¬å€¤ã¯ä¸€è‡´ã—ã¦ãŠã‚Šã€ã†ã¾ãå­¦ç¿’ã§ããŸã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\næ¬¡ã«ã€RNN, GRU, LSTMã®æå¤±é–¢æ•°ã®å¤‰åŒ–ã‚’æ¯”è¼ƒã™ã‚‹ã€‚æå¤±é–¢æ•°ã®å±¥æ­´ã¯ã€historyã‹ã‚‰æ¬¡ã®ã‚ˆã†ã«å–å¾—ã§ãã‚‹ã€‚\n1  loss = history.history[\u0026#34;loss\u0026#34;]   å„ãƒ¢ãƒ‡ãƒ«ã®æå¤±é–¢æ•°ã®å¤‰åŒ–ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6  fig, ax = plt.subplots() ax.plot(loss_rnn) ax.plot(loss_gru) ax.plot(loss_lstm) ax.legend([\u0026#34;RNN\u0026#34;, \u0026#34;GRU\u0026#34;, \u0026#34;LSTM\u0026#34;]) plt.show()   å‡ºåŠ›\nç¸¦è»¸ãŒæå¤±é–¢æ•°ã€æ¨ªè»¸ãŒã‚¨ãƒãƒƒã‚¯æ•°ã§ã‚ã‚‹ã€‚RNN, GRU, LSTMã®é †ã«æå¤±é–¢æ•°ã®æ¸›å°‘ãŒé€Ÿã„ã€‚å®Ÿéš›ã€å„ãƒ¬ã‚¤ãƒ¤ã®å­¦ç¿’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã“ã®é †ã«å¤šããªã£ã¦ãŠã‚Šã€ä»Šå›ã®å­¦ç¿’é€Ÿåº¦ã¨æ¯”è¼ƒã—ã¦å¦¥å½“ãªçµæœã§ã‚ã‚‹ã€‚\nâ€»ä»Šå›ã®å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã§ã¯RNNã§ã‚‚ååˆ†ã«ç²¾åº¦ã®é«˜ã„äºˆæ¸¬ãŒã§ããŸãŒã€å½“ç„¶ã€å­¦ç¿’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå¤šã„ã»ã©ãƒ¬ã‚¤ãƒ¤ã®è¡¨ç¾åŠ›ãŒé«˜ã„ãŸã‚ã€ã‚ˆã‚Šè¤‡é›‘ãªæ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ç‰¹å¾´ã‚’æŠ½å‡ºã§ãã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã€‚\nå‚è€ƒ Recurrentãƒ¬ã‚¤ãƒ¤ãƒ¼ - Keras Documentation\nå†å¸°å‹ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: RNNå…¥é–€ - Qiita\nåˆå¿ƒè€…ã®RNN(LSTM) | Kerasã§è©¦ã—ã¦ã¿ã‚‹ - Qiita\n","description":"Kerasã®RNN, GRU, LSTMãƒ¬ã‚¤ãƒ¤ã‚’ä½¿ã£ã¦æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚","id":74,"section":"posts","tags":["Python","Keras"],"title":"Kerasã‚’ä½¿ã£ãŸRNN, GRU, LSTMã«ã‚ˆã‚‹æ™‚ç³»åˆ—äºˆæ¸¬","uri":"https://helve-blog.com/posts/python/keras-recurrent-neural-network/"},{"content":"ã¯ã˜ã‚ã« ä»¥å‰ã€Chainerã®å…¥é–€è¨˜äº‹ã‚’æ›¸ã„ãŸãŒã€å®Ÿè£…ãŒå®¹æ˜“ãªKerasã‚’è©¦ã—ã¦ã¿ãŸã€‚ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ (NN) ã«ã‚ˆã‚‹å›å¸°ã®å®Ÿè£…ä¾‹ã¨ã—ã¦ã€æ­£å¼¦æ³¢ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚Kerasã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã¯TensorFlowã‚’ä½¿ã†ã€‚\nç’°å¢ƒ ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Anaconda3 5.2.0   Python 3.6.5   TensorFlow 1.12.0   Keras 2.2.4   NumPy 1.14.3   matplotlib 2.2.2    Anaconda Promptã«ã¦ä»¥ä¸‹ã®é€šã‚Šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n1 2  conda install tensorflow conda install keras   æ¬¡ã«ã€Pythonã§ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚\n1 2 3 4  import numpy as np import matplotlib.pyplot as plt from keras.models import Sequential from keras.layers import Dense   å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ x=-5ï½5ã®ç¯„å›²ã§æ­£å¼¦æ³¢ã‚’ç”Ÿæˆã™ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿æ•°ã¯10,000ç‚¹ã§ã‚ã‚‹ã€‚\nãªãŠã€å­¦ç¿’ã‚’é«˜é€ŸåŒ–ã™ã‚‹ãŸã‚ã«ã¯æ‰±ã†å¤‰æ•°ã‚’å…¨ã¦æ¨™æº–åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€ç°¡å˜ã®ãŸã‚ä»Šå›ã¯ãã®ã¾ã¾ã®å€¤ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3 4 5 6  x = np.arange(-5, 5, 0.001).astype(np.float32) y = np.sin(x) fig, ax = plt.subplots() ax.plot(x, y) plt.show()   å‡ºåŠ›\nKerasã«ã‚ˆã‚‹å­¦ç¿’ NNãƒ¢ãƒ‡ãƒ« èª¬æ˜å¤‰æ•°ã¨ç›®çš„å¤‰æ•°ã®æ¬¡å…ƒã¯ã¨ã‚‚ã«1ãªã®ã§ã€å…¥åŠ›å±¤ã¨å‡ºåŠ›å±¤ã®ãƒãƒ¼ãƒ‰æ•°ã¯1ã¨ãªã‚‹ã€‚\néš ã‚Œå±¤ã®æ•°ã¯4ã€ãƒãƒ¼ãƒ‰æ•°ã¯å…¨ã¦20ã¨ã—ãŸã€‚ã¾ãŸã€æ´»æ€§åŒ–é–¢æ•°ã¯tanhã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8  actfunc = \u0026#34;tanh\u0026#34; model = Sequential() model.add(Dense(20, activation=actfunc, input_dim=1)) model.add(Dense(20, activation=actfunc)) model.add(Dense(20, activation=actfunc)) model.add(Dense(20, activation=actfunc)) model.add(Dense(1))   ä»¥ä¸Šã®æ§˜ã«ã€Sequentialã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã€addãƒ¡ã‚½ãƒƒãƒ‰ã§å±¤ã‚’è¿½åŠ ã—ã¦ã„ãã€‚ãªãŠã€Denseã¯å…¨çµåˆå±¤ã§ã‚ã‚‹ã€‚\nå­¦ç¿’ã®å®Ÿè¡Œ modelã®complieãƒ¡ã‚½ãƒƒãƒ‰ã§æœ€é©åŒ–æ‰‹æ³•ã¨æå¤±é–¢æ•°ã‚’æŒ‡å®šã™ã‚‹ã€‚\næœ€é©åŒ–æ‰‹æ³•ã«ã¯SGD (Stochastic Gradient Descent, ç¢ºç‡çš„å‹¾é…é™ä¸‹æ³•) ã‚’ç”¨ã„ã€æå¤±é–¢æ•°ã¯äºˆæ¸¬å€¤ã¨çœŸå€¤ã®äºŒä¹—å¹³å‡èª¤å·® (mean squared error) ã¨ã™ã‚‹ã€‚\næ¬¡ã«ã€fitãƒ¡ã‚½ãƒƒãƒ‰ã§å­¦ç¿’ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nå­¦ç¿’ãƒ‡ãƒ¼ã‚¿x, yã‚’ä¸ãˆã€ãƒãƒƒãƒã‚µã‚¤ã‚ºã€ã‚¨ãƒãƒƒã‚¯æ•°ã‚’æŒ‡å®šã™ã‚‹ã€‚\nverboseå¼•æ•°ã¯ã€ä¸‹è¡¨ã®é€šã‚Šå­¦ç¿’ã®é€²è¡ŒçŠ¶æ³ã®è¡¨ç¤ºã«é–¢ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚\n   verbose ãƒ­ã‚°ã®è¡¨ç¤º     0 å‡ºåŠ›ã—ãªã„   1 ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã§å‡ºåŠ›   2 æå¤±é–¢æ•°ã®ã¿ã®ç°¡æ˜“è¡¨ç¤º    ã¾ãŸã€historyã«ã¯å­¦ç¿’æ™‚ã®ãƒ­ã‚°ãŒæ ¼ç´ã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7  model.compile(optimizer=\u0026#39;sgd\u0026#39;, loss=\u0026#39;mean_squared_error\u0026#39;) history = model.fit(x, y, batch_size=100, epochs=50, verbose=1)   å‡ºåŠ›\nå®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®é€šã‚Šå­¦ç¿’ã®é€²è¡ŒçŠ¶æ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nPCã®æ€§èƒ½ã«ã‚ˆã‚‹ãŒã€æ•°ç§’ç¨‹åº¦ã§å­¦ç¿’ã¯çµ‚äº†ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  Epoch 1/50 10000/10000 [==============================] - 1s 109us/step - loss: 0.2431 Epoch 2/50 10000/10000 [==============================] - 0s 9us/step - loss: 0.0159 Epoch 3/50 10000/10000 [==============================] - 0s 8us/step - loss: 0.0104 Epoch 4/50 10000/10000 [==============================] - 0s 8us/step - loss: 0.0091 Epoch 5/50 10000/10000 [==============================] - 0s 8us/step - loss: 0.0087 ï¼ˆç•¥ï¼‰ Epoch 50/50 10000/10000 [==============================] - 0s 8us/step - loss: 0.0032   å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡ evaluateãƒ¡ã‚½ãƒƒãƒ‰ã§æ¤œè¨¼ç”¨ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹æå¤±é–¢æ•°ã®å€¤ã‚’å‡ºåŠ›ã™ã‚‹ã€‚\næœ¬æ¥ã¯å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ãŒã€ç°¡å˜ã®ãŸã‚åŒã˜ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã„ã‚‹ã€‚\n1 2  score = model.evaluate(x, y) print(score)   å‡ºåŠ›\nå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ãŒåŒã˜ãŸã‚ã€å­¦ç¿’ã®æœ€çµ‚ã‚¨ãƒãƒƒã‚¯ã®æå¤±é–¢æ•°ã«è¿‘ã„å€¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã‚ã‚‹ã€‚\n1 2  10000/10000 [==============================] - 0s 13us/step 0.0034303181435687293   ã¾ãŸã€predictãƒ¡ã‚½ãƒƒãƒ‰ã§èª¬æ˜å¤‰æ•°ã«å¯¾ã™ã‚‹äºˆæ¸¬å€¤ã‚’å‡ºåŠ›ã™ã‚‹ã€‚\n1 2 3 4 5 6  pred = model.predict(x) fig, ax = plt.subplots() ax.plot(x, y) ax.plot(x, pred) plt.show()   å‡ºåŠ›\né’ãŒå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã€é»„è‰²ãŒNNã®å‡ºåŠ›ã§ã‚ã‚‹ã€‚xãŒ-5ã‚„5ã«è¿‘ã„é ˜åŸŸã§ã‚„ã‚„ç•°ãªã‚‹å€¤ã¨ãªã£ã¦ã„ã‚‹ãŒã€æ¦‚ã­æ­£å¼¦æ³¢ã®å½¢çŠ¶ã‚’å­¦ç¿’ã§ãã¦ã„ã‚‹ã€‚\nã¾ãŸã€å­¦ç¿’ä¸­ã®æå¤±é–¢æ•°ã®æ¨ç§»ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«å–å¾—ã§ãã‚‹ã€‚\n1 2 3 4 5  loss = history.history[\u0026#34;loss\u0026#34;] fig, ax = plt.subplots() ax.plot(loss) plt.show()   å‡ºåŠ›\næ¨ªè»¸ãŒã‚¨ãƒãƒƒã‚¯æ•°ã€ç¸¦è»¸ãŒï¼ˆå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹ï¼‰æå¤±é–¢æ•°ã§ã‚ã‚‹ã€‚æœ€åˆã®1ï½2ã‚¨ãƒãƒƒã‚¯ã§æ€¥æ¿€ã«æå¤±é–¢æ•°ãŒæ¸›å°‘ã—ã€ãã®å¾Œã¯ç·©ã‚„ã‹ã«å˜èª¿æ¸›å°‘ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\nå‚è€ƒ Home - Keras Documentation\n","description":"Kerasã‚’ä½¿ã„ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ (NN) ã«æ­£å¼¦æ³¢ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚","id":75,"section":"posts","tags":["Python","Keras"],"title":"Keraså…¥é–€ ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚‹æ­£å¼¦æ³¢ã®å›å¸°","uri":"https://helve-blog.com/posts/python/keras-introduction/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æ©Ÿæ¢°å­¦ç¿’ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªScikit-learnã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã«ã¤ã„ã¦èª¿ã¹ãŸã€‚ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã‚’è¡Œã†ã‚¯ãƒ©ã‚¹3ã¤ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã¾ã¨ã‚ã€å„å¤‰æ›ã®çµæœã‚’æ¯”è¼ƒã—ãŸã€‚\nã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã¯ã€æ‰±ã†æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã‚’ä½•ã‚‰ã‹ã®è¦å‰‡ã§å¤‰æ›ã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚æ©Ÿæ¢°å­¦ç¿’ã§æ¡æ•°ã®ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’ã¾ã¨ã‚ã¦æ‰±ã†ã¨ãã«ã¯ã€ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ãŒã»ã¼å¿…é ˆã¨ãªã‚‹ã€‚\né€šå¸¸ã€ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„SVMï¼ˆã‚µãƒãƒ¼ãƒˆãƒ™ã‚¯ã‚¿ãƒ¼ãƒã‚·ãƒ³ï¼‰ã§ã¯ã€ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã‚’ã—ãªã„ã¨ãªã‹ãªã‹å­¦ç¿’ãŒé€²ã¾ãªã„ã€‚ãŸã ã—ã€ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆç­‰ã®æ±ºå®šæœ¨ã‚’ä½¿ã†æ‰‹æ³•ã§ã¯ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã¯ä¸è¦ã§ã‚ã‚‹ã€‚\nã“ã®è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹3ã¤ã®ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›æ–¹æ³•ã‚’æ‰±ã†ã€‚\n StandardScaler: æ¨™æº–åŒ–ï¼ˆå¹³å‡0, åˆ†æ•£1ï¼‰ RobustScaler: å¤–ã‚Œå€¤ã«é ‘å¥ãªæ¨™æº–åŒ– MinMaxScaler: æ­£è¦åŒ–ï¼ˆæœ€å¤§1, æœ€å°0ï¼‰  2021/01/28 æ¨™æº–åå·®ã¨åˆ†æ•£ã‚’èª¤ã£ã¦è¨˜è¿°ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã£ãŸãŸã‚ä¿®æ­£ã€‚\nç’°å¢ƒ è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ä½¿ç”¨ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.6.5   Scikit-learn 0.19.1   NumPy 1.14.3   matplotlib 2.2.2    Pythonã§ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚Scikit-learnã®preprocessingãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›å‡¦ç†ãŒã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã€‚\n1 2 3  import numpy as np import matplotlib.pyplot as plt from sklearn import preprocessing   ä»¥ä¸‹ã€å„ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸçµæœã‚’è¨˜ã™ã€‚\næ¨™æº–åŒ–ï¼ˆå¹³å‡0, åˆ†æ•£1ï¼‰ã™ã‚‹ ãƒ‡ãƒ¼ã‚¿ã®å¹³å‡å€¤ã¨åˆ†æ•£ã‚’å¤‰æ›ã™ã‚‹æ“ä½œã‚’æ¨™æº–åŒ–ã¨å‘¼ã¶ã€‚å¹³å‡å€¤ã‚’0, åˆ†æ•£ã‚’1ã¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚å¤‰æ›æ“ä½œã¯ä»¥ä¸‹ã®å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$$ Y = \\frac{X-\\mu}{\\sigma} $$\nã“ã“ã§ã€$Y$ã¯å¤‰æ›å¾Œã®ãƒ‡ãƒ¼ã‚¿ã€$X$ã¯å¤‰æ›å‰ã®ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ã€‚ã¾ãŸã€$\\mu, \\sigma$ã¯ã€ãã‚Œãã‚Œ$X$ã®å¹³å‡ã€æ¨™æº–åå·®ã§ã‚ã‚‹ï¼ˆ$\\sigma^2$ã¯åˆ†æ•£ï¼‰ã€‚\nScikit-learnã§æ¨™æº–åŒ–ã¯ã€\né–¢æ•°ã¨ã—ã¦ã¯scale,\nã‚¯ãƒ©ã‚¹ã¨ã—ã¦ã¯StandardScaler\nã¨ã„ã†åå‰ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\nStandardScalerã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã¨ã€ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦è¡Œã£ãŸå¤‰æ›ã‚’åˆ¥ã®ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦é©ç”¨ã§ãã‚‹ã€‚\næ©Ÿæ¢°å­¦ç¿’ã®å ´åˆã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦è¡Œã£ãŸå¤‰æ›ã‚’ã€æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦è¡Œã†ã®ã§ã€å®Ÿç”¨ä¸Šã¯StandardScalerã‚’ä½¿ã†æ©Ÿä¼šãŒå¤šã„ã¨æ€ã†ã€‚ãã®ãŸã‚ã€æœ¬è¨˜äº‹ã§ã¯StandardScalerã®ã¿æ‰±ã†ã€‚\nStandardScalerã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ 1  preprocessing.StandardScaler(copy=True, with_mean=True, with_std=True)   StandardScalerã‚¯ãƒ©ã‚¹ã®ä¸»ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚åŸºæœ¬çš„ã«å…¨ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã¾ã¾ä½¿ã†ã€‚\ncopy\nãƒ–ãƒ¼ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\nFalseã®å ´åˆã€transformã‚„fit_transformãƒ¡ã‚½ãƒƒãƒ‰ã§å¤‰æ›æ™‚ã«ã€å¤‰æ›å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’ç ´å£Šçš„ã«å¤‰æ›ã™ã‚‹ã€‚Trueã®å ´åˆã€å…ƒã®ãƒ‡ãƒ¼ã‚¿ã¯å¤‰æ›ã•ã‚Œãªã„ã€‚\nwith_mean\nãƒ–ãƒ¼ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\nTrueã®å ´åˆã€å¹³å‡å€¤ã‚’0ã¨ã™ã‚‹ã€‚\nFalseã®å ´åˆã€ä»¥ä¸‹ã®å¤‰æ›ã«ãªã‚‹ã€‚\n$Y = \\frac{X}{\\sigma}$\nåˆ†æ•£ã¯1ã«ãªã‚‹ãŒã€å¹³å‡ãŒç¶­æŒã•ã‚Œã‚‹ã¨ã¯é™ã‚‰ãªã„ã€‚\nwith_std\nãƒ–ãƒ¼ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\nTrueã®å ´åˆã€åˆ†æ•£ã‚’0ã¨ã™ã‚‹ã€‚\nFalseã®å ´åˆã€ä»¥ä¸‹ã®å¤‰æ›ã«ãªã‚‹ã€‚\n$Y = X-\\mu$\nåˆ†æ•£ã¯å¤‰åŒ–ã›ãšã€å¹³å‡ã¯0ã¨ãªã‚‹ã€‚\nStandardScalerã®ãƒ¡ã‚½ãƒƒãƒ‰ è‰¯ãä½¿ã†ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ¬¡ã®3ã¤ã€‚\nfit(X)\né…åˆ—Xã®å¹³å‡ã¨æ¨™æº–åå·®ã‚’è¨ˆç®—ã—ã¦ã€è¨˜æ†¶ã™ã‚‹ï¼ˆå¤‰æ›ã¯è¡Œã‚ãªã„ï¼‰ã€‚\ntransform(X)\né…åˆ—Xã«å¤‰æ›ã‚’æ–½ã—ã¦ã€å¤‰æ›å¾Œã®é…åˆ—ã‚’è¿”ã™ã€‚\nfit_transform(X)\né…åˆ—Xã«å¯¾ã—ã¦ã€fitã¨transformã‚’åŒæ™‚ã«è¡Œã†ã€‚\nãªãŠã€2æ¬¡å…ƒé…åˆ—ã‚’å¤‰æ›ã™ã‚‹å ´åˆã€ç¸¦ (axis=0) æ–¹å‘ã«å¤‰æ›ãŒè¡Œã‚ã‚Œã‚‹ã€‚\nStandardScalerã®ä½¿ç”¨ä¾‹ ä»¥ä¸‹ã®2æ¬¡å…ƒé…åˆ—xã‚’ç”¨æ„ã™ã‚‹ã€‚\n1 2 3 4  x = np.arange(0, 8, 1.).reshape(-1, 2) print(x) print(x.mean(axis=0)) print(x.std(axis=0))   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6  [[0. 1.] [2. 3.] [4. 5.] [6. 7.]] [3. 4.] [2.23606798 2.23606798]   ç¬¬0åˆ—ç›®ã®å¹³å‡ã¯3, æ¨™æº–åå·®ã¯2.24,\nç¬¬1åˆ—ç›®ã®å¹³å‡ã¯4, æ¨™æº–åå·®ã¯2.24ã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€xã‚’æ¨™æº–åŒ–ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8  sscaler = preprocessing.StandardScaler() # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ sscaler.fit(x) # xã®å¹³å‡ã¨æ¨™æº–åå·®ã‚’è¨ˆç®— y = sscaler.transform(x) # xã‚’å¤‰æ› print(y) print(y.mean(axis=0)) print(y.std(axis=0))   å®Ÿè¡Œçµæœ\nä»¥ä¸‹ã®é€šã‚Šã€å¤‰æ›å¾Œã®é…åˆ—yã¯å„åˆ—ã¨ã‚‚å¹³å‡ã¯0, æ¨™æº–åå·®ã¯1ã¨ãªã£ãŸã€‚\n1 2 3 4 5 6  [[-1.34164079 -1.34164079] [-0.4472136 -0.4472136 ] [ 0.4472136 0.4472136 ] [ 1.34164079 1.34164079]] [0. 0.] [1. 1.]   ã“ã“ã§ã€\n1 2  sscaler.fit(x) # xã®å¹³å‡ã¨æ¨™æº–åå·®ã‚’è¨ˆç®— y = sscaler.transform(x) # xã‚’å¤‰æ›   ã¯ã€ä»¥ä¸‹ã¨åŒã˜ã§ã‚ã‚‹ã€‚\n1  y = sscaler.fit_transform(x) # xã‚’å¤‰æ›ã—ãŸçµæœãŒè¿”ã‚‹   å¤–ã‚Œå€¤ã«é ‘å¥ãªæ¨™æº–åŒ– å¤‰æ›å‰ã®ãƒ‡ãƒ¼ã‚¿ã«æ¥µç«¯ã«å¤§ããªå€¤ã¾ãŸã¯å°ã•ãªå€¤ãŒå«ã¾ã‚Œã¦ã„ãŸå ´åˆã€æ¨™æº–åŒ–ã‚’è¡Œã†ã¨å¤§ããçµæœãŒå¤‰ã‚ã£ã¦ã—ã¾ã†ã€‚ã“ã‚Œã‚’é¿ã‘ã‚‹ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ã®å››åˆ†ä½ç‚¹ã‚’åŸºæº–ã«ã—ã¦æ¨™æº–åŒ–ã‚’è¡Œã†æ–¹æ³•ãŒã‚ã‚‹ã€‚\nScikit-learnã§ã“ã®ã‚ˆã†ãªå¤‰æ›ã¯ã€\né–¢æ•°ã¨ã—ã¦ã¯robust_scale,\nã‚¯ãƒ©ã‚¹ã¨ã—ã¦ã¯RobustScaler\nã¨ã„ã†åå‰ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\næœ¬è¨˜äº‹ã§ã¯RobustScalerã®ã¿æ‰±ã†ã€‚\nRobustScalerã®å¤‰æ›æ“ä½œã¯ä»¥ä¸‹ã®å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$$ Y = \\frac{X-Q_2}{Q_3-Q_1} $$\nã“ã“ã§ã€$Y$ã¯å¤‰æ›å¾Œã®ãƒ‡ãƒ¼ã‚¿ã€$X$ã¯å¤‰æ›å‰ã®ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ã€‚\nã¾ãŸã€$Q_1, Q_2, Q_3$ã¯ã€ãã‚Œãã‚Œ$X$ã®ç¬¬1ï½ç¬¬3å››åˆ†ä½ç‚¹ã§ã‚ã‚‹ã€‚\næ¨™æº–åŒ–ã¨æ¯”è¼ƒã™ã‚‹ã¨ã€å…ƒã®ãƒ‡ãƒ¼ã‚¿ã®å¹³å‡ãŒ$Q_2$ï¼ˆä¸­å¤®å€¤ï¼‰ã€æ¨™æº–åå·®ãŒ$Q_3-Q_1$ã§ã‚ã‚‹ã¨ä»®å®šã—ã¦ã„ã‚‹ã¨ã‚‚è€ƒãˆã‚‰ã‚Œã‚‹ã€‚\nãªãŠã€ä¸Šã®å¼ã®åˆ†æ¯ã§ã€ã©ã®ç¯„å›²ï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ï¼‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†ã‹ã¯è¨­å®šã§å¤‰æ›´å¯èƒ½ã§ã‚ã‚‹ã€‚\nRobustScalerã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ 1 2  preprocessing.RobustScaler(with_centering=True, with_scaling=True, quantile_range=(25.0, 75.0), copy=True)   RobustScalerã‚¯ãƒ©ã‚¹ã®ä¸»ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nå¤–ã‚Œå€¤ã®å¤šã•ã«å¯¾ã—ã¦ã€quantile_rangeã‚’å¤‰æ›´ã™ã‚‹ã€‚\nwith_centering\nãƒ–ãƒ¼ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\nTrueã®å ´åˆã€ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ä¸­å¤®å€¤ã‚’å¼•ã„ã¦ã€å¹³å‡ã‚’0ã¨ã™ã‚‹ã€‚\nwith_std\nãƒ–ãƒ¼ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\nTrueã®å ´åˆã€quantile_rangeã§é¸æŠã—ãŸãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã®å·®ã§ãƒ‡ãƒ¼ã‚¿ã‚’å‰²ã‚‹ã€‚\nquantile_range\nã‚¿ãƒ—ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯(25.0, 75.0).\næ¨™æº–åŒ–ã‚’è¡Œã†ãƒ‡ãƒ¼ã‚¿ã®ç¯„å›²ã‚’ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ã§æŒ‡å®šã™ã‚‹ã€‚\n(25.0, 75.0)ã®å ´åˆã€ä¸‹ä½25%ã¨ä¸Šä½25%ã«ã‚ã‚‹å€¤ã®å·®ã§ãƒ‡ãƒ¼ã‚¿å…¨ä½“ã‚’å‰²ã‚‹ã€‚\nã¾ãŸã€ç‰¹å¾´é‡ãŒè¤‡æ•°ã‚ã‚‹å ´åˆã€ãã‚Œãã‚Œã®ç‰¹å¾´é‡ã«å¯¾ã—ã¦æ•°å€¤ãŒé¸ã°ã‚Œã‚‹ã€‚\nãªãŠã€ãƒ‡ãƒ¼ã‚¿ã®å€¤ã¯ã€NumPyã®percentileé–¢æ•°ã§å–å¾—ã—ã¦ã„ã‚‹ã€‚\nã“ã®é–¢æ•°ã¯ã€ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ã¨ãƒ‡ãƒ¼ã‚¿æ•°ãŒä¸€è‡´ã—ãªã„å ´åˆã€è£œé–“ã—ã¦è¿”ã™ã€‚ãã®ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿æ•°ãŒå°‘ãªã„å ´åˆã‚„ã€é›¢æ•£çš„ãªå ´åˆã¯æ³¨æ„ã™ã‚‹ã€‚\ncopy\nãƒ–ãƒ¼ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\nFalseã®å ´åˆã€transformã‚„fit_transformãƒ¡ã‚½ãƒƒãƒ‰ã§å¤‰æ›æ™‚ã«ã€å¤‰æ›å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’ç ´å£Šçš„ã«å¤‰æ›ã™ã‚‹ã€‚\nTrueã®å ´åˆã€å…ƒã®ãƒ‡ãƒ¼ã‚¿ã¯å¤‰æ›ã•ã‚Œãªã„ã€‚\nRobustScalerã®ãƒ¡ã‚½ãƒƒãƒ‰ StandardScalerã¨åŒã˜ãã€è‰¯ãä½¿ã†ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ¬¡ã®3ã¤ã€‚\nfit(X)\ntransform(X)\nfit_transform(X)\nRobustScalerã®ä½¿ç”¨ä¾‹ ä»¥ä¸‹ã®2æ¬¡å…ƒé…åˆ—xã‚’ç”¨æ„ã™ã‚‹ã€‚\n1 2 3 4  x = np.arange(0, 8, 1.).reshape(-1, 2) print(x) print(x.mean(axis=0)) print(x.std(axis=0))   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6  [[0. 1.] [2. 3.] [4. 5.] [6. 7.]] [3. 4.] [2.23606798 2.23606798]   ç¬¬0åˆ—ç›®ã®å¹³å‡ã¯3, æ¨™æº–åå·®ã¯2.24,\nç¬¬1åˆ—ç›®ã®å¹³å‡ã¯4, æ¨™æº–åå·®ã¯2.24ã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€xã‚’æ¨™æº–åŒ–ã™ã‚‹ã€‚ä¸‹ä½25%ã¨ä¸Šä½25%ã€ã™ãªã‚ã¡[0. 1.]ã¨[6. 7.]ãŒç„¡è¦–ã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8  rscaler = preprocessing.RobustScaler(quantile_range=(25., 75.)) rscaler.fit(x) y = rscaler.transform(x[1:3]) print(y) print(y.mean(axis=0)) print(y.std(axis=0))   å®Ÿè¡Œçµæœ\nä»¥ä¸‹ã®é€šã‚Šã€å¤‰æ›å¾Œã®é…åˆ—yã¯å„åˆ—ã¨ã‚‚å¹³å‡ã¯0, æ¨™æº–åå·®ã¯0.745ã¨ãªã£ãŸã€‚\n1 2 3 4 5 6  [[-1. -1. ] [-0.33333333 -0.33333333] [ 0.33333333 0.33333333] [ 1. 1. ]] [0. 0.] [0.74535599 0.74535599]   æ­£è¦åŒ–ï¼ˆæœ€å¤§1, æœ€å°0ï¼‰ã™ã‚‹ ãƒ‡ãƒ¼ã‚¿ã®æœ€å¤§å€¤ã¨æœ€å°å€¤ã‚’åˆ¶é™ã™ã‚‹å¤‰æ›ã‚’æ­£è¦åŒ–ã¨å‘¼ã¶ã€‚æœ€å¤§å€¤ã‚’1, æœ€å°å€¤ã‚’0ã¨ã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚\nå¤‰æ›æ“ä½œã¯ä»¥ä¸‹ã®å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$$Y = \\frac{X-x_{\\min}}{x_{\\max}-x_{\\min}}$$\nã“ã“ã§ã€$Y$ã¯å¤‰æ›å¾Œã®ãƒ‡ãƒ¼ã‚¿ã€$X$ã¯å¤‰æ›å‰ã®ãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚‹ã€‚\nã¾ãŸã€$x_{\\min}, x_{\\max}$ã¯ã€ãã‚Œãã‚Œ$X$ã®æœ€å°å€¤ã€æœ€å¤§å€¤ã§ã‚ã‚‹ã€‚\nScikit-learnã§æ­£è¦åŒ–ã¯ã€\né–¢æ•°ã¨ã—ã¦ã¯minmax_scale,\nã‚¯ãƒ©ã‚¹ã¨ã—ã¦ã¯MinMaxScaler\nã¨ã„ã†åå‰ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\næ¨™æº–åŒ–ã¨åŒæ§˜ã«ã€æœ¬è¨˜äº‹ã§ã¯MinMaxScalerã‚¯ãƒ©ã‚¹ã®ã¿æ‰±ã†ã€‚\nMinMaxScalerã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ 1  preprocessing.MinMaxScaler(feature_range=(0, 1), copy=True)   MinMaxScalerã‚¯ãƒ©ã‚¹ã®ä¸»ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nfeature_range\nã‚¿ãƒ—ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯(0, 1).\nå¤‰æ›å¾Œã®æœ€å¤§å€¤ã€æœ€å°å€¤ã‚’è¨­å®šã™ã‚‹ã€‚\ncopy\nãƒ–ãƒ¼ãƒ«å‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯True.\nFalseã®å ´åˆã€transformã‚„fit_transformãƒ¡ã‚½ãƒƒãƒ‰ã§å¤‰æ›æ™‚ã«ã€\nå¤‰æ›å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’ç ´å£Šçš„ã«å¤‰æ›ã™ã‚‹ã€‚\nTrueã®å ´åˆã€å…ƒã®ãƒ‡ãƒ¼ã‚¿ã¯å¤‰æ›ã•ã‚Œãªã„ã€‚\nMinMaxScalerã®ãƒ¡ã‚½ãƒƒãƒ‰ StandardScalerã¨åŒã˜ãã€è‰¯ãä½¿ã†ãƒ¡ã‚½ãƒƒãƒ‰ã¯æ¬¡ã®3ã¤ã€‚\nfit(X)\ntransform(X)\nfit_transform(X)\nMinMaxScalerã®ä½¿ç”¨ä¾‹ æ¨™æº–åŒ–ã¨åŒã˜2æ¬¡å…ƒé…åˆ—xã‚’ç”¨æ„ã™ã‚‹ã€‚\n1 2 3 4  x = np.arange(0, 6, 1.).reshape(-1, 2) print(x) print(x.min(axis=0)) print(x.max(axis=0))   å®Ÿè¡Œçµæœ\n1 2 3 4 5  [[0. 1.] [2. 3.] [4. 5.]] [0. 1.] [4. 5.]   ç¬¬0åˆ—ç›®ã®æœ€å°å€¤ã¯0, æœ€å¤§å€¤ã¯4,\nç¬¬1åˆ—ç›®ã®æœ€å°å€¤ã¯1, æœ€å¤§å€¤ã¯5ã§ã‚ã‚‹ã€‚\næ¬¡ã«ã€xã‚’æ­£è¦åŒ–ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8  mmscaler = preprocessing.MinMaxScaler() # ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ mmscaler.fit(x) # xã®æœ€å¤§ãƒ»æœ€å°ã‚’è¨ˆç®— y = mmscaler.transform(x) # xã‚’å¤‰æ› print(y) print(y.min(axis=0)) print(y.max(axis=0))   å®Ÿè¡Œçµæœ\nä»¥ä¸‹ã®é€šã‚Šã€å¤‰æ›å¾Œã®é…åˆ—yã¯å„åˆ—ã¨ã‚‚æœ€å°å€¤ã¯0, æœ€å¤§å€¤ã¯1ã¨ãªã£ãŸã€‚\n1 2 3 4 5  [[0. 0. ] [0.5 0.5] [1. 1. ]] [0. 0.] [1. 1.]   ã“ã“ã§ã€\n1 2  mmscaler.fit(x) # xã®å¹³å‡ã¨åˆ†æ•£ã‚’è¨ˆç®— y = mmscaler.transform(x) # xã‚’å¤‰æ›   ã¨ã—ãŸã®ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚‚åŒã˜çµæœã¨ãªã‚‹ã€‚\n1  y = mmscaler.fit_transform(x) # xã‚’å¤‰æ›ã—ãŸçµæœãŒè¿”ã‚‹   å„å¤‰æ›ã®æ¯”è¼ƒ 2æ¬¡å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’å¯¾è±¡ã¨ã—ã¦ã€ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã®åŠ¹æœã‚’æ•£å¸ƒå›³ã§ç¢ºèªã™ã‚‹ã€‚\nå„å¤‰æ›ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ãŸã€‚\nã‚±ãƒ¼ã‚¹1ï¼šå¹³å‡(0, 0), åˆ†æ•£1 å¹³å‡ãŒåŸç‚¹ã€åˆ†æ•£ãŒå„æ–¹å‘ã«1ã®æ­£è¦åˆ†å¸ƒãƒ‡ãƒ¼ã‚¿200ç‚¹ã‚’å¤‰æ›ã™ã‚‹ã€‚\nStandardScalerã¯ã€å¤‰æ›å‰ã¨ã»ã¨ã‚“ã©å¤‰ã‚ã‚‰ãªã„ã€‚\nRobustScalerã¯ã€StandardScalerã‚ˆã‚Šã‚‚åˆ†æ•£ãŒå°ã•ããªã£ã¦ã„ã‚‹ã€‚\nã¾ãŸã€MinMaxScalerã¯ç¸¦æ–¹å‘ãƒ»æ¨ªæ–¹å‘ã¨ã‚‚ã«0ï½1ã®ç¯„å›²ã«åã¾ã£ã¦ã„ã‚‹ã€‚\nã‚±ãƒ¼ã‚¹2ï¼šå¹³å‡(5, -5), åˆ†æ•£1 å¹³å‡ãŒ(5, -5), åˆ†æ•£ãŒå„æ–¹å‘ã«1ã®æ­£è¦åˆ†å¸ƒãƒ‡ãƒ¼ã‚¿200ç‚¹ã‚’å¤‰æ›ã™ã‚‹ã€‚\nStandardScalerã¯ã€ãƒ‡ãƒ¼ã‚¿ã®åˆ†å¸ƒå½¢çŠ¶ã‚’ã»ã¼ä¿ã£ãŸã¾ã¾å¤‰æ›ã§ãã¦ã„ã‚‹ã€‚\nã‚±ãƒ¼ã‚¹3ï¼šå¹³å‡(0, 0), åˆ†æ•£4 å¹³å‡ãŒ(0, 0), åˆ†æ•£ãŒå„æ–¹å‘ã«4ã¨ã—ãŸæ­£è¦åˆ†å¸ƒãƒ‡ãƒ¼ã‚¿200ç‚¹ã‚’å¤‰æ›ã™ã‚‹ã€‚\nåˆ†æ•£ãŒ4ï¼ˆæ¨™æº–åå·®ãŒ2ï¼‰ãªã®ã§ã€å„æ–¹å‘ã¨ã‚‚-2ï½2ã®ç¯„å›²ã«ç´„68.27%, -4ï½4ã®ç¯„å›²ã«ç´„95.45%ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã€‚\nStandardScalerã§ã¯åˆ†æ•£ãŒç´„åŠåˆ†ã¨ãªã‚Šã€-1ï½1ã®ç¯„å›²ã«ç´„68.27%, -2ï½2ã®ç¯„å›²ã«ç´„95.45%ã®ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹ã“ã¨ã«ãªã‚‹ã€‚\nã‚±ãƒ¼ã‚¹4ï¼šå¤–ã‚Œå€¤ã‚’åŠ ãˆãŸå ´åˆ ã‚±ãƒ¼ã‚¹1ã®ãƒ‡ãƒ¼ã‚¿ã«ã€å¹³å‡(5, 5), åˆ†æ•£1ã®ãƒ‡ãƒ¼ã‚¿ã‚’10ç‚¹è¿½åŠ ã™ã‚‹ã€‚\nã‚±ãƒ¼ã‚¹1ã®æ•£å¸ƒå›³ã‚’ã‚¹ã‚±ãƒ¼ãƒ«ã‚’æƒãˆã¦æ¯”è¼ƒã™ã‚‹ã€‚\nRobustScalerã§ã¯ã€å¤–ã‚Œå€¤ã‚’é™¤ãåˆ†å¸ƒã®å½¢çŠ¶ãŒã€å¤–ã‚Œå€¤ã‚’åŠ ãˆã‚‹å‰ã¨å¾Œã§å¤‰åŒ–ã—ã¦ã„ãªã„ã€‚\nä¸€æ–¹ã€StandardScaler, MinMaxScalerã§ã¯ã€åˆ†å¸ƒã®å½¢çŠ¶ãŒå¤–ã‚Œå€¤ã«ã‚ˆã£ã¦å¤‰åŒ–ã—ã¦ã„ã‚‹ã€‚\nã‚±ãƒ¼ã‚¹1ï¼ˆå¤–ã‚Œå€¤ãªã—ï¼‰\nã‚±ãƒ¼ã‚¹4ï¼ˆå¤–ã‚Œå€¤ã‚ã‚Šï¼‰\nã‚±ãƒ¼ã‚¹1ï½4ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  def plotScaler(x, xlim=(None, None), ylim=(None, None)): sscaler = preprocessing.StandardScaler() rscaler = preprocessing.RobustScaler() mmscaler = preprocessing.MinMaxScaler() xs = sscaler.fit_transform(x) xr = rscaler.fit_transform(x) xm = mmscaler.fit_transform(x) fig, ax = plt.subplots(nrows=2, ncols=2, sharex=True, sharey=True, figsize=(8,8)) ax[0,0].scatter(x[:,0], x[:,1]) ax[0,0].set_title(\u0026#34;Default\u0026#34;) ax[0,1].scatter(xs[:,0], xs[:,1]) ax[0,1].set_title(\u0026#34;StandardScaler\u0026#34;) ax[1,0].scatter(xr[:,0], xr[:,1]) ax[1,0].set_title(\u0026#34;RobustScaler\u0026#34;) ax[1,1].scatter(xm[:,0], xm[:,1]) ax[1,1].set_title(\u0026#34;MinMaxScaler\u0026#34;) for i in range(ax.shape[0]): for j in range(ax.shape[1]): ax[i,j].axis(\u0026#34;square\u0026#34;) ax[i,j].grid() ax[1,1].set_xlim(xlim) ax[1,1].set_ylim(ylim) plt.show() np.random.seed(0) # ã‚±ãƒ¼ã‚¹1: å¹³å‡(0,0), åˆ†æ•£ï¼‘ x1 = np.random.randn(200, 2) plotScaler(x1, xlim=(-3, 3), ylim=(-3, 3)) # ã‚±ãƒ¼ã‚¹2: å¹³å‡(5,-5), åˆ†æ•£ï¼‘ x2_0 = np.random.randn(200, 1)+5 x2_1 = np.random.randn(200, 1)-5 x2 = np.hstack([x2_0, x2_1]) plotScaler(x2) # ã‚±ãƒ¼ã‚¹3: å¹³å‡(0,0), åˆ†æ•£4 x3 = np.random.randn(200, 2)*2 plotScaler(x3) # ã‚±ãƒ¼ã‚¹4: ã‚±ãƒ¼ã‚¹1ã«(5, 5), åˆ†æ•£ï¼‘ã®å¤–ã‚Œå€¤ã‚’10ç‚¹è¿½åŠ  x4_0 = np.random.randn(10, 2)+5 x4 = np.vstack([x1, x4_0]) plotScaler(x1, xlim=(-3, 8), ylim=(-3, 8)) plotScaler(x4, xlim=(-3, 8), ylim=(-3, 8))   å‚è€ƒ sklearn.preprocessing.StandardScaler â€” scikit-learn 0.24.0 documentation\nsklearn.preprocessing.RobustScaler â€” scikit-learn 0.24.0 documentation\nsklearn.preprocessing.MinMaxScaler â€” scikit-learn 0.24.0 documentation\nSklearnã®preprocessingã®å…¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è§£èª¬ | è‡ªèª¿è‡ªè€ƒã®æ—…\nFeature Scaling with scikit-learn â€“ Ben Alex Keen\n","description":"Pythonã®æ©Ÿæ¢°å­¦ç¿’ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªScikit-learnã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã€ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã«ã¤ã„ã¦èª¿ã¹ãŸã€‚","id":76,"section":"posts","tags":["Python","Scikit-learn"],"title":"Scikit-learnã§ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ã‚±ãƒ¼ãƒ«å¤‰æ›ã™ã‚‹","uri":"https://helve-blog.com/posts/python/scikit-learn-feature-scaling/"},{"content":"ã¯ã˜ã‚ã« Scikit-learnã®å›å¸°æœ¨ã‚„ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ã®ã‚¯ãƒ©ã‚¹ã«ã¯ã€Feature Importances (FI) ã¨ã„ã†èª¬æ˜å¤‰æ•°ã®é‡è¦åº¦ã‚’ç¤ºã™æŒ‡æ¨™ãŒã‚ã‚‹ãŒã€å°å‡ºã«ã¤ã„ã¦å…¬å¼ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«æ›¸ã‹ã‚Œã¦ã„ãªã‹ã£ãŸãŸã‚èª¿ã¹ãŸã€‚\nçµè«–ã‹ã‚‰è¿°ã¹ã‚‹ã¨ã€å„èª¬æ˜å¤‰æ•°ã«ã‚ˆã‚‹äºˆæ¸¬èª¤å·®ã®äºŒä¹—å¹³å‡ã®æ¸›å°‘é‡ã«å¯¾ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã®é‡ã¿ã‚’æ›ã‘ã¦æ±‚ã‚ãŸå€¤ã§ã‚ã‚‹ã€‚\nè¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.6.5   Scikit-learn 0.19.1    å›å¸°æœ¨ã®FI ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ã¯ã€è¤‡æ•°ã®å›å¸°æœ¨ã®é›†åˆã§ã‚ã‚‹ã®ã§ã€åˆã‚ã«å›å¸°æœ¨ã®FIã‚’ç¢ºèªã™ã‚‹ã€‚\nå…¬å¼ãƒªãƒ•ã‚¡ãƒ³ãƒ¬ã‚¹ã«ã¯ã€FIã«ã¤ã„ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã€‚\n The importance of a feature is computed as the (normalized) total reduction of the criterion brought by that feature. It is also known as the Gini importance.\nsklearn.tree.DecisionTreeRegressor â€” scikit-learn 0.24.0 documentation\n ã™ãªã‚ã¡ã€èª¬æ˜å¤‰æ•°ã”ã¨ã«ã€ã‚¸ãƒ‹é‡è¦åº¦ (Gini importance) ã¨å‘¼ã°ã‚Œã‚‹åŸºæº–é‡ã®æ¸›å°‘é‡ã‚’ï¼ˆæ­£è¦åŒ–ã—ãŸã‚‚ã®ã‚’ï¼‰åˆç®—ã—ã¦å¾—ã‚‰ã‚Œã‚‹ã€ã¨ã‚ã‚‹ã€‚\nã—ã‹ã—ã€ãƒãƒƒãƒˆä¸Šã«ã¯Gini importanceã«é–¢ã™ã‚‹ç›®ã¼ã—ã„è³‡æ–™ã¯è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸï¼ˆã‚¸ãƒ‹ä¿‚æ•°ã‚„ã‚¸ãƒ‹ç‰¹å¾´é‡ã«é–¢ã™ã‚‹è³‡æ–™ã¯ã‚ã‚‹ãŒï¼‰ã€‚\nãã“ã§ã€è‡ªåˆ†ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å‹•ã‹ã—ã¦å‹•ä½œã‚’ç¢ºèªã™ã‚‹ã€‚\nã¾ãšã€3ã¤ã®èª¬æ˜å¤‰æ•°X0, X1, X2ã¨ã€ç›®çš„å¤‰æ•°Yã‚’ç”¨æ„ã—ã€\nDecisionTreeRegressorã§å­¦ç¿’ã•ã›ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  import numpy as np import pandas as pd from sklearn import tree X0 = np.array([0,0,1,1]).reshape(-1, 1) X1 = np.array([0,1,0,0]).reshape(-1, 1) X2 = np.array([0,0,0,1]).reshape(-1, 1) X = np.hstack([X0, X1, X2]) Y = np.array([1,2,3,4]) t = tree.DecisionTreeRegressor(max_depth=3, random_state=0) t.fit(X, Y)   å›å¸°æœ¨ã‚’GraphVizã§å¯è¦–åŒ–ã™ã‚‹ã€‚\n1  tree.export_graphviz(t, \u0026#34;tree.dot\u0026#34;)   å›³ã®å››è§’ã¯ã€å›å¸°æœ¨ã®å„ãƒãƒ¼ãƒ‰ã‚’ç¤ºã™ã€‚\nå››è§’ã®ä¸­ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n 1è¡Œç›®ã®ä¸ç­‰å¼ãŒæˆã‚Šç«‹ã¤å ´åˆã¯ã€å·¦å´ã®ãƒãƒ¼ãƒ‰ã«é€²ã‚€ã€‚æˆã‚Šç«‹ãŸãªã„å ´åˆã¯ã€å³ã®ãƒãƒ¼ãƒ‰ã«é€²ã‚€ã€‚ mse ã¯å¹³å‡äºŒä¹—èª¤å·® (MSE, Mean Squared Error) ã€‚ samples ã¯ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã€‚ value ã¯äºˆæ¸¬å€¤ã€‚  ã“ã®ä¸­ã§ã€mseã¨samplesã«ç€ç›®ã™ã‚‹ã€‚\n1æ®µç›®ã®ãƒãƒ¼ãƒ‰ã§ã¯ã€X0 (X[0])ã«ã‚ˆã£ã¦ã€4ç‚¹ã®ãƒ‡ãƒ¼ã‚¿ã®MSEãŒ1.25ã‹ã‚‰0.25ã«æ¸›å°‘ã—ã¦ã„ã‚‹ã€‚\nã¾ãŸã€2æ®µç›®ã®ãƒãƒ¼ãƒ‰ã§ã¯ã€X1 (X[1]), X2 (X[2])ã«ã‚ˆã£ã¦ã€ãã‚Œãã‚Œåˆ†å²å¾Œã®2ç‚¹ã®ãƒ‡ãƒ¼ã‚¿ã®MSEãŒ0.25ã‹ã‚‰0ã«æ¸›å°‘ã—ã¦ã„ã‚‹ã€‚\næ¬¡ã«FIã‚’è¡¨ç¤ºã™ã‚‹ã€‚\n1  print(pd.Series(t.feature_importances_, index=[\u0026#34;X0\u0026#34;, \u0026#34;X1\u0026#34;, \u0026#34;X2\u0026#34;]))   å®Ÿè¡Œçµæœ\n1 2 3  X0 0.8 X1 0.1 X2 0.1   ã“ã“ã§ã€X0, X1, X2ã«ã‚ˆã‚‹MSEã®æ¸›å°‘é‡ã«å¯¾ã—ã¦ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã‚’æ›ã‘ã‚‹ã¨ã€ãã‚Œãã‚Œã€\nX0: (1.25 - 0.25)*4 = 4\nX1: (0.25 - 0)*2 = 0.5\nX2: (0.25 - 0)*2 = 0.5\nã¨ãªã‚‹ã€‚\næ¸›å°‘é‡ã®åˆè¨ˆãŒ1ã¨ãªã‚‹ã‚ˆã†ã«æ­£è¦åŒ–ã™ã‚‹ã¨ã€\nX0: 4/(4+0.5+0.5) = 0.8\nX1: 0.5/(4+0.5+0.5) = 0.1\nX2: 0.5/(4+0.5+0.5) = 0.1\nã¨ãªã‚Šã€FIã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã€‚\nã™ãªã‚ã¡ã€FIã¯äºˆæ¸¬èª¤å·®ã®äºŒä¹—å¹³å‡ã®æ¸›å°‘é‡ã«å¯¾ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã®é‡ã¿ã‚’æ›ã‘ã¦æ­£è¦åŒ–ã—ãŸå€¤ã¨ãªã‚‹ã€‚\nãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ã®FI ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã®FIã®è¨ˆç®—æ–¹æ³•ã«ã¤ã„ã¦ã‚‚ã€Scikit-learnã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«ã¯æ›¸ã‹ã‚Œã¦ã„ãªã„ã€‚\nã—ã‹ã—ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨ã€æ±ºå®šæœ¨ã”ã¨ã«FIãŒè¨ˆç®—ã•ã‚Œã€ãã‚Œã‚‰ã®å¹³å‡ãŒãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã®FIã¨ãªã£ã¦ã„ã‚‹ï¼ˆscikit-learnã®forest.py 359ï½375è¡Œç›®ã€BaseForestã‚¯ãƒ©ã‚¹ã‚ˆã‚Šã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã¯ã€RandomForestRegressorãŒç¶™æ‰¿ã—ã¦ã„ã‚‹ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  @property def feature_importances_(self): \u0026#34;\u0026#34;\u0026#34;Return the feature importances (the higher, the more important the feature). Returns ------- feature_importances_ : array, shape = [n_features] \u0026#34;\u0026#34;\u0026#34; check_is_fitted(self, \u0026#39;estimators_\u0026#39;) all_importances = Parallel(n_jobs=self.n_jobs, backend=\u0026#34;threading\u0026#34;)( delayed(getattr)(tree, \u0026#39;feature_importances_\u0026#39;) for tree in self.estimators_) return sum(all_importances) / len(self.estimators_)   ","description":"Scikit-learnã®å›å¸°æœ¨ã‚„ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ã®ã‚¯ãƒ©ã‚¹ã«ã¯ã€Feature Importances (FI) ã¨ã„ã†èª¬æ˜å¤‰æ•°ã®é‡è¦åº¦ã‚’ç¤ºã™æŒ‡æ¨™ãŒã‚ã‚‹ã€‚ã“ã‚Œã¯ã€å„èª¬æ˜å¤‰æ•°ã«ã‚ˆã‚‹äºˆæ¸¬èª¤å·®ã®äºŒä¹—å¹³å‡ã®æ¸›å°‘é‡ã«å¯¾ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã®é‡ã¿ã‚’æ›ã‘ã¦æ±‚ã‚ãŸå€¤ã§ã‚ã‚‹ã€‚","id":77,"section":"posts","tags":["Python","Scikit-learn"],"title":"Scikit-learn ãƒ©ãƒ³ãƒ€ãƒ ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆå›å¸°ã®feature_importances_ã®å®šç¾©","uri":"https://helve-blog.com/posts/python/scikit-learn-feature-importances/"},{"content":"ã¯ã˜ã‚ã« ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªKerasã‚’å°å…¥ã—ãŸã€‚\nã“ã®ã¨ãã€KerasãŒãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ä½¿ç”¨ã™ã‚‹Tensorflowã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã‚„ã‚„è©°ã¾ã£ãŸãŸã‚ã€å‚™å¿˜éŒ²ã¨ã—ã¦æ‰‹é †ã‚’æ®‹ã™ã€‚\nNehalemä»¥å‰ã®CPUã‚’æŒã¤PCã§ã¯ã€Tensorflowã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’1.5ã¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nç’°å¢ƒ ã‚µãƒ–ã®ãƒãƒ¼ãƒˆPCï¼ˆ2010å¹´è£½ï¼‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚Pythonã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¯Anacondaã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\n OS: Linux Mint Ver. 19 CPU: Intel Core 2 Duo U9400  ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n   ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Conda 4.5.8   Python 3.6.5   Tensorflow 1.5   Keras 2.2.4    Tensorflowã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Kerasã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¨ã—ã¦TensorflowãŒå¿…è¦ãªãŸã‚ã€ã¾ãšTensorflowã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚CPUãŒå¤ã„ã®ã§Tensorflowã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’1.5ã«è½ã¨ã™ã€‚ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ä»¥ä¸‹ã‚’å…¥åŠ›ã™ã‚‹ã€‚\n1  $ pip install tensorflow==1.5   æ¬¡ã«Pythonã‚’èµ·å‹•ã—ã¦Tensorflowã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒæˆåŠŸã—ãŸã‹ç¢ºèªã™ã‚‹ã€‚\n1  $ python   1 2 3 4 5 6 7 8 9  \u0026gt;\u0026gt;\u0026gt; import tensorflow /home/ysd/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`. from ._conv import register_converters as _register_converters \u0026gt;\u0026gt;\u0026gt; hello = tf.constant(\u0026#39;Hello, TensorFlow!\u0026#39;) \u0026gt;\u0026gt;\u0026gt; sess = tf.Session() 2018-10-28 21:16:18.140490: I tensorflow/core/platform/cpu_feature_guard.cc:137] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 \u0026gt;\u0026gt;\u0026gt; sess = tf.Session() \u0026gt;\u0026gt;\u0026gt; print(sess.run(hello)) b\u0026#39;Hello, TensorFlow!\u0026#39;   Numpyã®FutureWarningãŒå‡ºãŸãŒã€ã²ã¨ã¾ãšæˆåŠŸã—ãŸã€‚\nã¡ãªã¿ã«ã€Tensorflowã®æœ€æ–°ç‰ˆ(v1.11)ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€pipã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã¯å•é¡ŒãŒãªã•ãã†ã«è¦‹ãˆã‚‹ãŒã€Pythonã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦PythonãŒçŸ¯æ­£çµ‚äº†ã—ã¦ã„ã¾ã†ã€‚\n1 2 3 4 5 6 7 8 9  $ pip install tensorflow ï¼ˆä¸­ç•¥ï¼‰ $ python Python 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56) [GCC 7.2.0] on linux Type \u0026#34;help\u0026#34;, \u0026#34;copyright\u0026#34;, \u0026#34;credits\u0026#34; or \u0026#34;license\u0026#34; for more information. \u0026gt;\u0026gt;\u0026gt; import tensorflow Illegal instruction (ã‚³ã‚¢ãƒ€ãƒ³ãƒ—) $   åŸå› ã¯ã€Tensorflowã®1.5.1ä»¥é™ã§AVXã¨ã„ã†å‘½ä»¤ã‚»ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ãŠã‚Šã€ã“ã‚Œã«Nehalemä¸–ä»£ä»¥å‰ã®CPUãŒå¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã‚‰ã—ã„ã€‚\nTensorflowã‚’1.6ä»¥ä¸Šã«ã™ã‚‹ã¨ã€CPUã«ã‚ˆã£ã¦ã¯å®Ÿè¡Œã§ããªããªã‚‹ï¼tensorflowã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®æ–¹æ³• - \u0026lsquo;BOKU\u0026rsquo;ã®ITãªæ—¥å¸¸\nIntel AVX â€ é€šä¿¡ç”¨èªã®åŸºç¤çŸ¥è­˜\nã“ã‚Œã‚’å›é¿ã™ã‚‹ãŸã‚ã€Gitã‹ã‚‰Tensorflowã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è½ã¨ã—ã¦è‡ªåˆ†ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨ã€å¤ã„PCUã§ã‚‚æœ€æ–°ã®Tensorflowã‚’ä½¿ãˆãã†ã ãŒã€æœ¬ç¨¿ã§ã¯æ‰±ã‚ãªã„ã€‚\nKerasã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Kerasã®æœ€æ–°ç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ç‰¹ã«å•é¡Œã¯ãªã‹ã£ãŸã€‚\n1 2 3 4 5 6 7 8 9 10  $ pip install keras ï¼ˆä¸­ç•¥ï¼‰ $ python Python 3.6.5 |Anaconda, Inc.| (default, Apr 29 2018, 16:14:56) [GCC 7.2.0] on linux Type \u0026#34;help\u0026#34;, \u0026#34;copyright\u0026#34;, \u0026#34;credits\u0026#34; or \u0026#34;license\u0026#34; for more information. \u0026gt;\u0026gt;\u0026gt; import keras /home/ysd/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`. from ._conv import register_converters as _register_converters Using TensorFlow backend.   ","description":"Nehalemä»¥å‰ã®CPUã‚’æŒã¤PCã§ã¯ã€Tensorflowã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’1.5ã¨ã™ã‚‹ã€‚","id":78,"section":"posts","tags":["Python","TensorFlow"],"title":"Tensorflowã‚’Nehalemä»¥å‰ã®PCã¸ã®å°å…¥ã™ã‚‹æ–¹æ³•","uri":"https://helve-blog.com/posts/python/tensorflow-nehalem-install/"},{"content":"ã¯ã˜ã‚ã« ã€Œãƒ™ã‚¤ã‚ºæ¨è«–ã«ã‚ˆã‚‹æ©Ÿæ¢°å­¦ç¿’å…¥é–€ã€ã‚’èª­ã‚“ã ã®ã§ã€ãƒ™ã‚¤ã‚ºæ¨è«–ï¼ˆãƒ™ã‚¤ã‚ºæ¨å®šï¼‰ã¸ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã€å¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å­¦ç¿’ã‚’Pythonã§å®Ÿè£…ã—ãŸã€‚\nå‚è€ƒã«ã—ãŸã®ã¯ã€è¬›è«‡ç¤¾ æ©Ÿæ¢°å­¦ç¿’ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã‚·ãƒªãƒ¼ã‚ºã®ã€Œãƒ™ã‚¤ã‚ºæ¨è«–ã«ã‚ˆã‚‹æ©Ÿæ¢°å­¦ç¿’å…¥é–€ã€ï¼ˆé ˆå±±æ•¦å¿— è‘—ï¼‰ã€‚3.4ç¯€ã€Œå¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å­¦ç¿’ã¨äºˆæ¸¬ã€ã‹ã‚‰ã€å¹³å‡ã¨ç²¾åº¦ï¼ˆåˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ï¼‰ãŒå…±ã«æœªçŸ¥ã®å ´åˆã«ãŠã‘ã‚‹å­¦ç¿’ã«ã¤ã„ã¦å®Ÿè£…ã—ãŸã€‚\nã¾ãŸã€å­¦ç¿’ã—ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”¨ã„ã¦ã€æœªè¦³æ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’äºˆæ¸¬ã™ã‚‹ãŸã‚ã®åˆ†å¸ƒï¼ˆäºˆæ¸¬åˆ†å¸ƒï¼‰ã‚‚æ§‹ç¯‰ã—ãŸã€‚\nãªãŠã€ä»¥ä¸‹ã®ãƒ–ãƒ­ã‚°ã«é›¢æ•£ç¢ºç‡åˆ†å¸ƒï¼ˆãƒ™ãƒ«ãƒŒãƒ¼ã‚¤åˆ†å¸ƒãƒ»ã‚«ãƒ†ã‚´ãƒªåˆ†å¸ƒãƒ»ãƒã‚¢ã‚½ãƒ³åˆ†å¸ƒï¼‰ã¨1æ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å­¦ç¿’ã®å®Ÿè£…ä¾‹ãŒã‚ã£ãŸãŸã‚ã€ä½µã›ã¦å‚è€ƒã«ã•ã›ã¦é ‚ã„ãŸã€‚\nã€Œãƒ™ã‚¤ã‚ºæ¨è«–ã«ã‚ˆã‚‹æ©Ÿæ¢°å­¦ç¿’å…¥é–€ã€ã‚’èª­ã‚“ã ã®ã§å®Ÿé¨“ã—ã¦ã¿ãŸ (ãã®1)\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     python 3.6.5   numpy 1.14.3   scipy 1.1.0   matplotlib 2.2.2    ä»¥ä¸‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3 4  import math import numpy as np import scipy.stats import matplotlib.pyplot as plt   ãƒ™ã‚¤ã‚ºå­¦ç¿’ã«ã¤ã„ã¦ ãƒ™ã‚¤ã‚ºå­¦ç¿’ã¯ã€è¦³æ¸¬ãƒ‡ãƒ¼ã‚¿ã¨æœªçŸ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹åŒæ™‚ç¢ºç‡åˆ†å¸ƒã‚’æ§‹ç¯‰ã—ã€è¦³æ¸¬ãƒ‡ãƒ¼ã‚¿ãŒå¾—ã‚‰ã‚ŒãŸã¨ãã®æœªçŸ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®äº‹å¾Œåˆ†å¸ƒã‚’æ±‚ã‚ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚\nã“ã“ã§ã¯ã€å¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å¹³å‡ã¨ç²¾åº¦ãŒæœªçŸ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ãªã‚‹ã€‚\nå¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®ãƒ™ã‚¤ã‚ºæ¨è«– $D$æ¬¡å…ƒã®å¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã¯ã€æ¬¡å¼ã§è¡¨ã•ã‚Œã‚‹ã€‚\n$$ \\mathcal{N}(x|\\mu, \\Sigma) = \\frac{1}{\\sqrt{(2\\pi)^D|\\Sigma|}} \\exp \\biggl( -\\frac{1}{2} (x-\\mu)^\\top \\Sigma^{-1} (x-\\mu) \\biggl) $$\nã“ã“ã§ã€$ \\mu \\in \\mathbb{R}^D$ ã¯å¹³å‡ã€$ \\Sigma \\in \\mathbb{R}^{D \\times D}$ã¯åˆ†æ•£å…±åˆ†æ•£è¡Œåˆ—ã§ã‚ã‚‹ã€‚\nãŸã ã—ã€$\\Sigma$ã¯æ­£å®šå€¤è¡Œåˆ—ï¼ˆå›ºæœ‰å€¤ãŒå…¨ã¦éè² ï¼‰ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚\nå¾Œã€…ã®æ•°å¼ã‚’ç°¡å˜ã«ã™ã‚‹ãŸã‚ã€ç²¾åº¦è¡Œåˆ—$\\Lambda = \\Sigma^{-1}$ã‚’å°å…¥ã™ã‚‹ã€‚\n$\\mu, \\Lambda$ãŒæ¨å®šã—ãŸã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ãªã‚‹ã€‚\n$\\mu, \\Lambda$ã®ç¢ºç‡åˆ†å¸ƒã‚’è¡¨ç¾ã™ã‚‹å…±å½¹äº‹å‰åˆ†å¸ƒã¯ã€ã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã¨ãªã‚‹ã€‚\n$$ \\begin{array}{rl} p(\\mu, \\Lambda) \u0026amp;=\u0026amp; NW(\\mu, \\Lambda | m, \\beta, \\nu, W) \\\\ \u0026amp;=\u0026amp; \\mathcal{N}(\\mu | m, (\\beta \\Lambda)^{-1}) \\mathcal{W}(\\Lambda | \\nu, W) \\end{array} $$\nã“ã“ã§ã€$m, \\beta, \\nu, W$ã¯ã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚‹ã€‚åˆæœŸå€¤ã¯ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™ã‚ˆã†ã«é©å½“ã«ä¸ãˆã‚‹ã€‚\n $m \\in \\mathcal{R}^{D}$: å®Ÿæ•°ãƒ™ã‚¯ãƒˆãƒ« $\\beta \\in \\mathcal{R}$: å®Ÿæ•° $\\nu \\in \\mathcal{R}$: $\\nu \u0026gt; D-1$ã‚’æº€ãŸã™å®Ÿæ•° $W \\in \\mathcal{R}^{D \\times D}$: æ­£å®šå€¤è¡Œåˆ—ï¼ˆå›ºæœ‰å€¤ãŒå…¨ã¦éè² ï¼‰  äº‹å¾Œåˆ†å¸ƒã‚’è¨ˆç®—ã™ã‚‹ã¨ã€ã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«ä¸ãˆã‚‰ã‚Œã‚‹ï¼ˆè©³ç´°ã¯æœ¬ã‚’å‚ç…§ï¼‰ã€‚\n$$ \\hat{\\beta} = N + \\beta $$\n$$ \\hat{m} = \\frac{1}{\\hat{\\beta}} \\left( \\sum_{n=1}^N x_n + \\beta m \\right) $$\n$$ \\hat{W}^{-1} = \\sum_{n=1}^N x_n x_n^{\\top} + \\beta mm^{\\top} - \\hat{\\beta} \\hat{m} \\hat{m}^{\\top} + W^{-1} $$\n$$ \\hat{\\nu} = N + \\nu $$\nå­¦ç¿’ã—ãŸã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ã€æœªè¦³æ¸¬ã®ãƒ‡ãƒ¼ã‚¿$x$ã‚’äºˆæ¸¬ã™ã‚‹ã€‚äºˆæ¸¬åˆ†å¸ƒã¯$x\\in \\mathbb{R}^D$ä¸Šã®å¤šæ¬¡å…ƒç‰ˆã®ã‚¹ãƒãƒ¥ãƒ¼ãƒ‡ãƒ³ãƒˆã®tåˆ†å¸ƒã¨ãªã‚‹ã€‚\n$$ \\mathrm{St} (x|\\mu_s, \\Lambda_s, \\nu_s) = \\frac{\\Gamma( \\frac{\\nu_s+D}{2}) }{\\Gamma( \\frac{\\nu_s}{2})} \\frac{|\\Lambda_s|^{\\frac{1}{2}}}{(\\pi \\nu_s)^{\\frac{D}{2}}} \\biggl( 1+\\frac{1}{\\nu_s} (x-\\mu_s)^{\\top} \\Lambda_s (x-\\mu_s) \\biggl)^{-\\frac{\\nu_s +D}{2} } $$\nã“ã“ã§ã€ã‚¹ãƒãƒ¥ãƒ¼ãƒ‡ãƒ³ãƒˆã®tåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦æ¬¡å¼ã§ä¸ãˆã‚‰ã‚Œã‚‹ã€‚\n$$ \\mu_s = m $$\n$$ \\Lambda_s = \\frac{(1-D+\\nu)\\beta}{1+\\beta}W $$\n$$ \\nu_s = 1-D+\\nu $$\nã¾ãŸã€$\\Gamma(\\bullet)$ã¯ã‚¬ãƒ³ãƒé–¢æ•°ã¨å‘¼ã°ã‚Œã‚‹é–¢æ•°ã§ã‚ã‚‹ã€‚\nå­¦ç¿’ãŒé€²ã‚€ã«ã¤ã‚Œã¦ã€ã‚¹ãƒãƒ¥ãƒ¼ãƒ‡ãƒ³ãƒˆã®tåˆ†å¸ƒã®å½¢çŠ¶ã¯ã€å…ƒã®å¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å½¢çŠ¶ã«è¿‘ã¥ã„ã¦ã„ãã€‚\nå®Ÿè£… ã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¨å®š è¦³æ¸¬ãƒ‡ãƒ¼ã‚¿Xã‹ã‚‰ã€ã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ¨å®šå€¤$\\hat{m}, \\hat{\\beta}, \\hat{\\nu}, \\hat{W}$ã‚’æ¨å®šã™ã‚‹é–¢æ•°ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã™ã‚‹ã€‚\nãŸã ã—ã€è¨ˆç®—åŠ¹ç‡ã¯é‡è¦–ã›ãšã€æ•°å¼é€šã‚Šã«å®Ÿè£…ã™ã‚‹ã“ã¨ã‚’å„ªå…ˆã—ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  def multivariate_normal_fit(X): N = X.shape[0] # Number of samples D = X.shape[1] # Dimension of sample beta = 1 m = np.zeros(D) W_inv = np.linalg.inv(np.diag(np.ones(D))) nu = D beta_hat = N + beta m_hat = (X.sum(axis=0)+beta*m)/beta_hat X_sum = np.zeros([D, D]) for i in range(N): X_sum += np.dot(X[i].reshape(-1,1), X[i].reshape(1,-1)) W_hat_inv = X_sum + beta*np.dot(m.reshape(-1,1), m.reshape(1,-1)) \\ - beta_hat*np.dot(m_hat.reshape(-1,1), m_hat.reshape(1,-1)) + W_inv nu_hat = N + nu return m_hat, beta_hat, nu_hat, W_hat_inv   å¤šæ¬¡å…ƒç‰ˆã®ã‚¹ãƒãƒ¥ãƒ¼ãƒ‡ãƒ³ãƒˆã®tåˆ†å¸ƒ å­¦ç¿’å¾Œã®ç¢ºç‡åˆ†å¸ƒã‚’ç¢ºèªã™ã‚‹ãŸã‚ã€å¤šæ¬¡å…ƒç‰ˆã®ã‚¹ãƒãƒ¥ãƒ¼ãƒ‡ãƒ³ãƒˆã®tåˆ†å¸ƒã‚’ã‚¯ãƒ©ã‚¹ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã€‚\nç¢ºç‡å¯†åº¦é–¢æ•° (Probability Density Function, PDF) ã‚’æ±‚ã‚ã‚‹ãŸã‚ã€pdfãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã—ãŸã€‚pdfãƒ¡ã‚½ãƒƒãƒ‰ã«é…åˆ—ã‚’å¼•æ•°ã¨ã—ã¦ä¸ãˆã‚‹ã¨ã€ãã®é…åˆ—ã«å¯¾å¿œã™ã‚‹ç¢ºç‡ã‚’è¿”ã™ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  class multivariate_student_t(): def __init__(self, mu, lam, nu): # mu: D size array, lam: DxD matrix, nu: scalar self.D = mu.shape[0] self.mu = mu self.lam = lam self.nu = nu def pdf(self, x): temp1 = np.exp( math.lgamma((self.nu+self.D)/2) - math.lgamma(self.nu/2) ) temp2 = np.sqrt(np.linalg.det(self.lam)) / (np.pi*self.nu)**(self.D/2) if x.shape[0]==1: temp3 = 1 + np.dot(np.dot((x-self.mu).T, self.lam), x-self.mu)/self.nu else: temp3 = [] for a in x: temp3 += [1 + np.dot(np.dot((a-self.mu).T, self.lam), a-self.mu)/self.nu] temp4 = -(self.nu+self.D)/2 return temp1*temp2*(np.array(temp3)**temp4)   ã“ã“ã§ã€ã‚¬ãƒ³ãƒé–¢æ•°ã®è‡ªç„¶å¯¾æ•°ã‚’è¿”ã™math.lgammaã§å®Ÿè£…ã—ãŸã€‚\nã‚¬ãƒ³ãƒé–¢æ•°math.gammaã¯å¤§ããªå€¤ã‚’å–ã‚Šå¾—ã‚‹ã“ã¨ãŒã‚ã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ãŒç”Ÿã˜ã‚‹å ´åˆãŒã‚ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7  \u0026gt;\u0026gt;\u0026gt; math.gamma(200) Traceback (most recent call last): File \u0026#34;\u0026lt;ipython-input-31-4fa9aaaad750\u0026gt;\u0026#34;, line 1, in \u0026lt;module\u0026gt; math.gamma(200) OverflowError: math range error   ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å­¦ç¿’ å­¦ç¿’ã®çµæœã‚’ç¢ºèªã™ã‚‹ã€‚å›³ç¤ºã§ãã‚‹ã‚ˆã†ã«ã€ãƒ‡ãƒ¼ã‚¿ã®æ¬¡å…ƒã¯$D=2$ã¨ã™ã‚‹ã€‚\nã¾ãšã€å¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã«å¾“ã†ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã€‚\nã“ã“ã§ã€ãƒ‡ãƒ¼ã‚¿ã®å¹³å‡ã¯$(x_1, x_2)=(0, 1)$ã§ã‚ã‚Šã€æ­£ã®ç›¸é–¢ã‚’æŒã¤ã€‚\n1 2 3 4 5 6 7 8  np.random.seed(0) mean = np.array([0, 1]) cov = np.array([[2, 1], [1, 2]]) Ns = 100 # Number of samples X = np.random.multivariate_normal(mean, cov, Ns) # Sample data   ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æ•£å¸ƒå›³ã«ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  fig, ax = plt.subplots(figsize=(8, 4)) ax.scatter(X[:,0], X[:,1]) ax.axis(\u0026#39;square\u0026#39;) ax.set_xlim(-5,5) ax.set_ylim(-5,5) ax.grid() ax.set_xlabel(\u0026#34;x1\u0026#34;) ax.set_ylabel(\u0026#34;x2\u0026#34;) fig.tight_layout() plt.show()   æ¬¡ã«ã€é–¢æ•°multivariate_normal_fitã‹ã‚‰ã€ã‚¬ã‚¦ã‚¹ãƒ»ã‚¦ã‚£ã‚·ãƒ£ãƒ¼ãƒˆåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ±‚ã‚ã‚‹ã€‚\n1  m_hat, beta_hat, nu_hat, W_hat_inv = multivariate_normal_fit(X)   å¾—ã‚‰ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ã‚¹ãƒãƒ¥ãƒ¼ãƒ‡ãƒ³ãƒˆã®tåˆ†å¸ƒã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å¤‰æ›ã—ã€\nmultivariate_student_tã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\n1 2 3 4 5 6  D = m_hat.shape[0] mu_hat = m_hat lam_hat = (1-D+nu_hat)*beta_hat*np.linalg.inv(W_hat_inv) / (1+beta_hat) nu_hat = 1 - D + nu_hat mt = multivariate_student_t(mu_hat, lam_hat, nu_hat)   æœ€å¾Œã«ã€å…ƒã®ã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å½¢çŠ¶ã¨ã€æ¨å®šã—ãŸã‚¹ãƒãƒ¥ãƒ¼ãƒ‡ãƒ³ãƒˆã®tåˆ†å¸ƒã®å½¢çŠ¶ã‚’æ¯”è¼ƒã™ã‚‹ã€‚\nä¸¡ç¢ºç‡åˆ†å¸ƒã®ç¢ºç‡ã‚’ã€x1, x2ã¨ã‚‚-5ï½5ã®ç¯„å›²ã§æ±‚ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8  X1, X2 = np.meshgrid(np.arange(-5, 5, 0.1), np.arange(-5, 5, 0.1)) Y = np.vstack([X1.ravel(), X2.ravel()]).T mn_pdf = scipy.stats.multivariate_normal.pdf(Y, mean=mean, cov=cov) mn_pdf = mn_pdf.reshape(X1.shape[0], -1) mt_pdf = mt.pdf(Y) mt_pdf = mt_pdf.reshape(X1.shape[0], -1)   ã“ã‚Œã‚‰ã‚’ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã«è¡¨ç¤ºã™ã‚‹ã€‚è‰²ãŒæ¿ƒã„ã»ã©ç¢ºç‡ãŒé«˜ã„ã“ã¨ã‚’è¡¨ã™ã€‚\nã“ã®ã‚ˆã†ã«ã€æ¨å®šã—ãŸç¢ºç‡å¯†åº¦é–¢æ•°ã¨ã€å…ƒã®ç¢ºç‡å¯†åº¦é–¢æ•°ã¯ã»ã¼ä¸€è‡´ã—ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  fig, ax = plt.subplots(ncols=2, figsize=(10, 4)) ax0 = ax[0].pcolor(X1, X2, mn_pdf, cmap=\u0026#34;Blues\u0026#34;, vmin=0, vmax=0.1) ax1 = ax[1].pcolor(X1, X2, mt_pdf, cmap=\u0026#34;Blues\u0026#34;, vmin=0, vmax=0.1) for i in range(2): ax[i].axis(\u0026#39;equal\u0026#39;) ax[i].grid() ax[i].set_xlabel(\u0026#34;x1\u0026#34;) ax[i].set_ylabel(\u0026#34;x2\u0026#34;) ax[0].set_title(\u0026#34;Original PDF\u0026#34;) ax[1].set_title(\u0026#34;Inferred PDF\u0026#34;) plt.colorbar(ax=ax[0], mappable=ax0) plt.colorbar(ax=ax[1], mappable=ax1) fig.tight_layout() plt.show()   ä»¥ä¸Šã‚’ã¾ã¨ã‚ãŸã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n\r\rã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹\r\r1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102  import math import numpy as np import scipy.stats import matplotlib.pyplot as plt class multivariate_student_t(): def __init__(self, mu, lam, nu): # mu: D size array, lam: DxD matrix, nu: scalar self.D = mu.shape[0] self.mu = mu self.lam = lam self.nu = nu def pdf(self, x): temp1 = np.exp( math.lgamma((self.nu+self.D)/2) - math.lgamma(self.nu/2) ) temp2 = np.sqrt(np.linalg.det(self.lam)) / (np.pi*self.nu)**(self.D/2) if x.shape[0]==1: temp3 = 1 + np.dot(np.dot((x-self.mu).T, self.lam), x-self.mu)/self.nu else: temp3 = [] for a in x: temp3 += [1 + np.dot(np.dot((a-self.mu).T, self.lam), a-self.mu)/self.nu] temp4 = -(self.nu+self.D)/2 return temp1*temp2*(np.array(temp3)**temp4) def multivariate_normal_fit(X): N = X.shape[0] # Number of samples D = X.shape[1] # Dimension of sample beta = 1 m = np.zeros(D) W_inv = np.linalg.inv(np.diag(np.ones(D))) nu = D beta_hat = N + beta m_hat = (X.sum(axis=0)+beta*m)/beta_hat X_sum = np.zeros([D, D]) for i in range(N): X_sum += np.dot(X[i].reshape(-1,1), X[i].reshape(1,-1)) W_hat_inv = X_sum + beta*np.dot(m.reshape(-1,1), m.reshape(1,-1)) \\ - beta_hat*np.dot(m_hat.reshape(-1,1), m_hat.reshape(1,-1)) + W_inv nu_hat = N + nu return m_hat, beta_hat, nu_hat, W_hat_inv if __name__==\u0026#34;__main__\u0026#34;: np.random.seed(0) mean = np.array([0, 1]) cov = np.array([[2, 1], [1, 2]]) Ns = 100 # Number of samples X = np.random.multivariate_normal(mean, cov, Ns) # Sample data fig, ax = plt.subplots(figsize=(8, 4)) ax.scatter(X[:,0], X[:,1]) ax.axis(\u0026#39;square\u0026#39;) ax.set_xlim(-5,5) ax.set_ylim(-5,5) ax.grid() ax.set_xlabel(\u0026#34;x1\u0026#34;) ax.set_ylabel(\u0026#34;x2\u0026#34;) fig.tight_layout() plt.show() m_hat, beta_hat, nu_hat, W_hat_inv = multivariate_normal_fit(X) D = m_hat.shape[0] mu_hat = m_hat lam_hat = (1-D+nu_hat)*beta_hat*np.linalg.inv(W_hat_inv) / (1+beta_hat) nu_hat = 1 - D + nu_hat mt = multivariate_student_t(mu_hat, lam_hat, nu_hat) X1, X2 = np.meshgrid(np.arange(-5, 5, 0.1), np.arange(-5, 5, 0.1)) Y = np.vstack([X1.ravel(), X2.ravel()]).T mn_pdf = scipy.stats.multivariate_normal.pdf(Y, mean=mean, cov=cov) mn_pdf = mn_pdf.reshape(X1.shape[0], -1) mt_pdf = mt.pdf(Y) mt_pdf = mt_pdf.reshape(X1.shape[0], -1) fig, ax = plt.subplots(ncols=2, figsize=(10, 4)) ax0 = ax[0].pcolor(X1, X2, mn_pdf, cmap=\u0026#34;Blues\u0026#34;, vmin=0, vmax=0.1) ax1 = ax[1].pcolor(X1, X2, mt_pdf, cmap=\u0026#34;Blues\u0026#34;, vmin=0, vmax=0.1) for i in range(2): ax[i].axis(\u0026#39;equal\u0026#39;) ax[i].grid() ax[i].set_xlabel(\u0026#34;x1\u0026#34;) ax[i].set_ylabel(\u0026#34;x2\u0026#34;) ax[0].set_title(\u0026#34;Original PDF\u0026#34;) ax[1].set_title(\u0026#34;Inferred PDF\u0026#34;) plt.colorbar(ax=ax[0], mappable=ax0) plt.colorbar(ax=ax[1], mappable=ax1) fig.tight_layout() plt.show()   \r\r ã¾ãŸã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ³ãƒ—ãƒ«æ•°Nsã‚’5, 10, 100ã¨å¤‰ãˆã¦ã€æ¨å®šç²¾åº¦ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’èª¿ã¹ã‚‹ã€‚ä¸‹å›³ã®ã‚ˆã†ã«ã€NsãŒå¢—ãˆã‚‹ã»ã©ã€å…ƒã®ç¢ºç‡å¯†åº¦åˆ†å¸ƒï¼ˆå·¦ä¸Šï¼‰ã«è¿‘ã¥ã„ã¦ã„ã‚‹ã€‚\n","description":"ãƒ™ã‚¤ã‚ºæ¨è«–ï¼ˆãƒ™ã‚¤ã‚ºæ¨å®šï¼‰ã¸ã®ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚ã€å¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å­¦ç¿’ã‚’Pythonã§å®Ÿè£…ã—ãŸã€‚","id":79,"section":"posts","tags":["çµ±è¨ˆå­¦"],"title":"ãƒ™ã‚¤ã‚ºæ¨è«–ã«ã‚ˆã‚‹å¤šæ¬¡å…ƒã‚¬ã‚¦ã‚¹åˆ†å¸ƒã®å­¦ç¿’","uri":"https://helve-blog.com/posts/math/bayesian-inference-multivariate-gaussian-distribution/"},{"content":"ã¯ã˜ã‚ã« å‰å›ã®è¨˜äº‹ã§ã€Chainerã®Chainã‚¯ãƒ©ã‚¹ã¨Optimizerã‚’ä½¿ã£ã¦æœ€å°é™ã®ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ (NN) ã‚’å®Ÿè£…ã—ãŸã€‚ä»Šå›ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‹ã‚‰å­¦ç¿’ç”¨ãƒŸãƒ‹ãƒãƒƒãƒã‚’ä½œæˆã—ã¦ãã‚Œã‚‹Iteratorã‚¯ãƒ©ã‚¹ã®å‹•ä½œã‚’ç¢ºèªã™ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Spyder 3.2.8   Python 3.6.5   NumPy 1.14.3   Chainer 4.2.0    ä»¥ä¸‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7  import numpy as np import matplotlib.pyplot as plt import chainer import chainer.links as L import chainer.functions as F from chainer import optimizers, Chain, dataset, datasets, iterators import matplotlib.pyplot as plt   Iteratorã‚¯ãƒ©ã‚¹ Iteratorã‚¯ãƒ©ã‚¹ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®èª¬æ˜å¤‰æ•°ã¨ç›®çš„å¤‰æ•°ã‚’æŸã­ãŸãƒŸãƒ‹ãƒãƒƒãƒä½œæˆã‚„ã€ãƒ‡ãƒ¼ã‚¿é †åºã®ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã‚’è¡Œã£ã¦ãã‚Œã‚‹ã‚¯ãƒ©ã‚¹ã§ã‚ã‚‹ã€‚Chainer 4.2.0ã§ã¯ä»¥ä¸‹3ã¤ã®IteratorãŒåˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã€‚\n   ã‚¯ãƒ©ã‚¹ èª¬æ˜     SerialIterator æœ€ã‚‚å˜ç´”ãªIterator   MultiprocessIterator multiprocessingãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ˆã‚Šä¸¦åˆ—åŒ–   MultithreadIterator threadingãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ˆã‚Šä¸¦åˆ—åŒ–    æœ¬è¨˜äº‹ã§ã¯SerialIteratorã‚¯ãƒ©ã‚¹ã‚’æ‰±ã†ã€‚\n1 2  chainer.iterators.SerialIterator(dataset, batch_size, repeat=True, shuffle=True)   ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\ndataset:\nåå¾©ã•ã›ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã€‚\nbatch_size: intå‹\nå„ãƒŸãƒ‹ãƒãƒƒãƒã®ã‚µãƒ³ãƒ—ãƒ«æ•°ã€‚\nrepeat: boolå‹\nTrueã®å ´åˆã€ç„¡é™ã«åå¾©ã•ã›ã‚‹ã€‚\nFalseã®å ´åˆã€å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿(1ã‚¨ãƒãƒƒã‚¯åˆ†)ã‚’è¿”ã™ã¨åå¾©ã‚’çµ‚ãˆã‚‹ã€‚\nshuffle: boolå‹\nTrueã®å ´åˆã€ãƒ©ãƒ³ãƒ€ãƒ ãªé †åºã§ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™ã€‚\nFalseã®å ´åˆã€datasetã¨åŒã˜é †åºã§è¿”ã™ã€‚\nSerialIteratorã®å‹•ä½œã‚’ç¢ºèªã™ã‚‹ã€‚\nã‚¹ã‚¯ãƒªãƒ—ãƒˆ\n1 2 3 4 5 6 7 8 9  np.random.seed(0) data = np.arange(3) data = chainer.Variable(data) ite = chainer.iterators.SerialIterator(data, batch_size=2, repeat=True, shuffle=True) for i in range(5): print(ite.next())   ä¸Šã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®é †åºã‚’å›ºå®šã™ã‚‹ãŸã‚ã€np.random.seed(0)ã¨ã—ã¦NumPyã®ä¹±æ•°ã‚·ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ã„ã‚‹ã€‚\n0, 1, 2ã®3ã¤ã®æ•°å­—ã‹ã‚‰ãªã‚‹é…åˆ—ã‚’Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ã€SerialIteratorã«ã‚»ãƒƒãƒˆã™ã‚‹ã€‚\nãƒãƒƒãƒæ•°ã¯2ã¨ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™é †åºã¯ãƒ©ãƒ³ãƒ€ãƒ ã¨ã™ã‚‹ã€‚\nSerialIteratorã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆiteã®next()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒãƒƒãƒæ•°ã ã‘ãƒ‡ãƒ¼ã‚¿ãŒè¿”ã•ã‚Œã‚‹ã€‚\nå®Ÿè¡Œçµæœ\n1 2 3 4 5  [variable(2), variable(1)] [variable(0), variable(0)] [variable(2), variable(1)] [variable(0), variable(1)] [variable(2), variable(2)]   å®Ÿè¡Œçµæœã‚’è¦‹ã‚‹ã¨ã€Variableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒbatch_sizeæ•°ã ã‘ãƒªã‚¹ãƒˆå½¢å¼ã§è¿”ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒ‡ãƒ¼ã‚¿(0, 1, 2)ã‚’ä¸€é€šã‚Šè¿”ã™ã¨ã€åŒã˜ãƒªã‚¹ãƒˆã§ã‚ã£ã¦ã‚‚ç¶™ç¶šã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã—ã¦ã„ã‚‹ã€‚\nTupleDatasetã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä½œæˆ Iteratorã‚¯ãƒ©ã‚¹ã«ã‚»ãƒƒãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ç”¨æ„ã™ã‚‹å ´åˆã€TupleDatasetã‚’ç”¨ã„ã‚‹ã¨ä¾¿åˆ©ã§ã‚ã‚‹ã€‚\n1  chainer.datasets.TupleDataset(*datasets)   datasetsã¯ä»»æ„ã®æ•°ã®ãƒ‡ãƒ¼ã‚¿å¤‰æ•°ã§ã‚ã‚‹ã€‚ãŸã ã—ã€ãƒ‡ãƒ¼ã‚¿ã¯å…¨ã¦åŒã˜é•·ã•ï¼ˆè¡Œæ•°ï¼‰ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚\nTupleDatasetã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯æ¬¡ã®2ã¤ã€‚\ngetitem(index):\nindexã§æŒ‡å®šã—ãŸè¦ç´ ã‚’ã‚¿ãƒ—ãƒ«ã§è¿”ã™ã€‚\nlen:\nãƒ‡ãƒ¼ã‚¿ã®é•·ã•ï¼ˆè¡Œæ•°ï¼‰ã‚’è¿”ã™ã€‚\nä¾‹ãˆã°ã€2ã¤ã®NumPyé…åˆ—d1, d2ã‚’å¼•æ•°ã¨ã—ã¦ã€æ¬¡ã®ã‚ˆã†ã«TupleDatasetã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  d1 = np.array([[1, 2], [3, 4], [5, 6]], dtype=np.float32) d2 = np.array([[7], [9], [8]], dtype=np.float32) dataset = datasets.TupleDataset(d1, d2) print(dataset.__len__()) for i in range(3): print(dataset.__getitem__(i))   å®Ÿè¡Œçµæœ\n1 2 3 4  3 (array([1., 2.], dtype=float32), array([7.], dtype=float32)) (array([3., 4.], dtype=float32), array([9.], dtype=float32)) (array([5., 6.], dtype=float32), array([8.], dtype=float32))   ãƒ‡ãƒ¼ã‚¿ã®é•·ã•ã¯3, ã¾ãŸã€__getitem__ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šã€d1, d2ã®è¦ç´ ãŒ1è¡Œãšã¤å–ã‚Šå‡ºã•ã‚Œã¦ã„ã‚‹ã€‚\næ¬¡ã«ã€TupleDatasetã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’SerialIteratorã«ã‚»ãƒƒãƒˆã—ã¦ã¿ã‚‹ã€‚ãƒãƒƒãƒæ•°ã¯2ã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  d1 = np.array([[1, 2], [3, 4], [5, 6]], dtype=np.float32) d2 = np.array([[7], [9], [8]], dtype=np.float32) data_set = datasets.TupleDataset(d1, d2) ite = iterators.SerialIterator(data_set, batch_size=2, repeat=True, shuffle=True) for i in range(5): print(ite.next())   å®Ÿè¡Œçµæœ\n1 2 3 4 5  [(array([5., 6.], dtype=float32), array([8.], dtype=float32)), (array([1., 2.], dtype=float32), array([7.], dtype=float32))] [(array([3., 4.], dtype=float32), array([9.], dtype=float32)), (array([5., 6.], dtype=float32), array([8.], dtype=float32))] [(array([1., 2.], dtype=float32), array([7.], dtype=float32)), (array([3., 4.], dtype=float32), array([9.], dtype=float32))] [(array([3., 4.], dtype=float32), array([9.], dtype=float32)), (array([5., 6.], dtype=float32), array([8.], dtype=float32))] [(array([1., 2.], dtype=float32), array([7.], dtype=float32)), (array([3., 4.], dtype=float32), array([9.], dtype=float32))]   ã“ã®ã‚ˆã†ã«ã€å„ite.next()æ¯ã«ã€d1ã¨d2ã®å„è¡ŒãŒãƒã‚¹ãƒˆã•ã‚ŒãŸã‚¿ãƒ—ãƒ«ã§å¾—ã‚‰ã‚Œã‚‹ã€‚\nite.next()ã®çµæœã‚’d1, d2æ¯ã«ã¾ã¨ã‚ã‚‹ãŸã‚ã«ã¯ã€chainer.dataset.concat_examples()ã‚’ç”¨ã„ã‚‹ã€‚ï¼ˆè©•ä¾¡é–¢æ•°ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¸ãˆã‚‹ã¨ãã«å¿…è¦ï¼‰\n1  dataset.concat_examples(ite.next())   å®Ÿè¡Œçµæœ\n1 2 3 4  (array([[5., 6.], [3., 4.]], dtype=float32), array([[8.], [9.]], dtype=float32))   å®Ÿè£…ä¾‹ Iteratorã‚’ä½¿ã£ãŸå­¦ç¿’ä¾‹ã‚’ç¤ºã™ã€‚å‰å›ã®è¨˜äº‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ”¹è‰¯ã—ãŸã€‚\nå­¦ç¿’ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®é †åºã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«å…¥ã‚Œæ›¿ãˆã‚‹ä»¥å¤–ã€å‰å›ã¨åŒã˜å­¦ç¿’æ¡ä»¶ã§ã‚ã‚‹ã€‚\nç·šå½¢ãƒ¢ãƒ‡ãƒ« y=x-5 ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚\nèª¬æ˜å¤‰æ•° x ã¯0ï½9.9ã¾ã§0.1åˆ»ã¿ã§100ç‚¹ã¨ã™ã‚‹ã€‚\nã¾ãŸã€æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã®ç›®çš„å¤‰æ•°ã«ã¯ã€å¹³å‡0, åˆ†æ•£0.1ã®æ­£è¦åˆ†å¸ƒã«å¾“ã†ä¿¡å·ã‚’ãƒã‚¤ã‚ºã¨ã—ã¦åŠ ãˆãŸã€‚\nã“ã®æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã‚’100å›åå¾©ã•ã›ã¦å­¦ç¿’ã•ã›ã‚‹ï¼ˆã‚¨ãƒãƒƒã‚¯æ•°100ï¼‰ã€‚\nã¾ãŸã€æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã‚’2ç‚¹ãšã¤ä¸ãˆã‚‹ãƒãƒƒãƒå‡¦ç†ã‚’è¡Œã†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74  import numpy as np import chainer import chainer.links as L import chainer.functions as F from chainer import optimizers, Chain, dataset, datasets import matplotlib.pyplot as plt class MyChain(Chain): def __init__(self): super(MyChain, self).__init__() with self.init_scope(): self.l1 = L.Linear(None, 3) self.l2 = L.Linear(3, 1) def __call__(self, x): h = F.relu(self.l1(x)) return self.l2(h) def lossfun(train_y, pred_y): loss = F.mean_squared_error(train_y, pred_y) return loss np.random.seed(0) batch_size = 2 # ãƒãƒƒãƒæ•° n_epoch = 100 # ã‚¨ãƒãƒƒã‚¯æ•° model = MyChain() optimizer = optimizers.SGD().setup(model) x_data = np.arange(0, 10, 0.1, dtype=np.float32).reshape(-1,1) # èª¬æ˜å¤‰æ•° y_data = x_data-5 + 0.1*np.random.randn(len(x_data)).reshape(-1,1) y_data = y_data.astype(np.float32) # ç›®çš„å¤‰æ•° data_set = datasets.TupleDataset(x_data, y_data) ite = chainer.iterators.SerialIterator(data_set, batch_size=batch_size, repeat=True, shuffle=True) pred_y_before = model(x_data) # å­¦ç¿’å‰ã®äºˆæ¸¬å€¤ mean_err = [] # å¹³å‡äºˆæ¸¬èª¤å·® for epoch in range(n_epoch): err_temp = 0 for i in range(0, x_data.shape[0], batch_size): batch = ite.next() train_x, train_y = dataset.concat_examples(batch) pred_y = model(train_x) optimizer.update(lossfun, train_y, pred_y) err_temp += F.mean_squared_error(train_y, pred_y).data*batch_size mean_err += [err_temp/x_data.shape[0]] pred_y_after = model(x_data) # å­¦ç¿’å¾Œã®äºˆæ¸¬å€¤ fig, ax = plt.subplots() ax.plot(x_data, y_data, label=\u0026#34;True values\u0026#34;) ax.plot(x_data, pred_y_before.data, label=\u0026#34;Before learning\u0026#34;) ax.plot(x_data, pred_y_after.data, label=\u0026#34;After learning\u0026#34;) ax.set_xlabel(\u0026#34;x\u0026#34;) ax.set_ylabel(\u0026#34;y\u0026#34;) ax.legend() ax.grid() plt.show() fig, ax = plt.subplots() ax.plot(mean_err) ax.set_xlabel(\u0026#34;Epoch\u0026#34;) ax.set_ylabel(\u0026#34;Mean squared error\u0026#34;) ax.grid() plt.show()   å­¦ç¿’å‰å¾Œã®ãƒ¢ãƒ‡ãƒ«ã®äºˆæ¸¬å€¤ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ãŸï¼ˆé’ãŒæ•™å¸«ãƒ‡ãƒ¼ã‚¿ã€é»„è‰²ãŒå­¦ç¿’å‰ã®äºˆæ¸¬å€¤ã€ç·‘ãŒå­¦ç¿’å¾Œã®äºˆæ¸¬å€¤ï¼‰ã€‚\nå­¦ç¿’ã«ã‚ˆã£ã¦ã€äºˆæ¸¬å€¤ãŒæ•™å¸«ãƒ‡ãƒ¼ã‚¿ã«è¿‘ã¥ã„ã¦ã„ã‚‹ã€‚\nã¾ãŸã€ã‚¨ãƒãƒƒã‚¯ã”ã¨ã®äºˆæ¸¬ã®äºŒä¹—å¹³å‡èª¤å·®ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nãƒ‡ãƒ¼ã‚¿ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãªã‹ã£ãŸå‰å›ã¨æ¯”ã¹ã€èª¤å·®ã®æ¸›å°‘ãŒé€Ÿããªã£ã¦ã„ã‚‹ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ chainer.iterators.SerialIterator â€” Chainer 7.7.0 documentation\n","description":"ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‹ã‚‰å­¦ç¿’ç”¨ãƒŸãƒ‹ãƒãƒƒãƒã‚’ä½œæˆã—ã¦ãã‚Œã‚‹Iteratorã‚¯ãƒ©ã‚¹ã®å‹•ä½œã‚’ç¢ºèªã™ã‚‹ã€‚","id":80,"section":"posts","tags":["Python","Chainer"],"title":"Chainerã®Iteratorã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚‹å­¦ç¿’ç”¨ãƒŸãƒ‹ãƒãƒƒãƒä½œæˆ","uri":"https://helve-blog.com/posts/python/chainer-iterator-class/"},{"content":"ã¯ã˜ã‚ã« ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªChainerã®ä½¿ã„æ–¹ã‚’ç†è§£ã™ã‚‹ãŸã‚ã€Chainerã®Chainã‚¯ãƒ©ã‚¹ã¨Optimizerã‚’ä½¿ã£ã¦æœ€å°é™ã®ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ (NN) ã‚’å®Ÿè£…ã™ã‚‹ã€‚å®Ÿè£…å¾Œã€1æ¬¡é–¢æ•°ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Spyder 3.2.8   Python 3.6.5   NumPy 1.14.3   Chainer 4.2.0    ä»¥ä¸‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6  import numpy as np import matplotlib.pyplot as plt import chainer import chainer.links as L import chainer.functions as F from chainer import optimizers, Chain   Chainã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ãŸNNã®æ§‹é€ å®šç¾© GPUã§ä¸¦åˆ—è¨ˆç®—ã‚’è¡Œã†å ´åˆãªã©ã«å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã€NNã®æ§‹é€ ã¯ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã—ã¦æ›¸ã‹ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã€‚\nä¾‹ãˆã°ã€2å±¤ã®NNã‚’MyChainã‚¯ãƒ©ã‚¹ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  class MyChain(Chain): def __init__(self): super(MyChain, self).__init__() with self.init_scope(): self.l1 = L.Linear(1, 2) self.l2 = L.Linear(2, 1) def __call__(self, x): h = F.relu(self.l1(x)) return self.l2(h)   MyChainã¯Chainerã®Chainã‚¯ãƒ©ã‚¹ã‚’è¦ªã‚¯ãƒ©ã‚¹ã¨ã—ã¦ç¶™æ‰¿ã—ã¦ã„ã‚‹ã€‚\n2è¡Œç›®ã®__init__é–¢æ•°ã¯ã€MyChainã‚¯ãƒ©ã‚¹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä½œæˆã•ã‚Œã‚‹ã¨ãã«ã€å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°ã§ã‚ã‚‹ã€‚\n6, 7è¡Œç›®ã®L.Linearã¯å…¨çµåˆå±¤ã®ã‚¯ãƒ©ã‚¹ã§ã‚ã‚Šã€ç¬¬1å¼•æ•°ã¯å…¥åŠ›ä¿¡å·ã®æ•°ã€ç¬¬2å¼•æ•°ã¯å‡ºåŠ›ä¿¡å·ã®æ•°ã§ã‚ã‚‹ã€‚\n8è¡Œç›®ã®__call__é–¢æ•°ã¯ã€MyChainã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¼•æ•°ã‚’ä¸ãˆã¦å‘¼ã³å‡ºã™ã¨ã€å®Ÿè¡Œã•ã‚Œã‚‹é–¢æ•°ã§ã‚ã‚‹ã€‚ã“ã“ã§ã¯ã€NNã®é †æ–¹å‘ã®è¨ˆç®—ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚\nOptimizerï¼ˆæœ€é©åŒ–ãƒ«ãƒ¼ãƒãƒ³ï¼‰ NNã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ›´æ–°ã™ã‚‹ã«ã¯ã€optimizersã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”¨ã„ã‚‹ã€‚\nä»¥ä¸‹ã«ã€å®Ÿè£…ã®ä¸»è¦éƒ¨åˆ†ã‚’ç¤ºã™ã€‚\n1 2 3 4 5 6 7 8 9 10  def lossfun(train_y, pred_y): loss = F.mean_squared_error(train_y, pred_y) return loss model = MyChain() optimizer = optimizers.SGD() optimizer.setup(model) pred_y = model(train_x) optimizer.update(lossfun, train_y, pred_y)   1ï½3è¡Œç›®ã®lossfunã¯ã€NNã®å­¦ç¿’ã«ä½¿ç”¨ã™ã‚‹æå¤±é–¢æ•°ã§ã‚ã‚‹ã€‚ã“ã“ã§ã¯ã€è©•ä¾¡æŒ‡æ¨™ã‚’æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã¨æ¨å®šå€¤ã®äºŒä¹—å¹³å‡èª¤å·® (Mean squared errors) ã¨ã—ã¦ã„ã‚‹ã€‚\næ¬¡ã«ã€5ï½7è¡Œç›®ã§ã€MyChainã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€optimizersã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«æ¸¡ã—ã¦ã„ã‚‹ã€‚ã“ã“ã§ã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ›´æ–°è¦å‰‡ã¯ç¢ºç‡çš„å‹¾é…é™ä¸‹æ³• (SGD, stochastic gradient descent)ã¨ã—ãŸã€‚\n9è¡Œç›®ã§ã¯ã€NNã«èª¬æ˜å¤‰æ•°train_xã‚’æ¸¡ã—ã¦ã€äºˆæ¸¬å€¤pred_yã‚’å¾—ã¦ã„ã‚‹ã€‚\n10è¡Œç›®ã§ã¯ã€optimizersã®updateãƒ¡ã‚½ãƒƒãƒ‰ã«ã€è©•ä¾¡é–¢æ•°lossfunã¨ãã®å¼•æ•°ï¼ˆpred_yã¨ç›®çš„å¤‰æ•°ã®çœŸå€¤train_yï¼‰ã‚’æ¸¡ã—ã¦ã€modelã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¦ã„ã‚‹ã€‚\nãªãŠã€updateã«å¼•æ•°ã‚’æ¸¡ã•ãªã„æ–¹æ³•ã‚‚ã‚ã‚‹ãŒã€modelã®å‹¾é…ã‚’æ¶ˆå»ã™ã‚‹ (cleargrads) æ“ä½œãŒå¿…è¦ã«ãªã‚‹ãŸã‚ã€ä»Šå›ã¯ç°¡å˜ãªã“ã¡ã‚‰ã®æ–¹æ³•ã‚’ç”¨ã„ãŸã€‚\nå®Ÿè£…ä¾‹ ä¸Šè¨˜ã®MyChainã‚¯ãƒ©ã‚¹ã¨ã€Optimizerã‚’ä½¿ã£ã¦ã€å®Ÿéš›ã«å­¦ç¿’ã‚’è¡Œã†ã€‚\nã“ã“ã§ã¯ã€ç·šå½¢ãƒ¢ãƒ‡ãƒ« y=x-5 ã‚’å­¦ç¿’ã•ã›ã‚‹ã€‚\nèª¬æ˜å¤‰æ•° x ã¯0ï½9.9ã¾ã§0.1åˆ»ã¿ã§100ç‚¹ã¨ã™ã‚‹ã€‚\nã¾ãŸã€æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã®ç›®çš„å¤‰æ•°ã«ã¯ã€å¹³å‡0, åˆ†æ•£0.1ã®æ­£è¦åˆ†å¸ƒã«å¾“ã†ä¿¡å·ã‚’ãƒã‚¤ã‚ºã¨ã—ã¦åŠ ãˆãŸã€‚\nã“ã®æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã‚’100å›åå¾©ã•ã›ã¦å­¦ç¿’ã•ã›ã‚‹ï¼ˆã‚¨ãƒãƒƒã‚¯æ•°100ï¼‰ã€‚\nã¾ãŸã€æ•™å¸«ãƒ‡ãƒ¼ã‚¿ã‚’2ç‚¹ãšã¤ä¸ãˆã‚‹ãƒãƒƒãƒå‡¦ç†ã‚’è¡Œã†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69  import numpy as np import chainer import chainer.links as L import chainer.functions as F from chainer import optimizers, Chain import matplotlib.pyplot as plt class MyChain(Chain): def __init__(self): super(MyChain, self).__init__() with self.init_scope(): self.l1 = L.Linear(1, 2) self.l2 = L.Linear(2, 1) def __call__(self, x): h = F.relu(self.l1(x)) return self.l2(h) def lossfun(x, y): loss = F.mean_squared_error(x, y) return loss np.random.seed(0) model = MyChain() x_data = np.arange(0, 10, 0.1, dtype=np.float32).reshape(-1,1) x = chainer.Variable(x_data) y = chainer.Variable(x_data-5) optimizer = optimizers.SGD().setup(model) n_epoch = 200 batch_size = 2 pred_y_before = model(x_data) # Prediction before learning mean_err = [] for epoch in range(n_epoch): err_temp = 0 for i in range(0, x.shape[0], batch_size): train_y = y[i:i+batch_size] train_x = x[i:i+batch_size] pred_y = model(train_x) optimizer.update(lossfun, train_y, pred_y) err_temp += F.mean_squared_error(train_y, pred_y).data*batch_size mean_err += [err_temp/x.shape[0]] pred_y_after = model(x_data) # Prediction after learning fig, ax = plt.subplots() ax.plot(x_data.data, y.data, label=\u0026#34;True values\u0026#34;) ax.plot(x_data.data, pred_y_before.data, label=\u0026#34;Before learning\u0026#34;) ax.plot(x_data.data, pred_y_after.data, label=\u0026#34;After learning\u0026#34;) ax.legend() ax.grid() plt.show() fig, ax = plt.subplots() ax.plot(mean_err) ax.set_xlabel(\u0026#34;Epoch\u0026#34;) ax.set_ylabel(\u0026#34;Mean squared error\u0026#34;) ax.grid() plt.show()   ä½•ã‚‚ã—ãªã‘ã‚Œã°L.Linearã®é‡ã¿è¡Œåˆ—Wã¯æ¯å›ãƒ©ãƒ³ãƒ€ãƒ ã«åˆæœŸåŒ–ã•ã‚Œã‚‹ãŸã‚ã€np.random.seed(0)ã«ã‚ˆã£ã¦ã€Wã®åˆæœŸå€¤ã‚’å›ºå®šã—ã¦ã„ã‚‹ã€‚\nã¾ãŸã€mean_errã«ã¯å„ã‚¨ãƒãƒƒã‚¯ã«ãŠã‘ã‚‹äºˆæ¸¬å€¤ã®äºŒä¹—èª¤å·®å¹³å‡ã‚’æ ¼ç´ã—ã¦ã„ã‚‹ã€‚\nå­¦ç¿’å‰å¾Œã®ãƒ¢ãƒ‡ãƒ«ã®äºˆæ¸¬å€¤ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ãŸï¼ˆé’ãŒæ•™å¸«ãƒ‡ãƒ¼ã‚¿ã€é»„è‰²ãŒå­¦ç¿’å‰ã®äºˆæ¸¬å€¤ã€ç·‘ãŒå­¦ç¿’å¾Œã®äºˆæ¸¬å€¤ï¼‰ã€‚å­¦ç¿’ã«ã‚ˆã£ã¦ã€äºˆæ¸¬å€¤ãŒæ•™å¸«ãƒ‡ãƒ¼ã‚¿ã«è¿‘ã¥ã„ã¦ã„ã‚‹ã€‚\nã¾ãŸã€ã‚¨ãƒãƒƒã‚¯ã”ã¨ã®äºˆæ¸¬ã®äºŒä¹—å¹³å‡èª¤å·®ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\næ™‚æŠ˜å¢—åŠ ã—ã¤ã¤ã‚‚ã€å­¦ç¿’å›æ•°ãŒå¢—ãˆã‚‹ã«ã¤ã‚Œã¦æ¸›å°‘ã—ã¦ã„ã‚‹ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ Creating Models â€” Chainer 7.7.0 documentation\nOptimizer â€” Chainer 7.7.0 documentation\n","description":"ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªChainerã®ä½¿ã„æ–¹ã‚’ç†è§£ã™ã‚‹ãŸã‚ã€Chainerã®`Chain`ã‚¯ãƒ©ã‚¹ã¨`Optimizer`ã‚’ä½¿ã£ã¦æœ€å°é™ã®ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ (NN) ã‚’å®Ÿè£…ã™ã‚‹ã€‚","id":81,"section":"posts","tags":["Python","Chainer"],"title":"Chainerå…¥é–€ æœ€å°é™ã®ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å®Ÿè£…","uri":"https://helve-blog.com/posts/python/chainer-introduction/"},{"content":"ã¯ã˜ã‚ã« SciPyã‚’ä½¿ã£ã¦ã€FIR (Finite Impulse Response, æœ‰é™ã‚¤ãƒ³ãƒ‘ãƒ«ã‚¹å¿œç­”) ãƒ•ã‚£ãƒ«ã‚¿ã«ã‚ˆã‚‹é›¢æ•£ä¿¡å·ã®æ³¢å½¢ã‚’æ•´å½¢ã™ã‚‹ã€‚ãƒ­ãƒ¼ãƒ‘ã‚¹ã€ãƒã‚¤ãƒ‘ã‚¹ã€ãƒãƒ³ãƒ‰ãƒ‘ã‚¹ã€ãƒãƒ³ãƒ‰ã‚¨ãƒªãƒŸãƒã‚¤ãƒˆã®å„ãƒ•ã‚£ãƒ«ã‚¿ã®è¨­è¨ˆã‹ã‚‰ã€ä¿¡å·ã¸ã®é©ç”¨ã¾ã§è¡Œã†ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.6.5   NumPy 1.14.2   SciPy 1.0.1    å…ƒã®é›¢æ•£ä¿¡å· æ¬¡ã®3ã¤ã®ä¿¡å·ã‚’åˆæˆã—ã¦ã€ãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ã‚’è¡Œã†é›¢æ•£ä¿¡å·ã¨ã™ã‚‹ã€‚\n å‘¨æ³¢æ•°30[Hz], æŒ¯å¹…3ã®æ­£å¼¦æ³¢ å‘¨æ³¢æ•°50[Hz], æŒ¯å¹…0.3ã®æ­£å¼¦æ³¢ å‘¨æ³¢æ•°120[Hz], æŒ¯å¹…0.2ã®æ­£å¼¦æ³¢  ä¿¡å·ã®ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã¯2048, ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æœŸã¯0.001[s]ã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  import numpy as np import matplotlib.pyplot as plt from scipy import signal N = 1024 # ã‚µãƒ³ãƒ—ãƒ«æ•° dt = 0.001 # ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æœŸ [s] f1, f2, f3 = 10, 60, 300 # å‘¨æ³¢æ•° [Hz] t = np.arange(0, N*dt, dt) # æ™‚é–“ [s] x = 3*np.sin(2*np.pi*f1*t) + 0.3*np.sin(2*np.pi*f2*t) + 0.2*np.sin(2*np.pi*f3*t) # ä¿¡å·   SciPyã®é–¢æ•° ãƒ•ã‚£ãƒ«ã‚¿ã®è¨­è¨ˆ ã¾ãšã€é–¢æ•°scipy.signal.firwin()ã«ã‚ˆã‚Šãƒ•ã‚£ãƒ«ã‚¿ã‚’è¨­è¨ˆã™ã‚‹ã€‚\n1 2 3  scipy.signal.firwin(numtaps, cutoff, width=None, window=\u0026#39;hamming\u0026#39;, pass_zero=True, scale=True, nyq=None, fs=None)   ä¸»ãªå¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nnumtaps: int\nFIRãƒ•ã‚£ãƒ«ã‚¿ã®é•·ã•ã€‚\ncutoff: float or 1D array_like\nã‚«ãƒƒãƒˆã‚ªãƒ•å‘¨æ³¢æ•°ã€‚\nãƒ­ãƒ¼ãƒ‘ã‚¹ã€ãƒã‚¤ãƒ‘ã‚¹ã®å ´åˆã¯float,\nãƒãƒ³ãƒ‰ãƒ‘ã‚¹ã€ãƒãƒ³ãƒ‰ã‚¨ãƒªãƒŸãƒã‚¤ãƒˆã®å ´åˆã¯1D array_likeã¨ã™ã‚‹ã€‚\ncutoffã¯0ã‹ã‚‰fs/2ã®é–“ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚\nwindow: string\nçª“é–¢æ•°ã‚’æŒ‡å®šã™ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯\u0026rsquo;hamming' ï¼ˆãƒãƒŸãƒ³ã‚°çª“ï¼‰ã€‚\npass_zero: bool\nå‘¨æ³¢æ•°0ï¼ˆç›´æµæˆåˆ†ï¼‰ãŒé€šéã™ã‚‹ã‹æŒ‡å®šã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯True.\nfs: float\nä¿¡å·ã®ã‚µãƒ³ãƒ—ãƒ«å‘¨æ³¢æ•°ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯2.\nscipy.signal.firwin()ã®æˆ»ã‚Šå€¤ã¯ã€é•·ã•numtapsã®FIRãƒ•ã‚£ãƒ«ã‚¿ã®ä¿‚æ•°é…åˆ—ã¨ãªã‚‹ã€‚\nãƒ•ã‚£ãƒ«ã‚¿ã®é©ç”¨ æ¬¡ã«ã€é–¢æ•°scipy.signal.lfilter()ã«ã‚ˆã‚Šä¿¡å·ã«ãƒ•ã‚£ãƒ«ã‚¿ã‚’é©ç”¨ã™ã‚‹ã€‚\n1  scipy.signal.lfilter(b, a, x, axis=-1, zi=None)   ä¸»ãªå¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nb: array\nåˆ†å­ã®ä¿‚æ•°ã€‚\na: array\nåˆ†æ¯ã®ä¿‚æ•°ã€‚\nx: array\nå…¥åŠ›ä¿¡å·ã€‚\næˆ»ã‚Šå€¤ã¯ã€ãƒ•ã‚£ãƒ«ã‚¿ã‚’æ›ã‘ãŸä¿¡å·ã®é…åˆ—ã¨ãªã‚‹ã€‚\nã“ã®é–¢æ•°ã§ã¯ã€ãƒ•ã‚£ãƒ«ã‚¿ãŒä»¥ä¸‹ã®å¼ã§è¡¨ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã¨ã™ã‚‹ã€‚\n$$ H(z)=\\frac{\\sum_{k=0}^{M} b_k z^{-k} } {\\sum_{k=0}^{N} a_k z^{-k} } $$\nå¼•æ•°bãŒå³è¾ºã®åˆ†å­ã®ä¿‚æ•°ã€å¼•æ•°aãŒå³è¾ºã®åˆ†æ¯ã®ä¿‚æ•°ã«å¯¾å¿œã™ã‚‹ã€‚ä»Šå›ã¯FIRãƒ•ã‚£ãƒ«ã‚¿ã‚’æ‰±ã†ã®ã§ã€åˆ†æ¯ã®aã‚’1ã¨ãŠãã€‚\næ³¢å½¢æ•´å½¢ åŸºæœ¬çš„ãªãƒ•ã‚£ãƒ«ã‚¿ã‚’ä¿¡å·ã«é©ç”¨ã—ã¦ã€æ³¢å½¢ã‚„æŒ¯å¹…ã®å¤‰åŒ–ã‚’ç¢ºèªã™ã‚‹ã€‚\nãƒ­ãƒ¼ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ ã‚«ãƒƒãƒˆã‚ªãƒ•å‘¨æ³¢æ•°ã‚’40[Hz]ã¨ã—ãŸãƒ­ãƒ¼ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ã€‚\n1 2 3 4 5  filter1 = signal.firwin(numtaps=21, cutoff=40, fs=1/dt) y1 = signal.lfilter(filter1, 1, x) F1 = np.fft.fft(y1) Amp1 = np.abs(F1/(N/2))   60, 300[Hz]ã®é«˜å‘¨æ³¢æˆåˆ†ãŒæ¸›è¡°ãƒ»é™¤å»ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒã‚¤ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ ã‚«ãƒƒãƒˆã‚ªãƒ•å‘¨æ³¢æ•°ã‚’100[Hz]ã¨ã—ãŸãƒã‚¤ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ã€‚\n1 2 3 4 5  filter2 = signal.firwin(numtaps=51, cutoff=100, fs=1/dt, pass_zero=False) y2 = signal.lfilter(filter2, 1, x) F2 = np.fft.fft(y2) Amp2 = np.abs(F2/(N/2))   10, 60[Hz]ã®ä½å‘¨æ³¢æˆåˆ†ãŒé™¤å»ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒãƒ³ãƒ‰ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ é€šéå‘¨æ³¢æ•°ã‚’30ï½100[Hz]ã¨ã—ãŸãƒãƒ³ãƒ‰ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ã€‚\n1 2 3 4 5  filter3 = signal.firwin(numtaps=51, cutoff=[30, 100], fs=1/dt, pass_zero=False) y3 = signal.lfilter(filter3, 1, x) F3 = np.fft.fft(y3) Amp3 = np.abs(F3/(N/2))   10, 300[Hz]ã®ä¿¡å·ãŒæ¸›è¡°ãƒ»é™¤å»ã•ã‚Œã„ã¦ã„ã‚‹ã€‚\nãƒãƒ³ãƒ‰ã‚¨ãƒªãƒŸãƒã‚¤ãƒˆãƒ•ã‚£ãƒ«ã‚¿ é€šéå‘¨æ³¢æ•°ã‚’30[Hz]ä»¥ä¸‹ã€100[Hz]ä»¥ä¸Šã¨ã—ãŸãƒãƒ³ãƒ‰ã‚¨ãƒªãƒŸãƒã‚¤ãƒˆãƒ•ã‚£ãƒ«ã‚¿ã€‚\n1 2 3 4 5  filter4 = signal.firwin(numtaps=31, cutoff=[30, 100], fs=1/dt) y4 = signal.lfilter(filter4, 1, x) F4 = np.fft.fft(y4) Amp4 = np.abs(F4/(N/2))   60[Hz]ã®ä¿¡å·ãŒé™¤å»ã•ã‚Œã„ã¦ã„ã‚‹ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ scipy.signal.firwin â€” SciPy v1.5.4 Reference Guide\nscipy.signal.lfilter â€” SciPy v1.5.4 Reference Guide\n","description":"SciPyã‚’ä½¿ã£ã¦ã€FIR (Finite Impulse Response, æœ‰é™ã‚¤ãƒ³ãƒ‘ãƒ«ã‚¹å¿œç­”) ãƒ•ã‚£ãƒ«ã‚¿ã«ã‚ˆã‚‹é›¢æ•£ä¿¡å·ã®æ³¢å½¢ã‚’æ•´å½¢ã™ã‚‹ã€‚ãƒ­ãƒ¼ãƒ‘ã‚¹ã€ãƒã‚¤ãƒ‘ã‚¹ã€ãƒãƒ³ãƒ‰ãƒ‘ã‚¹ã€ãƒãƒ³ãƒ‰ã‚¨ãƒªãƒŸãƒã‚¤ãƒˆã®å„ãƒ•ã‚£ãƒ«ã‚¿ã®è¨­è¨ˆã‹ã‚‰ã€ä¿¡å·ã¸ã®é©ç”¨ã¾ã§è¡Œã†ã€‚","id":82,"section":"posts","tags":["Python","SciPy"],"title":"SciPyã‚’ä½¿ã£ãŸFIRãƒ•ã‚£ãƒ«ã‚¿ã«ã‚ˆã‚‹æ³¢å½¢æ•´å½¢","uri":"https://helve-blog.com/posts/python/scipy-finite-impulse-response-filter/"},{"content":"ã¯ã˜ã‚ã« NumPyã®emptyé–¢æ•°ã‚’ç”¨ã„ã¦ã€np.empty(0), np.empty([0, 0]), \u0026hellip;ã¨ã™ã‚‹ã“ã¨ã§ã€ç©ºã®ï¼ˆè¦ç´ ã‚’æŒãŸãªã„ï¼‰ä»»æ„ã®æ¬¡å…ƒã®é…åˆ—ã‚’ä½œæˆã§ãã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ç©ºã®é…åˆ—ã®ä½œã‚Šæ–¹ã€ä½¿ã„æ–¹ã«ã¤ã„ã¦ç°¡å˜ã«è€ƒå¯Ÿã™ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    æœ¬è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹ã®é€šã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1  import numpy as np   numpy.emptyã«ã¤ã„ã¦ numpy.emptyã¯ã€ä¸­èº«ã‚’åˆæœŸåŒ–ã›ãšã«é…åˆ—ã‚’ä½œæˆã™ã‚‹é–¢æ•°ã§ã‚ã‚‹ã€‚\nä¸»ãªå¼•æ•°ã¯æ¬¡ã®é€šã‚Šã€‚\n1  numpy.empty(shape, dtype=float)   shapeã¯é…åˆ—ã®å½¢çŠ¶ã‚’æ±ºã‚ã‚‹å¼•æ•°ã§ã‚ã‚Šã€\n int intã‚’æ ¼ç´ã™ã‚‹ã‚¿ãƒ—ãƒ« intã‚’æ ¼ç´ã™ã‚‹ãƒªã‚¹ãƒˆ  ã®ã„ãšã‚Œã‹ã‚’ã¨ã‚‹ã€‚\ndtypeã¯é…åˆ—ã®æ•°å€¤ã®å‹ã‚’æ±ºã‚ã‚‹å¼•æ•°ã§ã‚ã‚Šã€\n int float np.float32 np.int8  ãªã©ã‚’æŒ‡å®šã™ã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯floatï¼‰ã€‚\nè¦ç´ æ•°ãŒ5ã¤ã®1æ¬¡å…ƒé…åˆ—ã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ã€shapeã‚’5ã€ã¾ãŸã¯(5)ã€ã¾ãŸã¯[5]ã¨ã™ã‚‹ã€‚ãŸã ã—ã€é…åˆ—ã®ä¸­èº«ã¯å¤‰ã‚ã‚‹å ´åˆãŒã‚ã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; np.empty(5) array([0. , 0.25, 0.5 , 0.75, 1. ]) \u0026gt;\u0026gt;\u0026gt; np.empty((5)) array([0. , 0.25, 0.5 , 0.75, 1. ]) \u0026gt;\u0026gt;\u0026gt; np.empty([5]) array([0. , 0.25, 0.5 , 0.75, 1. ])   è¦ç´ æ•°ãŒ2Ã—3ã®2æ¬¡å…ƒé…åˆ—ã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ã€shapeã‚’(2, 3)ã€ã¾ãŸã¯[2, 3]ã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; np.empty((2, 3)) array([[0.93137112, 0.92761264, 0.98531337], [0.28813119, 0.49620105, 0.41308828]]) \u0026gt;\u0026gt;\u0026gt; np.empty([2, 3]) array([[0.93137112, 0.92761264, 0.98531337], [0.28813119, 0.49620105, 0.41308828]])   numpy.emptyã¯ã€ä¸­èº«ãŒå…¨ã¦0ã®é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹numpy.zeros()ã‚„ã€ä¸­èº«ãŒå…¨ã¦1ã®é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹numpy.ones()ã¨æ¯”è¼ƒã™ã‚‹ã¨ã€é…åˆ—ã‚’é«˜é€Ÿã«ç”Ÿæˆã§ãã‚‹åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nç©ºã®é…åˆ—ã®ç”Ÿæˆ å†’é ­ã«è¨˜ã—ãŸã‚ˆã†ã«ã€numpy.emptyã®shapeã‚’0ã‚„[0, 0], \u0026hellip;ã¨ã™ã‚‹ã¨ã€ä»»æ„ã®æ¬¡å…ƒã®ç©ºã®é…åˆ—ã‚’ç”Ÿæˆã§ãã‚‹ã€‚\n1æ¬¡å…ƒé…åˆ—ã®å ´åˆ\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; a1 = np.empty(0) \u0026gt;\u0026gt;\u0026gt; a1 array([], dtype=float64) \u0026gt;\u0026gt;\u0026gt; a1.ndim # æ¬¡å…ƒæ•° 1   2æ¬¡å…ƒé…åˆ—ã®å ´åˆ\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; a2 = np.empty([0, 0]) \u0026gt;\u0026gt;\u0026gt; a2 array([], shape=(0, 0), dtype=float64) \u0026gt;\u0026gt;\u0026gt; a2.ndim # æ¬¡å…ƒæ•° 2   åŒæ§˜ã«ã€\n np.empty([0, 0, 0])ã§3æ¬¡å…ƒã®ç©ºã®é…åˆ— np.empty([0, 0, 0, 0])ã§4æ¬¡å…ƒã®ç©ºã®é…åˆ—  ãŒãã‚Œãã‚Œç”Ÿæˆã§ãã‚‹ã€‚\nãªãŠã€zerosé–¢æ•°ã‚„onesé–¢æ•°ã‚’ä½¿ã£ã¦ã€\n np.zeros(0) np.ones([0, 0])  ã¨ã—ã¦ã‚‚ã€åŒæ§˜ã«ç©ºã®é…åˆ—ã‚’ä½œæˆã§ãã‚‹ã€‚\nã—ã‹ã—ã€é–¢æ•°åã¨ç•°ãªã‚Šè¦ç´ ã«0ã‚„1ã‚’å«ã¾ãªã„é…åˆ—ãŒç”Ÿæˆã•ã‚Œã¦ç´›ã‚‰ã‚ã—ã„ãŸã‚ã€emptyé–¢æ•°ã‚’ä½¿ã†ã¹ãã ã¨å€‹äººçš„ã«æ€ã†ã€‚\nç©ºã®é…åˆ—ã®ä½¿ã„æ–¹ ç©ºã®é…åˆ—ã¯ã€ã€Œé…åˆ—ã‚’çµåˆã—ãŸã„ãŒã€æœ€çµ‚çš„ã«å¾—ã‚‰ã‚Œã‚‹é…åˆ—ã®ã‚µã‚¤ã‚ºãŒåˆ†ã‹ã‚‰ãªã„å ´åˆã€ã€ã‚ã‚‹ã„ã¯ã€Œè¨ˆç®—ã®è¦æ¨¡ãŒå°ã•ãã€ã‹ã¤ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å¯èª­æ€§ã‚’é‡è¦–ã—ãŸã„å ´åˆã€ã«ç”¨ã„ã‚‹ã¹ãã§ã‚ã‚‹ã€‚\né…åˆ—ã‚’é€æ¬¡çš„ã«çµåˆã™ã‚‹ã¨ã€ãã®éƒ½åº¦ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å®Ÿè¡Œé€Ÿåº¦ãŒä½ä¸‹ã™ã‚‹ã€‚\nãã®ãŸã‚ã€æœ€çµ‚çš„ãªé…åˆ—ã®ã‚µã‚¤ã‚ºãŒåˆ†ã‹ã£ã¦ã„ã‚‹å ´åˆã«ã¯ã€åˆã‚ã«å¿…è¦ãªã‚µã‚¤ã‚ºã®é…åˆ—ã‚’ç¢ºä¿ã—ã¦ã€é€æ¬¡çš„ã«é…åˆ—ã‚’ä»£å…¥ã—ãŸæ–¹ãŒé€Ÿãå®Ÿè¡Œã§ãã‚‹ã€‚\næ¯”è¼ƒã®ãŸã‚ã€é…åˆ—ã‚’çµåˆã™ã‚‹é–¢æ•°stack()ã¨ã€æœ€åˆã«é…åˆ—ã‚’ç¢ºä¿ã™ã‚‹é–¢æ•°substitute()ã‚’ä½œæˆã—ãŸã€‚ä¸¡è€…ã¨ã‚‚ã€é•·ã•ãŒ1000ã§è¦ç´ ãŒå…¨ã¦1ã®é…åˆ—ã‚’è¿”ã™ã€‚é–¢æ•°stack()ã§ã¯é•·ã•1ã®é…åˆ—ã‚’1000å›çµåˆã—ã€é–¢æ•°substitute()ã§ã¯æœ€åˆã«ç¢ºä¿ã—ãŸé…åˆ—ã«é•·ã•1ã®é…åˆ—ã‚’1000å›ä»£å…¥ã—ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11  def stack(): a = np.empty(0) for i in range(1000): a = np.hstack([a, np.array(1)]) return a def substitute(): a = np.empty(1000) for i in range(1000): a[i] = np.array(1) return a   IPythonã®%timeitãƒã‚¸ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œé€Ÿåº¦ã‚’æ¸¬å®šã™ã‚‹ã€‚\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; %timeit stack() 5.93 ms Â± 147 Âµs per loop (mean Â± std. dev. of 7 runs, 100 loops each) \u0026gt;\u0026gt;\u0026gt; %timeit substitute() 436 Âµs Â± 17.9 Âµs per loop (mean Â± std. dev. of 7 runs, 1000 loops each)   ã™ãªã‚ã¡ã€stack()é–¢æ•°ã¨substitute()é–¢æ•°ã®å¹³å‡å®Ÿè¡Œæ™‚é–“ã¯ãã‚Œãã‚Œ5.93ãƒŸãƒªç§’ã¨436ãƒã‚¤ã‚¯ãƒ­ç§’ã§ã‚ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€æœ€åˆã«é…åˆ—ã‚’ç¢ºä¿ã—ãŸsubstitute()ã®æ–¹ãŒç´„14å€é«˜é€Ÿã«å®Ÿè¡Œã§ããŸã€‚\nå‚è€ƒ numpy.empty â€” NumPy v1.19 Manual\n","description":"NumPyã®emptyé–¢æ•°ã‚’ç”¨ã„ã¦ã€ç©ºã®ï¼ˆè¦ç´ ã‚’æŒãŸãªã„ï¼‰ä»»æ„ã®æ¬¡å…ƒã®é…åˆ—ã‚’ä½œæˆã§ãã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ç©ºã®é…åˆ—ã®ä½œã‚Šæ–¹ã€ä½¿ã„æ–¹ã«ã¤ã„ã¦ç°¡å˜ã«è€ƒå¯Ÿã™ã‚‹ã€‚","id":83,"section":"posts","tags":["Python","NumPy"],"title":"NumPyã®emptyã§ç©ºï¼ˆé•·ã•0ï¼‰ã®é…åˆ—ã‚’ä½œã‚‹","uri":"https://helve-blog.com/posts/python/numpy-empty-array/"},{"content":"ã¯ã˜ã‚ã« NumPyã®fftãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã€FFT (Fast Fourier Transform, é«˜é€Ÿãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›) ã«ã‚ˆã‚‹é›¢æ•£ä¿¡å·ã®å‘¨æ³¢æ•°è§£æã‚’è¡Œã„ã€ä¿¡å·ã®æŒ¯å¹…ã‚’æ±‚ã‚ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    FFTã®å‰å‡¦ç† ä¿¡å·ã«FFTã‚’æ›ã‘ã‚‹å‰ã«ã€ãƒ­ãƒ¼ãƒ‘ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ã¨çª“é–¢æ•°ã‚’æ›ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚è©³ç´°ã¯ä»¥ä¸‹ã®ã‚µã‚¤ãƒˆã‚’å‚ç…§ã®ã“ã¨ã€‚\n11. ã‚¹ãƒšã‚¯ãƒˆãƒ«è§£æã¨çª“é–¢æ•° (ã‚„ã‚‹å¤«ã§å­¦ã¶ãƒ‡ã‚£ã‚¸ã‚¿ãƒ«ä¿¡å·å‡¦ç†)\næœ¬è¨˜äº‹ã§ã¯ç°¡å˜ã®ãŸã‚ã€ã“ã‚Œã‚‰ã®å‰å‡¦ç†ã‚’çœç•¥ã™ã‚‹ã€‚\nFFTã‚’æ›ã‘ã‚‹é›¢æ•£ä¿¡å· æ¬¡ã®3ã¤ã®ä¿¡å·ã‚’åˆæˆã—ã¦ã€ãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ã‚’è¡Œã†é›¢æ•£ä¿¡å·ã¨ã™ã‚‹ã€‚\n å‘¨æ³¢æ•°50[Hz], æŒ¯å¹…1.5ã®æ­£å¼¦æ³¢ å‘¨æ³¢æ•°120[Hz], æŒ¯å¹…1ã®æ­£å¼¦æ³¢ å®šæ•°é …3  ä¿¡å·ã®ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã¯1024, ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æœŸã¯0.001[s]ã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  import numpy as np import matplotlib.pyplot as plt N = 1024 # ã‚µãƒ³ãƒ—ãƒ«æ•° dt = 0.001 # ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æœŸ [s] f1, f2 = 50, 120 # å‘¨æ³¢æ•° [Hz] t = np.arange(0, N*dt, dt) # æ™‚é–“ [s] x = 1.5*np.sin(2*np.pi*f1*t) + np.sin(2*np.pi*f2*t) + 3 # ä¿¡å· fig, ax = plt.subplots() ax.plot(t, x) # ax.set_xlim(0, 0.1) ax.set_xlabel(\u0026#34;Time [s]\u0026#34;) ax.set_ylabel(\u0026#34;Signal\u0026#34;) ax.grid() plt.show()   ä¿¡å·ã®æ³¢å½¢ã‚’æ¬¡ã®ã‚°ãƒ©ãƒ•ã«ç¤ºã™ã€‚\nä¿¡å·ã‚’0ï½0.1[s]ã®ç¯„å›²ã«æ‹¡å¤§ã—ãŸå›³ã¯æ¬¡ã®é€šã‚Šã€‚\nãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ã®é–¢æ•° å‰ç« ã®ä¿¡å·ã«å¯¾ã—ã¦ã€é–¢æ•°numpy.fft.fft()ã«ã‚ˆã‚Šãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ã‚’è¡Œã†ã€‚\n1  numpy.fft.fft(a, n=None, axis=-1, norm=None)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\na: FFTã‚’è¡Œã†é…åˆ—ã€‚\nn: FFTã‚’è¡Œã†ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã€‚Noneã¨ã™ã‚‹ã¨aã®é•·ã•ã«ç­‰ã—ããªã‚‹ã€‚\naxis: FFTã‚’è¡Œã†é…åˆ—ã®è»¸æ–¹å‘ã€‚æŒ‡å®šã—ãªã‘ã‚Œã°ã€é…åˆ—ã®æœ€å¤§æ¬¡å…ƒã®æ–¹å‘ã¨ãªã‚‹ã€‚\nnorm: \u0026ldquo;ortho\u0026quot;ã¨ã™ã‚‹ã¨æ­£è¦åŒ–ã™ã‚‹ã€‚æ­£è¦åŒ–ã™ã‚‹ã¨å¤‰æ›å€¤ãŒ1/âˆšNã«ãªã‚‹ï¼ˆNã¯ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ï¼‰ã€‚\nnumpy.fft.fft()ã®æˆ»ã‚Šå€¤ã¯ã€é•·ã•nã®è¤‡ç´ æ•°é…åˆ—ã§ã‚ã‚‹ã€‚\nã¾ãŸã€ãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ã®å‘¨æ³¢æ•°ã¯ã€é–¢æ•°numpy.fft.fftfreq()ã«ã‚ˆã‚Šå–å¾—ã™ã‚‹ã€‚\n1  numpy.fft.fftfreq(n, d=1.0)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nn: FFTã‚’è¡Œã†ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°ã€‚\nd: ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æœŸï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯1.0ï¼‰ã€‚\nnumpy.fft.fftfreq()æˆ»ã‚Šå€¤ã¯ã€å‘¨æ³¢æ•°ã‚’è¡¨ã™é…åˆ—ã¨ãªã‚‹ã€‚\nå…ˆç¨‹ã®ä¿¡å·xã«å¯¾ã—ã¦FFTã‚’è¡Œã„ã€å¤‰æ›çµæœã®å®Ÿéƒ¨ã€è™šéƒ¨ã€å‘¨æ³¢æ•°ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  F = np.fft.fft(x) # å¤‰æ›çµæœ freq = np.fft.fftfreq(N, d=dt) # å‘¨æ³¢æ•° fig, ax = plt.subplots(nrows=3, sharex=True, figsize=(6,6)) ax[0].plot(F.real, label=\u0026#34;Real part\u0026#34;) ax[0].legend() ax[1].plot(F.imag, label=\u0026#34;Imaginary part\u0026#34;) ax[1].legend() ax[2].plot(freq, label=\u0026#34;Frequency\u0026#34;) ax[2].legend() ax[2].set_xlabel(\u0026#34;Number of data\u0026#34;) plt.show()   å‘¨æ³¢æ•°freqã«ãŠã„ã¦ã€\n æœ€åˆã®è¦ç´ freq[0]ã¯0[Hz] 2ï½N/2 (=512) ç•ªç›®ã®è¦ç´ freq[1:512]ã¯æ­£ã®å‘¨æ³¢æ•° (N/2+1)ç•ªç›®ä»¥é™ã®è¦ç´ freq[512:]ã¯è² ã®å‘¨æ³¢æ•°  ã§ã‚ã‚‹ã€‚\nå…ƒã®ä¿¡å·ã®å‘¨æ³¢æ•°ãŒ1000[Hz]ã§ã‚ã‚‹ã‹ã‚‰ã€ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å®šç†ï¼ˆã¾ãŸã¯æ¨™æœ¬åŒ–å®šç†ï¼‰ã‚ˆã‚Šã€ãã®1/2ä»¥ä¸‹ã®å‘¨æ³¢æ•° (500[Hz]ä»¥ä¸‹) ã§ãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ã®çµæœã¯æœ‰åŠ¹ã§ã‚ã‚‹ã€‚\nã‚°ãƒ©ãƒ•ã‚ˆã‚Šã€å‘¨æ³¢æ•°ãŒ0, 50, 120, -120, -50[Hz]ã®ã¨ãã«ã€å®Ÿéƒ¨ã‚„è™šéƒ¨ãŒãƒ”ãƒ¼ã‚¯å€¤ã‚’æŒã¤ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚\næœ€å¾Œã«ã€å…ƒã®ä¿¡å·ã®æŒ¯å¹…ã‚’æ±‚ã‚ã‚‹ã€‚Fã‚’N/2ã§å‰²ã‚Šã€çµ¶å¯¾å€¤ã‚’ã¨ã‚‹ã¨æŒ¯å¹…ã«ãªã‚‹ã€‚æ­£ã®å‘¨æ³¢æ•°é ˜åŸŸ ã«ã¤ã„ã¦æŒ¯å¹…ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8  Amp = np.abs(F/(N/2)) # æŒ¯å¹… fig, ax = plt.subplots() ax.plot(freq[1:int(N/2)], Amp[1:int(N/2)]) ax.set_xlabel(\u0026#34;Freqency [Hz]\u0026#34;) ax.set_ylabel(\u0026#34;Amplitude\u0026#34;) ax.grid() plt.show()   çµæœã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\næŒ¯å¹…ã¯ã€å‘¨æ³¢æ•°50[Hz]ã§ç´„1.42, 120[Hz]ã§ç´„0.98ã¨ãªã£ã¦ãŠã‚Šã€å…ƒã®å€¤ï¼ˆ50[Hz]ã§ç´„1.5, 120[Hz]ã§1.0ï¼‰ã«è¿‘ã„å€¤ã¨ãªã£ã¦ã„ã‚‹ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ Discrete Fourier Transform (numpy.fft) â€” NumPy v1.19 Manual\n","description":"NumPyã®fftãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã€FFT (Fast Fourier Transform, é«˜é€Ÿãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›) ã«ã‚ˆã‚‹é›¢æ•£ä¿¡å·ã®å‘¨æ³¢æ•°è§£æã‚’è¡Œã„ã€ä¿¡å·ã®æŒ¯å¹…ã‚’æ±‚ã‚ã‚‹ã€‚","id":84,"section":"posts","tags":["Python","NumPy"],"title":"NumPyã‚’ä½¿ã£ãŸé«˜é€Ÿãƒ•ãƒ¼ãƒªã‚¨å¤‰æ›ã«ã‚ˆã‚‹å‘¨æ³¢æ•°è§£æ","uri":"https://helve-blog.com/posts/python/numpy-fast-fourier-transform/"},{"content":"ã¯ã˜ã‚ã« matplotlibã«ã¯ã‚¹ã‚¿ã‚¤ãƒ«ã¨å‘¼ã°ã‚Œã‚‹ã€ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’å¤‰æ›´ã§ãã‚‹ãƒ—ãƒªã‚»ãƒƒãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\nã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’ç°¡å˜ã«å¤‰æ›´ã§ãã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Anaconda3 5.2.0   Python 3.6.5   matplotlib 2.2.2    ã¯ã˜ã‚ã« æœ¬è¨˜äº‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2  import matplotlib as mpl import matplotlib.pyplot as plt   ã‚¹ã‚¿ã‚¤ãƒ«ã®è¨­å®š ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§matplotlibã§åˆ©ç”¨ã§ãã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã®ä¸€è¦§ã‚’ãƒªã‚¹ãƒˆå½¢å¼ã§å–å¾—ã§ãã‚‹ã€‚\n1  plt.style.available   å®Ÿè¡Œçµæœ\nmatplotlibã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ã€ä»–ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã£ã¦ç•°ãªã‚‹å ´åˆãŒã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  [\u0026#39;bmh\u0026#39;, \u0026#39;classic\u0026#39;, \u0026#39;dark_background\u0026#39;, \u0026#39;fast\u0026#39;, \u0026#39;fivethirtyeight\u0026#39;, \u0026#39;ggplot\u0026#39;, \u0026#39;grayscale\u0026#39;, \u0026#39;seaborn-bright\u0026#39;, \u0026#39;seaborn-colorblind\u0026#39;, \u0026#39;seaborn-dark-palette\u0026#39;, \u0026#39;seaborn-dark\u0026#39;, \u0026#39;seaborn-darkgrid\u0026#39;, \u0026#39;seaborn-deep\u0026#39;, \u0026#39;seaborn-muted\u0026#39;, \u0026#39;seaborn-notebook\u0026#39;, \u0026#39;seaborn-paper\u0026#39;, \u0026#39;seaborn-pastel\u0026#39;, \u0026#39;seaborn-poster\u0026#39;, \u0026#39;seaborn-talk\u0026#39;, \u0026#39;seaborn-ticks\u0026#39;, \u0026#39;seaborn-white\u0026#39;, \u0026#39;seaborn-whitegrid\u0026#39;, \u0026#39;seaborn\u0026#39;, \u0026#39;Solarize_Light2\u0026#39;, \u0026#39;tableau-colorblind10\u0026#39;, \u0026#39;_classic_test\u0026#39;]   ã“ã®ä¸­ã®1ã¤ã‚’plt.style.useã§è¨­å®šã™ã‚‹ã¨ã€ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’å¤‰æ›´ã§ãã‚‹ã€‚\nä¾‹\n1 2 3 4 5 6 7 8 9 10 11  plt.style.use(\u0026#39;ggplot\u0026#39;) fig, ax = plt.subplots() ax.plot([1,2], [6,3]) ax.plot([1,2], [4,5]) ax.plot([1,2], [3,4]) ax.set_xlabel(\u0026#34;x label\u0026#34;) ax.set_ylabel(\u0026#34;y label\u0026#34;) ax.set_title(style+\u0026#34; style\u0026#34;) ax.legend([\u0026#34;1\u0026#34;, \u0026#34;2\u0026#34;, \u0026#34;3\u0026#34;], title=\u0026#34;Legend\u0026#34;) plt.show()   å®Ÿè¡Œçµæœ\nãªãŠã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚°ãƒ©ãƒ•ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\næ³¨æ„ã—ãŸã„ã®ãŒã€ã‚ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®šã—ãŸå¾Œã«ã€åˆ¥ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¨­å®šã—ã¦ã‚‚ã€ã‚°ãƒ©ãƒ•ã®è¡¨ç¤ºã«é–¢ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå…¨ã¦ä¸Šæ›¸ãã•ã‚Œãªã„ã“ã¨ã€‚ä¾‹ãˆã°ã€\u0026quot;fast\u0026quot;ã‚¹ã‚¿ã‚¤ãƒ«ã§ä¸Šæ›¸ãã•ã‚Œã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ã‚ãšã‹3å€‹ã§ã‚ã‚‹ã€‚\nã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’è©¦è¡ŒéŒ¯èª¤ã—ã¦æ‰€æœ›ã®è¡¨ç¤ºã«ãªã£ãŸã¨ã—ã¦ã‚‚ã€Pythonã‚’å†ã³ç«‹ã¡ä¸Šã’ã‚‹ã¨ã€åŒã˜è¡¨ç¤ºã«ãªã‚‰ãªã„å ´åˆãŒã‚ã‚‹ã€‚\nã‚¹ã‚¿ã‚¤ãƒ«ã®è¡¨ç¤ºä¾‹ ä¸»ãªã‚°ãƒ©ãƒ•ã‚’æç”»ã—ã¦ã¿ã‚‹ï¼ˆã„ãšã‚Œã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‹ã‚‰ç›´æ¥å¤‰æ›´ã—ãŸå ´åˆï¼‰ã€‚\ngrayscale ãƒ¢ãƒã‚¯ãƒ­å°åˆ·ã™ã‚‹å ´åˆã«ã€‚\nseaborn seabornã‹ã‚‰é€†è¼¸å…¥ã•ã‚ŒãŸã®ã‹ã‚‚ã—ã‚Œãªã„ã€‚\nãªãŠã€å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«å„ã‚¹ã‚¿ã‚¤ãƒ«ã§å‡ºåŠ›ã—ãŸã‚°ãƒ©ãƒ•ã®ä¸€è¦§ãŒã‚ã‚‹ã€‚\nStyle sheets reference â€” Matplotlib 3.3.3 documentation\nã•ã‚‰ã«ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’å¤‰æ›´ã™ã‚‹ ã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ã€‚\nAnaconda3\\Lib\\site-packages\\matplotlib\\mpl-data\\stylelib\næ‹¡å¼µå­ãŒmplstyleã¨ãªã£ã¦ã„ã‚‹ãŒã€ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§ç·¨é›†å¯èƒ½ã§ã‚ã‚‹ã€‚\nè‡ªåˆ†ã§ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚Œã°ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æããŸã³ã«ç´°ã‹ã„è¨­å®šã‚’å¤‰æ›´ã™ã‚‹æ‰‹é–“ãŒçœã‘ã‚‹ã€‚\nã¾ãŸã€ç¾åœ¨ã®è¨­å®šã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã§ãã‚‹ã€‚\n1  mpl.rcParams   å®Ÿè¡Œçµæœ\n1 2 3 4 5 6  RcParams({\u0026#39;_internal.classic_mode\u0026#39;: False, \u0026#39;agg.path.chunksize\u0026#39;: 0, \u0026#39;animation.avconv_args\u0026#39;: [], \u0026#39;animation.avconv_path\u0026#39;: \u0026#39;avconv\u0026#39;, \u0026#39;animation.bitrate\u0026#39;: -1, ï¼ˆä»¥ä¸‹ç•¥ï¼‰   RcParamsã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆãšã«ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’å¤‰æ›´ã§ãã‚‹ã€‚\nã¾ãŸã€åŒã˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã§ã‚ã‚Œã°ã€ã‚°ãƒ©ãƒ•ä½œæˆã®åº¦ã«è¨­å®šã™ã‚‹å¿…è¦ã¯ãªããªã‚‹ã€‚ä¾‹ãˆã°ã€ã‚°ãƒ©ãƒ•ã«ã‚°ãƒªãƒƒãƒ‰ã‚’è¡¨ç¤ºã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã™ã‚‹ã€‚\n1  mpl.rcParams[\u0026#34;axes.grid\u0026#34;] = True   å‚è€ƒ matplotlib.style â€” Matplotlib 3.3.3 documentation\nmatplotlibã®styleã‚’å¤‰ãˆã‚‹ - Qiita\n","description":"matplotlibã«ã¯ã‚¹ã‚¿ã‚¤ãƒ«ã¨å‘¼ã°ã‚Œã‚‹ã€ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’å¤‰æ›´ã§ãã‚‹ãƒ—ãƒªã‚»ãƒƒãƒˆãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã‚’ç°¡å˜ã«å¤‰æ›´ã§ãã‚‹ã€‚","id":85,"section":"posts","tags":["Python","Matplotlib"],"title":"Matplotlib ã‚¹ã‚¿ã‚¤ãƒ«ã«ã‚ˆã‚‹ã‚°ãƒ©ãƒ•ã®è¦‹ãŸç›®ã®å¤‰æ›´","uri":"https://helve-blog.com/posts/python/matplotlib-object-oriented-style/"},{"content":"ã¯ã˜ã‚ã« matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ä½œæˆã—ãŸãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã‚„ç­‰é«˜ç·šå›³ã®ã‚«ãƒ©ãƒ¼ãƒãƒ¼ã‚’ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§èª¿æ•´ã™ã‚‹ã€‚\nã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã«ã‚ˆã‚‹ã‚°ãƒ©ãƒ•ã®æç”»ã¯ã€è¤‡æ•°ã®ã‚°ãƒ©ãƒ•ã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ãŸã¨ãã«ã€ã©ã®ã‚°ãƒ©ãƒ•ã®æç”»ã‚’èª¿æ•´ã—ã¦ã„ã‚‹ã‹åˆ†ã‹ã‚Šã‚„ã™ã„ã¨ã„ã†åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Spyder 3.3.6   Python 3.7.4   matplotlib 3.1.1    æœ¬è¨˜äº‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2  import numpy as np import matplotlib.pyplot as plt   ã‚«ãƒ©ãƒ¼ãƒãƒ¼ã®è¡¨ç¤º ç­‰é«˜ç·šå›³ã‚„ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã«ã‚«ãƒ©ãƒ¼ãƒãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€Figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®colorbarãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1  Figure.colorbar(mappable, ax=None)   ä¸»ãªå¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nmappable: ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã‚’æç”»ã™ã‚‹pcolorã‚„ã€ç­‰é«˜ç·šå›³ã‚’æç”»ã™ã‚‹contourã‹ã‚‰è¿”ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã€‚\nax: ã‚«ãƒ©ãƒ¼ãƒãƒ¼ã‚’æç”»ã™ã‚‹Axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã™ã‚‹ï¼ˆä»»æ„ï¼‰ã€‚\nãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã®ä¾‹ 2ã¤ã®ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã®æ¨ªã«ã€ãã‚Œãã‚Œã‚«ãƒ©ãƒ¼ãƒãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  x = np.arange(0,10) y = np.arange(0,5) X, Y = np.meshgrid(x, y) Z = np.arange(50).reshape(len(y), -1) fig, ax = plt.subplots(ncols=2) mappable0 = ax[0].pcolor(X, Y, Z, cmap=\u0026#34;Blues\u0026#34;) mappable1 = ax[1].pcolor(X, Y, Z, cmap=\u0026#34;Reds\u0026#34;) fig.colorbar(mappable0, ax=ax[0]) fig.colorbar(mappable1, ax=ax[1]) fig.tight_layout() # ã“ã‚ŒãŒç„¡ã„ã¨è¡¨ç¤ºãŒå°‘ã—å´©ã‚Œã‚‹ plt.show()   çµæœ\nç­‰é«˜ç·šå›³ã®ä¾‹ ç­‰é«˜ç·šå›³ã®æ¨ªã«ã‚«ãƒ©ãƒ¼ãƒãƒ¼ã‚’æç”»ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  x = np.arange(0, 10, 0.1) y = np.arange(0, 20, 0.1) X, Y = np.meshgrid(x, y) Z = np.cos(X)+np.cos(Y) fig, ax = plt.subplots() mappable = ax.contour(X, Y, Z, cmap=\u0026#34;Blues\u0026#34;) fig.colorbar(mappable) plt.show()   çµæœ\nã‚«ãƒ©ãƒ¼ãƒãƒ¼ä¸­ã®ç·šã®æ¿ƒã•ãŒã‚„ã‚„åˆ†ã‹ã‚Šã¥ã‚‰ã„ã®ã§ã€ãƒ—ãƒ­ãƒƒãƒˆã•ã‚ŒãŸç­‰é«˜ç·šã«æ•°å­—ã‚’è¡¨ç¤ºã—ãŸæ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚\nã‚«ãƒ©ãƒ¼ãƒãƒ¼ã«ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ  ä»¥ä¸‹ã®æ‰‹é †ã§ã€ã‚«ãƒ©ãƒ¼ãƒãƒ¼ã«ãƒ©ãƒ™ãƒ«ã‚’è¿½åŠ ã§ãã‚‹ã€‚\n Figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®colorbarãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ãã«ã€æˆ»ã‚Šå€¤ã®colorbarã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã™ã‚‹ã€‚ colorbarã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®set_labelãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹ã€‚  ä¾‹\n1 2 3 4 5 6 7 8 9 10  x = np.arange(0,10) y = np.arange(0,5) X, Y = np.meshgrid(x, y) Z = np.arange(50).reshape(len(y), -1) fig, ax = plt.subplots() mappable = ax.pcolor(X, Y, Z, cmap=\u0026#34;Blues\u0026#34;) cbar = fig.colorbar(mappable, ax=ax) cbar.set_label(\u0026#34;Value of Z\u0026#34;) plt.show()   çµæœ\nå‚è€ƒãƒªãƒ³ã‚¯ matplotlib.figure.Figure â€” Matplotlib 3.3.3 documentation\nmatplotlib.pyplot.colorbar â€” Matplotlib 3.3.3 documentation\n","description":"matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ä½œæˆã—ãŸãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ã‚„ç­‰é«˜ç·šå›³ã®ã‚«ãƒ©ãƒ¼ãƒãƒ¼ã‚’ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§èª¿æ•´ã™ã‚‹ã€‚","id":86,"section":"posts","tags":["Python","Matplotlib"],"title":"Matplotlibã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãªã‚«ãƒ©ãƒ¼ãƒãƒ¼ã®è¡¨ç¤º","uri":"https://helve-blog.com/posts/python/matplotlib-object-oriented-colorbar/"},{"content":"ã¯ã˜ã‚ã« matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ä½œæˆã—ãŸã‚°ãƒ©ãƒ•ã®è»¸ã‚’ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§å¯¾æ•°ã«å¤‰æ›´ã™ã‚‹ã€‚\nã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã«ã‚ˆã‚‹ã‚°ãƒ©ãƒ•ã®æç”»ã¯ã€è¤‡æ•°ã®ã‚°ãƒ©ãƒ•ã‚’ãƒ—ãƒ­ãƒƒãƒˆã—ãŸã¨ãã«ã€ã©ã®ã‚°ãƒ©ãƒ•ã®æç”»ã‚’èª¿æ•´ã—ã¦ã„ã‚‹ã‹åˆ†ã‹ã‚Šã‚„ã™ã„ã¨ã„ã†åˆ©ç‚¹ãŒã‚ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Spyder 3.2.8   Python 3.6.5   matplotlib 2.2.2    æœ¬è¨˜äº‹ã§ã¯ã€å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2  import numpy as np import matplotlib.pyplot as plt   å¯¾æ•°è»¸ã®ãƒ—ãƒ­ãƒƒãƒˆ x, yè»¸ã‚’ãã‚Œãã‚Œå¯¾æ•°ã§ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã«ã¯ã€Axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®set_xscale, set_yscaleãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1 2  Axes.set_xscale(scale, **kargs) Axes.set_yscale(scale, **kargs)   scaleã¯ãƒ—ãƒ­ãƒƒãƒˆã®æ–¹æ³•ã§ã‚ã‚Šã€strå‹ã¨ã—ã¦ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‹ã‚‰æŒ‡å®šã™ã‚‹ã€‚\n\u0026quot;linear\u0026quot;, \u0026quot;log\u0026quot;, \u0026quot;symlog\u0026quot;\nï¼ˆ\u0026quot;logit\u0026quot;ã‚‚æŒ‡å®šã§ãã‚‹ãŒã€å…¬å¼ã®ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«è©³ç´°ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ãªã„ãŸã‚æœ¬è¨˜äº‹ã§ã¯æ‰±ã‚ãªã„ï¼‰\nã¾ãŸã€**kargsã¯å„scaleã®è©³ç´°ã‚’æŒ‡å®šã™ã‚‹ä»»æ„ã®å¼•æ•°ã§ã‚ã‚‹ã€‚\né€šå¸¸ã®ç·šå½¢ãƒ—ãƒ­ãƒƒãƒˆ(linear) scale=\u0026quot;linear\u0026quot;ã¨ã™ã‚‹ã¨ã€é€šå¸¸ã®ç·šå½¢ãƒ—ãƒ­ãƒƒãƒˆã«ãªã‚‹ã€‚\nä¸€èˆ¬çš„ãªå¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆ(log) scale=\u0026quot;log\u0026quot;ã¨ã™ã‚‹ã¨ã€ä¸€èˆ¬çš„ãªå¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆã«ãªã‚‹ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n basex/basey: x, yè»¸ã®å¯¾æ•°ã®ã€Œåº•ã€ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®åº•ã¯10ã€‚ nonposx/nonposy: 0ä»¥ä¸‹ã®å€¤ã‚’ã€\u0026quot;mask\u0026quot;ã¨ã™ã‚‹ã¨è¡¨ç¤ºã›ãšã€\u0026quot;clip\u0026quot;ã¨ã™ã‚‹ã¨å¾®å°ãªæ­£ã®æ•°ã«å¤‰æ›ã™ã‚‹ã€‚ subsx/subsy: å°ç›®ç››ã‚Š (subticks) ã‚’æŒ¯ã‚‹å€¤ã‚’æ•´æ•°ã®ãƒªã‚¹ãƒˆã§æŒ‡å®šã™ã‚‹ã€‚  ä¾‹ï¼š xè»¸ã®å¯¾æ•°ã®åº•ã‚’2ã¨ã—ã€yè»¸ã®å°ç›®ç››ã‚Šã‚’2ã¨5ã ã‘ã«ã™ã‚‹ã€‚ã¾ãŸã€0è¦ç´ ã‚’é™¤ãã€‚\n1 2 3 4 5 6 7 8  x = np.arange(10) # 0, 1, 2, ..., 9ã®é…åˆ— y = np.arange(10) fig, ax = plt.subplots() ax.plot(x, y) ax.set_xscale(\u0026#34;log\u0026#34;, basex=2, nonposx=\u0026#34;mask\u0026#34;) ax.set_yscale(\u0026#34;log\u0026#34;, subsy=[2, 5]) plt.show()   å®Ÿè¡Œçµæœ\næ­£è² ä¸¡æ–¹ã®å¯¾æ•°ãƒ—ãƒ­ãƒƒãƒˆ(symlog) scale=\u0026quot;symlog\u0026quot;ã¨ã™ã‚‹ã¨ã€æ­£è² ä¸¡æ–¹ã®æ•°ã‚’å¯¾æ•°ã§ãƒ—ãƒ­ãƒƒãƒˆã§ãã‚‹ã€‚ã™ãªã‚ã¡ã€ä»¥ä¸‹ã®æ•°å¼ã®ã‚ˆã†ã«ã€è² ã®æ•°ã‚’ä¸€åº¦æ­£ã«ã—ã¦å¯¾æ•°ã‚’ã¨ã‚Šå†ã³ãƒã‚¤ãƒŠã‚¹ã‚’ä»˜ã‘ã‚‹ã€‚\n$$ \\begin{cases} \\log(x) \u0026amp; (x \u0026gt; 0) \\\\ -\\log(-x) \u0026amp; (x \u0026lt; 0) \\end{cases} $$\nã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n basex/basey: x, yè»¸ã®å¯¾æ•°ã®ã€Œåº•ã€ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®åº•ã¯10ã€‚ linthreshx/linthreshy: å®Ÿæ•°xã‚’ä¸ãˆã‚‹ã¨ã€ç¯„å›²(-x, x)ã§ç·šå½¢ã«ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚ã‚¼ãƒ­å‘¨è¾ºã«ãŠã‘ã‚‹å¯¾æ•°ã®ç™ºæ•£ã‚’é˜²ãã€‚ subsx/subsy: å°ç›®ç››ã‚Š (subticks) ã‚’æŒ¯ã‚‹å€¤ã‚’æ•´æ•°ã®ãƒªã‚¹ãƒˆã§æŒ‡å®šã™ã‚‹ã€‚  ä¾‹ï¼š yè»¸ã‚’æ­£è² ã¨ã‚‚ã«å¯¾æ•°ã§ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã€‚ç¯„å›²(-1, 1)ã‚’ç·šå½¢ã«ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8  x = np.arange(-10, 10) # -10, -9, ..., 10ã®é…åˆ— y = np.arange(-10, 10) fig, ax = plt.subplots() ax.plot(x, y) ax.set_yscale(\u0026#34;symlog\u0026#34;, linthreshy=1) ax.grid() plt.show()   çµæœ\nå‚è€ƒ matplotlib.pyplot.xscale â€” Matplotlib 3.3.3 documentation\nmatplotlib.axes.Axes.set_xscale â€” Matplotlib 3.3.3 documentation\n","description":"matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ä½œæˆã—ãŸã‚°ãƒ©ãƒ•ã®è»¸ã‚’ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§å¯¾æ•°ã«å¤‰æ›´ã™ã‚‹ã€‚","id":87,"section":"posts","tags":["Python","Matplotlib"],"title":"Matplotlibã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãªå¯¾æ•°è»¸ãƒ—ãƒ­ãƒƒãƒˆ","uri":"https://helve-blog.com/posts/python/matplotlib-object-oriented-logarithmic-graph/"},{"content":"ã¯ã˜ã‚ã« Pandasã¯Pythonã®ãƒ‡ãƒ¼ã‚¿è§£ææ”¯æ´ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚Pandasã®åŸºæœ¬ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã‚ã‚‹Seriesã¨DataFrameã®ä½œæˆæ–¹æ³•ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     python 3.6.2   pandas 0.20.3    Pandasæ¦‚è¦ Pandasã§ã¯ãƒ©ãƒ™ãƒ«ã‚’ä»˜ä¸ã—ãŸé…åˆ—ã‚’æ‰±ãˆã‚‹ã€‚ã¾ãŸã€NumPyã¨ç•°ãªã‚Šã€1ã¤ã®Pandasã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå†…ã«ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿å‹ã‚’ä¿æŒã§ãã‚‹ã€‚\næ‰±ãˆã‚‹æ¬¡å…ƒæ•°ã¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®åç§°ã‚’ä¸‹è¡¨ã«ç¤ºã™ã€‚\n   æ¬¡å…ƒæ•° ãƒ‡ãƒ¼ã‚¿æ§‹é€      1 Series   2 DataFrame   3 Panel    ãŸã ã—ã€Pandas Ver. 0.20ã§ã¯ã€Panelã®ä½¿ç”¨ã¯éæ¨å¥¨ã§ã‚ã‚‹ï¼ˆDataFrameã®MuiltiIndex ã§ä»£æ›¿ã§ãã‚‹ãŸã‚ï¼‰ã€‚\n1æ¬¡å…ƒãƒ‡ãƒ¼ã‚¿æ§‹é€ Seriesã®ä½œæˆ 1æ¬¡å…ƒã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ Seriesã¯ã€ãƒªã‚¹ãƒˆã€NumPyé…åˆ—ã€è¾æ›¸å‹ã„ãšã‚Œã‹ã‹ã‚‰ä½œæˆã§ãã‚‹ã€‚ãƒ©ãƒ™ãƒ«ã¯indexã§æŒ‡å®šã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  \u0026gt;\u0026gt;\u0026gt; import numpy as np \u0026gt;\u0026gt;\u0026gt; import pandas as pd \u0026gt;\u0026gt;\u0026gt; list_data = [1, 2, 3] # ãƒªã‚¹ãƒˆå‹ãƒ‡ãƒ¼ã‚¿ \u0026gt;\u0026gt;\u0026gt; Idx = [\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;] # ãƒ©ãƒ™ãƒ« \u0026gt;\u0026gt;\u0026gt; pd.Series(list_data, index=Idx) # ãƒªã‚¹ãƒˆã‹ã‚‰Seriesã‚’ä½œæˆ a 1 b 2 c 3 dtype: int64 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; pd.Series(list_data) # indexã‚’æœªæŒ‡å®šã®å ´åˆã€ãƒ©ãƒ™ãƒ«ã¯0å§‹ã¾ã‚Šã®æ•´æ•° 0 1 1 2 2 3 dtype: int64 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; pd.Series(np.array(list_data), index=Idx) # NumPyé…åˆ—ã‹ã‚‰Seriesã‚’ä½œæˆ a 1 b 2 c 3 dtype: int64 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; dict_data = {\u0026#34;c\u0026#34;:3, \u0026#34;a\u0026#34;:2, \u0026#34;b\u0026#34;:1} \u0026gt;\u0026gt;\u0026gt; pd.Series(dict_data) # è¾æ›¸å‹ã‹ã‚‰ä½œæˆ a 2 b 1 c 3 dtype: int64 \u0026gt;\u0026gt;\u0026gt; # è¾æ›¸å‹ã§ã¯è¦ç´ ãŒé †åºã¥ã‘ã•ã‚Œã¦ã„ãªãŸã‚ã€ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®é †ã§ã‚½ãƒ¼ãƒˆã•ã‚Œã‚‹   ã¾ãŸã€Seriesã¯nameã¨å‘¼ã°ã‚Œã‚‹å±æ€§ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; A = pd.Series([1, 2, 3], index=[\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;], name=\u0026#34;Number\u0026#34;) # nameå±æ€§ã‚’å®šç¾© \u0026gt;\u0026gt;\u0026gt; A a 1 b 2 c 3 Name: Number, dtype: int64 \u0026gt;\u0026gt;\u0026gt; A.name # nameå±æ€§ã‚’å–å¾— \u0026#39;Number\u0026#39;   2æ¬¡å…ƒãƒ‡ãƒ¼ã‚¿æ§‹é€ DataFrameã®ä½œæˆ 2æ¬¡å…ƒã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ DataFrameã¯ã€ãƒªã‚¹ãƒˆã€NumPyé…åˆ—ã€è¾æ›¸å‹ã€Pandas.Seriesã‹ã‚‰ä½œæˆã§ãã‚‹ã€‚è¡Œã®ãƒ©ãƒ™ãƒ«ã¯index, åˆ—ã®ãƒ©ãƒ™ãƒ«ã¯columnsã§æŒ‡å®šã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  \u0026gt;\u0026gt;\u0026gt; import numpy as np \u0026gt;\u0026gt;\u0026gt; import pandas as pd \u0026gt;\u0026gt;\u0026gt; list_data = [[1, 2, 3], [4, 5, 6]] # 2æ¬¡å…ƒã®ãƒªã‚¹ãƒˆå‹ãƒ‡ãƒ¼ã‚¿ \u0026gt;\u0026gt;\u0026gt; Idx = [\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;] # è¡Œã®ãƒ©ãƒ™ãƒ« \u0026gt;\u0026gt;\u0026gt; Col = [\u0026#34;one\u0026#34;, \u0026#34;tow\u0026#34;, \u0026#34;three\u0026#34;] # åˆ—ã®ãƒ©ãƒ™ãƒ« \u0026gt;\u0026gt;\u0026gt; pd.DataFrame(list_data, index=Idx, columns=Col) # ãƒªã‚¹ãƒˆã‹ã‚‰DataFrameã‚’ä½œæˆ one tow three a 1 2 3 b 4 5 6 \u0026gt;\u0026gt;\u0026gt; pd.DataFrame(list_data) 0 1 2 0 1 2 3 1 4 5 6 \u0026gt;\u0026gt;\u0026gt; # index, columnsã‚’æœªæŒ‡å®šã®å ´åˆã€ãƒ©ãƒ™ãƒ«ã¯0å§‹ã¾ã‚Šã®æ•´æ•° \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; pd.DataFrame(np.array(list_data), index=Idx, columns=Col) # NumPyé…åˆ—ã‹ã‚‰DataFrameã‚’ä½œæˆ one tow three a 1 2 3 b 4 5 6 \u0026gt;\u0026gt;\u0026gt; dict_data = {\u0026#34;one\u0026#34;:[1, 2, 3], ... \u0026#34;two\u0026#34;:[4, 5, 6]} \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; pd.DataFrame(dict_data) # è¾æ›¸å‹ã‹ã‚‰ä½œæˆ one two 0 1 4 1 2 5 2 3 6 \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; s1 = pd.Series([1, 2, 3], index=Col) \u0026gt;\u0026gt;\u0026gt; s2 = pd.Series([4, 5, 6], index=Col) \u0026gt;\u0026gt;\u0026gt; pd.DataFrame([s1, s2], index=Idx) # Pandas.Seriesã‹ã‚‰ä½œæˆï¼ˆãã®1ï¼‰ one tow three a 1 2 3 b 4 5 6 \u0026gt;\u0026gt;\u0026gt; # Seriesã®indexãŒDataFrameã®columnsã«ãªã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; s3 = pd.Series([1, 2, 3], index=Col, name=\u0026#34;c\u0026#34;) \u0026gt;\u0026gt;\u0026gt; s4 = pd.Series([4, 5, 6], index=Col, name=\u0026#34;d\u0026#34;) \u0026gt;\u0026gt;\u0026gt; pd.DataFrame([s3, s4]) # Pandas.Seriesã‹ã‚‰ä½œæˆï¼ˆãã®2ï¼‰ one tow three c 1 2 3 d 4 5 6 \u0026gt;\u0026gt;\u0026gt; # Seriesã«nameãŒå­˜åœ¨ã—ã¦ã„ã‚Œã°ã€DataFrameã®indexã«ãªã‚‹   ã¾ãŸã€DataFrameè‡ªèº«ã¯nameå±æ€§ã‚’æŒãŸãªã„ä»£ã‚ã‚Šã«ã€indexãŒnameå±æ€§ã‚’æŒã¤ã€‚\n1 2 3 4 5 6 7 8 9  \u0026gt;\u0026gt;\u0026gt; A = pd.DataFrame([[1, 2, 3], [4, 5, 6]], index=[\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;], columns=[\u0026#34;one\u0026#34;, \u0026#34;tow\u0026#34;, \u0026#34;three\u0026#34;]) \u0026gt;\u0026gt;\u0026gt; A.index.name=\u0026#34;Row\u0026#34; \u0026gt;\u0026gt;\u0026gt; A one tow three Row a 1 2 3 b 4 5 6   è£œè¶³ æ¬ è½å€¤ã‚’æŒã¤ãƒ‡ãƒ¼ã‚¿ ãƒ‡ãƒ¼ã‚¿ã®æ¬ è½ç®‡æ‰€ã¯ã€numpy.nanã§è£œã†ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; pd.Series([1, np.nan, 3], index=[\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;]) a 1.0 b NaN c 3.0 dtype: float64   è¦ç´ ã‚’æŒãŸãªã„ãƒ‡ãƒ¼ã‚¿ å¼•æ•°ã‚’ã¨ã‚‰ãªã„ã“ã¨ã«ã‚ˆã‚Šã€è¦ç´ ã‚’æŒãŸãªã„Series, DataFrameã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; pd.Series() Series([], dtype: float64) \u0026gt;\u0026gt;\u0026gt;pd.DataFrame() Empty DataFrame Columns: [] Index: []   ãƒ‡ãƒ¼ã‚¿å‹ Series, Dataframeã®dtypeãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿å‹ã‚’è¨­å®šã§ãã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; pd.Series([1, 2, 3], dtype=float) 0 1.0 1 2.0 2 3.0 dtype: float64 \u0026gt;\u0026gt;\u0026gt; pd.Series([1, 2, 3], dtype=int) 0 1 1 2 2 3 dtype: int32   å‚è€ƒ Pandasã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã¨ã—ãŸã€‚\nIntro to data structures â€” pandas 1.1.5 documentation\npandas.Series â€” pandas 1.1.5 documentation\npandas.DataFrame â€” pandas 1.1.5 documentation\n","description":"Pandasã®åŸºæœ¬ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã‚ã‚‹Seriesã¨DataFrameã®ä½œæˆæ–¹æ³•ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚","id":88,"section":"posts","tags":["Python","Pandas"],"title":"Pandasã®Seriesã¨DataFrameã®ä½œæˆ","uri":"https://helve-blog.com/posts/python/pandas-data-construction/"},{"content":"ã¯ã˜ã‚ã« matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ä½œæˆã—ãŸã‚°ãƒ©ãƒ•ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§èª¿æ•´ã™ã‚‹ã€‚\nmatplotlibã®åŸºæœ¬çš„ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã‚°ãƒ©ãƒ•ä½œæˆã«ã¤ã„ã¦ã¯å‰ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     spyder 3.2.3   python 3.6.2   matplotlib 2.0.2    æœ¬ãƒšãƒ¼ã‚¸ã§ã¯ã€matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨pyplotãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2  import matplotlib as mpl import matplotlib.pyplot as plt   ã‚°ãƒ©ãƒ•ã®ã‚¿ã‚¤ãƒˆãƒ« ã‚°ãƒ©ãƒ•(axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ)ã®ä¸Šéƒ¨ã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’ä»˜ã‘ã‚‹ã€‚\n1  Axes.set_title(label, loc=\u0026#34;center\u0026#34;, fontdict, **kwargs)   å¼•æ•°ã®å‹ã¨æ„å‘³ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nlabel: strå‹\nã‚°ãƒ©ãƒ•ã®ã‚¿ã‚¤ãƒˆãƒ«ã€‚\u0026quot;\\n\u0026quot;ã§æ”¹è¡Œå¯èƒ½ã€‚\nloc: strå‹ã€optional\nã‚¿ã‚¤ãƒˆãƒ«ã®ä½ç½®ã‚’åˆ¶å¾¡ã™ã‚‹ã€‚\n{\u0026ldquo;center\u0026rdquo;, \u0026ldquo;right\u0026rdquo;, \u0026ldquo;left\u0026rdquo;}ã®ã„ãšã‚Œã‹ã‚’æŒ‡å®šå¯èƒ½ã€‚\nfontdict: dictå‹ã€optional\næ–‡å­—ã®å¤§ãã•ã€å¤ªã•ã€ç¸¦æƒã„ä½ç½®ã€æ¨ªæƒã„ä½ç½®ã‚’åˆ¶å¾¡ã™ã‚‹ã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n1 2 3 4  {\u0026#34;fontsize\u0026#34;: rcParams[\u0026#34;axes.titlesize\u0026#34;], \u0026#34;fontweight\u0026#34;: rcParams[\u0026#34;axes.titleweight\u0026#34;], \u0026#34;verticalalignment\u0026#34;: \u0026#34;baseline\u0026#34;, \u0026#34;horizontalalignment\u0026#34;: loc}   rcParamsã¯ã€matplotlibãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚ã‚Šã€ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ç¢ºèªã§ãã‚‹ã€‚\n1 2  mpl.rcParams[\u0026#34;axes.titlesize\u0026#34;] mpl.rcParams[\u0026#34;axes.titleweight\u0026#34;]   fontsizeã¯æ–‡å­—ã®å¤§ãã•ã§ã‚ã‚Šã€æ•°å€¤ã§æŒ‡å®šã§ãã‚‹ã€‚\nã¾ãŸã¯ã€strå‹ã¨ã—ã¦ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‹ã‚‰æŒ‡å®šå¯èƒ½ã€‚\n{\u0026ldquo;xx-small\u0026rdquo;, \u0026ldquo;x-small\u0026rdquo;, \u0026ldquo;small\u0026rdquo;. \u0026ldquo;medium\u0026rdquo;, \u0026ldquo;large\u0026rdquo;, \u0026ldquo;x-large\u0026rdquo;, \u0026ldquo;xx-large\u0026rdquo;}\nfontweightã¯æ–‡å­—ã®å¤ªã•ã§ã‚ã‚Šã€0ï½1000ã¾ã§ã®æ•°å€¤ã§æŒ‡å®šã§ãã‚‹ã€‚\nã¾ãŸã¯ã€strå‹ã¨ã—ã¦ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‹ã‚‰æŒ‡å®šå¯èƒ½ã€‚\n{\u0026ldquo;ultralight\u0026rdquo;, \u0026ldquo;light\u0026rdquo;, \u0026ldquo;normal\u0026rdquo;, \u0026ldquo;regular\u0026rdquo;, \u0026ldquo;book\u0026rdquo;, \u0026ldquo;medium\u0026rdquo;, \u0026ldquo;roman\u0026rdquo;, \u0026ldquo;semibold\u0026rdquo;, \u0026ldquo;demibold\u0026rdquo;, \u0026ldquo;demi\u0026rdquo;, \u0026ldquo;bold\u0026rdquo;, \u0026ldquo;heavy\u0026rdquo;, \u0026ldquo;extra bold\u0026rdquo;, \u0026ldquo;black\u0026rdquo;}\nhorizontalalignmentã¯æ–‡å­—ã®æ¨ªæƒã„ä½ç½®ã§ã‚ã‚Šã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‹ã‚‰æŒ‡å®šå¯èƒ½ã€‚\n{\u0026ldquo;center\u0026rdquo;, \u0026ldquo;right\u0026rdquo;, \u0026ldquo;left\u0026rdquo;}\næŒ‡å®šã—ãªã‘ã‚Œã°ã€locã¨åŒã˜å€¤ã«ãªã‚‹ã€‚\nkwargs: optional\nTextã‚¯ãƒ©ã‚¹ã§æŒ‡å®šã§ãã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚\nè©³ç´°ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nmatplotlib.text â€” Matplotlib 3.3.3 documentation\nä¾‹ï¼š\n1 2 3 4 5 6 7  fig, ax = plt.subplots() ax.plot([1,2], [3,4]) ax.set_title(\u0026#34;Figure\u0026#39;s \\ntitle\u0026#34;, loc=\u0026#34;left\u0026#34;, fontdict={\u0026#34;fontsize\u0026#34;: 18, \u0026#34;fontweight\u0026#34;: \u0026#34;bold\u0026#34;}) plt.show()   å®Ÿè¡Œçµæœï¼š\nå‚è€ƒï¼š\nmatplotlib.axes.Axes.set_title â€” Matplotlib 3.3.3 documentation\nè»¸ã®ãƒ©ãƒ™ãƒ« x, yè»¸ã«ãƒ©ãƒ™ãƒ«ã‚’ä»˜ã‘ã‚‹ã¨ãã€ãã‚Œãã‚Œset_xlabel, set_ylabelãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\n1 2  Axes.set_xlabel(xlabel, labelpad=None, fontdict, **kwargs) Axes.set_ylabel(ylabel, labelpad=None, fontdict, **kwargs)   å¼•æ•°ã®å‹ã¨æ„å‘³ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nxlabel, ylabel: strå‹\nè»¸ã®ãƒ©ãƒ™ãƒ«ã€‚\u0026quot;\\n\u0026quot;ã§æ”¹è¡Œå¯èƒ½ã€‚\nfontdict: dictå‹ã€optional\næ–‡å­—ã®å¤§ãã•ã€å¤ªã•ã€ç¸¦æƒã„ä½ç½®ã€æ¨ªæƒã„ä½ç½®ã‚’åˆ¶å¾¡ã™ã‚‹ã€‚\nè©³ç´°ã¯set_titleã®é …ã‚’å‚ç…§ã€‚\nlabelpad: æ•°å€¤ã€optional\nãƒ©ãƒ™ãƒ«ã¨è»¸ã®é–“ã®ã‚¹ãƒšãƒ¼ã‚¹ã€‚è² ã®æ•°ã‚‚å¯ã€‚\nkwargs: optional\nTextã‚¯ãƒ©ã‚¹ã§æŒ‡å®šã§ãã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚\nå‚è€ƒï¼š\nmatplotlib.axes.Axes.set_xlabel â€” Matplotlib 3.3.3 documentation\nè»¸ã®ç¯„å›² è»¸ã®ç¯„å›²ã‚’åˆ¶é™ã™ã‚‹ã¨ãã¯ã€Axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®set_xlim, set_ylimãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\n1 2  Axes.set_xlim(left=None, right=None) Axes.set_ylim(bottom=None, top=None)   å¼•æ•°ã®å‹ã¨æ„å‘³ã‚’ä¸‹è¡¨ã«ç¤ºã™ã€‚\n   å¼•æ•° å‹ æ„å‘³     left ã‚¹ã‚«ãƒ© xè»¸ã®å·¦å´   right ã‚¹ã‚«ãƒ© xè»¸ã®å³å´   bottom ã‚¹ã‚«ãƒ© yè»¸ã®ä¸‹å´   top ã‚¹ã‚«ãƒ© yè»¸ã®ä¸Šå´    set_xlim, set_ylimã«2ã¤ã®å¼•æ•°ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æŒ‡å®šã›ãšã«æ¸¡ã™ã¨ã€é †ã«left, rightã«ä»£å…¥ã•ã‚Œã‚‹ã€‚\nè»¸ã®ç¯„å›²ã‚’ç‰‡å´ã ã‘åˆ¶é™ã—ãŸã„å ´åˆã¯ã€åˆ¶é™ã—ãŸã„å´ã®ã¿ã«å¼•æ•°ã‚’æ¸¡ã™ã€‚åˆ¶é™ã—ãªã‹ã£ãŸå´ã¯ã€è‡ªå‹•ã§èª¿æ•´ã•ã‚Œã‚‹ã€‚\nã¾ãŸã€set_xlimã®å¼•æ•°ã®å€¤ã‚’left\u0026gt;right (set_ylimã®å ´åˆã¯bottom\u0026gt;top) ã¨ã™ã‚‹ã¨ã€è»¸ã®æ­£è² ãŒåè»¢ã™ã‚‹ã€‚ãªãŠã€è»¸ã®åè»¢ã¯ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚‚è¡Œãˆã‚‹ã€‚\n1 2  Axes.invert_xaxis() Axes.invert_yaxis()   ä¾‹ï¼š xè»¸ã®æœ€å¤§ç¯„å›²ã‚’3ã¨ã—ã¦ã€yè»¸ã‚’åè»¢ã•ã›ã‚‹ã€‚\n1 2 3 4 5  fig, ax = plt.subplots() ax.plot([1,5], [3,4]) ax.set_xlim(right=3) ax.set_ylim(5, 2) plt.show()   ä»¥ä¸‹ã®invert_yaxisãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚åŒã˜çµæœã¨ãªã‚‹ã€‚\n1 2 3 4 5 6  fig, ax = plt.subplots() ax.plot([1,5], [3,4]) ax.set_xlim(right=3) ax.set_ylim(2, 5) ax.invert_yaxis() plt.show()   å®Ÿè¡Œçµæœï¼š\nå‚è€ƒï¼š\nmatplotlib.axes.Axes.set_xlim â€” Matplotlib 3.3.3 documentation\nmatplotlib.axes.Axes.set_ylim â€” Matplotlib 3.3.3 documentation\nå‡¡ä¾‹ã®è¡¨ç¤º ã‚°ãƒ©ãƒ•ã«å‡¡ä¾‹(legend)ã‚’ä»˜ã‘ã‚‹ã€‚\n1  Axes.legend(*args, **kwargs)   å‡¡ä¾‹ã‚’legendã®å¼•æ•°ã¨ã—ã¦ã€ãƒªã‚¹ãƒˆå½¢å¼ã§æŒ‡å®šå¯èƒ½ã€‚\nä¾‹1ï¼š\n1 2 3 4 5  fig, ax = plt.subplots() ax.plot([1,2], [3,4]) ax.plot([1,2], [4,3]) ax.legend([\u0026#34;Line 1\u0026#34;, \u0026#34;Line 2\u0026#34;]) plt.show()   å®Ÿè¡Œçµæœ1ï¼š\nãªãŠã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ©ãƒ™ãƒ«ãŒæ—¢ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€legendãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã¯ä¸è¦ã§ã‚ã‚‹ã€‚\nä¾‹2ï¼š\n1 2 3 4 5  fig, ax = plt.subplots() ax.plot([1,2], [3,4], label=\u0026#34;Line 1\u0026#34;) ax.plot([1,2], [4,3], label=\u0026#34;Line 2\u0026#34;) ax.legend() plt.show()   å®Ÿè¡Œçµæœ2ï¼š\nå®Ÿè¡Œçµæœ1ã¨åŒã˜ã€‚\nãã®ä»–ã®ä¸»ãªå¼•æ•°ã®å‹ã¨æ„å‘³ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nloc: strå‹ã€optional\nå‡¡ä¾‹ã®ä½ç½®ã‚’ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‹ã‚‰æŒ‡å®šå¯èƒ½ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ best ï¼ˆãƒ—ãƒ­ãƒƒãƒˆã¨å‡¡ä¾‹ãŒãªã‚‹ã¹ãé‡ãªã‚‰ãªã„ã‚ˆã†ã«é…ç½®ã™ã‚‹ï¼‰ã€‚\nãŸã ã—ã€ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒå¤šã„å ´åˆã€best ã§ã¯å‡¡ä¾‹ã®ä½ç½®ã‚’æ¢ç´¢ã™ã‚‹ã®ã«æ™‚é–“ãŒæ›ã‹ã‚‹ãŸã‚ã€å‡ºæ¥ã‚‹ã ã‘ä½ç½®ã‚’æŒ‡å®šã™ã‚‹æ–¹ãŒã‚ˆã„ã€‚\n          upper left upper center upper right   center left center center right   lower left lower center lower right   best      ncol: intå‹ã€optional\nå‡¡ä¾‹ã®åˆ—æ•°ã‚’æŒ‡å®šã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯1.\nfontsize: intå‹ or strå‹ã€optional\næ–‡å­—ã®å¤§ãã•ã§ã‚ã‚Šã€æ•°å€¤ã§æŒ‡å®šã§ãã‚‹ã€‚\nã¾ãŸã¯ã€strå‹ã¨ã—ã¦ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’æŒ‡å®šå¯èƒ½ã€‚\n{\u0026ldquo;xx-small\u0026rdquo;, \u0026ldquo;x-small\u0026rdquo;, \u0026ldquo;small\u0026rdquo;. \u0026ldquo;medium\u0026rdquo;, \u0026ldquo;large\u0026rdquo;, \u0026ldquo;x-large\u0026rdquo;, \u0026ldquo;xx-large\u0026rdquo;}\nframeon: boolå‹ã€optional\næ ã®è¡¨ç¤ºã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã‚‹ã€‚\n1  mpl.rcParams[\u0026#34;legend.frameon\u0026#34;]   framealpha: floatå‹ã€optional\nå‡¡ä¾‹ã®èƒŒæ™¯ã®é€éåº¦ã€‚0ï½1ã®ç¯„å›²ã§æŒ‡å®šã—ã€å€¤ãŒå°ã•ã„ã»ã©é€æ˜ã«è¿‘ã¥ãã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã‚‹ã€‚\n1  mpl.rcParams[\u0026#34;legend.framealpha\u0026#34;]   facecolor:\nå‡¡ä¾‹ã®èƒŒæ™¯è‰²ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã‚‹ã€‚\n1  mpl.rcParams[\u0026#34;legend.facecolor\u0026#34;]   edgecolor\nå‡¡ä¾‹ã®æ ã®è‰²ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯ä»¥ä¸‹ã§ç¢ºèªã§ãã‚‹ã€‚\n1  mpl.rcParams[\u0026#34;legend.edgecolor\u0026#34;]   title: strå‹\nå‡¡ä¾‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã€‚\nå‚è€ƒï¼š\nmatplotlib.axes.Axes.legend â€” Matplotlib 3.3.3 documentation\nã‚°ãƒ©ãƒ•ã®ã‚°ãƒªãƒƒãƒ‰ ã‚°ãƒ©ãƒ•ã«ã‚°ãƒªãƒƒãƒ‰ã‚’å¼•ãã¨ãã¯ã€Axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®gridãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\n1  Axes.grid(b=None, which=\u0026#39;major\u0026#39;, axis=\u0026#39;both\u0026#39;, **kwargs)   å¼•æ•°ã®å‹ã¨æ„å‘³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nb: boolå‹\nã‚°ãƒªãƒƒãƒ‰ã®ã‚ªãƒ³(True)ãƒ»ã‚ªãƒ•(False)ã€‚\nb=Noneã‹ã¤kwargsã‚’æŒ‡å®šã—ãªã„å ´åˆã€ã‚°ãƒªãƒƒãƒ‰ã®ã‚ªãƒ³ãƒ»ã‚ªãƒ•ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚\nb=Noneã‹ã¤kwargsã‚’æŒ‡å®šã—ãŸå ´åˆã€ã‚°ãƒªãƒƒãƒ‰ã‚’ã‚ªãƒ³ã«ã™ã‚‹ã€‚\nwhich: strå‹\n{\u0026ldquo;major\u0026rdquo;, \u0026ldquo;minor\u0026rdquo;, \u0026ldquo;both\u0026rdquo;}ã®ã„ãšã‚Œã‹ã‚’æŒ‡å®šã™ã‚‹ã€‚\nãã‚Œãã‚Œã€ä¸»ç›®ç›› (major tick), è£œåŠ©ç›®ç›› (monor tick), ã“ã‚Œã‚‰ä¸¡æ–¹ã€ã«ãŠã„ã¦ã‚°ãƒªãƒƒãƒ‰ã‚’å¼•ãã‹ã‚’æ„å‘³ã™ã‚‹ã€‚\naxis: strå‹\nã‚°ãƒªãƒƒãƒ‰ã‚’å¼•ãè»¸ã‚’{\u0026ldquo;both\u0026rdquo;, \u0026ldquo;x\u0026rdquo;, \u0026ldquo;y\u0026rdquo;}ã®ã„ãšã‚Œã‹ã‹ã‚‰æŒ‡å®šã™ã‚‹ã€‚\n**kwargs\nLine 2Dã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã‚°ãƒªãƒƒãƒ‰ç·šã®è‰²ç­‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒ‡å®šã™ã‚‹ã€‚\nLine 2Dã®è©³ç´°ã¯æ¬¡ã®ãƒšãƒ¼ã‚¸ã‚’å‚è€ƒã€‚\nmatplotlib.lines.Line2D â€” Matplotlib 3.3.3 documentation\nå‚è€ƒï¼š\nmatplotlib.axes.Axes.grid â€” Matplotlib 3.3.3 documentation\nã‚°ãƒ©ãƒ•ã®ä¿å­˜ ã‚°ãƒ©ãƒ•ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã™ã‚‹ã¨ãã¯ã€Figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®savefigãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1  Figure.savefig(fname, dpi=None, transparent=False)   å¼•æ•°ã®å‹ã¨æ„å‘³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nfname: strå‹\nã‚°ãƒ©ãƒ•ã‚’ä¿å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨åå‰ã€‚\nãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿ã®å ´åˆã¯ã€ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã‚‹ã€‚\nãƒ•ã‚¡ã‚¤ãƒ«åã«æ‹¡å¼µå­ã‚’ä»˜ã‘ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ‹¡å¼µå­ã‹ã‚‰è‡ªå‹•ã§æ±ºå®šã•ã‚Œã‚‹ã€‚\ndpi: ã‚¹ã‚«ãƒ©ãƒ¼\nä¿å­˜ã™ã‚‹ã‚°ãƒ©ãƒ•ã®è§£åƒåº¦ã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚dpiã®åˆæœŸå€¤ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã§ãã‚‹ã€‚\n1  mpl.rcParams[\u0026#34;savefig.dpi\u0026#34;]   ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ \u0026ldquo;figure\u0026rdquo; ãŒè¿”ã•ã‚ŒãŸå ´åˆã€ä¿å­˜ã™ã‚‹ç”»åƒã®è§£åƒåº¦ã¯Figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šå€¤ã«ãªã‚‹ã€‚\nFigureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®dpiã¯ã€plt.subplots()ãªã©ã«ã‚ˆã‚‹ä½œæˆæ™‚ã«æŒ‡å®šã§ãã‚‹ä»–ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆå¾Œã‚‚Figure.set_dpi(var)ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šå†æŒ‡å®šã§ãã‚‹ã€‚ã¾ãŸã€Figure.get_dpi()ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šå–å¾—ã§ãã‚‹ã€‚\ntransparent: boolå‹\nTrueãªã‚‰ã°ã‚°ãƒ©ãƒ•ã®èƒŒæ™¯ã‚’é€éã•ã›ã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯Falseã€‚\nãŸã ã—ã€ç”»åƒãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒé€éã«å¯¾å¿œã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆpngãªã©ï¼‰ã€‚\nå‚è€ƒï¼š\nmatplotlib.figure.Figure â€” Matplotlib 3.3.3 documentation\n","description":"matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ä½œæˆã—ãŸã‚°ãƒ©ãƒ•ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§èª¿æ•´ã™ã‚‹ã€‚","id":89,"section":"posts","tags":["Python","Matplotlib"],"title":"Matplotlibã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãªã‚°ãƒ©ãƒ•ã®èª¿æ•´","uri":"https://helve-blog.com/posts/python/matplotlib-object-oriented-figure-adjustment/"},{"content":"ã¯ã˜ã‚ã« matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     spyder 3.2.3   python 3.6.2   matplotlib 2.0.2    matplotlibã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ matplotlibã«ãŠã„ã¦ã€ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹ãŸã‚ã®ä¸»ãªã‚¯ãƒ©ã‚¹ã¯figureã¨axesã§ã‚ã‚‹ã€‚\nfigureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ç›¸å½“ã™ã‚‹ã€‚axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã‚°ãƒ©ãƒ•ãã®ã‚‚ã®ã§ã‚ã‚‹ã€‚1ã¤ã®figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¸Šã«è¤‡æ•°ã®axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ç¤ºã§ãã‚‹ã€‚\nã¾ãšã€pyplotãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’æ¬¡ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚\n1  \u0026gt;\u0026gt;\u0026gt; import matplotlib.pyplot as plt   figure, axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆæ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ã€‚\n add_axesãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†  1 2 3 4  fig = plt.figure() # figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ ax = fig.add_axes((0,0,1,1)) # axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ ax.plot([1,2], [3,4]) # plotãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ—ãƒ­ãƒƒãƒˆ plt.show() # ã‚°ãƒ©ãƒ•ã‚’è¡¨ç¤º    add_subplotãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†  1 2 3 4  fig = plt.figure() ax = fig.add_subplot(111) # axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ ax.plot([1,2], [3,4]) plt.show()    subplotsãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†  1 2 3  fig, ax = plt.subplots() # figure, axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ ax.plot([1,2], [3,4]) plt.show()   å®Ÿè¡Œã™ã‚‹ã¨ã€ã„ãšã‚Œã‚‚æ¬¡ã®ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆå¤§ãã•ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚‹ï¼‰ã€‚\nå„é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®èª¬æ˜ã‚’æ¬¡ç¯€ã«ç¤ºã™ã€‚\nfigure, axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ plt.figure() plt.figure()ã¯ã€figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã€‚\n1 2 3 4  plt.figure(num=None, figsize=None, dpi=None, facecolor=None, edgecolor=None, frameon=True, FigureClass=\u0026lt;class \u0026#39;matplotlib.figure.Figure\u0026#39;\u0026gt;,  clear=False, **kwargs)   ä¸»ãªå¼•æ•°ã®å‹ã¨æ„å‘³ã‚’ä¸‹è¡¨ã«ç¤ºã™ã€‚\n   å¼•æ•° å‹ æ„å‘³     num int or str figureã®ç•ªå·ã¾ãŸã¯åå‰ã€‚æŒ‡å®šã—ãªã‘ã‚Œã°é †ã«åŠ ç®—ã•ã‚Œã‚‹ã€‚   figsize touple of int å›³ã®å¹…ã¨é«˜ã•ã‚’æŒ‡å®šï¼ˆå˜ä½ï¼šã‚¤ãƒ³ãƒï¼‰   dpi int è§£åƒåº¦   facecolor  èƒŒæ™¯è‰²   edgecolor  å¢ƒç•Œã®è‰²    ä¾‹ï¼šå›³ã®å¹…ãƒ»é«˜ã•ã‚’ãã‚Œãã‚Œ4, 3ã‚¤ãƒ³ãƒã¨ã—ã€èƒŒæ™¯ã‚’ç°è‰²ã«ã™ã‚‹ã€‚\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; fig = plt.figure(figsize=(4, 3), facecolor=\u0026#34;gray\u0026#34;) \u0026gt;\u0026gt;\u0026gt; ax = fig.add_axes((0,0,1,1)) \u0026gt;\u0026gt;\u0026gt; ax.plot([1,2], [3,4]) \u0026gt;\u0026gt;\u0026gt; plt.show()   figure.add_axes() figure.add_axes()ã¯ã€figureä¸Šã«1å€‹ã®axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\n1  figure.add_axes=(rect, projection, poloar)   ä¸»ãªå¼•æ•°ã®æ„å‘³ã‚’ä¸‹è¡¨ã«ç¤ºã™ã€‚\n   å¼•æ•° å‹ æ„å‘³     rect list or touple axesã®ä½ç½®ãƒ»å¤§ãã•ã‚’æŒ‡å®š   projection str æŠ•å½±æ–¹æ³•ï¼ˆä»»æ„ï¼‰   polar bool Trueãªã‚‰æ¥µåº§æ¨™è¡¨ç¤ºï¼ˆä»»æ„ï¼‰    rectã¯ã€4ã¤ã®floatã§axesã®[å·¦ç«¯, ä¸‹ç«¯, å¹…, é«˜ã•]ã‚’æŒ‡å®šã™ã‚‹ã€‚\nprojectionå¼•æ•°ã«ã¯ã€ä»¥ä¸‹ã®æŠ•å½±æ–¹æ³•ã‚’æŒ‡å®šã§ãã‚‹ã€‚\n   å¼•æ•° æ„å‘³     \u0026ldquo;aitoff\u0026rdquo; ã‚¨ã‚¤ãƒˆãƒ•å›³æ³•   \u0026ldquo;hammer\u0026rdquo; ãƒãƒ³ãƒ¡ãƒ«å›³æ³•   \u0026ldquo;lambert\u0026rdquo; ãƒ©ãƒ³ãƒ™ãƒ«ãƒˆå›³æ³•   \u0026ldquo;mollweide\u0026rdquo; ãƒ¢ãƒ«ãƒ¯ã‚¤ãƒ‡å›³æ³•   \u0026ldquo;polar\u0026rdquo; æ¥µåº§æ¨™   \u0026ldquo;rectilinear\u0026rdquo; å¿ƒå°„æ–¹ä½å›³æ³•    figure.add_subplot() figure.add_subplot()ã¯ã€figureä¸Šã«1å€‹ã®axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ ¼å­çŠ¶ã«ä½œæˆã™ã‚‹ã€‚\n1  figure.add_axes=(*args, projection, poloar)   argsã¯å¯å¤‰é•·ã®å¼•æ•°ã‚’è¡¨ã—ã€ã€Œ3ã¤ã®æ•´æ•°ã‚’æŒã¤ã‚¿ãƒ—ãƒ«ã€ã¾ãŸã¯ã€Œ3æ¡ã®æ•´æ•°ã€ã§ã‚ã‚‹ã€‚\nã‚¿ãƒ—ãƒ«ã®å€¤ã‚’(I, J, K)ã¨ã™ã‚‹ã¨ã€Iè¡ŒJåˆ—ã®æ ¼å­ã®Kç•ªç›®ã®ä½ç½®ã«axesã‚’ä½œæˆã™ã‚‹ã€‚\nã‚¿ãƒ—ãƒ«(I, J, K)ã¯ã€3ã¤ã®æ•´æ•°ã‚’IJKã¨ä¸¦ã¹ãŸå ´åˆã«ç­‰ã—ã„ã€‚\nä¾‹ï¼š2è¡Œ1åˆ—ã§2ã¤ã®ã‚°ãƒ©ãƒ•ã‚’å‡ºåŠ›ã™ã‚‹ã€‚\n1 2 3 4 5 6  fig = plt.figure() ax1 = fig.add_subplot(211) # 2è¡Œ1åˆ—ã®1ç•ªç›® ax1.plot([1,2], [2,3]) ax2 = fig.add_subplot(212) # 2è¡Œ1åˆ—ã®2ç•ªç›®  ax2.plot([1,2], [3,2]) plt.show()   plt.subplots() plt.subplots()ã¯æ¬¡ã®2ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\n figureã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ï¼ˆã¾ãŸã¯å˜ä½“ã®axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰  1 2 3  plt.subplots(nrows=1, ncols=1, sharex=False, sharey=False, squeeze=True, subplot_kw=None, gridspec_kw=None, **fig_kw)   ä¸»ãªå¼•æ•°ã®æ„å‘³ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nnrows, ncols: intå‹\nã‚°ãƒ©ãƒ•ã‚°ãƒªãƒƒãƒ‰ã®è¡Œæ•°ãƒ»åˆ—æ•°ã€‚\nsharex, sharey: bool or {\u0026ldquo;none\u0026rdquo;, \u0026ldquo;all\u0026rdquo;, \u0026ldquo;row\u0026rdquo;, \u0026ldquo;col\u0026rdquo;}\nè¤‡æ•°ã®ã‚°ãƒ©ãƒ•ã®x, yè»¸ã®ç¯„å›²(xlim, ylim)ã®å…±æœ‰ã€‚\n True or \u0026ldquo;all\u0026rdquo;: å…¨ã‚°ãƒ©ãƒ•ã§è»¸ç¯„å›²ã‚’å…±æœ‰ã€‚ False or \u0026ldquo;none\u0026rdquo;: å„ã‚°ãƒ©ãƒ•ã®è»¸ç¯„å›²ã¯ç‹¬ç«‹ã€‚ \u0026ldquo;row\u0026rdquo;: å„è¡Œã®ã‚°ãƒ©ãƒ•ãŒè»¸ç¯„å›²ã‚’å…±æœ‰ã€‚ \u0026ldquo;col\u0026rdquo;: å„åˆ—ã®ã‚°ãƒ©ãƒ•ãŒè»¸ç¯„å›²ã‚’å…±æœ‰ã€‚  squeeze: bool\naxesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¿”ã—æ–¹ã‚’æŒ‡å®šã€‚\n Falseã®å ´åˆã€axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¸¸ã«2æ¬¡å…ƒé…åˆ—ã§è¿”ã™ã€‚ Trueã®å ´åˆã€nrows, ncolsã®å€¤ã«ã‚ˆã£ã¦ã€axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆé…åˆ—ã®æ¬¡å…ƒã‚’æœ€å°é™ã«ã™ã‚‹ã€‚\nãƒ»nrows=ncols=1ã®ã¨ãã€ç›´æ¥axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã€‚\nãƒ»nrowsã¨ncolsã®ç‰‡æ–¹ã®ã¿1ã®ã¨ãã€axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’1æ¬¡å…ƒé…åˆ—ã§è¿”ã™ã€‚\nãƒ»nrowsã¨ncolsã®ä¸¡æ–¹ãŒ2ä»¥ä¸Šã®ã¨ãã€axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’2æ¬¡å…ƒé…åˆ—ã§è¿”ã™ã€‚  subplot_kw: dictå‹\nfigure.add_subplot()ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã€‚\n**fig_kw :\nplt.figure()ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã€‚\nä¾‹ï¼š2è¡Œ2åˆ—ã®axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€xè»¸ã®ç¯„å›²ã¯åŒã˜åˆ—ã®ã‚°ãƒ©ãƒ•ã§å…±é€šã€yè»¸ã®ç¯„å›²ã¯å…¨ã‚°ãƒ©ãƒ•ã§å…±é€šã¨ã™ã‚‹ã€‚ã¾ãŸã€èƒŒæ™¯è‰²ã‚’è–„ç°è‰²ã«ã™ã‚‹(plt.figure()ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿)ã€‚\n1 2 3 4 5 6 7 8 9  fig, ax = plt.subplots(ncols=2, nrows=2, sharex=\u0026#34;col\u0026#34;, sharey=\u0026#34;all\u0026#34;, facecolor=\u0026#34;lightgray\u0026#34;) print(ax) ax[0,0].plot([1,2], [0,1]) # å·¦ä¸Š ax[0,1].plot([5,8], [1,2]) # å³ä¸Š ax[1,0].plot([1,2], [2,1]) # å·¦ä¸‹ ax[1,1].plot([5,8], [2,0]) # å³ä¸‹ plt.show()   å®Ÿè¡Œçµæœ å¤‰æ•°axã¯axesã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®2x2é…åˆ—ã«ãªã£ã¦ã„ã‚‹ã€‚\n1 2 3 4  [[\u0026lt;matplotlib.axes._subplots.AxesSubplot object at 0x000000E5792E0588\u0026gt; \u0026lt;matplotlib.axes._subplots.AxesSubplot object at 0x000000E57A31D278\u0026gt;] [\u0026lt;matplotlib.axes._subplots.AxesSubplot object at 0x000000E579271BE0\u0026gt; \u0026lt;matplotlib.axes._subplots.AxesSubplot object at 0x000000E57A3DCFD0\u0026gt;]]   å‚è€ƒãƒªãƒ³ã‚¯ matplotlib.pyplot.figure â€” Matplotlib 3.3.3 documentation\nmatplotlib.pyplot.subplot â€” Matplotlib 3.3.3 documentation\nmatplotlib.pyplot.subplots â€” Matplotlib 3.3.3 documentation\n","description":"matplotlibãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã‚¹ã‚¿ã‚¤ãƒ«ã§ã‚°ãƒ©ãƒ•ã‚’ä½œæˆã™ã‚‹ã€‚","id":90,"section":"posts","tags":["Python","Matplotlib"],"title":"Matplotlibã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ãªã‚°ãƒ©ãƒ•ä½œæˆ","uri":"https://helve-blog.com/posts/python/matplotlib-object-oriented-figure-construction/"},{"content":"ã¯ã˜ã‚ã« Pythonã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªmultiprocessingã‚’ä½¿ã£ã¦ä¸¦åˆ—è¨ˆç®—ã‚’è¡Œã†ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     python 3.7.4    å„ä¸¦åˆ—å‡¦ç†é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã›ãšä¸¦åˆ—è¨ˆç®—ã‚’è¡Œã†å ´åˆ ä¸¦åˆ—åŒ–ã—ãŸå„å‡¦ç†é–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’å…±æœ‰ã›ãšã«ä¸¦åˆ—è¨ˆç®—ã‚’è¡Œã†å ´åˆã€multiprocessingãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®Poolã‚¯ãƒ©ã‚¹ã‚’ä½¿ã†ã ã‘ã§è‰¯ã„ã€‚\næ¬¡ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã¯ã€0ã‹ã‚‰9ã¾ã§ã®å„æ•´æ•°ã®2ä¹—ã‚’è¨ˆç®—ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  import multiprocessing as mp def square(x): return x*x if __name__ == \u0026#34;__main__\u0026#34;: with mp.Pool(processes=2) as pool: result = pool.map(square, range(10)) print(result)   å®Ÿè¡Œçµæœï¼š\n1  [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]   ä¸Šè¨˜ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’é–‹è¨­ã™ã‚‹ã€‚Poolã‚¯ãƒ©ã‚¹ã¯\n1  if __name__ == \u0026#34;__main__\u0026#34;:   ã®ä¸­ã§å§‹ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nã¾ãŸã€Poolã®å¼•æ•°ã¯ã€ä½¿ç”¨ã™ã‚‹ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ã®æ•°ï¼ˆä¸¦åˆ—è¨ˆç®—ãƒ—ãƒ­ã‚»ã‚¹æ•°ï¼‰ã§ã‚ã‚‹ã€‚ä½œæˆã—ãŸPoolã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆpoolã®mapãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾ã—ã€ç¬¬1å¼•æ•°ã«é–¢æ•°ã€ç¬¬2å¼•æ•°ã«é–¢æ•°ã®å¼•æ•°ï¼ˆã‚¤ãƒ†ãƒ¬ãƒ¼ã‚¿å½¢å¼ï¼‰ã‚’æ¸¡ã™ã€‚\nã•ã‚‰ã«ã€è¨ˆç®—çµ‚äº†å¾Œã«Poolã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¶ˆå»ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚withæ§‹æ–‡ã‚’ä½¿ã‚ãªã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«closeãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\n1 2 3  pool = mp.Pool(processes=2) result = pool.map(square, range(10))) pool.close()   å‚è€ƒ multiprocessing \u0026mdash; ãƒ—ãƒ­ã‚»ã‚¹ãƒ™ãƒ¼ã‚¹ã®ä¸¦åˆ—å‡¦ç† â€” Python 3.9.1 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n","description":"Pythonã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªmultiprocessingã‚’ä½¿ã£ã¦ä¸¦åˆ—è¨ˆç®—ã‚’è¡Œã†ã€‚","id":91,"section":"posts","tags":["Python"],"title":"Pythonã®multiprocessingã‚’ä½¿ã£ãŸä¸¦åˆ—è¨ˆç®—","uri":"https://helve-blog.com/posts/python/python-multiprocessing/"},{"content":"ã¯ã˜ã‚ã« BeautifulSoupã‚’ä½¿ã£ã¦XMLã‚’è§£æ(parse)ã™ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.4   beautifulsoup4 4.8.0   lxml 4.4.1    ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n$ pip install beautifulsoup4 $ pip install lxml XMLã®æ§‹æ–‡ ã“ã®è¨˜äº‹ã§ã¯ã€XMLã®æ§‹é€ ã«ã¤ã„ã¦ä»¥ä¸‹ã®åç§°ã‚’ç”¨ã„ã‚‹ã€‚\n1  \u0026lt;è¦ç´ å å±æ€§=\u0026#34;å€¤\u0026#34;\u0026gt;å†…å®¹\u0026lt;/è¦ç´ å\u0026gt;   æ‰±ã†XMLãƒ•ã‚¡ã‚¤ãƒ« æ›¸ç±ãƒ‡ãƒ¼ã‚¿ã‚’æ¨¡æ“¬ã—ãŸXMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã†ã€‚ä»¥ä¸‹ã®XMLã«\u0026quot;doc.xml\u0026quot;ã¨åå‰ã‚’ä»˜ã‘ã¦ã€ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ã„ã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  \u0026lt;data\u0026gt; \u0026lt;book id=\u0026#34;001\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;book id=\u0026#34;002\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt;ç¾…ç”Ÿé–€\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;èŠ¥å·é¾ä¹‹ä»‹\u0026#34;\u0026gt;èŠ¥å·é¾ä¹‹ä»‹\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;book id=\u0026#34;003\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt;æŸ¿ã®ç¨®\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;å¯ºç”°å¯…å½¦\u0026#34;\u0026gt;å¯ºç”°å¯…å½¦\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;éšç­†\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;/data\u0026gt;   \u0026ldquo;autonym\u0026quot;ã¯ã€Œæœ¬åã€ã®æ„å‘³ã€‚ã¾ãŸã€ã“ã®è¨˜äº‹ã§ã¯æ‰±ã‚ãªã„ãŒã€requestã‚„urllibãªã©ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã¨ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®XMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ã§åé›†ã§ãã‚‹ã€‚\nXMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ãƒ¼ã‚¹ èª­ã¿è¾¼ã‚“ã XMLãƒ•ã‚¡ã‚¤ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’BeautifulSoupã§ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã€‚BeautifulSoupã§ä½¿ç”¨ã§ãã‚‹ãƒ‘ãƒ¼ã‚µã‚’æ¬¡è¡¨ã«ç¤ºã™ã€‚ä»Šå›ã¯xmlãƒ‘ãƒ¼ã‚µã‚’ä½¿ç”¨ã™ã‚‹ã€‚\n   ãƒ‘ãƒ¼ã‚µ å‚™è€ƒ     html.parser æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ‘ãƒ¼ã‚µ   lxml lxmlãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®HTMLãƒ‘ãƒ¼ã‚µã€‚å‡¦ç†ãŒé«˜é€Ÿ   lxml-xml ã¾ãŸã¯ xml lxmlãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®XMLãƒ‘ãƒ¼ã‚µã€‚å‡¦ç†ãŒé«˜é€Ÿ   html5lib HTML5ã«å¯¾å¿œ    ä»¥ä¸‹ã®ã‚ˆã†ã«BeautifulSoupã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€XMLãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‘ãƒ¼ã‚µã‚’å¼•æ•°ã«æŒ‡å®šã™ã‚‹ã€‚BeautifulSoupã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®soupã‚’ptintæ–‡ã§å‡ºåŠ›ã™ã‚‹ã¨ã€XMLãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  \u0026gt;\u0026gt;\u0026gt; from bs4 import BeautifulSoup \u0026gt;\u0026gt;\u0026gt; with open(\u0026#34;doc.xml\u0026#34;) as doc: ... soup = BeautifulSoup(doc, \u0026#34;xml\u0026#34;) # ç¬¬2å¼•æ•°ã§ãƒ‘ãƒ¼ã‚µã‚’æŒ‡å®š \u0026gt;\u0026gt;\u0026gt; print(soup) \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;data\u0026gt; \u0026lt;book id=\u0026#34;001\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;book id=\u0026#34;002\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt;ç¾…ç”Ÿé–€\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;èŠ¥å·é¾ä¹‹ä»‹\u0026#34;\u0026gt;èŠ¥å·é¾ä¹‹ä»‹\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;book id=\u0026#34;003\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt;æŸ¿ã®ç¨®\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;å¯ºç”°å¯…å½¦\u0026#34;\u0026gt;å¯ºç”°å¯…å½¦\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;éšç­†\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;/data\u0026gt;   XMLãŒæ–‡å­—åŒ–ã‘ã™ã‚‹å ´åˆã¯openæ™‚ã®encodingã‚’è¦‹ç›´ã™ã€‚prettifyãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã¨æ•´å½¢ã•ã‚ŒãŸXMLãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  \u0026gt;\u0026gt;\u0026gt; print(soup.prettify()) \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;data\u0026gt; \u0026lt;book id=\u0026#34;001\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt; Alice in Wonderland \u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt; Lewis Carroll \u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt; å°èª¬ \u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;book id=\u0026#34;002\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt; ç¾…ç”Ÿé–€ \u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;èŠ¥å·é¾ä¹‹ä»‹\u0026#34;\u0026gt; èŠ¥å·é¾ä¹‹ä»‹ \u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt; å°èª¬ \u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;book id=\u0026#34;003\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt; æŸ¿ã®ç¨® \u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;å¯ºç”°å¯…å½¦\u0026#34;\u0026gt; å¯ºç”°å¯…å½¦ \u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt; éšç­† \u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026lt;/data\u0026gt;   ãƒ‘ãƒ¼ã‚¹ã—ãŸXMLã®æ¢ç´¢ è¦ç´ ã®æ¤œç´¢ ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’XMLå†…ã®è¦ç´ ã®æ¢ç´¢ã«åˆ©ç”¨ã§ãã‚‹ã€‚\n   ãƒ¡ã‚½ãƒƒãƒ‰ å‚™è€ƒ     find() è¦ç´ åã¾ãŸã¯å±æ€§ã§æ¤œç´¢ã—ã€è©²å½“ã™ã‚‹æœ€åˆã®è¦ç´ ã‚’è¿”ã™   find_all() è¦ç´ åã¾ãŸã¯å±æ€§ã§æ¤œç´¢ã—ã€è©²å½“ã™ã‚‹å…¨ã¦ã®è¦ç´ ã‚’è¿”ã™    ä½¿ç”¨ä¾‹ã¯æ¬¡ã®é€šã‚Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  \u0026gt;\u0026gt;\u0026gt; soup.find(\u0026#34;book\u0026#34;) # æœ€åˆã®\u0026#34;book\u0026#34;è¦ç´  \u0026lt;book id=\u0026#34;001\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026gt;\u0026gt;\u0026gt; soup.book # \u0026#34;.\u0026#34;+\u0026#34;è¦ç´ ã§ã‚‚ã€åŒã˜çµæœã«ãªã‚‹ \u0026lt;book id=\u0026#34;001\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026gt;\u0026gt;\u0026gt; soup.find(language=\u0026#34;Japanese\u0026#34;) # languageå±æ€§ãŒJapaneseã§ã‚ã‚‹æœ€åˆã®è¦ç´  \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt;ç¾…ç”Ÿé–€\u0026lt;/title\u0026gt; \u0026gt;\u0026gt;\u0026gt; soup.find_all(\u0026#34;author\u0026#34;) # å…¨ã¦ã®authorè¦ç´  [\u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt;, \u0026lt;author autonym=\u0026#34;èŠ¥å·é¾ä¹‹ä»‹\u0026#34;\u0026gt;èŠ¥å·é¾ä¹‹ä»‹\u0026lt;/author\u0026gt;, \u0026lt;author autonym=\u0026#34;å¯ºç”°å¯…å½¦\u0026#34;\u0026gt;å¯ºç”°å¯…å½¦\u0026lt;/author\u0026gt;] \u0026gt;\u0026gt;\u0026gt; soup.find_all(language=\u0026#34;Japanese\u0026#34;) # languageå±æ€§ãŒJapaneseã§ã‚ã‚‹å…¨ã¦ã®è¦ç´  [\u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt;ç¾…ç”Ÿé–€\u0026lt;/title\u0026gt;, \u0026lt;title language=\u0026#34;Japanese\u0026#34;\u0026gt;æŸ¿ã®ç¨®\u0026lt;/title\u0026gt;]   å±æ€§ã¨å€¤ã®å–å¾— å±æ€§ã‹ã‚‰å€¤ã‚’å–å¾—ã™ã‚‹å ´åˆã¯ã€[ ]ã§å±æ€§ã‚’æŒ‡å®šã™ã‚‹ã€‚å…¨ã¦ã®å±æ€§ã¨å€¤ã‚’å–å¾—ã™ã‚‹å ´åˆã¯ã€attrsãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\n1 2 3 4 5 6 7  \u0026gt;\u0026gt;\u0026gt; title001 = soup.book.title \u0026gt;\u0026gt;\u0026gt; print(title001) \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026gt;\u0026gt;\u0026gt; title001[\u0026#34;language\u0026#34;] # å±æ€§ã‚’æŒ‡å®š \u0026#39;English\u0026#39; \u0026gt;\u0026gt;\u0026gt; title001.attrs # å±æ€§ã¨å€¤ã‚’è¾æ›¸å‹ã§è¡¨ç¤º {\u0026#39;language\u0026#39;: \u0026#39;English\u0026#39;}   å†…å®¹ã®å–å¾— å†…å®¹ã‚’æŒã¤ç›´ä¸Šã®è¦ç´ ã¾ã§ç§»å‹•ã—ã€stringãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; title001 = soup.book.title \u0026gt;\u0026gt;\u0026gt; print(title001) \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026gt;\u0026gt;\u0026gt; title001.string # å†…å®¹ã‚’å–å¾— \u0026#34;Alice in Wonderland\u0026#34;   è¦ç´ é–“ã®ç§»å‹•    å±æ€§ å‚™è€ƒ     next_sibling åŒã˜éšå±¤ã®æ¬¡ã®è¦ç´ ã«ç§»å‹•   previous_sibling åŒã˜éšå±¤ã®å‰ã®è¦ç´ ã«ç§»å‹•   parent ä¸Šã®éšå±¤ã®è¦ç´ ã«ç§»å‹•    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  \u0026gt;\u0026gt;\u0026gt; book001 = soup.book \u0026gt;\u0026gt;\u0026gt; print(book001) \u0026lt;book id=\u0026#34;001\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt; \u0026gt;\u0026gt;\u0026gt; author001 = book001.author \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt; \u0026gt;\u0026gt;\u0026gt; author001.next_sibling # æ”¹è¡Œ(\\n)ã‚‚è¦ç´ ã«å«ã¾ã‚Œã‚‹ \u0026#39;\\n\u0026#39; \u0026gt;\u0026gt;\u0026gt; author001.next_sibling.next_sibling # æ¬¡ã®è¦ç´  \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026gt;\u0026gt;\u0026gt; author001.previous_sibling.previous_sibling # å‰ã®è¦ç´  \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026gt;\u0026gt;\u0026gt; author001.parent # ä¸Šã®è¦ç´  \u0026lt;book id=\u0026#34;001\u0026#34;\u0026gt; \u0026lt;title language=\u0026#34;English\u0026#34;\u0026gt;Alice in Wonderland\u0026lt;/title\u0026gt; \u0026lt;author autonym=\u0026#34;Charles Lutwidge Dodgson\u0026#34;\u0026gt;Lewis Carroll\u0026lt;/author\u0026gt; \u0026lt;genre\u0026gt;å°èª¬\u0026lt;/genre\u0026gt; \u0026lt;/book\u0026gt;   å‚è€ƒãƒªãƒ³ã‚¯ Beautiful Soup Documentation â€” Beautiful Soup 4.9.0 documentation\n","description":"BeautifulSoupã‚’ä½¿ã£ã¦XMLã‚’è§£æ(parse)ã™ã‚‹ã€‚","id":92,"section":"posts","tags":["Python","BeautifulSoup"],"title":"BeautifulSoupã‚’ä½¿ã£ãŸXMLã®è§£æ","uri":"https://helve-blog.com/posts/python/beautifulsoup-xml-parse/"},{"content":"ã¯ã˜ã‚ã« NumPyã§åˆ©ç”¨ã§ãã‚‹çµ±è¨ˆã®é–¢æ•°ã«ã¤ã„ã¦ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    æœ€å¤§ãƒ»æœ€å° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  \u0026gt;\u0026gt;\u0026gt; import numpy as np \u0026gt;\u0026gt;\u0026gt; a = np.array([[1, 2, 3], [4, 5, 6]]) \u0026gt;\u0026gt;\u0026gt; np.amax(a) # å…¨è¦ç´ ã®æœ€å¤§å€¤ 6 \u0026gt;\u0026gt;\u0026gt; np.amax(a, axis=0) # åˆ—æ–¹å‘ã®æœ€å¤§å€¤ array([4, 5, 6]) \u0026gt;\u0026gt;\u0026gt; np.amax(a, axis=1) # è¡Œæ–¹å‘ã®æœ€å¤§å€¤ array([3, 6]) \u0026gt;\u0026gt;\u0026gt; np.amax(a, axis=1, keepdims=True) # å…ƒã®é…åˆ—æ§‹é€ ã‚’ç¶­æŒ array([[3], [6]]) \u0026gt;\u0026gt;\u0026gt; np.amin(a) # å…¨è¦ç´ ã®æœ€å°å€¤ 1 \u0026gt;\u0026gt;\u0026gt; np.argmax(a) # æœ€å¤§è¦ç´ ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿”ã™ \u0026gt;\u0026gt;\u0026gt; # é…åˆ—ã¯1æ¬¡å…ƒã«å¤‰æ› (flatten) ã•ã‚Œã‚‹ 5 \u0026gt;\u0026gt;\u0026gt; np.argmax(a, axis=0) # åˆ—æ–¹å‘ã®æœ€å¤§è¦ç´ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ array([1, 1, 1], dtype=int64) \u0026gt;\u0026gt;\u0026gt; np.argmin(a) # æœ€å°è¦ç´ ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿”ã™ 0 \u0026gt;\u0026gt;\u0026gt; np.ptp(a) # æœ€å¤§å€¤-æœ€å°å€¤ (Peak To Peak) 5 \u0026gt;\u0026gt;\u0026gt; np.ptp(a, axis=0) # åˆ—æ–¹å‘ã®æœ€å¤§å€¤-æœ€å°å€¤ array([3, 3, 3])   å¹³å‡ã¨åˆ†æ•£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1, 2, 3], [4, 5, 6]]) \u0026gt;\u0026gt;\u0026gt; np.median(a) # å…¨è¦ç´ ã®ä¸­å¤®å€¤ 3.5 \u0026gt;\u0026gt;\u0026gt; np.median(a, axis=0) # åˆ—æ–¹å‘ã®ä¸­å¤®å€¤ array([ 2.5, 3.5, 4.5]) \u0026gt;\u0026gt;\u0026gt; np.average(a) # å…¨è¦ç´ ã®å¹³å‡å€¤ 3.5 \u0026gt;\u0026gt;\u0026gt; np.average(a, axis=0) # åˆ—æ–¹å‘ã®å¹³å‡å€¤ array([ 2.5, 3.5, 4.5]) \u0026gt;\u0026gt;\u0026gt; np.average([1, 2, 3], weights=[2.5, 1.5, 0.5]) # é‡ã¿ã¥ã‘å¹³å‡ \u0026gt;\u0026gt;\u0026gt; # (2.5*1 + 1.5*2 + 0.5*3) / (2.5+1.5+0.5) 1.5555555555555556 \u0026gt;\u0026gt;\u0026gt; np.mean(a) # å…¨è¦ç´ ã®å¹³å‡å€¤(axisã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã‚ã‚‹ãŒã€weightsã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãªã„) 3.5 \u0026gt;\u0026gt;\u0026gt; np.std(a) # æ¨™æº–åå·® (axisã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š) 1.707825127659933 \u0026gt;\u0026gt;\u0026gt; np.std(a, ddof=1) # ä¸åæ¨™æº–åå·® (æ¨™æœ¬æ•°-ddofã§æ¨™æº–åå·®ã‚’è¨ˆç®—ã€‚ddof=0ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ 1.8708286933869707 \u0026gt;\u0026gt;\u0026gt; np.var(a) # æ¨™æœ¬åˆ†æ•£ (axisã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š) 2.9166666666666665 \u0026gt;\u0026gt;\u0026gt; np.var(a, ddof=1) # ä¸ååˆ†æ•£ (æ¨™æœ¬æ•°-ddofã§åˆ†æ•£ã‚’è¨ˆç®—ã€‚ddof=0ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ 3.5   ç›¸é–¢ä¿‚æ•° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  \u0026gt;\u0026gt;\u0026gt; a = np.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) \u0026gt;\u0026gt;\u0026gt; b = np.array([1, 0, 4, 2, 6, 3, 5, 9, 8, 7]) \u0026gt;\u0026gt;\u0026gt; c = np.array([9, 8, 7, 6, 5, 4, 3, 2, 1, 0]) \u0026gt;\u0026gt;\u0026gt; x = np.vstack([a, b, c]) \u0026gt;\u0026gt;\u0026gt; np.corrcoef(x) # ç›¸é–¢ä¿‚æ•°è¡Œåˆ— \u0026gt;\u0026gt;\u0026gt; # [0, 1]è¦ç´ ï¼šaã¨bã®ç›¸é–¢ä¿‚æ•° \u0026gt;\u0026gt;\u0026gt; # [0, 2]è¦ç´ ï¼šaã¨cã®ç›¸é–¢ä¿‚æ•° \u0026gt;\u0026gt;\u0026gt; # [1, 2]è¦ç´ ï¼šbã¨cã®ç›¸é–¢ä¿‚æ•° array([[ 1. , 0.85454545, -1. ], [ 0.85454545, 1. , -0.85454545], [-1. , -0.85454545, 1. ]]) \u0026gt;\u0026gt;\u0026gt; np.corrcoef(a, b) # 2ã¤ã®1æ¬¡å…ƒé…åˆ—ã‚’å¼•æ•°ã«ã¨ã£ã¦ã‚‚è‰¯ã„ array([[ 1. , 0.85454545], [ 0.85454545, 1. ]]) \u0026gt;\u0026gt;\u0026gt; np.cov(x) # å…±åˆ†æ•£è¡Œåˆ— (ddof=1ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ array([[ 9.16666667, 7.83333333, -9.16666667], [ 7.83333333, 9.16666667, -7.83333333], [-9.16666667, -7.83333333, 9.16666667]])   å‚è€ƒãƒªãƒ³ã‚¯ Statistics â€” NumPy v1.19 Manual\n","description":"NumPyã§åˆ©ç”¨ã§ãã‚‹çµ±è¨ˆã®é–¢æ•°ã«ã¤ã„ã¦ã€‚","id":93,"section":"posts","tags":["Python","NumPy"],"title":"NumPyã§ä½¿ãˆã‚‹çµ±è¨ˆã®é–¢æ•°","uri":"https://helve-blog.com/posts/python/numpy-statistics-function/"},{"content":"ã¯ã˜ã‚ã« NumPyã§åˆ©ç”¨ã§ãã‚‹æ•°å­¦ã®é–¢æ•°ã«ã¤ã„ã¦ã€‚\nmathãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ•°å­¦ã®é–¢æ•°ã¯ã€ä¸€èˆ¬ã«ã‚¹ã‚«ãƒ©ãƒ¼å€¤ã«ã—ã‹é©ç”¨ã§ããªã„ã€‚ä¸€æ–¹ã€NumPyã®æ•°å­¦ã®é–¢æ•°ã¯ã€ã‚¹ã‚«ãƒ©ãƒ¼å€¤ã«åŠ ãˆã€ãƒªã‚¹ãƒˆã‚„numpy.arrayã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚‚é©ç”¨ã§ãã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    ä¸‰è§’é–¢æ•°ãƒ»é€†ä¸‰è§’é–¢æ•° è§’åº¦ã®å˜ä½ã¯ãƒ©ã‚¸ã‚¢ãƒ³ã€‚\n   é–¢æ•° è¨˜æ³• èª¬æ˜     sin np.sin(a)    cos np.cos(a)    tan np.tan(a)    arcsin np.arcsin(a)    arccos np.arccos(a)    arctan np.arctan(a) æˆ»ã‚Šå€¤ã®ç¯„å›²ã¯[-pi/2, pi/2]   arctan2 np.arctan2(a, b) a/bã®arctanã‚’è¿”ã™ã€‚æˆ»ã‚Šå€¤ã®ç¯„å›²ã¯[-pi, pi]    1 2 3 4 5 6 7 8 9 10 11  \u0026gt;\u0026gt;\u0026gt; import numpy as np \u0026gt;\u0026gt;\u0026gt; a = np.array([0, np.pi/6, np.pi/3, np.pi/2]) # np.piã¯å††å‘¨ç‡ \u0026gt;\u0026gt;\u0026gt; b = np.sin(a) \u0026gt;\u0026gt;\u0026gt; b array([ 0. , 0.5 , 0.8660254, 1. ]) \u0026gt;\u0026gt;\u0026gt; np.arcsin(b) array([ 0. , 0.52359878, 1.04719755, 1.57079633]) \u0026gt;\u0026gt;\u0026gt; np.deg2rad([0, 90, 180]) # degã‹ã‚‰radã¸å¤‰æ› array([ 0. , 1.57079633, 3.14159265]) \u0026gt;\u0026gt;\u0026gt; np.rad2deg([0, np.pi/2, np.pi]) # radã‹ã‚‰degã¸å¤‰æ› array([ 0., 90., 180.])   ä¸‰è§’é–¢æ•°ãƒ»é€†ä¸‰è§’é–¢æ•°ã®ã‚°ãƒ©ãƒ•ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\nä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§æç”»ã—ãŸã€‚\n\r\rã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹\r\r1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  import numpy as np import matplotlib.pyplot as plt x1 = np.arange(-2*np.pi, 2*np.pi, 0.01) fig, ax = plt.subplots() ax.plot(x1, np.sin(x1), label=\u0026#34;sin(x)\u0026#34;) ax.plot(x1, np.cos(x1), label=\u0026#34;cos(x)\u0026#34;) ax.plot(x1, np.tan(x1), label=\u0026#34;tan(x)\u0026#34;) ax.set_ylim(-2, 2) ax.set_xlabel(\u0026#34;x\u0026#34;) ax.grid(); ax.legend() plt.show() x2 = np.arange(-1, 1, 0.01) fig, ax = plt.subplots() ax.plot(x2, np.arcsin(x2), label=\u0026#34;arcsin(x)\u0026#34;) ax.plot(x2, np.arccos(x2), label=\u0026#34;arccos(x)\u0026#34;) ax.plot(x2, np.arctan(x2), label=\u0026#34;arctan(x)\u0026#34;) ax.set_ylim(-2, 4) ax.set_xlabel(\u0026#34;x\u0026#34;) ax.grid(); ax.legend() plt.show() a = np.arange(-10, 10, 0.01) b1, b2 = 1, -1 fig, ax = plt.subplots() ax.plot(a, np.arctan2(a, b1), label=\u0026#34;arctan2(a, 1)\u0026#34;) ax.plot(a, np.arctan2(a, b2), label=\u0026#34;arctan2(a, -1)\u0026#34;) ax.set_ylim(-4, 4) ax.set_xlabel(\u0026#34;a\u0026#34;) ax.grid(); ax.legend() plt.show()   \r\r åŒæ›²ç·šé–¢æ•°    é–¢æ•° è¨˜æ³•     sinh np.sinh(a)   cosh np.cosh(a)   tanh np.tanh(a)   arcsinh np.arcsinh(a)   arccosh np.arccosh(a)   arctanh np.arctanh(a)    ç«¯æ•°å‡¦ç†     è¨˜æ³• èª¬æ˜     å››æ¨äº”å…¥ np.around(a, decimals=0) 10^(-decimals)ã®1ã¤ä¸‹ã®ä½ã‚’å››æ¨äº”å…¥   å››æ¨äº”å…¥ np.round_(a, decimals=0) aroundã¨åŒã˜   0æ–¹å‘ã¸ã®ä¸¸ã‚ np.fix(a)    è² æ–¹å‘ã¸ã®ä¸¸ã‚ï¼ˆåˆ‡æ¨ã¦ï¼‰ np.floor(a)    æ­£æ–¹å‘ã¸ã®ä¸¸ã‚ï¼ˆåˆ‡ä¸Šã’ï¼‰ np.ceil(a)    0æ–¹å‘ã¸ã®ä¸¸ã‚ np.trunc(a)     1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026gt;\u0026gt;\u0026gt; np.around(123.456, decimals=0) # 0.1ã®ä½ã‚’å››æ¨äº”å…¥ 123.0 \u0026gt;\u0026gt;\u0026gt; np.around(123.456, decimals=1) # 0.01ã®ä½ã‚’å››æ¨äº”å…¥ 123.5 \u0026gt;\u0026gt;\u0026gt; np.around(123.456, decimals=-2) # 10ã®ä½ã‚’å››æ¨äº”å…¥ 100.0 \u0026gt;\u0026gt;\u0026gt; np.fix([0.7, 3.2, -0.7, -3.2]) # 0æ–¹å‘ã¸ã®ä¸¸ã‚ array([ 0., 3., -0., -3.]) \u0026gt;\u0026gt;\u0026gt; np.floor([0.7, 3.2, -0.7, -3.2]) # è² æ–¹å‘ã¸ã®ä¸¸ã‚ array([ 0., 3., -1., -4.]) \u0026gt;\u0026gt;\u0026gt; np.ceil([0.7, 3.2, -0.7, -3.2]) # æ­£æ–¹å‘ã¸ã®ä¸¸ã‚ array([ 1., 4., -0., -3.]) \u0026gt;\u0026gt;\u0026gt; np.trunc([0.7, 3.2, -0.7, -3.2]) # 0æ–¹å‘ã¸ã®ä¸¸ã‚ array([ 0., 3., -0., -3.])   å’Œãƒ»ç©ãƒ»å·®åˆ† 1ã¤ã®é…åˆ—ã«å«ã¾ã‚Œã‚‹è¦ç´ ã®å’Œãƒ»ç©ãƒ»å·®åˆ†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1, 2], [3, 4]]) \u0026gt;\u0026gt;\u0026gt; np.sum(a) # å…¨è¦ç´ ã®å’Œ 10 \u0026gt;\u0026gt;\u0026gt; np.sum(a, axis=0) # åˆ—æ–¹å‘ã®å’Œ array([4, 6]) \u0026gt;\u0026gt;\u0026gt; np.sum(a, axis=1) # è¡Œæ–¹å‘ã®å’Œ array([3, 7]) \u0026gt;\u0026gt;\u0026gt; np.prod(a) # å…¨è¦ç´ ã®ç© 24 \u0026gt;\u0026gt;\u0026gt; np.prod(a, axis=0) # åˆ—æ–¹å‘ã®ç© array([3, 8]) \u0026gt;\u0026gt;\u0026gt; np.prod(a, axis=1) # è¡Œæ–¹å‘ã®ç© array([ 2, 12]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[1, 2, 4, 8], [3, 5, 9, 7]]) \u0026gt;\u0026gt;\u0026gt; np.diff(b) # æœ€å¤§ã®è»¸æ–¹å‘(axis=1)ã®å·®åˆ† array([[ 1, 2, 4], [ 2, 4, -2]]) \u0026gt;\u0026gt;\u0026gt; np.diff(b, axis=0) # åˆ—æ–¹å‘ã®å·®åˆ† array([[ 2, 3, 5, -1]]) \u0026gt;\u0026gt;\u0026gt; np.diff(b, n=2) # n: å·®åˆ†ã‚’ã¨ã‚‹å›æ•°( =np.diff(np.diff(b)) ) array([[ 1, 2], [ 2, -6]])   æŒ‡æ•°é–¢æ•°ãƒ»å¯¾æ•°é–¢æ•° 1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; np.exp([0, 1]) # æŒ‡æ•°é–¢æ•° array([ 1. , 2.71828183]) \u0026gt;\u0026gt;\u0026gt; np.log([1, np.e]) # è‡ªç„¶å¯¾æ•° array([ 0., 1.]) \u0026gt;\u0026gt;\u0026gt; np.log10([1, 10, 100]) # å¸¸ç”¨å¯¾æ•° array([ 0., 1., 2.])   ãã®ä»– 1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026gt;\u0026gt;\u0026gt; np.sqrt([1, 4, 9]) # å¹³æ–¹æ ¹ array([ 1., 2., 3.]) \u0026gt;\u0026gt;\u0026gt; np.cbrt([1, 8, 27]) # ç«‹æ–¹æ ¹ï¼ˆä¸‰ä¹—æ ¹ï¼‰ array([ 1., 2., 3.]) \u0026gt;\u0026gt;\u0026gt; np.square([1, 2, 3]) # äºŒä¹— array([1, 4, 9], dtype=int32) \u0026gt;\u0026gt;\u0026gt; np.absolute([-3, -1, 1, 3]) # çµ¶å¯¾å€¤ array([3, 1, 1, 3]) \u0026gt;\u0026gt;\u0026gt; np.sign([-3, -1, 1, 3]) # ç¬¦å· array([-1, -1, 1, 1]) \u0026gt;\u0026gt;\u0026gt; np.maximum([-3, -1, 1, 3], [4, 2, -2, -4]) # å„è¦ç´ ã®æœ€å¤§å€¤ array([4, 2, 1, 3]) \u0026gt;\u0026gt;\u0026gt; np.minimum([-3, -1, 1, 3], [4, 2, -2, -4]) # å„è¦ç´ ã®æœ€å°å€¤ array([-3, -1, -2, -4])   1ã¤ã®é…åˆ—ã®æœ€å¤§å€¤ãƒ»æœ€å°å€¤ã‚’æ±‚ã‚ã‚‹å ´åˆã¯ã€np.max, np.miné–¢æ•°ã‚’ä½¿ã†ã€‚\nå‚è€ƒãƒªãƒ³ã‚¯ Mathematical functions â€” NumPy v1.19 Manual\n","description":"NumPyã§åˆ©ç”¨ã§ãã‚‹æ•°å­¦ã®é–¢æ•°ã«ã¤ã„ã¦ã€‚","id":94,"section":"posts","tags":["Python","NumPy"],"title":"NumPyã§ä½¿ãˆã‚‹æ•°å­¦ã®é–¢æ•°","uri":"https://helve-blog.com/posts/python/numpy-math-function/"},{"content":"ã¯ã˜ã‚ã« NumPyé…åˆ—ã®å››å‰‡æ¼”ç®—ã¨ç·šå½¢ä»£æ•°å­¦ã®æ¼”ç®—ã«ã¤ã„ã¦ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    åŸºæœ¬çš„ãªå››å‰‡æ¼”ç®— NumPyé…åˆ—åŒå£«ã®å››å‰‡æ¼”ç®—ã¯ã€Pythonã«ãŠã‘ã‚‹é€šå¸¸ã®å››å‰‡æ¼”ç®—ã¨åŒæ§˜ã«è¡Œãˆã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  \u0026gt;\u0026gt;\u0026gt; import numpy as np \u0026gt;\u0026gt;\u0026gt; a = np.array([[1,2],[3,4]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[5,6],[7,8]]) \u0026gt;\u0026gt;\u0026gt; a+b # è¶³ã—ç®— array([[ 6, 8], [10, 12]]) \u0026gt;\u0026gt;\u0026gt; b-a # å¼•ãç®— array([[4, 4], [4, 4]]) \u0026gt;\u0026gt;\u0026gt; a*b # è¦ç´ ã”ã¨ã®æ›ã‘ç®— array([[ 5, 12], [21, 32]]) \u0026gt;\u0026gt;\u0026gt; b/a # è¦ç´ ã”ã¨ã®å‰²ã‚Šç®— array([[ 5. , 3. ], [ 2.33333333, 2. ]]) \u0026gt;\u0026gt;\u0026gt; b%a # è¦ç´ ã”ã¨ã®å‰°ä½™ array([[0, 0], [1, 0]], dtype=int32) \u0026gt;\u0026gt;\u0026gt; a**2 # è¦ç´ ã”ã¨ã®ç´¯ä¹— array([[ 1, 4], [ 9, 16]], dtype=int32)   ç·šå½¢ä»£æ•°å­¦ã®æ¼”ç®— ç°¡å˜ãªå†…ç©ã‚„å¤–ç©ã®è¨ˆç®—ãªã‚‰ã°ã€ NumPyãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã§è¨ˆç®—ã§ãã‚‹ãŒã€ ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒãƒ«ãƒ ã‚„é€£ç«‹æ–¹ç¨‹å¼ã®è§£ã‚’æ±‚ã‚ã‚‹å ´åˆã¯ã€ ç·šå½¢ä»£æ•°å­¦(Linear algebra)ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªlinalgã‚’ä½¿ã†ã€‚\nã“ã®è¨˜äº‹ã§ã¯linalgã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã€‚\n1  \u0026gt;\u0026gt;\u0026gt; from numpy import linalg as LA   å†…ç©ãƒ»å¤–ç© 2ã¤ã®è¡Œåˆ—åŒå£«ã®å†…ç©ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã€2ã¤ã®æ–¹æ³•ãŒã‚ã‚‹ã€‚ 1ã¤ç›®ã¯é…åˆ—ã®dot()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹æ–¹æ³•ã€ 2ã¤ç›®ã¯NumPyã®np.dot()é–¢æ•°ã¨ã—ã¦ä½¿ã†æ–¹æ³•ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1,2],[3,4]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[5,6],[7,8]]) \u0026gt;\u0026gt;\u0026gt; c = np.array([9, 10]) \u0026gt;\u0026gt;\u0026gt; a.dot(b) # è¡Œåˆ—ã®å†…ç©(ãã®1) array([[19, 22], [43, 50]]) \u0026gt;\u0026gt;\u0026gt; np.dot(a, b) # è¡Œåˆ—ã®å†…ç©(ãã®2) array([[19, 22], [43, 50]])   3ã¤ä»¥ä¸Šã®è¡Œåˆ—åŒå£«ã®å†…ç©ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã€LA.multi_dot()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚ ã¾ãŸã€1ã¤ã®è¡Œåˆ—ã®å†…ç©ã‚’ä½•åº¦ã‚‚ã¨ã‚‹å ´åˆã¯ã€LA.matrix_power()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; LA.multi_dot([a,b,c]) # è¤‡æ•°ã®é…åˆ—ã®å†…ç© array([391, 887]) \u0026gt;\u0026gt;\u0026gt; LA.matrix_power(a, 3) # è¡Œåˆ—ã®å†…ç©ã®éšä¹—(=LA.multi_dot([a,a,a])) array([[ 37, 54], [ 81, 118]])   2ã¤ã®è¡Œåˆ—åŒå£«ã®å¤–ç©ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã€np.cross()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚ã€€1 2 3 4  \u0026gt;\u0026gt;\u0026gt; d = np.array([1, 2, 3]) \u0026gt;\u0026gt;\u0026gt; e = np.array([4, 5, 6]) \u0026gt;\u0026gt;\u0026gt; np.cross(d, e) # ãƒ™ã‚¯ãƒˆãƒ«ã®å¤–ç© array([-3, 6, -3])   ãƒãƒ«ãƒ ãƒ»ãƒ©ãƒ³ã‚¯ãƒ»è¡Œåˆ—å¼ ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒãƒ«ãƒ ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã€LA.norm()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚ ã¾ãŸã€è¡Œåˆ—ã®ãƒ©ãƒ³ã‚¯ï¼ˆéšæ•°ï¼‰ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã¯LA.matrix_rank()é–¢æ•°ã€ è¡Œåˆ—å¼ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã¯LA.det()é–¢æ•°ã‚’ãã‚Œãã‚Œç”¨ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1,2],[3,4]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([1,2,3]) \u0026gt;\u0026gt;\u0026gt; LA.norm(b) # ãƒ™ã‚¯ãƒˆãƒ«ã®ãƒãƒ«ãƒ  3.7416573867739413 \u0026gt;\u0026gt;\u0026gt; LA.matrix_rank(a) # è¡Œåˆ—ã®ãƒ©ãƒ³ã‚¯ï¼ˆéšæ•°ï¼‰ 2 \u0026gt;\u0026gt;\u0026gt; LA.det(a) # è¡Œåˆ—å¼ (1*4-2*3) -2.0000000000000004   è»¢ç½® è¡Œåˆ—ã®è»¢ç½®ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã€å…ƒã®è¡Œåˆ—ã®transepose()ãƒ¡ã‚½ãƒƒãƒ‰ã¾ãŸã¯ã€ Tãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3 4 5 6 7  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1,2],[3,4]]) \u0026gt;\u0026gt;\u0026gt; a.transpose() # è¡Œåˆ—ã®è»¢ç½®ï¼ˆãã®1ï¼‰ array([[1, 3], [2, 4]]) \u0026gt;\u0026gt;\u0026gt; a.T # è¡Œåˆ—ã®è»¢ç½®ï¼ˆãã®2ï¼‰ array([[1, 3], [2, 4]])   é€†è¡Œåˆ— è¡Œåˆ—ã‚’è¨ˆç®—ã™ã‚‹å ´åˆã€LA.inv()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3 4  \u0026gt;\u0026gt;\u0026gt; b = np.array([[1,2],[3,4]]) \u0026gt;\u0026gt;\u0026gt; LA.inv(b) # é€†è¡Œåˆ— array([[-2. , 1. ], [ 1.5, -0.5]])   é€£ç«‹æ–¹ç¨‹å¼ã®è§£ é…åˆ—ã§å®šç¾©ã•ã‚ŒãŸé€£ç«‹æ–¹ç¨‹å¼ã‚’è§£ãå ´åˆã€LA.solve()é–¢æ•°ã‚’ç”¨ã„ã‚‹ã€‚\n1 2 3 4 5 6 7  \u0026gt;\u0026gt;\u0026gt; # æ¬¡ã®é€£ç«‹æ–¹ç¨‹å¼ã‚’è§£ã \u0026gt;\u0026gt;\u0026gt; # 3x + y = 9 \u0026gt;\u0026gt;\u0026gt; # x + 2y = 8 \u0026gt;\u0026gt;\u0026gt; a = np.array([[3,1], [1,2]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([9,8]) \u0026gt;\u0026gt;\u0026gt; LA.solve(a, b) array([ 2., 3.])   å›ºæœ‰å€¤ãƒ»å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ« 1 2 3 4 5 6 7  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1,2],[3,4]]) \u0026gt;\u0026gt;\u0026gt; w, v=LA.eig(a) # w: è¡Œåˆ—ã®å›ºæœ‰å€¤ã€v: å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆæ­£è¦åŒ–æ¸ˆã¿ï¼‰ \u0026gt;\u0026gt;\u0026gt; w array([-0.37228132, 5.37228132]) \u0026gt;\u0026gt;\u0026gt; v # å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«v[i]ã¯ã€å›ºæœ‰å€¤w[i]ã«å¯¾å¿œã™ã‚‹ array([[-0.82456484, -0.41597356], [ 0.56576746, -0.90937671]])   ç‰¹ç•°å€¤åˆ†è§£ 1 2 3 4 5 6 7 8 9 10 11  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1, 2, 3], [4, 5, 6]]) # m x nè¡Œåˆ—ã®ã¨ã \u0026gt;\u0026gt;\u0026gt; U, s, V = np.linalg.svd(a) # ç‰¹ç•°å€¤åˆ†è§£ \u0026gt;\u0026gt;\u0026gt; U # U: m x mã®ç›´è¡Œè¡Œåˆ— array([[-0.3863177 , -0.92236578], [-0.92236578, 0.3863177 ]]) \u0026gt;\u0026gt;\u0026gt; s # s: ç‰¹ç•°å€¤ array([ 9.508032 , 0.77286964]) \u0026gt;\u0026gt;\u0026gt; V # V: n x nã®ç›´è¡Œè¡Œåˆ— array([[-0.42866713, -0.56630692, -0.7039467 ], [ 0.80596391, 0.11238241, -0.58119908], [ 0.40824829, -0.81649658, 0.40824829]])   å‚è€ƒãƒªãƒ³ã‚¯ Linear algebra (numpy.linalg) â€” NumPy v1.19 Manual\n","description":"NumPyé…åˆ—ã®å››å‰‡æ¼”ç®—ã¨ç·šå½¢ä»£æ•°å­¦ã®æ¼”ç®—ã«ã¤ã„ã¦ã€‚","id":95,"section":"posts","tags":["Python","NumPy"],"title":"NumPyé…åˆ—ã®æ¼”ç®—","uri":"https://helve-blog.com/posts/python/numpy-array-calculation/"},{"content":"ã¯ã˜ã‚ã« NumPyé…åˆ—ã®ã‚³ãƒ”ãƒ¼ã‚„æ¬¡å…ƒã®çµåˆã€çµåˆãƒ»åˆ†å‰²ã€ã‚½ãƒ¼ãƒˆã«ã¤ã„ã¦ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    é…åˆ—ã®ã‚³ãƒ”ãƒ¼ =ã§ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ã€ã‚³ãƒ”ãƒ¼å…ƒã¨ã‚³ãƒ”ãƒ¼å…ˆã§åŒã˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å‚ç…§ã™ã‚‹ãŸã‚ã€\nã©ã¡ã‚‰ã‹ã‚’æ“ä½œã™ã‚‹ã¨ã‚‚ã†ç‰‡æ–¹ã‚‚å¤‰æ›´ã•ã‚Œã‚‹ (Shallow copy)ã€‚\nä¸€æ–¹ã€copyãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ã€ã‚³ãƒ”ãƒ¼å…ˆã§æ–°ãŸã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã€\nã©ã¡ã‚‰ã‹ã‚’æ“ä½œã—ã¦ã‚‚ã€ã‚‚ã†ç‰‡æ–¹ã«ã¯åæ˜ ã•ã‚Œãªã„ (Deep copy)ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026gt;\u0026gt;\u0026gt; import numpy as np \u0026gt;\u0026gt;\u0026gt; a = np.array([1,2,3]) \u0026gt;\u0026gt;\u0026gt; b=a # Shallow copy \u0026gt;\u0026gt;\u0026gt; b[0]=4 \u0026gt;\u0026gt;\u0026gt; b array([4, 2, 3]) \u0026gt;\u0026gt;\u0026gt; a array([4, 2, 3]) # aã‚‚å¤‰æ›´ã•ã‚Œã‚‹ \u0026gt;\u0026gt;\u0026gt; c=a.copy() # Deep copy \u0026gt;\u0026gt;\u0026gt; c[0]=5 \u0026gt;\u0026gt;\u0026gt; c array([5, 2, 3]) \u0026gt;\u0026gt;\u0026gt; a array([4, 2, 3]) # aã¯å¤‰æ›´ã•ã‚Œãªã„   ã‚µã‚¤ã‚ºãƒ»æ¬¡å…ƒã®å¤‰æ›´ reshapeã‚’ä½¿ã†ã¨ã€æŒ‡å®šã—ãŸã‚µã‚¤ã‚ºã«å¤‰å½¢ã•ã‚ŒãŸé…åˆ—ãŒè¿”ã•ã‚Œã‚‹ã€‚ ãŸã ã—ã€å…ƒã®é…åˆ—ã®ã‚µã‚¤ã‚ºã¯å¤‰æ›´ã•ã‚Œãªã„ã€‚ è¡Œæ•°ã¾ãŸã¯åˆ—æ•°ã®ç‰‡æ–¹ã®ã¿ã‚’æŒ‡å®šã™ã‚‹ã¨ãã¯ã€ æŒ‡å®šã—ãªã„æ¬¡å…ƒã®è¦ç´ æ•°ã‚’-1ã¨ã™ã‚‹ã¨ã€è‡ªå‹•ã§å¤‰å½¢ã—ã¦ãã‚Œã‚‹ã€‚\nã¾ãŸã€flattenã‚’ä½¿ã†ã¨ã€2æ¬¡å…ƒé…åˆ—ã‚’1æ¬¡å…ƒé…åˆ—ã«å¤‰æ›ã§ãã‚‹ã€‚ ã“ã¡ã‚‰ã‚‚å…ƒã®é…åˆ—ã®ã‚µã‚¤ã‚ºã¯å¤‰æ›´ã•ã‚Œãªã„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  \u0026gt;\u0026gt;\u0026gt; a = np.array([[1,2,3], ... [4,5,6]]) # 2x3è¡Œåˆ— \u0026gt;\u0026gt;\u0026gt; a.reshape([3,2]) # 3x2è¡Œåˆ—ã«å¤‰å½¢ã€‚ãƒ“ãƒ¥ãƒ¼ã‚’è¿”ã™ã€‚ array([[1, 2], [3, 4], [5, 6]]) \u0026gt;\u0026gt;\u0026gt; a.reshape([3,-1]) # ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã—ãªã„æ¬¡å…ƒã‚’-1ã¨ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«å¤‰å½¢ã—ã¦ãã‚Œã‚‹ array([[1, 2], [3, 4], [5, 6]]) \u0026gt;\u0026gt;\u0026gt; a.flatten() # 1æ¬¡å…ƒé…åˆ—ã‚’ä½œæˆ array([1, 2, 3, 4, 5, 6])   1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; a.flatten() # 1æ¬¡å…ƒé…åˆ—ã«å¤‰æ› array([1, 2, 3, 4, 5, 6]) \u0026gt;\u0026gt;\u0026gt; a # aã®ã‚µã‚¤ã‚ºã¯å¤‰ã‚ã‚‰ãªã„ array([[1, 2, 3], [4, 5, 6]])   çµåˆ 2ã¤ã®NumPyé…åˆ—ã‚’1ã¤ã®NumPyé…åˆ—ã«çµåˆã™ã‚‹ã€‚\n   é–¢æ•° è¨˜æ³• èª¬æ˜     vstack np.vstack([a,b]) ç¸¦(0è»¸)æ–¹å‘ã«çµåˆ   hstack np.hstack([a,b]) æ¨ª(1è»¸)æ–¹å‘ã«çµåˆ   dstack np.dstack([a,b]) æ·±ã•(2è»¸)æ–¹å‘ã«çµåˆ   concatenate np.concatenate([a,b], axis=0) æŒ‡å®šã—ãŸè»¸æ–¹å‘ã«çµåˆ    1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  \u0026gt;\u0026gt;\u0026gt; a = np.array([[0,1], ... [2,3]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[4,5], ... [6,7]]) \u0026gt;\u0026gt;\u0026gt; np.hstack([a,b]) array([[0, 1, 4, 5], [2, 3, 6, 7]]) \u0026gt;\u0026gt;\u0026gt; np.vstack([a,b]) array([[0, 1], [2, 3], [4, 5], [6, 7]]) \u0026gt;\u0026gt;\u0026gt; np.concatenate([a,b],axis=0) array([[0, 1], [2, 3], [4, 5], [6, 7]]) \u0026gt;\u0026gt;\u0026gt; np.concatenate([a,b],axis=1) array([[0, 1, 4, 5], [2, 3, 6, 7]])   åˆ†å‰² NumPyé…åˆ—ã‚’åˆ†å‰²ã™ã‚‹ã€‚åˆ†å‰²ã•ã‚ŒãŸé…åˆ—ã¯ãƒªã‚¹ãƒˆå½¢å¼ã§è¿”ã•ã‚Œã‚‹ã€‚\n   é–¢æ•° è¨˜æ³• èª¬æ˜     vsplit np.vsplit(a,n) ç¸¦(0è»¸)æ–¹å‘ã«çµåˆãƒ»åˆ†å‰²   hsplit np.hsplit(a,n) æ¨ª(1è»¸)æ–¹å‘ã«çµåˆãƒ»åˆ†å‰²   dsplit np.dsplit(a,n) æ·±ã•(2è»¸)æ–¹å‘ã«çµåˆãƒ»åˆ†å‰²   split np.split(a, axis=0) æŒ‡å®šã—ãŸè»¸æ–¹å‘ã«çµåˆãƒ»åˆ†å‰²    nã¯ã€æ•´æ•°ã¾ãŸã¯ãƒªã‚¹ãƒˆã§ã‚ã‚‹ã€‚ nãŒæ•´æ•°ã®å ´åˆã€é…åˆ—ã¯nå€‹ã«å‡ç­‰åˆ†å‰²ã•ã‚Œã‚‹ã€‚ ãã®ãŸã‚ã€nã¯åˆ†å‰²ã—ãŸã„è»¸æ–¹å‘ã®é…åˆ—ã®è¦ç´ æ•°ã®ç´„æ•°ã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  \u0026gt;\u0026gt;\u0026gt; a=np.arange(16.0).reshape(4, 4) \u0026gt;\u0026gt;\u0026gt; a array([[ 0., 1., 2., 3.], [ 4., 5., 6., 7.], [ 8., 9., 10., 11.], [ 12., 13., 14., 15.]]) \u0026gt;\u0026gt;\u0026gt; np.vsplit(a,2) # 2ã¤ã«å‡ç­‰åˆ†å‰² [array([[ 0., 1., 2., 3.], [ 4., 5., 6., 7.]]), array([[ 8., 9., 10., 11.], [ 12., 13., 14., 15.]])] \u0026gt;\u0026gt;\u0026gt; np.vsplit(a,4) # 4ã¤ã«å‡ç­‰åˆ†å‰² [array([[ 0., 1., 2., 3.]]), array([[ 4., 5., 6., 7.]]), array([[ 8., 9., 10., 11.]]), array([[ 12., 13., 14., 15.]])]   ã¾ãŸã€nã‚’ãƒªã‚¹ãƒˆã«ã™ã‚‹ã“ã¨ã§ã€åˆ†å‰²ã™ã‚‹ä½ç½®ã‚’æŒ‡å®šã§ãã‚‹ã€‚ ãƒªã‚¹ãƒˆã¯æ˜‡é †ã«ã‚½ãƒ¼ãƒˆã•ã‚ŒãŸæ•´æ•°ã‹ã‚‰ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; np.vsplit(a,[3]) # 3è¡Œç›®ã§åˆ†å‰² [array([[ 0., 1., 2., 3.], [ 4., 5., 6., 7.], [ 8., 9., 10., 11.]]), array([[ 12., 13., 14., 15.]])] \u0026gt;\u0026gt;\u0026gt; np.vsplit(a,[1,2]) # 1, 2è¡Œç›®ã§åˆ†å‰² [array([[ 0., 1., 2., 3.]]), array([[ 4., 5., 6., 7.]]), array([[ 8., 9., 10., 11.], [ 12., 13., 14., 15.]])]   ã‚½ãƒ¼ãƒˆ é…åˆ—ã‚’ã‚½ãƒ¼ãƒˆã™ã‚‹ã«ã¯ã€sorté–¢æ•°ã‚’ä½¿ã†ã€‚ ãŸã ã—ã€æ˜‡é †ã®ã‚½ãƒ¼ãƒˆã—ã‹ã§ããªã„ãŸã‚ã€é™é †ã«ã‚½ãƒ¼ãƒˆã—ãŸçµæœãŒæ¬²ã—ã„å ´åˆã¯ã‚¹ãƒ©ã‚¤ã‚¹ãªã©ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚‹ã€‚\n1æ¬¡å…ƒé…åˆ—ã®å ´åˆã€‚\n1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; a = np.array([1,3,5,2,4]) # 1æ¬¡å…ƒé…åˆ—ã®å ´åˆ \u0026gt;\u0026gt;\u0026gt; np.sort(a) # æ˜‡é †ã«ã‚½ãƒ¼ãƒˆ array([1, 2, 3, 4, 5]) \u0026gt;\u0026gt;\u0026gt; np.sort(a)[::-1] # é™é †ã«ã‚½ãƒ¼ãƒˆã™ã‚‹å ´åˆã¯ã€ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ä½¿ã† array([5, 4, 3, 2, 1])   2æ¬¡å…ƒé…åˆ—ã®å ´åˆã€‚ å¿…è¦ã«å¿œã˜ã¦ã‚½ãƒ¼ãƒˆã™ã‚‹æ¬¡å…ƒã‚’æŒ‡å®šã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; b=np.array([[1,3,5], # 2æ¬¡å…ƒé…åˆ—ã®å ´åˆ [6,4,2]]) \u0026gt;\u0026gt;\u0026gt; np.sort(b) # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯æœ€å¤§æ¬¡å…ƒã®è»¸ã«æ²¿ã£ã¦ã‚½ãƒ¼ãƒˆ array([[1, 3, 5], [2, 4, 6]]) \u0026gt;\u0026gt;\u0026gt; np.sort(b, axis=0) # axisã§ã‚½ãƒ¼ãƒˆã™ã‚‹è»¸ã‚’æŒ‡å®š array([[1, 3, 2], [6, 4, 5]]) \u0026gt;\u0026gt;\u0026gt; np.sort(b, axis=None) # axis=Noneã§1æ¬¡å…ƒé…åˆ—ã«ã—ã¦è¿”ã™ array([1, 2, 3, 4, 5, 6])   å‚è€ƒãƒªãƒ³ã‚¯ Array manipulation routines â€” NumPy v1.19 Manual\nQuickstart tutorial â€” NumPy v1.19 Manual\n","description":"NumPyé…åˆ—ã®ã‚³ãƒ”ãƒ¼ã‚„æ¬¡å…ƒã®çµåˆã€çµåˆãƒ»åˆ†å‰²ã€ã‚½ãƒ¼ãƒˆã«ã¤ã„ã¦ã€‚","id":96,"section":"posts","tags":["Python","NumPy"],"title":"NumPyé…åˆ—ã®æ“ä½œ","uri":"https://helve-blog.com/posts/python/numpy-array-manipulation/"},{"content":"ã¯ã˜ã‚ã« ä½œæˆã—ãŸNumPyé…åˆ—ã®è¦ç´ ãªã©ã‚’ç¢ºèªã™ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    é…åˆ—ã®å±æ€§ ä½œæˆã—ãŸé…åˆ—ã®æ¬¡å…ƒæ•°ã‚’ç¢ºèªã™ã‚‹å ´åˆã€ ndimå±æ€§ã‚’å‚ç…§ã™ã‚‹ã€‚\nã¾ãŸã€é…åˆ—ã®è¦ç´ æ•°ã‚’ç¢ºèªã™ã‚‹å ´åˆã€ sizeå±æ€§ã‚’å‚ç…§ã™ã‚‹ã€‚\né…åˆ—ã®å„æ¬¡å…ƒã®è¦ç´ æ•°ã‚’ç¢ºèªã™ã‚‹å ´åˆã€ shapeå±æ€§ã‚’å‚ç…§ã™ã‚‹ã¨ã€ã‚¿ãƒ—ãƒ«å½¢å¼ã§è¦ç´ æ•°ãŒè¿”ã•ã‚Œã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8  \u0026gt;\u0026gt;\u0026gt; import numpy as np \u0026gt;\u0026gt;\u0026gt; a = np.array([[1,2,3],[4,5,6]]) # 2x3è¡Œåˆ— \u0026gt;\u0026gt;\u0026gt; a.ndim # æ¬¡å…ƒ 2 \u0026gt;\u0026gt;\u0026gt; a.size # è¦ç´ æ•° 6 \u0026gt;\u0026gt;\u0026gt; a.shape # å„æ¬¡å…ƒã®è¦ç´ æ•° (2, 3)   è¦ç´ ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ 1æ¬¡å…ƒé…åˆ—ã®å ´åˆ 1æ¬¡å…ƒé…åˆ—ã®è¦ç´ ã‚’å–ã‚Šå‡ºã™å ´åˆã€ é…åˆ—ã®å¾Œã‚ã«[]ã‚’ä»˜ã‘ã€å–ã‚Šå‡ºã—ãŸã„è¦ç´ ã®é †ç•ªã‚’æ•°å€¤ã§æŒ‡å®šã™ã‚‹ã€‚\nè¦ç´ ã‚’1å€‹ã ã‘å–ã‚Šå‡ºã™ã¨ãã¯ã€[]å†…ã«æ•°å€¤ã‚’1å€‹æŒ‡å®šã™ã‚‹ã€‚ ãŸã ã—ã€é…åˆ—ã®æœ€åˆã®è¦ç´ ã¯0ã‹ã‚‰å§‹ã¾ã‚‹ã“ã¨ã«æ³¨æ„ã€‚\n1 2 3  \u0026gt;\u0026gt;\u0026gt; b = np.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]) \u0026gt;\u0026gt;\u0026gt; b[1] # 1ç•ªç›® 1   é€£ç¶šã—ãŸè¤‡æ•°ã®è¦ç´ ã‚’å–ã‚Šå‡ºã™ã¨ãã¯ã€2ã¤ã®æ•°å­—ã‚’:ï¼ˆã‚³ãƒ­ãƒ³ï¼‰ã§ã¤ãªãã¨ã€ æœ€åˆã®æ•°å­—ã§æŒ‡å®šã—ãŸè¦ç´ ã‹ã‚‰ã€2ç•ªã‚ã®æ•°å­—ã§æŒ‡å®šã—ãŸ1ã¤æ‰‹å‰ã®è¦ç´ ã¾ã§ãŒè¿”ã•ã‚Œã‚‹ã€‚\n2ç•ªç›®ã®æ•°å­—ã‚’æŒ‡å®šã—ãªã„å ´åˆã€æœ€åˆã®æ•°å­—ã§æŒ‡å®šã—ãŸè¦ç´ ã‹ã‚‰ã€æœ€å¾Œã®è¦ç´ ã¾ã§ãŒè¿”ã•ã‚Œã‚‹ã€‚ ã¾ãŸã€1ç•ªç›®ã®æ•°å­—ã‚’æŒ‡å®šã—ãªã„å ´åˆã€æœ€åˆã®è¦ç´ ã‹ã‚‰ã€2ç•ªç›®ã®æ•°å­—ã§æŒ‡å®šã—ãŸè¦ç´ ã¾ã§ãŒè¿”ã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; b[1:7] # 1ç•ªç›®ã‹ã‚‰7ç•ªç›®ã¾ã§ array([1, 2, 3, 4, 5, 6]) \u0026gt;\u0026gt;\u0026gt; b[3:] # 3ç•ªç›®ä»¥é™ array([3, 4, 5, 6, 7, 8, 9]) \u0026gt;\u0026gt;\u0026gt; b[:3] # 3ç•ªç›®ã¾ã§ array([0, 1, 2])   è¤‡æ•°ã®è¦ç´ ã‚’ä¸€å®šã®é–“éš”ï¼ˆ2ã¤é£›ã°ã—ãªã©ï¼‰ã§æŠœãå‡ºã™ã¨ãã¯ã€ 3ã¤ã®æ•°å­—ã‚’:ã§ã¤ãªãã€‚1ç•ªã‚ã®æ•°å­—ã¯å§‹ã¾ã‚Šã®è¦ç´ ã€ 2ç•ªç›®ã®æ•°å­—ã¯çµ‚ã‚ã‚Šã®è¦ç´ ã€3ç•ªç›®ã®æ•°å­—ã¯è¦ç´ ã‚’ã„ãã¤é£›ã°ã™ã‹ã‚’è¡¨ã™ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; b[1:7:2] # 1ç•ªç›®ã‹ã‚‰7ç•ªç›®ã¾ã§2ã¤é£›ã°ã—ã§ array([1, 3, 5])   é…åˆ—ã®æœ«å°¾ã‚’èµ·ç‚¹ã¨ã—ã¦è¦ç´ ã®ä½ç½®ã‚’æŒ‡å®šã™ã‚‹å ´åˆã€æ•°å€¤ã«ãƒã‚¤ãƒŠã‚¹ã‚’ä»˜ã‘ã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; b[-2] # æœ«å°¾ã‹ã‚‰2ç•ªç›® 8   é…åˆ—ã®è¤‡æ•°ã®è¦ç´ ã‚’å…¨ã¦æŒ‡å®šã—ã¦å–ã‚Šå‡ºã™å ´åˆã«ã¯ã€ ãƒªã‚¹ãƒˆã§è¦ç´ ã®ä½ç½®ã‚’æŒ‡å®šã™ã‚‹ã€‚\n1 2  \u0026gt;\u0026gt;\u0026gt; b[[0,5,7]] # ãƒªã‚¹ãƒˆã§è¤‡æ•°ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ‡å®š array([0, 5, 7])   2æ¬¡å…ƒé…åˆ—ã®å ´åˆ 2æ¬¡å…ƒé…åˆ—ã®å ´åˆã€è¡Œã®è¦ç´ ã¨ã€åˆ—ã®è¦ç´ ã‚’ã‚«ãƒ³ãƒ,ã§åŒºåˆ‡ã£ã¦æŒ‡å®šã™ã‚‹ã€‚ ã‚«ãƒ³ãƒã‚’ä½¿ã‚ãªã„å ´åˆã€ã©ã®è¡Œã‚’å–ã‚Šå‡ºã™ã‹ãŒæŒ‡å®šã•ã‚Œã€åˆ—æ–¹å‘ã®è¦ç´ ã¯å…¨ã¦è¿”ã•ã‚Œã‚‹ã€‚\nå„è¡Œãƒ»å„åˆ—ã®è¦ç´ ã®æŒ‡å®šæ–¹æ³•ã¯ã€1æ¬¡å…ƒé…åˆ—ã®å ´åˆã¨åŒã˜ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  \u0026gt;\u0026gt;\u0026gt; c = np.array([[1,2,3,4],[5,6,7,8],[9,10,11,12]]) \u0026gt;\u0026gt;\u0026gt; c array([[ 1, 2, 3, 4], [ 5, 6, 7, 8], [ 9, 10, 11, 12]]) \u0026gt;\u0026gt;\u0026gt; c[1,1] # (1, 1)è¦ç´  6 \u0026gt;\u0026gt;\u0026gt; c[0:2] # 0ï½1è¡Œç›® array([[1, 2, 3, 4], [5, 6, 7, 8]]) \u0026gt;\u0026gt;\u0026gt; c[:, 0:3] # 0ï½2åˆ—ç›® array([[ 1, 2, 3], [ 5, 6, 7], [ 9, 10, 11]]) \u0026gt;\u0026gt;\u0026gt; c[0:2,1:3] # 0ï½1è¡Œç›®ã‹ã¤1ï½2åˆ—ç›® array([[2, 3], [6, 7]])   å‚è€ƒãƒªãƒ³ã‚¯ The N-dimensional array (ndarray) â€” NumPy v1.19 Manual\nIndexing â€” NumPy v1.19 Manual\n","description":"ä½œæˆã—ãŸNumPyé…åˆ—ã®è¦ç´ ãªã©ã‚’ç¢ºèªã™ã‚‹ã€‚","id":97,"section":"posts","tags":["Python","NumPy"],"title":"NumPyé…åˆ—ã®ç¢ºèª","uri":"https://helve-blog.com/posts/python/numpy-array-check/"},{"content":"ã¯ã˜ã‚ã« NumPyã‚’ä½¿ã£ã¦åŸºæœ¬çš„ãªé…åˆ—ã‚„ç·šå½¢ä»£æ•°å­¦ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹ã€‚\nç’°å¢ƒ    ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ãƒãƒ¼ã‚¸ãƒ§ãƒ³     NumPy 1.19    åŸºæœ¬çš„ãªé…åˆ—ã®ä½œæˆ NumPyã¯ã€ãƒ™ã‚¯ãƒˆãƒ«ã‚„è¡Œåˆ—ã®è¨ˆç®—ã‚’åŠ¹ç‡è‰¯ãè¡Œã†ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚ã‚‹ã€‚\nåˆã‚ã«ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦NumPyã‚’å–ã‚Šè¾¼ã‚€ã€‚\nasä»¥ä¸‹ã« npã¨å…¥åŠ›ã™ã‚‹ã¨ã€NumPyã‚’npã¨çŸ­ç¸®ã—ã¦å‘¼ã³å‡ºã›ã‚‹ã€‚\n1  \u0026gt;\u0026gt;\u0026gt; import numpy as np   é…åˆ—ã®ä¸­èº«ã‚’è‡ªåˆ†ã§æŒ‡å®šã—ã¦ä½œæˆã™ã‚‹å ´åˆã€ np.array()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\nnp.array()ã¯ã€å¼•æ•°ã«Pythonã®ãƒªã‚¹ãƒˆã‚’ã¨ã‚‹ã€‚\nãƒªã‚¹ãƒˆã‚’é‡ã­ã‚‹ï¼ˆãƒã‚¹ãƒˆã™ã‚‹ï¼‰ã“ã¨ã§ã€2æ¬¡å…ƒã‚„3æ¬¡å…ƒã®é…åˆ—ã‚’ä½œæˆã§ãã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026gt;\u0026gt;\u0026gt; a = np.array([1,2,3]) # 1æ¬¡å…ƒé…åˆ— \u0026gt;\u0026gt;\u0026gt; a array([1, 2, 3]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[1,2,3],[4,5,6]]) # 2æ¬¡å…ƒé…åˆ— \u0026gt;\u0026gt;\u0026gt; b array([[1, 2, 3], [4, 5, 6]]) \u0026gt;\u0026gt;\u0026gt; c = np.array([[[1,2],[3,4]],[[5,6],[7,8]]]) # 3æ¬¡å…ƒé…åˆ— \u0026gt;\u0026gt;\u0026gt; c array([[[1, 2], [3, 4]], [[5, 6], [7, 8]]])   ç·šå½¢ä»£æ•°å­¦ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹é…åˆ—ã®ç”Ÿæˆ å…¨è¦ç´ ãŒ0ã®é…åˆ— å…¨è¦ç´ ãŒ0ã®é…åˆ—ã‚’ä½œæˆã™ã‚‹å ´åˆã€np.zeros()ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ np.zeros_like()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\nnp.zeros()ãƒ¡ã‚½ãƒƒãƒ‰ã®å ´åˆã€å¼•æ•°ã«æ•´æ•°ã‚’ã¨ã‚‹ã¨ã€ ãã®æ•´æ•°ã®æ•°ã ã‘0è¦ç´ ã‚’æŒã¤1æ¬¡å…ƒã®é…åˆ—ãŒä½œã‚‰ã‚Œã‚‹ã€‚ ã¾ãŸã€å¼•æ•°ã«æ•´æ•°ã®ãƒªã‚¹ãƒˆã‚’ã¨ã‚‹ã¨ã€2æ¬¡å…ƒä»¥ä¸Šã®0é…åˆ—ãŒä½œã‚‰ã‚Œã‚‹ã€‚\nä¸€æ–¹ã€np.zeros_like()ãƒ¡ã‚½ãƒƒãƒ‰ã®å ´åˆã€ å¼•æ•°ã«ä»–ã®NumPyé…åˆ—ã‚’ã¨ã‚Šã€ãã®é…åˆ—ã¨åŒã˜å½¢ã®0é…åˆ—ãŒä½œã‚‰ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; np.zeros(3) # 1æ¬¡å…ƒã®é…åˆ— array([ 0., 0., 0.]) \u0026gt;\u0026gt;\u0026gt; np.zeros([2,3]) # 2æ¬¡å…ƒã®é…åˆ— array([[ 0., 0., 0.], [ 0., 0., 0.]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[1, 2, 3], ... [4, 5, 6]]) \u0026gt;\u0026gt;\u0026gt; np.zeros_like(b) # ä»–ã®é…åˆ—ã¨åŒã˜ã‚µã‚¤ã‚ºã®é…åˆ— array([[0, 0, 0], [0, 0, 0]])   å…¨è¦ç´ ãŒ1ã®é…åˆ— å…¨è¦ç´ ãŒ1ã®é…åˆ—ã‚’ä½œæˆã™ã‚‹å ´åˆã€np.ones()ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ np.ones_like()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\né…åˆ—ã®ä½œæˆæ–¹æ³•ã¯ã€ãã‚Œãã‚Œnp.zeros(), np.zeros_like()ãƒ¡ã‚½ãƒƒãƒ‰ã«åŒã˜ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; np.ones(3) # 1æ¬¡å…ƒã®é…åˆ— array([ 1., 1., 1.]) \u0026gt;\u0026gt;\u0026gt; np.ones([2,3]) # 2æ¬¡å…ƒã®é…åˆ— array([[ 1., 1., 1.], [ 1., 1., 1.]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[1, 2, 3], ... [4, 5, 6]]) \u0026gt;\u0026gt;\u0026gt; np.ones_like(b) # ä»–ã®é…åˆ—ã¨åŒã˜ã‚µã‚¤ã‚ºã®é…åˆ— array([[1, 1, 1], [1, 1, 1]])   å…¨è¦ç´ ãŒåŒã˜å€¤ã®é…åˆ— å…¨è¦ç´ ãŒåŒã˜å€¤ã®é…åˆ—ã‚’ä½œæˆã™ã‚‹å ´åˆã€np.full()ãƒ¡ã‚½ãƒƒãƒ‰ã‚„ np.full_like()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\nnp.full()ãƒ¡ã‚½ãƒƒãƒ‰ã¯å¼•æ•°ã‚’2ã¤ã¨ã‚Šã€ ç¬¬1å¼•æ•°ã§é…åˆ—ã®å½¢ã‚’ã€ç¬¬2å¼•æ•°ã§é…åˆ—ã®å€¤ã‚’æŒ‡å®šã™ã‚‹ã€‚ 2æ¬¡å…ƒä»¥ä¸Šã®é…åˆ—ã‚’ä½œæˆã—ãŸã„å ´åˆã€ç¬¬1å¼•æ•°ãŒãƒªã‚¹ãƒˆã«ã™ã‚‹ã€‚\nã¾ãŸã€np.full_like()ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ ç¬¬1å¼•æ•°ã«ä»–ã®NumPyé…åˆ—ã€ç¬¬2å¼•æ•°ã«å€¤ã‚’ã¨ã‚‹ã€‚ ç¬¬1å¼•æ•°ã®é…åˆ—ã¨åŒã˜å½¢ã‹ã¤ã€å…¨è¦ç´ ãŒç¬¬2å¼•æ•°ã¨åŒã˜å€¤ã®é…åˆ—ãŒä½œæˆã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10  \u0026gt;\u0026gt;\u0026gt; np.full(3, 10) # 1æ¬¡å…ƒã®é…åˆ— array([10, 10, 10]) \u0026gt;\u0026gt;\u0026gt; np.full([2,2], 10) # 2æ¬¡å…ƒã®é…åˆ— array([[ 10., 10.], [ 10., 10.]]) \u0026gt;\u0026gt;\u0026gt; b = np.array([[1, 2, 3], ... [4, 5, 6]]) \u0026gt;\u0026gt;\u0026gt; np.full_like(b, 10) # ä»–ã®é…åˆ—ã¨åŒã˜ã‚µã‚¤ã‚ºã®é…åˆ— array([[10, 10, 10], [10, 10, 10]])   å˜ä½è¡Œåˆ—ãªã© å˜ä½è¡Œåˆ—ã‚’ä½œæˆã™ã‚‹å ´åˆã€np.identity()ãƒ¡ã‚½ãƒƒãƒ‰ã¾ãŸã¯ np.eye()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\nnp.identity()ãƒ¡ã‚½ãƒƒãƒ‰ã®å ´åˆã€ å¼•æ•°ã¨ã—ã¦ä¸ãˆãŸæ•´æ•°ã®å¤§ãã•ã®å˜ä½è¡Œåˆ—ãŒä½œæˆã•ã‚Œã‚‹ã€‚\nã¾ãŸã€np.eye()ãƒ¡ã‚½ãƒƒãƒ‰ã®å ´åˆã€ å¼•æ•°ã«æ•´æ•°ã‚’1ã¤ã ã‘ä¸ãˆã‚‹ã¨ã€np.identity()ã¨åŒæ§˜ã«å˜ä½è¡Œåˆ—ãŒä½œæˆã•ã‚Œã‚‹ã€‚ ä¸€æ–¹ã€å¼•æ•°ã‚’np.eye(n, m)ã®ã‚ˆã†ã«2ã¤ä¸ãˆã‚‹ã¨ã€ä¸»å¯¾è§’æˆåˆ†ãŒ1ã®nÃ—mè¡Œåˆ—ãŒä½œæˆã•ã‚Œã‚‹ã€‚ ã•ã‚‰ã«ã€å¼•æ•°kã§å€¤ãŒ1ã¨ãªã‚‹å¯¾è§’ã‚’æŒ‡å®šã§ãã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  \u0026gt;\u0026gt;\u0026gt; np.identity(3) # å˜ä½è¡Œåˆ— array([[ 1., 0., 0.], [ 0., 1., 0.], [ 0., 0., 1.]]) \u0026gt;\u0026gt;\u0026gt; np.eye(3) # å˜ä½è¡Œåˆ—(å¼•æ•°ãŒ1å€‹ã®å ´åˆ) array([[ 1., 0., 0.], [ 0., 1., 0.], [ 0., 0., 1.]]) \u0026gt;\u0026gt;\u0026gt; np.eye(2, 3) # ä¸»å¯¾è§’ãŒ1, ãã‚Œä»¥å¤–ãŒ0ã®3x2è¡Œåˆ— array([[ 1., 0., 0.], [ 0., 1., 0.]]) \u0026gt;\u0026gt;\u0026gt; \u0026gt;\u0026gt;\u0026gt; 1ã¨ãªã‚‹å¯¾è§’ã‚’kã§æŒ‡å®šï¼ˆk\u0026gt;0ã¯ä¸»å¯¾è§’ã‚ˆã‚Šä¸Šã€k\u0026lt;0ã¯ä¸»å¯¾è§’ã‚ˆã‚Šä¸‹ï¼‰ \u0026gt;\u0026gt;\u0026gt; np.eye(4, 5, k=1) array([[ 0., 1., 0., 0., 0.], [ 0., 0., 1., 0., 0.], [ 0., 0., 0., 1., 0.], [ 0., 0., 0., 0., 1.]])   ä¸‰è§’è¡Œåˆ—ãªã© ä¸‰è§’è¡Œåˆ—ã¯ã€ä¸»å¯¾è§’ã‚ˆã‚Šã€Œä¸Šã€ã¾ãŸã¯ã€Œä¸‹ã€ã®æˆåˆ†ãŒå…¨ã¦0ã§ã‚ã‚‹æ­£æ–¹è¡Œåˆ—ã§ã‚ã‚‹ã€‚\nnp.tri()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã¨ã€ä¸‹ä¸‰è§’è¡Œåˆ—ã‚’ä½œæˆã§ãã‚‹ã€‚ å¼•æ•°ã«æ•´æ•°ã‚’1ã¤ä¸ãˆã‚‹ã¨ã€ãã®æ•´æ•°ã®å¤§ãã•ã®æ­£æ–¹è¡Œåˆ—ã«ãªã‚‹ã€‚ å¼•æ•°ã«np.tri(n, m)ã®ã‚ˆã†ã«æ•´æ•°ã‚’2ã¤ä¸ãˆã‚‹ã¨ã€ ä¸»å¯¾è§’ã‚ˆã‚Šä¸ŠãŒ0ã¨ãªã‚‹nÃ—mè¡Œåˆ—ãŒä½œæˆã•ã‚Œã‚‹ã€‚ ã¾ãŸã€å¼•æ•°kã§ã©ã®å¯¾è§’ã‹ã‚‰ä¸ŠãŒ0ã¨ãªã‚‹ã‹æŒ‡å®šã§ãã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12  \u0026gt;\u0026gt;\u0026gt; np.tri(3) array([[ 1., 0., 0.], [ 1., 1., 0.], [ 1., 1., 1.]]) \u0026gt;\u0026gt;\u0026gt; np.tri(3,5) array([[ 1., 0., 0., 0., 0.], [ 1., 1., 0., 0., 0.], [ 1., 1., 1., 0., 0.]]) \u0026gt;\u0026gt;\u0026gt; np.tri(3,5,k=-1) # k\u0026gt;0ã¯ä¸»å¯¾è§’ã‚ˆã‚Šä¸Šã®å¯¾è§’ã€k\u0026lt;0ã¯ä¸»å¯¾è§’ã‚ˆã‚Šä¸‹ã®å¯¾è§’ array([[ 0., 0., 0., 0., 0.], [ 1., 0., 0., 0., 0.], [ 1., 1., 0., 0., 0.]])   ã¾ãŸã€ä»–ã®é…åˆ—ã«å¯¾ã—ã¦ã€ä¸‰è§’éƒ¨åˆ†ã®è¦ç´ ã‚’0ã¨ã—ãŸé…åˆ—ã‚’å¾—ã‚‹ãŸã‚ã«ã¯ã€ np.tril()ãƒ¡ã‚½ãƒƒãƒ‰ã¾ãŸã¯ np.triu()ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚ ãã‚Œãã‚Œã€å¼•æ•°ã«ã¨ã£ãŸè¡Œåˆ—ã®ä¸Šä¸‰è§’éƒ¨åˆ†ã¨ä¸‹ä¸‰è§’éƒ¨åˆ†ã‚’0ã¨ã—ãŸè¡Œåˆ—ã‚’è¿”ã™ã€‚ ã¾ãŸã€å¼•æ•°kã§0ã¨ã™ã‚‹å¯¾è§’ã‚’æŒ‡å®šã§ãã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  \u0026gt;\u0026gt;\u0026gt; b = np.array([[1,2,3],[4,5,6]]) \u0026gt;\u0026gt;\u0026gt; b array([[1, 2, 3], [4, 5, 6]]) \u0026gt;\u0026gt;\u0026gt; np.tril(b) # è¡Œåˆ—ã®ä¸‹ä¸‰è§’éƒ¨åˆ† array([[1, 0, 0], [4, 5, 0]]) \u0026gt;\u0026gt;\u0026gt; np.tril(b, k=-1) # kã§0ã¨ã™ã‚‹å¯¾è§’ã‚’æŒ‡å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯k=0: ä¸»å¯¾è§’ï¼‰ array([[0, 0, 0], [4, 0, 0]]) \u0026gt;\u0026gt;\u0026gt; np.triu(b) # è¡Œåˆ—ã®ä¸Šä¸‰è§’éƒ¨åˆ† array([[1, 2, 3], [0, 5, 6]])   ãã®ä»–ã®ç‰¹æ®Šãªé…åˆ—ã®ä½œæˆ ç·šå½¢ã«ç­‰é–“éš”ãª1æ¬¡å…ƒé…åˆ— 1 2 3 4 5 6  \u0026gt;\u0026gt;\u0026gt; np.arange(1,10) # åŒºé–“[1, 10)ã®æ•´æ•° array([1, 2, 3, 4, 5, 6, 7, 8, 9]) \u0026gt;\u0026gt;\u0026gt; np.arange(1,10,2) # åŒºé–“[1, 10)ã®æ•´æ•°ã‚’2åˆ»ã¿ã§ array([1, 3, 5, 7, 9]) \u0026gt;\u0026gt;\u0026gt; np.linspace(2,3,5) # ç·šå½¢ã«ç­‰é–“éš”ãªåŒºé–“[2, 3]ã®æ•°ã‚’5å€‹ array([ 2. , 2.25, 2.5 , 2.75, 3. ])   å¯¾æ•°çš„ã«ç­‰é–“éš”ãª1æ¬¡å…ƒé…åˆ— 1 2 3 4 5  \u0026gt;\u0026gt;\u0026gt; np.logspace(1, 2, 5) # 10^1ã‹ã‚‰10^2ã¾ã§å¯¾æ•°çš„ã«ç­‰é–“éš”ãª5å€‹ã®é…åˆ— array([ 10. , 17.7827941 , 31.6227766 , 56.23413252, 100. ]) \u0026gt;\u0026gt;\u0026gt; np.logspace(1, 5, 5, base=2) # baseã§å¯¾æ•°ã®åº•ã‚’æŒ‡å®š array([ 2., 4., 8., 16., 32.])   ãƒ©ãƒ³ãƒ€ãƒ ãªè¦ç´ ã‚’æŒã¤é…åˆ— numpy.randomãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  \u0026gt;\u0026gt;\u0026gt; np.random.seed(0) \u0026gt;\u0026gt;\u0026gt; # ã‚·ãƒ¼ãƒ‰å€¤(éè² ã®æ•´æ•°)ã‚’è¨­å®šã™ã‚‹ã¨ã€å¸¸ã«ä¸€å®šé †åºã§ä¹±æ•°åˆ—ãŒç™ºç”Ÿ \u0026gt;\u0026gt;\u0026gt; np.random.rand(2,3) # åŒºé–“[0, 1)ã§ä¸€æ§˜åˆ†å¸ƒ array([[0.5488135 , 0.71518937, 0.60276338], [0.54488318, 0.4236548 , 0.64589411]]) \u0026gt;\u0026gt;\u0026gt; np.random.randn(2, 3) # æ­£è¦åˆ†å¸ƒï¼ˆå¹³å‡0, åˆ†æ•£1ï¼‰ array([[ 0.95008842, -0.15135721, -0.10321885], [ 0.4105985 , 0.14404357, 1.45427351]]) \u0026gt;\u0026gt;\u0026gt; np.random.randint(10) # åŒºé–“[0, 10)ã§å‡ç­‰åˆ†å¸ƒã®æ•´æ•°ï¼ˆå¼•æ•°1ã¤ã®å ´åˆï¼‰ 8 \u0026gt;\u0026gt;\u0026gt; np.random.randint(5, 10) # åŒºé–“[5, 10)ã§å‡ç­‰åˆ†å¸ƒã®æ•´æ•°ï¼ˆå¼•æ•°2ã¤ã®å ´åˆï¼‰ 6 \u0026gt;\u0026gt;\u0026gt; np.random.randint(5, 10, size=(2, 4)) # sizeã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§é…åˆ—ã‚µã‚¤ã‚ºã‚’æŒ‡å®š array([[6, 5, 6, 9], [8, 5, 8, 5]])   å‚è€ƒãƒªãƒ³ã‚¯ Array creation â€” NumPy v1.19 Manual\nRandom sampling (numpy.random) â€” NumPy v1.19 Manual\n","description":"NumPyã‚’ä½¿ã£ã¦åŸºæœ¬çš„ãªé…åˆ—ã‚„ç·šå½¢ä»£æ•°å­¦ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹é…åˆ—ã‚’ç”Ÿæˆã™ã‚‹ã€‚","id":98,"section":"posts","tags":["Python","NumPy"],"title":"NumPyã«ã‚ˆã‚‹é…åˆ—ã®ä½œæˆ","uri":"https://helve-blog.com/posts/python/numpy-array-construction/"},{"content":"æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBã®ã‚¯ã‚¨ãƒªæ–‡ã«ã¤ã„ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®æœŸé–“ã®æŒ‡å®šã‚„é›†ç´„å‡¦ç†ãªã©ã€åŸºæœ¬çš„ãªæ§‹æ–‡ã‚’ã¾ã¨ã‚ãŸã€‚\nã¯ã˜ã‚ã« InfluxDBã¯æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®æ‰±ã„ã«ç‰¹åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ã€‚æ¦‚è¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\næ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBå…¥é–€\nInfluxDBã§ã¯ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€SQLã«ä¼¼ãŸç‹¬è‡ªã®ã‚¯ã‚¨ãƒªæ–‡ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã€‚ã‚¯ã‚¨ãƒªæ–‡ã§ã¯ã€å–å¾—ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®æœŸé–“ã‚’æŒ‡å®šã—ãŸã‚Šã€ç§»å‹•å¹³å‡ã‚„æœ€å¤§å€¤ã‚’è¨ˆç®—ã™ã‚‹å‡¦ç†ãªã©ã®å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ã‚¯ã‚¨ãƒªæ–‡ã®åŸºæœ¬çš„ãªæ§‹æ–‡ã‚’ã¾ã¨ã‚ãŸã€‚\nã¾ãŸã€æœ¬è¨˜äº‹ã§ã¯Pythonã®APIã‚’ä½¿ã£ã¦ã„ã‚‹ãŒã€ä»–ã®è¨€èªã‚„CLIã§æ‰±ã†å ´åˆã‚‚ã‚¯ã‚¨ãƒªã®æ§‹æ–‡è‡ªä½“ã¯å¤‰ã‚ã‚‰ãªã„ã€‚\næœ¬è¨˜äº‹ã®ç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Linux Mint 19.3 (Cinnamon) InfluxDB 1.8.0  ã¾ãŸã€Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.6   NumPy 1.18.1   Pandas 1.0.1   Influxdb-python 5.2.2    ä»¥é™ã§ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3  import numpy as np import pandas as pd import influxdb   ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ ã¾ãšã€ä»¥ä¸‹ã®Pythonã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã€ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’InfluxDBã«æ›¸ãè¾¼ã‚€ã€‚\n1 2 3 4 5 6 7  client = influxdb.DataFrameClient() client.create_database(\u0026#34;test\u0026#34;) array = np.arange(240).reshape(-1, 2) index = pd.date_range(pd.Timestamp(\u0026#34;2020-05-01 00:00:00\u0026#34;), pd.Timestamp(\u0026#34;2020-05-05 23:00:00\u0026#34;), freq=\u0026#34;1H\u0026#34;) df = pd.DataFrame(array, index=index, columns=[\u0026#34;A\u0026#34;, \u0026#34;B\u0026#34;]) client.write_points(df, \u0026#34;meas1\u0026#34;, database=\u0026#34;test\u0026#34;)   ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€testã¨ã„ã†åå‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã€meas1ã¨ã„ã†åå‰ã®measurementã§ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚€ã€‚\nãƒ‡ãƒ¼ã‚¿dfã¯ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ã€120è¡ŒÃ—2åˆ—ã®é…åˆ—ã§ã€æ™‚åˆ»ã¯2020å¹´5æœˆ1æ—¥0æ™‚ã€œ5æœˆ5æ—¥23æ™‚ã¾ã§1æ™‚é–“å‘¨æœŸï¼ˆ120æ™‚é–“ï¼‰ã¨ã™ã‚‹ã€‚field keyã¯ã€\u0026quot;A\u0026quot;, \u0026quot;B\u0026quot;ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  \u0026gt;\u0026gt;\u0026gt; print(df) A B 2020-05-01 00:00:00 0 1 2020-05-01 01:00:00 2 3 2020-05-01 02:00:00 4 5 2020-05-01 03:00:00 6 7 2020-05-01 04:00:00 8 9 ... ... ... 2020-05-05 19:00:00 230 231 2020-05-05 20:00:00 232 233 2020-05-05 21:00:00 234 235 2020-05-05 22:00:00 236 237 2020-05-05 23:00:00 238 239 [120 rows x 2 columns]   åŸºæœ¬æ§‹æ–‡ æœ€ã‚‚åŸºæœ¬ã¨ãªã‚‹ã‚¯ã‚¨ãƒªæ–‡ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«SELECT \u0026lt;fieldå\u0026gt;ã¨FROM \u0026lt;measurementå\u0026gt;ã®2ã¤ã‹ã‚‰ãªã‚‹ã€‚\n1  SELECT \u0026lt;fieldå\u0026gt; FROM \u0026lt;measurementå\u0026gt;   å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã§ã¯ã€ãã‚Œãã‚ŒSELECTç¯€ (clause), FROMç¯€ã¨å‘¼ã‚“ã§ã„ã‚‹ã€‚ä¸Šè¨˜ã®ã‚¯ã‚¨ãƒªã«ã‚ˆã£ã¦ã€æŒ‡å®šã—ãŸmeasurementã®fieldã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦å–å¾—ã™ã‚‹ã€‚\nä¾‹ï¼šmeas1ã®A ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦å–å¾—ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  \u0026gt;\u0026gt;\u0026gt; res = client.query(\u0026#34;SELECT A FROM meas1\u0026#34;, database=\u0026#34;test\u0026#34;) \u0026gt;\u0026gt;\u0026gt; list(res.values())[0] A 2020-05-01 00:00:00+00:00 0 2020-05-01 01:00:00+00:00 2 2020-05-01 02:00:00+00:00 4 2020-05-01 03:00:00+00:00 6 2020-05-01 04:00:00+00:00 8 ... ... 2020-05-05 19:00:00+00:00 230 2020-05-05 20:00:00+00:00 232 2020-05-05 21:00:00+00:00 234 2020-05-05 22:00:00+00:00 236 2020-05-05 23:00:00+00:00 238 [120 rows x 1 columns]   ã“ã“ã§ã€list(res.values())[0]ã¨ã—ãŸã®ã¯ã€Pythonã®APIã®ä»•æ§˜ï¼ˆqueryãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ãŒè¾æ›¸ï¼‰ã®ãŸã‚ã§ã‚ã‚‹ã€‚\nã¾ãŸã€è¤‡æ•°ã®fieldåã‚’å¾—ã‚‹ã«ã¯ã€ã‚«ãƒ³ãƒ,ã§åŒºåˆ‡ã£ã¦æŒ‡å®šã™ã‚‹ã€‚\n1  SELECT \u0026lt;fieldå\u0026gt;, \u0026lt;fieldå\u0026gt; FROM \u0026lt;measurementå\u0026gt;   å…¨ã¦ã®fieldåã‚’å¾—ã‚‹ã«ã¯ã€ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯*ã‚’ç”¨ã„ã‚‹ã€‚\n1  SELECT * FROM \u0026lt;measurementå\u0026gt;   é›†ç´„å‡¦ç†ã‚’ã™ã‚‹ SELECTç¯€ã®fieldåã«é–¢æ•°ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€ç§»å‹•å¹³å‡ã‚„æœ€å¤§å€¤ã‚’ã¨ã‚‹ãªã©ã®é›†ç´„å‡¦ç†ã‚’è¡Œãˆã‚‹ã€‚é›†ç´„å‡¦ç†ã‚’è¡Œã†æ™‚é–“å¹…ã¯ã€GROUP BYç¯€ã§æŒ‡å®šã™ã‚‹ã€‚\n1  SELECT \u0026lt;é–¢æ•°å\u0026gt;(\u0026lt;fieldå\u0026gt;) FROM \u0026lt;measurementå\u0026gt; GROUP BY time(\u0026lt;æ™‚é–“å¹…\u0026gt;)   ä¸»ãªé–¢æ•°ã‚’ä¸‹è¡¨ã«ç¤ºã™ã€‚\n   é–¢æ•°å æ„å‘³     MEAN å¹³å‡   MEDIAN ä¸­å¤®å€¤   SUM åˆè¨ˆ   FIRST æœ€åˆã®å€¤   LAST æœ€å¾Œã®å€¤   MAX æœ€å¤§å€¤   MIN æœ€å°å€¤   MOVING_AVERAGE ç§»å‹•å¹³å‡    ãŸã ã—ã€MOVING_AVERAGEã¯\u0026lt;fieldå\u0026gt;ã®å¾Œã«ã€ç¬¬2å¼•æ•°ã¨ã—ã¦ç§»å‹•å¹³å‡ã‚’ã¨ã‚‹ãƒ‡ãƒ¼ã‚¿æ•°ãŒå¿…é ˆã€‚\nãã®ä»–ã®é–¢æ•°ã¯ä»¥ä¸‹ã‚’å‚ç…§ã€‚\nInfluxQL functions InfluxDB OSS 1.8 Documentation\nã¾ãŸã€æ™‚é–“å¹…ã¯5åˆ†ãªã‚‰ã°5m, 3æ—¥ãªã‚‰ã°3dã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã€‚æ™‚åˆ»ã‚’è¡¨ã™è¨˜å·ã¯ä¸‹è¡¨ã®é€šã‚Šã€‚\n   è¨˜å· æ„å‘³     u, Âµ microseconds   ms milliseconds   s seconds   m minutes   h hours   d days   w weeks    ä¾‹ï¼šfield A, Bã®ãƒ‡ãƒ¼ã‚¿ã‚’6æ™‚é–“ã”ã¨ã«å¹³å‡ã‚’ã¨ã‚‹ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã®ã‚«ãƒ©ãƒ ãŒmean, mean_1ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„ï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026gt;\u0026gt;\u0026gt; q1 = \u0026#34;SELECT MEAN(A), MEAN(B) FROM meas1 GROUP BY time(6h)\u0026#34; \u0026gt;\u0026gt;\u0026gt; res = client.query(q1, database=\u0026#34;test\u0026#34;) \u0026gt;\u0026gt;\u0026gt; list(res.values())[0] mean mean_1 2020-05-01 00:00:00+00:00 5 6 2020-05-01 06:00:00+00:00 17 18 2020-05-01 12:00:00+00:00 29 30 2020-05-01 18:00:00+00:00 41 42 2020-05-02 00:00:00+00:00 53 54 2020-05-02 06:00:00+00:00 65 66 2020-05-02 12:00:00+00:00 77 78 2020-05-02 18:00:00+00:00 89 90 2020-05-03 00:00:00+00:00 101 102 2020-05-03 06:00:00+00:00 110 111   æ™‚é–“ç¯„å›²ã‚’æŒ‡å®šã™ã‚‹ ãƒ‡ãƒ¼ã‚¿ã®æ™‚é–“ç¯„å›²ã‚’æŒ‡å®šã™ã‚‹ã«ã¯ã€FROMç¯€ã®å¾Œã«æ¡ä»¶ã‚’æŒ‡å®šã™ã‚‹WHEREç¯€ã‚’è¿½åŠ ã™ã‚‹ã€‚\n1  SELECT \u0026lt;fieldå\u0026gt; FROM \u0026lt;measurementå\u0026gt; WHERE \u0026lt;æ¡ä»¶\u0026gt;   ä¾‹ãˆã°ã€2020å¹´5æœˆ1æ—¥ä»¥é™ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«timeã¨ç­‰å·ãƒ»ä¸ç­‰å·ã‚’ç”¨ã„ã‚‹ã€‚\n1  WHERE time \u0026gt;= \u0026#39;2020-05-01T00:00:00Z\u0026#39;   InfluxDBãŒå¯¾å¿œã™ã‚‹æ™‚åˆ»ã®å½¢å¼ã¯ã€RFC3339ã¾ãŸã¯UNIXæ™‚åˆ»ã§ã‚ã‚‹ã€‚\nRFC3339ã¯ã€æ¬¡ã®ã‚ˆã†ãªæ™‚åˆ»ã®è¡¨ç¤ºå½¢å¼ã§ã‚ã‚‹ã€‚\n'YYYY-MM-DDTHH:MM:SS.nnnnnnnnnZ'\rãŸã ã—ã€ç§’æœªæº€ã®éƒ¨åˆ† (.nnnnnnnnn) ã¯ä»»æ„ã€‚\nã¾ãŸã€UNIXæ™‚åˆ»ã¨ã¯1970å¹´1æœˆ1æ—¥åˆå‰0æ™‚0åˆ†0ç§’ã‹ã‚‰ã®çµŒéæ™‚åˆ»ã§ã‚ã‚‹ã€‚InfluxDBã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§ã¯ã€UNIXæ™‚åˆ»ã‚’ãƒŠãƒç§’å˜ä½ã§æŒ‡å®šã™ã‚‹ã€‚\nä¾‹ï¼šUTCæ™‚åˆ»ã§2020å¹´5æœˆ1æ—¥0æ™‚0åˆ†0ç§’000000000ã‚’ãƒŠãƒç§’å˜ä½ã®UNIXæ™‚åˆ»ã§è¡¨ã™ã¨ã€1588291200000000000ã§ã‚ã‚‹ã€‚\nã¾ãŸã€\u0026gt;=ã®ä»–ã«ä¸‹è¡¨ã®æ¼”ç®—å­ãŒä½¿ãˆã‚‹ã€‚\n   æ¼”ç®—å­ æ„å‘³     = ç­‰ã—ã„   \u0026lt;\u0026gt;, != ç­‰ã—ããªã„   \u0026gt; ã‚ˆã‚Šå¤§ãã„ï¼ˆå¾Œã®ï¼‰   \u0026gt;= ä»¥ä¸Šã®ï¼ˆä»¥é™ã®ï¼‰   \u0026lt; ã‚ˆã‚Šå°ã•ã„ï¼ˆå‰ã®ï¼‰   \u0026lt;= ä»¥ä¸‹ã®ï¼ˆä»¥å‰ã®ï¼‰    ã•ã‚‰ã«ã€è¤‡æ•°ã®æ¡ä»¶ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯AND, ORã‚’ç”¨ã„ã‚‹ã€‚\nãŸã ã—ã€ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³(v1.8)ã§ã¯çµ¶å¯¾æ™‚åˆ»ã®ORã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ï¼ˆç›¸å¯¾æ™‚åˆ»ã«ã¤ã„ã¦ã¯å¾Œè¿°ï¼‰ã€‚\nInfluxDB frequently asked questions InfluxDB OSS 1.8 Documentation\nSupport disparate time intervals and more advanced time in WHERE clauses Â· Issue #7530 Â· influxdata_influxdb\nä¾‹ï¼šfield Aã®2020å¹´5æœˆ2æ—¥ã®ãƒ‡ãƒ¼ã‚¿ã ã‘ã‚’å–å¾—ã™ã‚‹å ´åˆ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30  \u0026gt;\u0026gt;\u0026gt; query = \u0026#34;SELECT A, B FROM meas1\u0026#34; \u0026gt;\u0026gt;\u0026gt; query += \u0026#34; WHERE time \u0026gt;= \u0026#39;2020-05-02T00:00:00Z\u0026#39;\u0026#34; \u0026gt;\u0026gt;\u0026gt; query += \u0026#34; AND time \u0026lt; \u0026#39;2020-05-03T00:00:00Z\u0026#39;\u0026#34; \u0026gt;\u0026gt;\u0026gt; res = client.query(query, database=\u0026#34;test\u0026#34;) \u0026gt;\u0026gt;\u0026gt; list(res.values())[0] A B 2020-05-02 00:00:00+00:00 48 49 2020-05-02 01:00:00+00:00 50 51 2020-05-02 02:00:00+00:00 52 53 2020-05-02 03:00:00+00:00 54 55 2020-05-02 04:00:00+00:00 56 57 2020-05-02 05:00:00+00:00 58 59 2020-05-02 06:00:00+00:00 60 61 2020-05-02 07:00:00+00:00 62 63 2020-05-02 08:00:00+00:00 64 65 2020-05-02 09:00:00+00:00 66 67 2020-05-02 10:00:00+00:00 68 69 2020-05-02 11:00:00+00:00 70 71 2020-05-02 12:00:00+00:00 72 73 2020-05-02 13:00:00+00:00 74 75 2020-05-02 14:00:00+00:00 76 77 2020-05-02 15:00:00+00:00 78 79 2020-05-02 16:00:00+00:00 80 81 2020-05-02 17:00:00+00:00 82 83 2020-05-02 18:00:00+00:00 84 85 2020-05-02 19:00:00+00:00 86 87 2020-05-02 20:00:00+00:00 88 89 2020-05-02 21:00:00+00:00 90 91 2020-05-02 22:00:00+00:00 92 93 2020-05-02 23:00:00+00:00 94 95   ãªãŠã€ç¾åœ¨æ™‚åˆ»ï¼ˆã‚¯ã‚¨ãƒªæ–‡ã‚’å‡¦ç†ã—ãŸæ™‚åˆ»ï¼‰ã‚’æŒ‡å®šã™ã‚‹ã«ã¯ã€now()ã¨ã™ã‚‹ã€‚ã“ã‚Œã‚’ç›¸å¯¾æ™‚åˆ»ã¨ã„ã†ã€‚\nä¾‹ï¼š2020å¹´4æœˆ1æ—¥ã‹ã‚‰ç¾åœ¨ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹å ´åˆ\n1  WHERE time \u0026gt;= \u0026#39;2020-04-01T00:00:00Z\u0026#39; AND time \u0026lt;= now()   ã¾ãŸã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¯ã‚¨ãƒªæ–‡ä¸­ã§æ™‚åˆ»ã®è¨ˆç®—ã‚‚ã§ãã‚‹ã€‚\nä¾‹ï¼š10åˆ†å‰ã‹ã‚‰ç¾åœ¨ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹å ´åˆ\n1  WHERE time \u0026gt; now() - 10m   ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒ‡å®šã™ã‚‹ å–å¾—ãƒ‡ãƒ¼ã‚¿ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’è¨­å®šã™ã‚‹ãŸã‚ã«ã¯ã€tzç¯€ã‚’è¿½åŠ ã™ã‚‹ã€‚\ntzç¯€ã§ã¯ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³'ã§å›²ã‚“ã§æŒ‡å®šã™ã‚‹ã€‚å¾—ã‚‰ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ™‚åˆ»ã¯ã€WHEREç¯€ã®æ™‚åˆ» (UTC) ã¨åŒã˜ã§ã‚ã‚Šã€ã‚ãã¾ã§ã‚‚ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒå¤‰æ›ã•ã‚Œã¦ã„ã‚‹ã ã‘ã§ã‚ã‚‹ã€‚\nä¾‹ï¼šUTCæ™‚åˆ»ã§5æœˆ2æ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€æ—¥æœ¬æ¨™æº–æ™‚ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã«å¤‰æ›ã™ã‚‹ã€‚\nã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒ+09:00ã¨ãªã£ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  \u0026gt;\u0026gt;\u0026gt; query = \u0026#34;SELECT A, B FROM meas1 \u0026#34; \u0026gt;\u0026gt;\u0026gt; query += \u0026#34; WHERE time \u0026gt;= \u0026#39;2020-05-02T00:00:00Z\u0026#39;\u0026#34; \u0026gt;\u0026gt;\u0026gt; query += \u0026#34; AND time \u0026lt; \u0026#39;2020-05-03T00:00:00Z\u0026#39;\u0026#34; \u0026gt;\u0026gt;\u0026gt; query += \u0026#34; tz(\u0026#39;Asia/Tokyo\u0026#39;)\u0026#34; \u0026gt;\u0026gt;\u0026gt; res = client.query(query, database=\u0026#34;test\u0026#34;) \u0026gt;\u0026gt;\u0026gt; list(res.values())[0] A B 2020-05-02 09:00:00+09:00 48 49 2020-05-02 10:00:00+09:00 50 51 2020-05-02 11:00:00+09:00 52 53 2020-05-02 12:00:00+09:00 54 55 2020-05-02 13:00:00+09:00 56 57 2020-05-02 14:00:00+09:00 58 59 2020-05-02 15:00:00+09:00 60 61 2020-05-02 16:00:00+09:00 62 63 2020-05-02 17:00:00+09:00 64 65 2020-05-02 18:00:00+09:00 66 67 2020-05-02 19:00:00+09:00 68 69 2020-05-02 20:00:00+09:00 70 71 2020-05-02 21:00:00+09:00 72 73 2020-05-02 22:00:00+09:00 74 75 2020-05-02 23:00:00+09:00 76 77 2020-05-03 00:00:00+09:00 78 79 2020-05-03 01:00:00+09:00 80 81 2020-05-03 02:00:00+09:00 82 83 2020-05-03 03:00:00+09:00 84 85 2020-05-03 04:00:00+09:00 86 87 2020-05-03 05:00:00+09:00 88 89 2020-05-03 06:00:00+09:00 90 91 2020-05-03 07:00:00+09:00 92 93 2020-05-03 08:00:00+09:00 94 95   è¤‡æ•°ã®ã‚¯ã‚¨ãƒªæ–‡ã‚’åŒæ™‚ã«ä¸ãˆã‚‹ è¤‡æ•°ã®ã‚¯ã‚¨ãƒªæ–‡ã‚’åŒæ™‚ã«å‡¦ç†ã™ã‚‹ã«ã¯ã€æ¬¡ã®ã‚ˆã†ã«ã‚»ãƒŸã‚³ãƒ­ãƒ³;ã§ã¤ãªãã€‚\n1  SELECT A FROM meas1; SELECT B FROM meas1   å‚è€ƒ Explore data using InfluxQL | InfluxData Documentation\nInfluxDB ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« - ç°¡å˜ãªä½¿ã„æ–¹ - Qiita\næ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBå…¥é–€\nPythonã¨Pandasã§InfluxDBã‚’æ“ä½œã™ã‚‹\n","description":"æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBã®ã‚¯ã‚¨ãƒªæ–‡ã«ã¤ã„ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®æœŸé–“ã®æŒ‡å®šã‚„é›†ç´„å‡¦ç†ãªã©åŸºæœ¬çš„ãªæ§‹æ–‡ã‚’ã¾ã¨ã‚ãŸã€‚","id":99,"section":"posts","tags":["InfluxDB","Pandas"],"title":"æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBã®ã‚¯ã‚¨ãƒªæ–‡","uri":"https://helve-blog.com/posts/database/influxdb-query-syntax/"},{"content":"ã¯ã˜ã‚ã« Pythonã¨Pandasã‚’ä½¿ã£ã¦ã€æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBã‚’æ“ä½œã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚\nInfluxDBã¯æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®æ‰±ã„ã«ç‰¹åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ã€‚æ¦‚è¦ã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã€‚\næ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBå…¥é–€\nPythonã§InfluxDBã‚’æ“ä½œã™ã‚‹ã«ã¯ã€influx-pythonã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†ã€‚ã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€InfluxDBã‚’é–‹ç™ºã—ãŸinfluxdataç¤¾ãŒå…¬é–‹ã—ã¦ã„ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã€‚influx-pythonã‚’ä½¿ã†ã¨ã€Pandasã®DataFrameã§InfluxDBã¨ãƒ‡ãƒ¼ã‚¿ã‚’æˆå—ã§ãã‚‹ã€‚\nç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Linux Mint 19.3 (Cinnamon) InfluxDB 1.8.0  ã¾ãŸã€Pythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n    ãƒãƒ¼ã‚¸ãƒ§ãƒ³     Python 3.7.6   NumPy 1.18.1   Pandas 1.0.1   Influxdb-python 5.2.2    ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« Pythonã‹ã‚‰InfluxDBã‚’æ“ä½œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªinflux-pythonã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\ncondaã®å ´åˆï¼š\nconda install -c pdrops influxdb\rpipã®å ´åˆï¼š\npip install influxdb\rä»¥é™ã§ã¯ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹ã€‚\n1 2 3  import numpy as np import pandas as pd import influxdb   influx-pythonã®åŸºæœ¬ influx-pythonã§InfluxDBã‚’æ“ä½œã™ã‚‹ãŸã‚ã«ã€æ¬¡ã®2ã¤ã®ã‚¯ãƒ©ã‚¹ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\n InfluxDBClient: JSONã‚’ä½¿ã† DataFrameClient: Pandasã®DataFrameã‚’ä½¿ã†  æœ¬è¨˜äº‹ã§ã¯ã€DataFrameClientã‚’æ‰±ã†ã€‚\nDataFrameClientã‚¯ãƒ©ã‚¹ DataFrameClientã‚¯ãƒ©ã‚¹ã®ä¸»ãªå¼•æ•°ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n1 2  influxdb.DataFrameClient(host=u\u0026#39;localhost\u0026#39;, port=8086, username=u\u0026#39;root\u0026#39;, password=u\u0026#39;root\u0026#39;, database=None)   hostã¯ã‚¢ã‚¯ã‚»ã‚¹å…ˆã®InfluxDBãŒã‚ã‚‹PCã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã‚ã‚‹ã€‚åŒã˜PCã®å ´åˆã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®localhostã§ã‚ˆã„ã€‚\nportã¯InfluxDBã®ãƒãƒ¼ãƒˆç•ªå·ã§ã‚ã‚‹ã€‚8086ã¯InfluxDBã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒãƒ¼ãƒˆç•ªå·ã§ã‚ã‚‹ã€‚\nusername, passwordã¯InfluxDBã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ã‚¶åã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã‚ã‚‹ã€‚\u0026lsquo;root\u0026rsquo;ã¯InfluxDBã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨åŒã˜ã§ã‚ã‚‹ã€‚\ndatabaseã¯æ¥ç¶šå…ˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã§ã‚ã‚‹ã€‚å¾Œã»ã©ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œæ™‚ã«æŒ‡å®šã§ãã‚‹ã®ã§ã€DataFrameClientã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã«æŒ‡å®šã™ã‚‹å¿…è¦ã¯ãªã„ã€‚\nDataFrameClientã‚¯ãƒ©ã‚¹ã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰ã¯æ¬¡ã®é€šã‚Šã€‚\n   ãƒ¡ã‚½ãƒƒãƒ‰å èª¬æ˜     create_database(\u0026lt;ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å\u0026gt;) ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹   get_list_database() ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€è¦§ã‚’å–å¾—ã™ã‚‹   get_list_measurements() measurementä¸€è¦§ã‚’å–å¾—ã™ã‚‹   drop_database(\u0026lt;ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å\u0026gt;) ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹   drop_measurement(\u0026lt;measurementå\u0026gt;) measurementã‚’å‰Šé™¤ã™ã‚‹   write_points() DataFrameã‚’æ›¸ãè¾¼ã‚€   query() ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹    write_points()ã¨query()ã«ã¤ã„ã¦ã¯ã€ä»¥é™ã§è©³ã—ãè¿°ã¹ã‚‹ã€‚\nInfluxDBã¸ã®æ¥ç¶š DataFrameClientã‚¯ãƒ©ã‚¹ã‚’ä½¿ã£ã¦ã€InfluxDBã¸æ¥ç¶šã™ã‚‹ã€‚ã¾ãšã€DataFrameClientã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€pd_testã¨ã„ã†åå‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã€‚\n1 2  client = influxdb.DataFrameClient() client.create_database(\u0026#34;pd_test\u0026#34;)   ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’æ—¢ã«ä½œæˆã—ã¦ã„ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã‚‚è‰¯ã„ã€‚\n1  client = influxdb.DataFrameClient(database=\u0026#34;pd_test\u0026#34;)   DataFrameã‚’InfluxDBã«æ›¸ãè¾¼ã‚€ Pandasã®DataFrameã‚’InfluxDBã«æ›¸ãè¾¼ã‚€ã«ã¯ã€write_pointsãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1  DataFrameClient.write_points(dataframe, measurement,database=None)   å¼•æ•°ã®èª¬æ˜ã¯æ¬¡ã®é€šã‚Šã€‚\n dataframe: Pandasã®DataFrame measurement: ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹measurementï¼ˆè¡¨ã®åå‰ï¼‰ database: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã€‚  ã“ã“ã§ã€DataFrameClientã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€databaseã¯å¿…é ˆã§ã‚ã‚‹ã€‚databaseã‚’æŒ‡å®šã—ãªã„ã¨ã€write_pointsãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè¡Œæ™‚ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚\n1  nfluxDBClientError: 400: {\u0026#34;error\u0026#34;:\u0026#34;database is required\u0026#34;}   ä¸€æ–¹ã€DataFrameClientã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒè¨­å®šã•ã‚Œã¦ãŠã‚Šã€ã‹ã¤write_pointsãƒ¡ã‚½ãƒƒãƒ‰ã§æŒ‡å®šã—ãªã„å ´åˆã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚\nä¾‹ã¨ã—ã¦ã€Pandasã®DataFrameã‚’ã€å…ˆã»ã©ä½œæˆã—ãŸpd_testãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«è¿½åŠ ã™ã‚‹ã€‚DataFrameã¯ã€10è¡ŒÃ—2åˆ—ã®å¤§ãã•ã§ã€2020å¹´4æœˆ1æ—¥ã‹ã‚‰1æ—¥å‘¨æœŸã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æŒ¯ã£ã¦ã„ã‚‹ã€‚ã“ã“ã§ã€measurementåã¯meas1ã¨ã—ãŸã€‚\n1 2 3 4 5  array = np.arange(20).reshape(-1, 2) index = pd.date_range(pd.Timestamp(\u0026#34;20200401\u0026#34;), freq=\u0026#34;1D\u0026#34;, periods=10) df = pd.DataFrame(array, index=index, columns=[\u0026#34;A\u0026#34;, \u0026#34;B\u0026#34;]) client.write_points(df, \u0026#34;meas1\u0026#34;, database=\u0026#34;pd_test\u0026#34;)   DataFrameã‚’InfluxDBã‹ã‚‰å–å¾—ã™ã‚‹ InfluxDBã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€queryãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨ã„ã‚‹ã€‚\n1  DataFrameClient.query(query, database=None)   å¼•æ•°ã®èª¬æ˜ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n query: InfluxDBã®ã‚¯ã‚¨ãƒªæ–‡ã€‚ database: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åã€‚  ã‚¯ã‚¨ãƒªæ–‡ã®æ§‹æ–‡ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€åˆ¥è¨˜äº‹ã§èª¬æ˜äºˆå®šã€‚\nã“ã“ã§ã€DataFrameClientã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€databaseã¯å¿…é ˆã§ã‚ã‚‹ã€‚ä¸€æ–¹ã€DataFrameClientã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒè¨­å®šã•ã‚Œã¦ãŠã‚Šã€ã‹ã¤write_pointsãƒ¡ã‚½ãƒƒãƒ‰ã§æŒ‡å®šã—ãªã„å ´åˆã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«è¨­å®šã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ‡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚Œã‚‹ã€‚\nã¾ãŸã€queryãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã¯è¾æ›¸å‹ï¼ˆæ­£ç¢ºã«ã¯defaultdictï¼‰ã§ã‚ã‚Šã€ã‚­ãƒ¼ãŒmeasurement, å€¤ãŒãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ ã«ãªã‚‹ã€‚\nä¾‹ã¨ã—ã¦ã€å…ˆç¨‹write_pointsãƒ¡ã‚½ãƒƒãƒ‰ã§æ›¸ãè¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã€‚\n1 2 3  q1 = \u0026#34;SELECT * FROM meas1\u0026#34; res = client.query(q1, database=\u0026#34;pd_test\u0026#34;) print(res)   ã“ã“ã§ã€ã‚¯ã‚¨ãƒªæ–‡\nSELECT * FROM meas1\rã¯ã€measurement meas1ã®å…¨ã¦ã®fieldã‚’å–å¾—ã™ã‚‹ã“ã¨ã‚’è¡¨ã™ã€‚\nå®Ÿè¡Œçµæœ\nqueryãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤resã¯è¾æ›¸å‹ã§ã‚ã‚Šã€ã‚­ãƒ¼ãŒmeasurement meas1, å€¤ãŒDataFrameã¨ãªã‚‹ã€‚ã¾ãŸã€DataFrameã®indexã¯DateTimeIndex, columnsã¯InfluxDBã®fieldã¨ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11  defaultdict(\u0026lt;class \u0026#39;list\u0026#39;\u0026gt;, {\u0026#39;meas1\u0026#39;: A B 2020-04-01 00:00:00+00:00 0 1 2020-04-02 00:00:00+00:00 2 3 2020-04-03 00:00:00+00:00 4 5 2020-04-04 00:00:00+00:00 6 7 2020-04-05 00:00:00+00:00 8 9 2020-04-06 00:00:00+00:00 10 11 2020-04-07 00:00:00+00:00 12 13 2020-04-08 00:00:00+00:00 14 15 2020-04-09 00:00:00+00:00 16 17 2020-04-10 00:00:00+00:00 18 19})   ãªãŠã€DataFrameã‚’ç›´æ¥å–å¾—ã™ã‚‹å ´åˆã«ã¯ã€\ndf = list(res.values())[0]\rãªã©ã®ã‚ˆã†ã«ã™ã‚‹ã€‚\nå‚è€ƒ Welcome to InfluxDBâ€™s documentation! â€” InfluxDB 5.3.1 documentation\næ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBå…¥é–€\n","description":"Pythonã¨Pandasã‚’ä½¿ã£ã¦ã€æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBã‚’æ“ä½œã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸã€‚","id":100,"section":"posts","tags":["InfluxDB","Pandas"],"title":"Pythonã¨Pandasã§InfluxDBã‚’æ“ä½œã™ã‚‹","uri":"https://helve-blog.com/posts/database/influxdb-pandas/"},{"content":"ã¯ã˜ã‚ã« æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¨ã€ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ãŸåŸºæœ¬çš„ãªä½¿ã„æ–¹ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚\næœ¬è¨˜äº‹ã§æ¤œè¨¼ã—ãŸç’°å¢ƒã¯ä»¥ä¸‹ã®é€šã‚Šã€‚\n Linux Mint 19.3 (Cinnamon) InfluxDB 1.8.0  InfluxDBã¯Linuxã ã‘ã§ãªãwindowsã‚„Mac OS Xã§ã‚‚åˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã€‚\nInfuxDBã®åŸºæœ¬ InfluxDBã¯æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®æ‰±ã„ã«ç‰¹åŒ–ã—ãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã‚ã‚‹ã€‚InfluxDBã§ã¯ã€æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ç§»å‹•å¹³å‡ã‚’ã¨ã‚‹ãªã©ã®å‡¦ç†ã‚’ã‚¯ã‚¨ãƒªæ–‡ã§æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¸€æ–¹ã€MongoDBãªã©ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæŒ‡å‘å‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨æ¯”è¼ƒã™ã‚‹ã¨ã€éæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã†ã“ã¨ã¯å›°é›£ã§ã‚ã‚‹ã€‚\nã¾ãŸã€InfluxDBã¯Grafanaã¨ã„ã†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ä¸Šãªã©ã§ãƒ‡ãƒ¼ã‚¿ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ï¼‰ã¨ã‚‚é€£æºãŒå¯èƒ½ã§ã‚ã‚‹ã€‚\nã•ã‚‰ã«ã€InfluxDBã«ã¯Pythonã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€Pandasã®DataFrameå½¢å¼ã§InfluxDBã¨ãƒ‡ãƒ¼ã‚¿ã‚’å®¹æ˜“ã«ã‚„ã‚Šå–ã‚Šã§ãã‚‹ã€‚\nInfuxDBã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³• è¨˜äº‹åŸ·ç­†æ™‚ç‚¹(2020å¹´4æœˆ18æ—¥)ã§ã€InfluxDBã®æœ€æ–°ã®å®‰å®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯1.8.0, æœ€æ–°ã®ãƒ™ãƒ¼ã‚¿ç‰ˆã¯2.0ã§ã‚ã‚‹ã€‚æœ¬è¨˜äº‹ã§ã¯1.8.0ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚Debianç³»ã®OS (Linux Mint, Ubuntuãªã©ï¼‰ã§ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nwget https://dl.influxdata.com/influxdb/releases/influxdb_1.8.0_amd64.deb\rsudo dpkg -i influxdb_1.8.0_amd64.deb\rãã®ä»–ã®OSã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’å‚ç…§ã€‚\nhttps://portal.influxdata.com/downloads/\nInfluxDBã®ãƒ‡ãƒ¼ã‚¿æ§‹é€  InfluxDBã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã¤ã„ã¦è¿°ã¹ã‚‹ã€‚InfluxDBã§ã¯ã€åŸºæœ¬çš„ã«æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’æ‰±ã„ã€å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã¯æ™‚åˆ»ã®æƒ…å ±ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰ã‚’æŒã¤ã€‚\nãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æœ€ä¸Šä½ã«ã¯databaseãŒã‚ã‚‹ã€‚ãã®ä¸‹ã«measurementãŒã‚ã‚Šã€ä¸€ç•ªä¸‹ã«ã¯1ã¤ã®æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ã™fieldãŒã‚ã‚‹ã€‚fieldã®ã‚­ãƒ¼ï¼ˆãƒ©ãƒ™ãƒ«ï¼‰ã‚’field_keyã¨å‘¼ã¶ã€‚\nä¾‹ã¨ã—ã¦ã€ä»¥ä¸‹ã®æ°—è±¡ãƒ‡ãƒ¼ã‚¿ã‚’è€ƒãˆã‚‹ï¼ˆå€¤ã¯ãƒ€ãƒŸãƒ¼ï¼‰ã€‚temperatureã¨wind_speedãŒfield_keyã«ç›¸å½“ã—ã€è¡¨ã®åå‰ãŒmeasurementã«ç›¸å½“ã™ã‚‹ã€‚ã“ã®ã‚ˆã†ãªè¡¨ã‚’ã„ãã¤ã‚‚æŸã­ãŸã‚‚ã®ãŒdatabaseã«ãªã‚‹ã€‚databaseè‡ªä½“ã‚‚è¤‡æ•°å®šç¾©ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã‚ã‚‹ã€‚\n   æ™‚åˆ» temperature wind_speed     2020-04-25 00:00:00 10.2 3.2   2020-04-25 01:00:00 9.8 4.5   2020-04-25 02:00:00 9.0 2.7    ãªãŠã€measurementã®ä¸‹ã«ã¯ã€field_keyã®ä»–ã«ãƒ‡ãƒ¼ã‚¿ã®ãƒ¡ã‚¿æƒ…å ±ã‚’è¡¨ã™tag_keyã‚‚ã‚ã‚‹ãŒã€æœ¬è¨˜äº‹ã§ã¯æ‰±ã‚ãªã„ã€‚\nCLIã‹ã‚‰InfluxDBã‚’ä½¿ã† InfluxDBã®èµ·å‹• InfluxDBã‚’èµ·å‹•ã™ã‚‹ã«ã¯ã€influxã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚èµ·å‹•ã™ã‚‹ã¨ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒ\u0026gt;ã«å¤‰ã‚ã‚‹ã€‚\n$ influx\rConnected to http://localhost:8086 version 1.8.0\rInfluxDB shell version: 1.8.0\r\u0026gt;\rinfluxDBã‚’çµ‚äº†ã™ã‚‹ã«ã¯ã€exitã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ä½œæˆãƒ»ã‚¢ã‚¯ã‚»ã‚¹ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€CREATE DATABASE \u0026lt;ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å\u0026gt;ã¨ã™ã‚‹ã€‚\nä¾‹ï¼šdb1ã¨ã„ã†åå‰ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œã‚‹ã€‚\n\u0026gt; CREATE DATABASE db1\rãªãŠã€æœ¬è¨˜äº‹ã§ã¯InfuxDBã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«æº–ã˜ã¦ã€InfluxDBã®ã‚³ãƒãƒ³ãƒ‰ã‚’å¤§æ–‡å­—ã§è¡¨è¨˜ã™ã‚‹ãŒã€åŸºæœ¬çš„ã«å°æ–‡å­—ã§ã‚‚å‹•ä½œã™ã‚‹(create database db1)ã€‚\nç¾åœ¨ä½œæˆã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€è¦§ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€SHOW DATABASEã¨ã™ã‚‹ã€‚\n\u0026gt; SHOW DATABASE\rname: databases\rname\r----\r_internal\rdb1\rãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ã€USE \u0026lt;ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å\u0026gt;ã¨ã™ã‚‹ã€‚\n\u0026gt; USE db1\rUsing database db1\ræ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®æ›¸ãè¾¼ã¿ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«CLIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€line protocolã‚’ä½¿ã£ã¦1è¡Œãšã¤æ›¸ãè¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚line protocolã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\nINSERT \u0026lt;measurement\u0026gt; \u0026lt;field_key\u0026gt;=\u0026lt;field_values\u0026gt; [\u0026lt;timestamp\u0026gt;]\rtimestampã¯ä»»æ„ã§ã‚ã‚Šã€UNIXæ™‚åˆ»ï¼ˆãƒŠãƒç§’å˜ä½ã®æ•´æ•°ï¼‰ã§æŒ‡å®šã™ã‚‹ã€‚timestampã‚’æŒ‡å®šã—ãªã„å ´åˆã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚“ã æ™‚åˆ»ãŒè‡ªå‹•çš„ã«ä»˜ä¸ã•ã‚Œã‚‹ã€‚\nä¾‹ï¼šå…ˆç¨‹ã®æ°—è±¡ãƒ‡ãƒ¼ã‚¿ã‚’weatherã¨ã„ã†measurementã«æ›¸ãè¾¼ã‚€ã€‚\n\u0026gt; INSERT weather temperature=10.2 1587772800000000000\r\u0026gt; INSERT weather wind_speed=3.2 1587772800000000000\r\u0026gt; INSERT weather temperature=9.8 1587776400000000000\r\u0026gt; INSERT weather wind_speed=4.5 1587776400000000000\ræ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å–å¾— databaseå†…ã®measurementä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n\u0026gt; SHOW measurements\rname: measurements\rname\r----\rweather\ræ›¸ãè¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€ã‚¯ã‚¨ãƒªæ–‡ã‚’ç”¨ã„ã‚‹ã€‚æœ€ã‚‚ç°¡å˜ãªã‚¯ã‚¨ãƒªæ–‡ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ã€‚\nSELECT \u0026lt;field_key\u0026gt; FROM \u0026lt;measurement\u0026gt;\rä¾‹ï¼š\n\u0026gt; SELECT temperature FROM weather\rname: weather\rtime temperature\r---- -----------\r1587772800000000000 10.2\r1587776400000000000 9.8\rã¾ãŸã€\u0026lt;field_key\u0026gt;ã«ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰*ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€å…¨ã¦ã®fieldã‚’å–å¾—ã§ãã‚‹ã€‚\n\u0026gt; SELECT * FROM weather\rname: weather\rtime temperature wind_speed\r---- ----------- ----------\r1587772800000000000 10.2 3.2\r1587776400000000000 9.8 4.5\rã•ã‚‰ã«ã€ã‚¯ã‚¨ãƒªæ–‡ã«æ¡ä»¶ã‚’ä»˜åŠ ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€æŒ‡å®šã—ãŸæœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿æŠ½å‡ºã—ãŸã‚Šã€ç§»å‹•å¹³å‡ãªã©ã®é›†ç´„å‡¦ç†ã‚’æ›ã‘ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã‚ã‚‹ã€‚ã“ã‚Œã‚‰ã¯åˆ¥ã®è¨˜äº‹ã§èª¬æ˜äºˆå®šã€‚\nãƒ‡ãƒ¼ã‚¿ã®å‰Šé™¤ ã‚ã‚‹field_keyã«å«ã¾ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦å‰Šé™¤ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nDROP \u0026lt;field_key\u0026gt; FROM \u0026lt;measurementå\u0026gt;\rmeasurementã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nDROP MEASUREMENT \u0026lt;measurementå\u0026gt;\rdatabaseã‚’å‰Šé™¤ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚\nDROP DATABASE \u0026lt;ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å\u0026gt;\rå‚è€ƒ InfluxDBã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\nInfluxDB OSS 1.8 Documentation\n","description":"æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã¨ã€ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ãŸåŸºæœ¬çš„ãªä½¿ã„æ–¹ã«ã¤ã„ã¦è§£èª¬ã™ã‚‹ã€‚","id":101,"section":"posts","tags":["InfluxDB"],"title":"æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹InfluxDBå…¥é–€","uri":"https://helve-blog.com/posts/database/infludb-introduction/"},{"content":"ã¯ã˜ã‚ã« Plotlyã¯ã€ãƒã‚¦ã‚¹ç­‰ã§ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«å‹•ã‹ã™ã“ã¨ãŒã§ãã‚‹ã‚°ãƒ©ãƒ•ã‚’ç”Ÿæˆã™ã‚‹Pythonã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã‚ã‚‹ã€‚\nã“ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ•ã‚’ãƒ–ãƒ­ã‚°ãªã©ã®Webãƒšãƒ¼ã‚¸ã«åŸ‹ã‚è¾¼ã‚€æ–¹æ³•ã®ä¸€ã¤ã¨ã—ã¦ã€Plotlyã®é–‹ç™ºãƒãƒ¼ãƒ ãŒé‹å–¶ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ (Chart Studio Cloud) ã«ç™»éŒ²ã—ã¦ã€åŸ‹ã‚è¾¼ã¿ç”¨ã®ãƒªãƒ³ã‚¯ã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã€‚\nç„¡æ–™ã®ãƒ—ãƒ©ãƒ³ã§ã‚‚ã€ã‚°ãƒ©ãƒ•ã‚’25å€‹ã¾ã§ä½œæˆã§ãã‚‹ï¼ˆ2019/05/01ç¾åœ¨ï¼‰ã€‚\nPlotlyã®ã‚°ãƒ©ãƒ• Plotlyã®ã‚°ãƒ©ãƒ•ã®ã‚µãƒ³ãƒ—ãƒ«ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nï¼ˆç·šä¸Šã«ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç½®ã„ãŸã‚Šã€å‡¡ä¾‹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã¿ã¦ä¸‹ã•ã„ï¼‰\n\rChart Studio Cloudã¸ã®ç™»éŒ² ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ã€Chart Studio Cloudã¸ç™»éŒ²ã™ã‚‹ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¿…è¦ï¼‰ã€‚\nChart Studio Cloud\nProfessional, Personal, Student, Communityã®4ãƒ—ãƒ©ãƒ³ã®å†…ã€Communityã®ã¿ç„¡æ–™ã§åˆ©ç”¨ã§ãã‚‹ã€‚\nCommunityã§ã‚‚25ã‚°ãƒ©ãƒ•ã¾ã§ä½œæˆã§ãã‚‹ã®ã§ã€ã“ã“ã§ã¯ã²ã¨ã¾ãšCommunityã‚’é¸æŠã™ã‚‹ã€‚\n\u0026ldquo;SING UP\u0026quot;ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚„ãƒ¦ãƒ¼ã‚¶åã‚’ç™»éŒ²ã™ã‚‹ã€‚\nç™»éŒ²ãŒçµ‚ã‚ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ•ç·¨é›†ç”»é¢ã«ãªã‚‹ã€‚\nãƒãƒ£ãƒ¼ãƒˆã®ä½œæˆ ã“ã“ã§ã¯ã€æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ã‚’ä½œã£ã¦ã¿ã‚‹ã€‚\nç·¨é›†ç”»é¢ã®è¡¨ã«ã€ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ã‚ˆã†ã«æ•°å€¤ã‚’å…¥åŠ›ã™ã‚‹ã€‚\næ•°å€¤ã‚’å…¨é¸æŠå¾Œã«å³ã‚¯ãƒªãƒƒã‚¯ã—ã€\u0026ldquo;Create traces from selection\u0026quot;ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã€‚\nã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒè¡¨ã‚Œã‚‹ã®ã§ã€ä¸Šæ®µå³ã‹ã‚‰2ç•ªç›®ã®\u0026quot;Straight Line\u0026quot;ã‚’é¸æŠã™ã‚‹ã€‚\né¸æŠã™ã‚‹ã¨ã€å¤‰ç¨®ç”»é¢ã®å³ä¸‹ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚°ãƒ©ãƒ•ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚\nã‚°ãƒ©ãƒ•ã®åŸ‹ã‚è¾¼ã¿ ç·¨é›†ç”»é¢å·¦ä¸‹ã®\u0026quot;Share\u0026quot;ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€æ¬¡ã®ã‚ˆã†ãªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€Plotã®ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã‚’\u0026quot;Public\u0026quot;ã¨ã—ã€\u0026ldquo;Save\u0026quot;ã‚’æŠ¼ã™ã€‚\nãŸã ã—ã€\u0026ldquo;Public\u0026quot;ã«ã™ã‚‹ã¨èª°ã§ã‚‚ã‚°ãƒ©ãƒ•ã‚’é–²è¦§ã§ãã¦ã—ã¾ã†ã®ã§æ³¨æ„ã€‚\nãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒé–‰ã˜ã‚‹ã®ã§ã€å†åº¦\u0026quot;Share\u0026quot;ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã€‚\nã™ã‚‹ã¨ã€ä»Šåº¦ã¯\u0026quot;Embed\u0026quot;ã¨ã„ã†ã‚¿ãƒ–ãŒè¡¨ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’é–‹ãã¨ã€åŸ‹ã‚è¾¼ã¿ç”¨ã®ãƒªãƒ³ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã€‚\nåŸ‹ã‚è¾¼ã¿ç”¨ãƒªãƒ³ã‚¯ã¯\u0026quot;iframe\u0026quot;ã¨\u0026quot;html\u0026quot;ã®2ç¨®é¡ã‚ã‚‹ãŒã€è¡¨ç¤ºå†…å®¹ã¯åŒã˜ã§ã‚ã‚‹ã€‚\n\u0026ldquo;iframe\u0026quot;ã®å ´åˆã€widthã¨heightã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚°ãƒ©ãƒ•ã®å¤§ãã•ã‚’å¤‰æ›´ã§ãã‚‹ã€‚\n\u0026ldquo;html\u0026quot;ã®å ´åˆã€widthã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚°ãƒ©ãƒ•ã®å¤§ãã•ã‚’å¤‰æ›´ã§ãã‚‹ã€‚\nåŸ‹ã‚è¾¼ã‚“ã çµæœã¯ä¸Šè¨˜ã®ã‚µãƒ³ãƒ—ãƒ«ã®é€šã‚Šã€‚\nå‚è€ƒ ã“ã®ãƒšãƒ¼ã‚¸ã§ã¯Chart Studio Cloudã®æ©Ÿèƒ½ã®ã¿ä½¿ã£ãŸãŒã€Pythonã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦å‡ã£ãŸã‚°ãƒ©ãƒ•ã‚’ä½œã‚ŠãŸã„å ´åˆã«ã¯ã€ä»¥ä¸‹ã‚’å‚è€ƒã«ã•ã‚ŒãŸã„ã€‚\næç”»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªPlotlyã®ä½¿ã„æ–¹ã‚’å¾¹åº•è§£èª¬ | Python - éŸœæ™¦æ—¥è¨˜\nPlotlyã§ãƒ¬ãƒãƒ¼ãƒˆãƒ»è«–æ–‡ã«ä½¿ãˆã‚‹ã‚°ãƒ©ãƒ•ã‚’æã“ã† - ã‹ã¿ã®ãƒ¡ãƒ¢\n","description":"Chart Studio Cloudã«ç™»éŒ²ã—ã€Plotlyã®ã‚°ãƒ©ãƒ•ã‚’ãƒ–ãƒ­ã‚°ç­‰ã®Webãƒšãƒ¼ã‚¸ã«åŸ‹ã‚è¾¼ã‚€æ–¹æ³•ã‚’èª¬æ˜ã™ã‚‹ã€‚","id":102,"section":"posts","tags":["Python","Plotly"],"title":"Plotlyã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚°ãƒ©ãƒ•ã‚’ãƒ–ãƒ­ã‚°ç­‰ã«åŸ‹ã‚è¾¼ã‚€","uri":"https://helve-blog.com/posts/python/plotly-embedding/"}]